/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/_app";
exports.ids = ["pages/_app"];
exports.modules = {

/***/ "../../node_modules/@babel/runtime/helpers/defineProperty.js":
/*!*******************************************************************!*\
  !*** ../../node_modules/@babel/runtime/helpers/defineProperty.js ***!
  \*******************************************************************/
/***/ ((module) => {

eval("function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHkuanMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxrQ0FBa0MseUJBQXlCLFNBQVMseUJBQXlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5LmpzPzlhODIiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2RlZmluZVByb3BlcnR5LCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZSwgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHM7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/@babel/runtime/helpers/defineProperty.js\n");

/***/ }),

/***/ "../../node_modules/@babel/runtime/helpers/extends.js":
/*!************************************************************!*\
  !*** ../../node_modules/@babel/runtime/helpers/extends.js ***!
  \************************************************************/
/***/ ((module) => {

eval("function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcy5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0Esb0JBQW9CLHNCQUFzQjtBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHLEVBQUUseUJBQXlCLFNBQVMseUJBQXlCO0FBQ2hFO0FBQ0E7O0FBRUEsMkJBQTJCLHlCQUF5QixTQUFTLHlCQUF5QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzLmpzPzMxZDgiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX2V4dGVuZHMoKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcblxuICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9LCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZSwgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHM7XG4gIHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9leHRlbmRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZSwgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHM7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/@babel/runtime/helpers/extends.js\n");

/***/ }),

/***/ "../../node_modules/@babel/runtime/helpers/objectSpread2.js":
/*!******************************************************************!*\
  !*** ../../node_modules/@babel/runtime/helpers/objectSpread2.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var defineProperty = __webpack_require__(/*! ./defineProperty.js */ \"../../node_modules/@babel/runtime/helpers/defineProperty.js\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread2, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0U3ByZWFkMi5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQSxxQkFBcUIsbUJBQU8sQ0FBQyx3RkFBcUI7O0FBRWxEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUEsaUNBQWlDLHlCQUF5QixTQUFTLHlCQUF5QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWQyLmpzPzM5ODYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmluZVByb3BlcnR5ID0gcmVxdWlyZShcIi4vZGVmaW5lUHJvcGVydHkuanNcIik7XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG5cbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTtcbiAgICBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHtcbiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlO1xuICAgIH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpO1xuICB9XG5cbiAgcmV0dXJuIGtleXM7XG59XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQyKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9O1xuICAgIGkgJSAyID8gb3duS2V5cyhPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTtcbiAgICB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9vYmplY3RTcHJlYWQyLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZSwgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHM7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/@babel/runtime/helpers/objectSpread2.js\n");

/***/ }),

/***/ "../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js":
/*!****************************************************************************!*\
  !*** ../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js ***!
  \****************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var objectWithoutPropertiesLoose = __webpack_require__(/*! ./objectWithoutPropertiesLoose.js */ \"../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXMuanMuanMiLCJtYXBwaW5ncyI6IkFBQUEsbUNBQW1DLG1CQUFPLENBQUMsb0hBQW1DOztBQUU5RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGdCQUFnQiw2QkFBNkI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsMkNBQTJDLHlCQUF5QixTQUFTLHlCQUF5QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcy5qcz9iNTQ2Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBvYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlID0gcmVxdWlyZShcIi4vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZS5qc1wiKTtcblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSBvYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpO1xuICB2YXIga2V5LCBpO1xuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTtcbiAgICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\n");

/***/ }),

/***/ "../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":
/*!*********************************************************************************!*\
  !*** ../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js ***!
  \*********************************************************************************/
/***/ ((module) => {

eval("function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZS5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsdUJBQXVCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsZ0RBQWdELHlCQUF5QixTQUFTLHlCQUF5QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlLmpzPzBjMzIiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gIHZhciBrZXksIGk7XG5cbiAgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBrZXkgPSBzb3VyY2VLZXlzW2ldO1xuICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7XG4gICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlLCBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0czsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js\n");

/***/ }),

/***/ "../../node_modules/@babel/runtime/helpers/toPrimitive.js":
/*!****************************************************************!*\
  !*** ../../node_modules/@babel/runtime/helpers/toPrimitive.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var _typeof = (__webpack_require__(/*! ./typeof.js */ \"../../node_modules/@babel/runtime/helpers/typeof.js\")[\"default\"]);\n\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdG9QcmltaXRpdmUuanMuanMiLCJtYXBwaW5ncyI6IkFBQUEsY0FBYywwR0FBaUM7O0FBRS9DO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsK0JBQStCLHlCQUF5QixTQUFTLHlCQUF5QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90b1ByaW1pdGl2ZS5qcz8xYjQ5Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBfdHlwZW9mID0gcmVxdWlyZShcIi4vdHlwZW9mLmpzXCIpW1wiZGVmYXVsdFwiXTtcblxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKGlucHV0LCBoaW50KSB7XG4gIGlmIChfdHlwZW9mKGlucHV0KSAhPT0gXCJvYmplY3RcIiB8fCBpbnB1dCA9PT0gbnVsbCkgcmV0dXJuIGlucHV0O1xuICB2YXIgcHJpbSA9IGlucHV0W1N5bWJvbC50b1ByaW1pdGl2ZV07XG5cbiAgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciByZXMgPSBwcmltLmNhbGwoaW5wdXQsIGhpbnQgfHwgXCJkZWZhdWx0XCIpO1xuICAgIGlmIChfdHlwZW9mKHJlcykgIT09IFwib2JqZWN0XCIpIHJldHVybiByZXM7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpO1xuICB9XG5cbiAgcmV0dXJuIChoaW50ID09PSBcInN0cmluZ1wiID8gU3RyaW5nIDogTnVtYmVyKShpbnB1dCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3RvUHJpbWl0aXZlLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZSwgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHM7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/@babel/runtime/helpers/toPrimitive.js\n");

/***/ }),

/***/ "../../node_modules/@babel/runtime/helpers/toPropertyKey.js":
/*!******************************************************************!*\
  !*** ../../node_modules/@babel/runtime/helpers/toPropertyKey.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var _typeof = (__webpack_require__(/*! ./typeof.js */ \"../../node_modules/@babel/runtime/helpers/typeof.js\")[\"default\"]);\n\nvar toPrimitive = __webpack_require__(/*! ./toPrimitive.js */ \"../../node_modules/@babel/runtime/helpers/toPrimitive.js\");\n\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\n\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdG9Qcm9wZXJ0eUtleS5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQSxjQUFjLDBHQUFpQzs7QUFFL0Msa0JBQWtCLG1CQUFPLENBQUMsa0ZBQWtCOztBQUU1QztBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQ0FBaUMseUJBQXlCLFNBQVMseUJBQXlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvUHJvcGVydHlLZXkuanM/MThiMyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX3R5cGVvZiA9IHJlcXVpcmUoXCIuL3R5cGVvZi5qc1wiKVtcImRlZmF1bHRcIl07XG5cbnZhciB0b1ByaW1pdGl2ZSA9IHJlcXVpcmUoXCIuL3RvUHJpbWl0aXZlLmpzXCIpO1xuXG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleShhcmcpIHtcbiAgdmFyIGtleSA9IHRvUHJpbWl0aXZlKGFyZywgXCJzdHJpbmdcIik7XG4gIHJldHVybiBfdHlwZW9mKGtleSkgPT09IFwic3ltYm9sXCIgPyBrZXkgOiBTdHJpbmcoa2V5KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfdG9Qcm9wZXJ0eUtleSwgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@babel/runtime/helpers/toPropertyKey.js\n");

/***/ }),

/***/ "../../node_modules/@babel/runtime/helpers/typeof.js":
/*!***********************************************************!*\
  !*** ../../node_modules/@babel/runtime/helpers/typeof.js ***!
  \***********************************************************/
/***/ ((module) => {

eval("function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUcsRUFBRSx5QkFBeUIsU0FBUyx5QkFBeUI7QUFDaEU7O0FBRUEsMEJBQTBCLHlCQUF5QixTQUFTLHlCQUF5QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YuanM/NjI4YyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7XG5cbiAgcmV0dXJuIChtb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmo7XG4gIH0gOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgfSwgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWUsIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzKSwgX3R5cGVvZihvYmopO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlLCBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0czsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/@babel/runtime/helpers/typeof.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/id-field-view/dist/keystone-6-core-___internal-do-not-use-will-break-in-patch-admin-ui-id-field-view.cjs.dev.js":
/*!***************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/id-field-view/dist/keystone-6-core-___internal-do-not-use-will-break-in-patch-admin-ui-id-field-view.cjs.dev.js ***!
  \***************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar fields = __webpack_require__(/*! @keystone-ui/fields */ \"@keystone-ui/fields\");\nvar CellContainer = __webpack_require__(/*! ../../../../dist/CellContainer-453254b5.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/CellContainer-453254b5.cjs.dev.js\");\nvar CellLink = __webpack_require__(/*! ../../../../dist/CellLink-5308c32b.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/CellLink-5308c32b.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"../../node_modules/@babel/runtime/helpers/defineProperty.js\");\n__webpack_require__(/*! react */ \"react\");\n__webpack_require__(/*! @keystone-ui/button */ \"@keystone-ui/button\");\n__webpack_require__(/*! @keystone-ui/icons/icons/AlertTriangleIcon */ \"@keystone-ui/icons/icons/AlertTriangleIcon\");\n__webpack_require__(/*! next/link */ \"../../node_modules/next/link.js\");\n__webpack_require__(/*! @keystone-ui/toast */ \"@keystone-ui/toast\");\n__webpack_require__(/*! @keystone-ui/loading */ \"@keystone-ui/loading\");\n__webpack_require__(/*! @keystone-ui/modals */ \"@keystone-ui/modals\");\n__webpack_require__(/*! apollo-upload-client */ \"apollo-upload-client\");\n__webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"../../node_modules/@babel/runtime/helpers/objectSpread2.js\");\n__webpack_require__(/*! @emotion/hash */ \"@emotion/hash\");\n__webpack_require__(/*! ../../../../dist/sqlite-a2385a81.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/sqlite-a2385a81.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\n__webpack_require__(/*! ../../../../dist/graphql-ts-schema-2a220120.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/graphql-ts-schema-2a220120.cjs.dev.js\");\n__webpack_require__(/*! @apollo/client */ \"@apollo/client\");\n__webpack_require__(/*! ../../../../dist/admin-meta-graphql-9f9a9c11.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/admin-meta-graphql-9f9a9c11.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/extends */ \"../../node_modules/@babel/runtime/helpers/extends.js\");\n__webpack_require__(/*! next/router */ \"next/router\");\n__webpack_require__(/*! @keystone-ui/popover */ \"@keystone-ui/popover\");\n__webpack_require__(/*! @keystone-ui/icons/icons/MoreHorizontalIcon */ \"@keystone-ui/icons/icons/MoreHorizontalIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/ChevronRightIcon */ \"@keystone-ui/icons/icons/ChevronRightIcon\");\n__webpack_require__(/*! ../../../../dist/SignoutButton-081410d6.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/SignoutButton-081410d6.cjs.dev.js\");\n__webpack_require__(/*! fast-deep-equal */ \"fast-deep-equal\");\n__webpack_require__(/*! @keystone-ui/notice */ \"@keystone-ui/notice\");\n__webpack_require__(/*! ../../../../admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js */ \"../../node_modules/@keystone-6/core/admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js\");\n__webpack_require__(/*! decimal.js */ \"decimal.js\");\n__webpack_require__(/*! @graphql-tools/schema */ \"@graphql-tools/schema\");\n__webpack_require__(/*! @graphql-ts/schema/api-without-context */ \"@graphql-ts/schema/api-without-context\");\n__webpack_require__(/*! @graphql-ts/schema */ \"@graphql-ts/schema\");\n__webpack_require__(/*! graphql-type-json */ \"graphql-type-json\");\n__webpack_require__(/*! graphql-upload/public/GraphQLUpload.js */ \"graphql-upload/public/GraphQLUpload.js\");\n__webpack_require__(/*! graphql */ \"graphql\");\n__webpack_require__(/*! @graphql-ts/extend */ \"@graphql-ts/extend\");\n__webpack_require__(/*! @graphql-ts/schema/api-with-context */ \"@graphql-ts/schema/api-with-context\");\n\n/** @jsxRuntime classic */\nconst Field = () => null;\nconst Cell = _ref => {\n  let {\n    item,\n    field,\n    linkTo\n  } = _ref;\n  let value = item[field.path] + '';\n  return linkTo ? core.jsx(CellLink.CellLink, linkTo, value) : core.jsx(CellContainer.CellContainer, null, value);\n};\nCell.supportsLinkTo = true;\nconst CardValue = _ref2 => {\n  let {\n    item,\n    field\n  } = _ref2;\n  return core.jsx(fields.FieldContainer, null, core.jsx(fields.FieldLabel, null, field.label), item[field.path]);\n};\nconst controller = config => {\n  return {\n    path: config.path,\n    label: config.label,\n    graphqlSelection: config.path,\n    idFieldKind: config.fieldMeta.kind,\n    defaultValue: undefined,\n    deserialize: () => {},\n    serialize: () => ({}),\n    filter: {\n      Filter(props) {\n        return core.jsx(fields.TextInput, {\n          onChange: event => {\n            props.onChange(event.target.value);\n          },\n          value: props.value,\n          autoFocus: props.autoFocus\n        });\n      },\n\n      graphql: _ref3 => {\n        let {\n          type,\n          value\n        } = _ref3;\n\n        if (type === 'not') {\n          return {\n            [config.path]: {\n              not: {\n                equals: value\n              }\n            }\n          };\n        }\n\n        const valueWithoutWhitespace = value.replace(/\\s/g, '');\n        const key = type === 'is' ? 'equals' : type === 'not_in' ? 'notIn' : type;\n        return {\n          [config.path]: {\n            [key]: ['in', 'not_in'].includes(type) ? valueWithoutWhitespace.split(',') : valueWithoutWhitespace\n          }\n        };\n      },\n\n      Label(_ref4) {\n        let {\n          label,\n          value,\n          type\n        } = _ref4;\n        let renderedValue = value.replace(/\\s/g, '');\n\n        if (['in', 'not_in'].includes(type)) {\n          renderedValue = value.split(',').join(', ');\n        }\n\n        return `${label.toLowerCase()}: ${renderedValue}`;\n      },\n\n      types: {\n        is: {\n          label: 'Is exactly',\n          initialValue: ''\n        },\n        not: {\n          label: 'Is not exactly',\n          initialValue: ''\n        },\n        gt: {\n          label: 'Is greater than',\n          initialValue: ''\n        },\n        lt: {\n          label: 'Is less than',\n          initialValue: ''\n        },\n        gte: {\n          label: 'Is greater than or equal to',\n          initialValue: ''\n        },\n        lte: {\n          label: 'Is less than or equal to',\n          initialValue: ''\n        },\n        in: {\n          label: 'Is one of',\n          initialValue: ''\n        },\n        not_in: {\n          label: 'Is not one of',\n          initialValue: ''\n        }\n      }\n    }\n  };\n};\n\nexports.CardValue = CardValue;\nexports.Cell = Cell;\nexports.Field = Field;\nexports.controller = controller;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvX19faW50ZXJuYWwtZG8tbm90LXVzZS13aWxsLWJyZWFrLWluLXBhdGNoL2FkbWluLXVpL2lkLWZpZWxkLXZpZXcvZGlzdC9rZXlzdG9uZS02LWNvcmUtX19faW50ZXJuYWwtZG8tbm90LXVzZS13aWxsLWJyZWFrLWluLXBhdGNoLWFkbWluLXVpLWlkLWZpZWxkLXZpZXcuY2pzLmRldi5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7O0FBRTdELFdBQVcsbUJBQU8sQ0FBQyw0Q0FBbUI7QUFDdEMsYUFBYSxtQkFBTyxDQUFDLGdEQUFxQjtBQUMxQyxvQkFBb0IsbUJBQU8sQ0FBQyxzSUFBb0Q7QUFDaEYsZUFBZSxtQkFBTyxDQUFDLDRIQUErQztBQUN0RSxtQkFBTyxDQUFDLDBHQUF1QztBQUMvQyxtQkFBTyxDQUFDLG9CQUFPO0FBQ2YsbUJBQU8sQ0FBQyxnREFBcUI7QUFDN0IsbUJBQU8sQ0FBQyw4RkFBNEM7QUFDcEQsbUJBQU8sQ0FBQyxrREFBVztBQUNuQixtQkFBTyxDQUFDLDhDQUFvQjtBQUM1QixtQkFBTyxDQUFDLGtEQUFzQjtBQUM5QixtQkFBTyxDQUFDLGdEQUFxQjtBQUM3QixtQkFBTyxDQUFDLGtEQUFzQjtBQUM5QixtQkFBTyxDQUFDLHdHQUFzQztBQUM5QyxtQkFBTyxDQUFDLG9DQUFlO0FBQ3ZCLG1CQUFPLENBQUMsd0hBQTZDO0FBQ3JELG1CQUFPLENBQUMsNEhBQWdEO0FBQ3hELG1CQUFPLENBQUMsOElBQXdEO0FBQ2hFLG1CQUFPLENBQUMsc0NBQWdCO0FBQ3hCLG1CQUFPLENBQUMsZ0pBQXlEO0FBQ2pFLG1CQUFPLENBQUMsNEZBQWdDO0FBQ3hDLG1CQUFPLENBQUMsZ0NBQWE7QUFDckIsbUJBQU8sQ0FBQyxrREFBc0I7QUFDOUIsbUJBQU8sQ0FBQyxnR0FBNkM7QUFDckQsbUJBQU8sQ0FBQyw0RkFBMkM7QUFDbkQsbUJBQU8sQ0FBQyxzSUFBb0Q7QUFDNUQsbUJBQU8sQ0FBQyx3Q0FBaUI7QUFDekIsbUJBQU8sQ0FBQyxnREFBcUI7QUFDN0IsbUJBQU8sQ0FBQyx3TEFBNkU7QUFDckYsbUJBQU8sQ0FBQyw4QkFBWTtBQUNwQixtQkFBTyxDQUFDLG9EQUF1QjtBQUMvQixtQkFBTyxDQUFDLHNGQUF3QztBQUNoRCxtQkFBTyxDQUFDLDhDQUFvQjtBQUM1QixtQkFBTyxDQUFDLDRDQUFtQjtBQUMzQixtQkFBTyxDQUFDLHNGQUF3QztBQUNoRCxtQkFBTyxDQUFDLHdCQUFTO0FBQ2pCLG1CQUFPLENBQUMsOENBQW9CO0FBQzVCLG1CQUFPLENBQUMsZ0ZBQXFDOztBQUU3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6Qix3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVOztBQUVWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLG9CQUFvQixJQUFJLGNBQWM7QUFDeEQsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlCQUFpQjtBQUNqQixZQUFZO0FBQ1osYUFBYTtBQUNiLGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvQGtleXN0b25lLTYvY29yZS9fX19pbnRlcm5hbC1kby1ub3QtdXNlLXdpbGwtYnJlYWstaW4tcGF0Y2gvYWRtaW4tdWkvaWQtZmllbGQtdmlldy9kaXN0L2tleXN0b25lLTYtY29yZS1fX19pbnRlcm5hbC1kby1ub3QtdXNlLXdpbGwtYnJlYWstaW4tcGF0Y2gtYWRtaW4tdWktaWQtZmllbGQtdmlldy5janMuZGV2LmpzPzI2ZDgiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgY29yZSA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9jb3JlJyk7XG52YXIgZmllbGRzID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2ZpZWxkcycpO1xudmFyIENlbGxDb250YWluZXIgPSByZXF1aXJlKCcuLi8uLi8uLi8uLi9kaXN0L0NlbGxDb250YWluZXItNDUzMjU0YjUuY2pzLmRldi5qcycpO1xudmFyIENlbGxMaW5rID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vZGlzdC9DZWxsTGluay01MzA4YzMyYi5janMuZGV2LmpzJyk7XG5yZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5Jyk7XG5yZXF1aXJlKCdyZWFjdCcpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL2J1dHRvbicpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL0FsZXJ0VHJpYW5nbGVJY29uJyk7XG5yZXF1aXJlKCduZXh0L2xpbmsnKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS90b2FzdCcpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL2xvYWRpbmcnKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9tb2RhbHMnKTtcbnJlcXVpcmUoJ2Fwb2xsby11cGxvYWQtY2xpZW50Jyk7XG5yZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZDInKTtcbnJlcXVpcmUoJ0BlbW90aW9uL2hhc2gnKTtcbnJlcXVpcmUoJy4uLy4uLy4uLy4uL2Rpc3Qvc3FsaXRlLWEyMzg1YTgxLmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXMnKTtcbnJlcXVpcmUoJy4uLy4uLy4uLy4uL2Rpc3QvZ3JhcGhxbC10cy1zY2hlbWEtMmEyMjAxMjAuY2pzLmRldi5qcycpO1xucmVxdWlyZSgnQGFwb2xsby9jbGllbnQnKTtcbnJlcXVpcmUoJy4uLy4uLy4uLy4uL2Rpc3QvYWRtaW4tbWV0YS1ncmFwaHFsLTlmOWE5YzExLmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xucmVxdWlyZSgnbmV4dC9yb3V0ZXInKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9wb3BvdmVyJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvTW9yZUhvcml6b250YWxJY29uJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvQ2hldnJvblJpZ2h0SWNvbicpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vZGlzdC9TaWdub3V0QnV0dG9uLTA4MTQxMGQ2LmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ2Zhc3QtZGVlcC1lcXVhbCcpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL25vdGljZScpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vYWRtaW4tdWkvcm91dGVyL2Rpc3Qva2V5c3RvbmUtNi1jb3JlLWFkbWluLXVpLXJvdXRlci5janMuZGV2LmpzJyk7XG5yZXF1aXJlKCdkZWNpbWFsLmpzJyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10b29scy9zY2hlbWEnKTtcbnJlcXVpcmUoJ0BncmFwaHFsLXRzL3NjaGVtYS9hcGktd2l0aG91dC1jb250ZXh0Jyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10cy9zY2hlbWEnKTtcbnJlcXVpcmUoJ2dyYXBocWwtdHlwZS1qc29uJyk7XG5yZXF1aXJlKCdncmFwaHFsLXVwbG9hZC9wdWJsaWMvR3JhcGhRTFVwbG9hZC5qcycpO1xucmVxdWlyZSgnZ3JhcGhxbCcpO1xucmVxdWlyZSgnQGdyYXBocWwtdHMvZXh0ZW5kJyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10cy9zY2hlbWEvYXBpLXdpdGgtY29udGV4dCcpO1xuXG4vKiogQGpzeFJ1bnRpbWUgY2xhc3NpYyAqL1xuY29uc3QgRmllbGQgPSAoKSA9PiBudWxsO1xuY29uc3QgQ2VsbCA9IF9yZWYgPT4ge1xuICBsZXQge1xuICAgIGl0ZW0sXG4gICAgZmllbGQsXG4gICAgbGlua1RvXG4gIH0gPSBfcmVmO1xuICBsZXQgdmFsdWUgPSBpdGVtW2ZpZWxkLnBhdGhdICsgJyc7XG4gIHJldHVybiBsaW5rVG8gPyBjb3JlLmpzeChDZWxsTGluay5DZWxsTGluaywgbGlua1RvLCB2YWx1ZSkgOiBjb3JlLmpzeChDZWxsQ29udGFpbmVyLkNlbGxDb250YWluZXIsIG51bGwsIHZhbHVlKTtcbn07XG5DZWxsLnN1cHBvcnRzTGlua1RvID0gdHJ1ZTtcbmNvbnN0IENhcmRWYWx1ZSA9IF9yZWYyID0+IHtcbiAgbGV0IHtcbiAgICBpdGVtLFxuICAgIGZpZWxkXG4gIH0gPSBfcmVmMjtcbiAgcmV0dXJuIGNvcmUuanN4KGZpZWxkcy5GaWVsZENvbnRhaW5lciwgbnVsbCwgY29yZS5qc3goZmllbGRzLkZpZWxkTGFiZWwsIG51bGwsIGZpZWxkLmxhYmVsKSwgaXRlbVtmaWVsZC5wYXRoXSk7XG59O1xuY29uc3QgY29udHJvbGxlciA9IGNvbmZpZyA9PiB7XG4gIHJldHVybiB7XG4gICAgcGF0aDogY29uZmlnLnBhdGgsXG4gICAgbGFiZWw6IGNvbmZpZy5sYWJlbCxcbiAgICBncmFwaHFsU2VsZWN0aW9uOiBjb25maWcucGF0aCxcbiAgICBpZEZpZWxkS2luZDogY29uZmlnLmZpZWxkTWV0YS5raW5kLFxuICAgIGRlZmF1bHRWYWx1ZTogdW5kZWZpbmVkLFxuICAgIGRlc2VyaWFsaXplOiAoKSA9PiB7fSxcbiAgICBzZXJpYWxpemU6ICgpID0+ICh7fSksXG4gICAgZmlsdGVyOiB7XG4gICAgICBGaWx0ZXIocHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIGNvcmUuanN4KGZpZWxkcy5UZXh0SW5wdXQsIHtcbiAgICAgICAgICBvbkNoYW5nZTogZXZlbnQgPT4ge1xuICAgICAgICAgICAgcHJvcHMub25DaGFuZ2UoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHZhbHVlOiBwcm9wcy52YWx1ZSxcbiAgICAgICAgICBhdXRvRm9jdXM6IHByb3BzLmF1dG9Gb2N1c1xuICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIGdyYXBocWw6IF9yZWYzID0+IHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0gPSBfcmVmMztcblxuICAgICAgICBpZiAodHlwZSA9PT0gJ25vdCcpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgW2NvbmZpZy5wYXRoXToge1xuICAgICAgICAgICAgICBub3Q6IHtcbiAgICAgICAgICAgICAgICBlcXVhbHM6IHZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmFsdWVXaXRob3V0V2hpdGVzcGFjZSA9IHZhbHVlLnJlcGxhY2UoL1xccy9nLCAnJyk7XG4gICAgICAgIGNvbnN0IGtleSA9IHR5cGUgPT09ICdpcycgPyAnZXF1YWxzJyA6IHR5cGUgPT09ICdub3RfaW4nID8gJ25vdEluJyA6IHR5cGU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgW2NvbmZpZy5wYXRoXToge1xuICAgICAgICAgICAgW2tleV06IFsnaW4nLCAnbm90X2luJ10uaW5jbHVkZXModHlwZSkgPyB2YWx1ZVdpdGhvdXRXaGl0ZXNwYWNlLnNwbGl0KCcsJykgOiB2YWx1ZVdpdGhvdXRXaGl0ZXNwYWNlXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSxcblxuICAgICAgTGFiZWwoX3JlZjQpIHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICBsYWJlbCxcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICB0eXBlXG4gICAgICAgIH0gPSBfcmVmNDtcbiAgICAgICAgbGV0IHJlbmRlcmVkVmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXHMvZywgJycpO1xuXG4gICAgICAgIGlmIChbJ2luJywgJ25vdF9pbiddLmluY2x1ZGVzKHR5cGUpKSB7XG4gICAgICAgICAgcmVuZGVyZWRWYWx1ZSA9IHZhbHVlLnNwbGl0KCcsJykuam9pbignLCAnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBgJHtsYWJlbC50b0xvd2VyQ2FzZSgpfTogJHtyZW5kZXJlZFZhbHVlfWA7XG4gICAgICB9LFxuXG4gICAgICB0eXBlczoge1xuICAgICAgICBpczoge1xuICAgICAgICAgIGxhYmVsOiAnSXMgZXhhY3RseScsXG4gICAgICAgICAgaW5pdGlhbFZhbHVlOiAnJ1xuICAgICAgICB9LFxuICAgICAgICBub3Q6IHtcbiAgICAgICAgICBsYWJlbDogJ0lzIG5vdCBleGFjdGx5JyxcbiAgICAgICAgICBpbml0aWFsVmFsdWU6ICcnXG4gICAgICAgIH0sXG4gICAgICAgIGd0OiB7XG4gICAgICAgICAgbGFiZWw6ICdJcyBncmVhdGVyIHRoYW4nLFxuICAgICAgICAgIGluaXRpYWxWYWx1ZTogJydcbiAgICAgICAgfSxcbiAgICAgICAgbHQ6IHtcbiAgICAgICAgICBsYWJlbDogJ0lzIGxlc3MgdGhhbicsXG4gICAgICAgICAgaW5pdGlhbFZhbHVlOiAnJ1xuICAgICAgICB9LFxuICAgICAgICBndGU6IHtcbiAgICAgICAgICBsYWJlbDogJ0lzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0bycsXG4gICAgICAgICAgaW5pdGlhbFZhbHVlOiAnJ1xuICAgICAgICB9LFxuICAgICAgICBsdGU6IHtcbiAgICAgICAgICBsYWJlbDogJ0lzIGxlc3MgdGhhbiBvciBlcXVhbCB0bycsXG4gICAgICAgICAgaW5pdGlhbFZhbHVlOiAnJ1xuICAgICAgICB9LFxuICAgICAgICBpbjoge1xuICAgICAgICAgIGxhYmVsOiAnSXMgb25lIG9mJyxcbiAgICAgICAgICBpbml0aWFsVmFsdWU6ICcnXG4gICAgICAgIH0sXG4gICAgICAgIG5vdF9pbjoge1xuICAgICAgICAgIGxhYmVsOiAnSXMgbm90IG9uZSBvZicsXG4gICAgICAgICAgaW5pdGlhbFZhbHVlOiAnJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuZXhwb3J0cy5DYXJkVmFsdWUgPSBDYXJkVmFsdWU7XG5leHBvcnRzLkNlbGwgPSBDZWxsO1xuZXhwb3J0cy5GaWVsZCA9IEZpZWxkO1xuZXhwb3J0cy5jb250cm9sbGVyID0gY29udHJvbGxlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/id-field-view/dist/keystone-6-core-___internal-do-not-use-will-break-in-patch-admin-ui-id-field-view.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/id-field-view/dist/keystone-6-core-___internal-do-not-use-will-break-in-patch-admin-ui-id-field-view.cjs.js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/id-field-view/dist/keystone-6-core-___internal-do-not-use-will-break-in-patch-admin-ui-id-field-view.cjs.js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./keystone-6-core-___internal-do-not-use-will-break-in-patch-admin-ui-id-field-view.cjs.dev.js */ \"../../node_modules/@keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/id-field-view/dist/keystone-6-core-___internal-do-not-use-will-break-in-patch-admin-ui-id-field-view.cjs.dev.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvX19faW50ZXJuYWwtZG8tbm90LXVzZS13aWxsLWJyZWFrLWluLXBhdGNoL2FkbWluLXVpL2lkLWZpZWxkLXZpZXcvZGlzdC9rZXlzdG9uZS02LWNvcmUtX19faW50ZXJuYWwtZG8tbm90LXVzZS13aWxsLWJyZWFrLWluLXBhdGNoLWFkbWluLXVpLWlkLWZpZWxkLXZpZXcuY2pzLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQUksS0FBcUMsRUFBRSxFQUUxQyxDQUFDO0FBQ0YsRUFBRSxxVkFBMEg7QUFDNUgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvX19faW50ZXJuYWwtZG8tbm90LXVzZS13aWxsLWJyZWFrLWluLXBhdGNoL2FkbWluLXVpL2lkLWZpZWxkLXZpZXcvZGlzdC9rZXlzdG9uZS02LWNvcmUtX19faW50ZXJuYWwtZG8tbm90LXVzZS13aWxsLWJyZWFrLWluLXBhdGNoLWFkbWluLXVpLWlkLWZpZWxkLXZpZXcuY2pzLmpzP2MwZmQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4va2V5c3RvbmUtNi1jb3JlLV9fX2ludGVybmFsLWRvLW5vdC11c2Utd2lsbC1icmVhay1pbi1wYXRjaC1hZG1pbi11aS1pZC1maWVsZC12aWV3LmNqcy5wcm9kLmpzXCIpO1xufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9rZXlzdG9uZS02LWNvcmUtX19faW50ZXJuYWwtZG8tbm90LXVzZS13aWxsLWJyZWFrLWluLXBhdGNoLWFkbWluLXVpLWlkLWZpZWxkLXZpZXcuY2pzLmRldi5qc1wiKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/id-field-view/dist/keystone-6-core-___internal-do-not-use-will-break-in-patch-admin-ui-id-field-view.cjs.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/admin-ui/context/dist/keystone-6-core-admin-ui-context.cjs.dev.js":
/*!*************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/admin-ui/context/dist/keystone-6-core-admin-ui-context.cjs.dev.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar React = __webpack_require__(/*! react */ \"react\");\nvar core$1 = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar toast = __webpack_require__(/*! @keystone-ui/toast */ \"@keystone-ui/toast\");\nvar loading = __webpack_require__(/*! @keystone-ui/loading */ \"@keystone-ui/loading\");\nvar modals = __webpack_require__(/*! @keystone-ui/modals */ \"@keystone-ui/modals\");\nvar apolloUploadClient = __webpack_require__(/*! apollo-upload-client */ \"apollo-upload-client\");\nvar _objectSpread = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"../../node_modules/@babel/runtime/helpers/objectSpread2.js\");\nvar hashString = __webpack_require__(/*! @emotion/hash */ \"@emotion/hash\");\nvar core = __webpack_require__(/*! ../../../dist/core-11c9ffea.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/core-11c9ffea.cjs.dev.js\");\n__webpack_require__(/*! ../../../dist/sqlite-a2385a81.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/sqlite-a2385a81.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\n__webpack_require__(/*! ../../../dist/graphql-ts-schema-2a220120.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/graphql-ts-schema-2a220120.cjs.dev.js\");\nvar client = __webpack_require__(/*! @apollo/client */ \"@apollo/client\");\nvar adminMetaGraphql = __webpack_require__(/*! ../../../dist/admin-meta-graphql-9f9a9c11.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/admin-meta-graphql-9f9a9c11.cjs.dev.js\");\nvar dataGetter = __webpack_require__(/*! ../../../dist/dataGetter-9fbe2f8e.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/dataGetter-9fbe2f8e.cjs.dev.js\");\n__webpack_require__(/*! decimal.js */ \"decimal.js\");\n__webpack_require__(/*! @graphql-tools/schema */ \"@graphql-tools/schema\");\n__webpack_require__(/*! @graphql-ts/schema/api-without-context */ \"@graphql-ts/schema/api-without-context\");\n__webpack_require__(/*! @graphql-ts/schema */ \"@graphql-ts/schema\");\n__webpack_require__(/*! graphql-type-json */ \"graphql-type-json\");\n__webpack_require__(/*! graphql-upload/public/GraphQLUpload.js */ \"graphql-upload/public/GraphQLUpload.js\");\n__webpack_require__(/*! graphql */ \"graphql\");\n__webpack_require__(/*! @graphql-ts/extend */ \"@graphql-ts/extend\");\n__webpack_require__(/*! @graphql-ts/schema/api-with-context */ \"@graphql-ts/schema/api-with-context\");\n\nfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefault(React);\nvar hashString__default = /*#__PURE__*/_interopDefault(hashString);\n\nconst expectedExports = new Set(['Cell', 'Field', 'controller', 'CardValue']);\nconst adminMetaLocalStorageKey = 'keystone.adminMeta';\nlet _mustRenderServerResult = true;\n\nfunction useMustRenderServerResult() {\n  let [, forceUpdate] = React.useState(0);\n  React.useEffect(() => {\n    _mustRenderServerResult = false;\n    forceUpdate(1);\n  }, []);\n\n  if (typeof window === 'undefined') {\n    return true;\n  }\n\n  return _mustRenderServerResult;\n}\n\nfunction useAdminMeta(adminMetaHash, fieldViews) {\n  const adminMetaFromLocalStorage = React.useMemo(() => {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    const item = localStorage.getItem(adminMetaLocalStorageKey);\n\n    if (item === null) {\n      return;\n    }\n\n    try {\n      let parsed = JSON.parse(item);\n\n      if (parsed.hash === adminMetaHash) {\n        return parsed.meta;\n      }\n    } catch (err) {\n      return;\n    }\n  }, [adminMetaHash]); // it seems like Apollo doesn't skip the first fetch when using skip: true so we're using useLazyQuery instead\n\n  const [fetchStaticAdminMeta, {\n    data,\n    error,\n    called\n  }] = client.useLazyQuery(adminMetaGraphql.staticAdminMetaQuery, {\n    fetchPolicy: 'network-only'\n  });\n  let shouldFetchAdminMeta = adminMetaFromLocalStorage === undefined && !called;\n  React.useEffect(() => {\n    if (shouldFetchAdminMeta) {\n      fetchStaticAdminMeta();\n    }\n  }, [shouldFetchAdminMeta, fetchStaticAdminMeta]);\n  const runtimeAdminMeta = React.useMemo(() => {\n    if ((!data || error) && !adminMetaFromLocalStorage) {\n      return undefined;\n    }\n\n    const adminMeta = adminMetaFromLocalStorage ? adminMetaFromLocalStorage : data.keystone.adminMeta;\n    const runtimeAdminMeta = {\n      enableSessionItem: adminMeta.enableSessionItem,\n      enableSignout: adminMeta.enableSignout,\n      lists: {}\n    };\n    adminMeta.lists.forEach(list => {\n      runtimeAdminMeta.lists[list.key] = _objectSpread(_objectSpread({}, list), {}, {\n        gqlNames: core.getGqlNames({\n          listKey: list.key,\n          pluralGraphQLName: list.listQueryName\n        }),\n        fields: {}\n      });\n      list.fields.forEach(field => {\n        var _field$itemView$field, _field$itemView;\n\n        expectedExports.forEach(exportName => {\n          if (fieldViews[field.viewsIndex][exportName] === undefined) {\n            throw new Error(`The view for the field at ${list.key}.${field.path} is missing the ${exportName} export`);\n          }\n        });\n        Object.keys(fieldViews[field.viewsIndex]).forEach(exportName => {\n          if (!expectedExports.has(exportName) && exportName !== 'allowedExportsOnCustomViews') {\n            throw new Error(`Unexpected export named ${exportName} from the view from the field at ${list.key}.${field.path}`);\n          }\n        });\n\n        const views = _objectSpread({}, fieldViews[field.viewsIndex]);\n\n        const customViews = {};\n\n        if (field.customViewsIndex !== null) {\n          const customViewsSource = fieldViews[field.customViewsIndex];\n          const allowedExportsOnCustomViews = new Set(views.allowedExportsOnCustomViews);\n          Object.keys(customViewsSource).forEach(exportName => {\n            if (allowedExportsOnCustomViews.has(exportName)) {\n              customViews[exportName] = customViewsSource[exportName];\n            } else if (expectedExports.has(exportName)) {\n              views[exportName] = customViewsSource[exportName];\n            } else {\n              throw new Error(`Unexpected export named ${exportName} from the custom view from field at ${list.key}.${field.path}`);\n            }\n          });\n        }\n\n        runtimeAdminMeta.lists[list.key].fields[field.path] = _objectSpread(_objectSpread({}, field), {}, {\n          itemView: {\n            fieldMode: (_field$itemView$field = (_field$itemView = field.itemView) === null || _field$itemView === void 0 ? void 0 : _field$itemView.fieldMode) !== null && _field$itemView$field !== void 0 ? _field$itemView$field : null\n          },\n          views,\n          controller: fieldViews[field.viewsIndex].controller({\n            listKey: list.key,\n            fieldMeta: field.fieldMeta,\n            label: field.label,\n            path: field.path,\n            customViews\n          })\n        });\n      });\n    });\n\n    if (typeof window !== 'undefined' && !adminMetaFromLocalStorage) {\n      localStorage.setItem(adminMetaLocalStorageKey, JSON.stringify({\n        hash: hashString__default[\"default\"](JSON.stringify(adminMeta)),\n        meta: adminMeta\n      }));\n    }\n\n    return runtimeAdminMeta;\n  }, [data, error, adminMetaFromLocalStorage, fieldViews]);\n  const mustRenderServerResult = useMustRenderServerResult();\n\n  if (mustRenderServerResult) {\n    return {\n      state: 'loading'\n    };\n  }\n\n  if (runtimeAdminMeta) {\n    return {\n      state: 'loaded',\n      value: runtimeAdminMeta\n    };\n  }\n\n  if (error) {\n    return {\n      state: 'error',\n      error,\n      refetch: () => {\n        fetchStaticAdminMeta();\n      }\n    };\n  }\n\n  return {\n    state: 'loading'\n  };\n}\n\nfunction useLazyMetadata(query) {\n  let result = client.useQuery(query, {\n    errorPolicy: 'all',\n    fetchPolicy: 'network-only'\n  });\n  return React.useMemo(() => {\n    var _result$error, _result$error$network, _result$error2, _result$error$network2, _result$error3, _result$error$network3, _result$error4;\n\n    let refetch = () => {\n      result.refetch();\n    };\n\n    let dataGetter$1 = dataGetter.makeDataGetter(result.data, (_result$error = result.error) === null || _result$error === void 0 ? void 0 : _result$error.graphQLErrors);\n    const authenticatedItemGetter = dataGetter$1.get('authenticatedItem');\n    const keystoneMetaGetter = dataGetter$1.get('keystone');\n    return {\n      refetch,\n      authenticatedItem: getAuthenticatedItem(result, authenticatedItemGetter.errors || ((_result$error$network = (_result$error2 = result.error) === null || _result$error2 === void 0 ? void 0 : _result$error2.networkError) !== null && _result$error$network !== void 0 ? _result$error$network : undefined)),\n      visibleLists: getVisibleLists(result, keystoneMetaGetter.errors || ((_result$error$network2 = (_result$error3 = result.error) === null || _result$error3 === void 0 ? void 0 : _result$error3.networkError) !== null && _result$error$network2 !== void 0 ? _result$error$network2 : undefined)),\n      createViewFieldModes: getCreateViewFieldModes(result, keystoneMetaGetter.errors || ((_result$error$network3 = (_result$error4 = result.error) === null || _result$error4 === void 0 ? void 0 : _result$error4.networkError) !== null && _result$error$network3 !== void 0 ? _result$error$network3 : undefined))\n    };\n  }, [result]);\n}\n\nfunction getCreateViewFieldModes(_ref, error) {\n  let {\n    data\n  } = _ref;\n\n  if (error) {\n    return {\n      state: 'error',\n      error\n    };\n  }\n\n  if (data) {\n    const lists = {};\n    data.keystone.adminMeta.lists.forEach(list => {\n      lists[list.key] = {};\n      list.fields.forEach(field => {\n        lists[list.key][field.path] = field.createView.fieldMode;\n      });\n    });\n    return {\n      state: 'loaded',\n      lists\n    };\n  }\n\n  return {\n    state: 'loading'\n  };\n}\n\nfunction getVisibleLists(_ref2, error) {\n  let {\n    data\n  } = _ref2;\n\n  if (error) {\n    return {\n      state: 'error',\n      error\n    };\n  }\n\n  if (data) {\n    const lists = new Set();\n    data.keystone.adminMeta.lists.forEach(list => {\n      if (!list.isHidden) {\n        lists.add(list.key);\n      }\n    });\n    return {\n      state: 'loaded',\n      lists\n    };\n  }\n\n  return {\n    state: 'loading'\n  };\n}\n\nfunction getAuthenticatedItem(_ref3, error) {\n  let {\n    data\n  } = _ref3;\n\n  if (error) {\n    return {\n      state: 'error',\n      error\n    };\n  }\n\n  if (data) {\n    if (!data.authenticatedItem || // this is for the case where there is a new type\n    // in the AuthenticatedItem union and the query\n    // that the admin ui has doesn't get the id\n    // (yes, undefined is very specific and very intentional, it should not be checking for null)\n    data.authenticatedItem.id === undefined) {\n      return {\n        state: 'unauthenticated'\n      };\n    }\n\n    const labelField = Object.keys(data.authenticatedItem).filter(x => x !== '__typename' && x !== 'id')[0];\n    return {\n      state: 'authenticated',\n      id: data.authenticatedItem.id,\n      label: data.authenticatedItem[labelField] || data.authenticatedItem.id,\n      listKey: data.authenticatedItem.__typename\n    };\n  }\n\n  return {\n    state: 'loading'\n  };\n}\n\nconst KeystoneContext = /*#__PURE__*/React.createContext(undefined);\n\nfunction InternalKeystoneProvider(_ref) {\n  let {\n    adminConfig,\n    fieldViews,\n    adminMetaHash,\n    children,\n    lazyMetadataQuery,\n    apiPath\n  } = _ref;\n  const adminMeta = useAdminMeta(adminMetaHash, fieldViews);\n  const {\n    authenticatedItem,\n    visibleLists,\n    createViewFieldModes,\n    refetch\n  } = useLazyMetadata(lazyMetadataQuery);\n\n  const reinitContext = () => {\n    var _adminMeta$refetch;\n\n    adminMeta === null || adminMeta === void 0 ? void 0 : (_adminMeta$refetch = adminMeta.refetch) === null || _adminMeta$refetch === void 0 ? void 0 : _adminMeta$refetch.call(adminMeta);\n    refetch();\n  };\n\n  if (adminMeta.state === 'loading') {\n    return /*#__PURE__*/React__default[\"default\"].createElement(core$1.Center, {\n      fillView: true\n    }, /*#__PURE__*/React__default[\"default\"].createElement(loading.LoadingDots, {\n      label: \"Loading Admin Metadata\",\n      size: \"large\"\n    }));\n  }\n\n  return /*#__PURE__*/React__default[\"default\"].createElement(toast.ToastProvider, null, /*#__PURE__*/React__default[\"default\"].createElement(modals.DrawerProvider, null, /*#__PURE__*/React__default[\"default\"].createElement(KeystoneContext.Provider, {\n    value: {\n      adminConfig,\n      adminMeta,\n      fieldViews,\n      authenticatedItem,\n      reinitContext,\n      visibleLists,\n      createViewFieldModes,\n      apiPath\n    }\n  }, children)));\n}\n\nconst KeystoneProvider = props => {\n  const apolloClient = React.useMemo(() => new client.ApolloClient({\n    cache: new client.InMemoryCache(),\n    link: apolloUploadClient.createUploadLink({\n      uri: props.apiPath\n    })\n  }), [props.apiPath]);\n  return /*#__PURE__*/React__default[\"default\"].createElement(client.ApolloProvider, {\n    client: apolloClient\n  }, /*#__PURE__*/React__default[\"default\"].createElement(InternalKeystoneProvider, props));\n};\nconst useKeystone = () => {\n  const value = React.useContext(KeystoneContext);\n\n  if (!value) {\n    throw new Error('useKeystone must be called inside a KeystoneProvider component');\n  }\n\n  if (value.adminMeta.state === 'error') {\n    // If we get an \"Access denied\" error, it probably means the user doesn't have access to the\n    // adminMeta but has navigated (probably client-side) to a page that requires it. We reload\n    // the page so the server-side access control can run which should bounce them to the right\n    // place (or display the no-access page)\n    if (value.adminMeta.error.message === 'Access denied') {\n      window.location.reload();\n    }\n\n    throw new Error('An error occurred when loading Admin Metadata');\n  }\n\n  return {\n    adminConfig: value.adminConfig,\n    adminMeta: value.adminMeta.value,\n    authenticatedItem: value.authenticatedItem,\n    visibleLists: value.visibleLists,\n    createViewFieldModes: value.createViewFieldModes,\n    apiPath: value.apiPath\n  };\n};\nconst useReinitContext = () => {\n  const value = React.useContext(KeystoneContext);\n\n  if (!value) {\n    throw new Error('useReinitContext must be called inside a KeystoneProvider component');\n  }\n\n  return value.reinitContext;\n};\nconst useRawKeystone = () => {\n  const value = React.useContext(KeystoneContext);\n\n  if (!value) {\n    throw new Error('useRawKeystone must be called inside a KeystoneProvider component');\n  }\n\n  return value;\n};\nconst useList = key => {\n  const {\n    adminMeta: {\n      lists\n    }\n  } = useKeystone();\n\n  if (lists[key]) {\n    return lists[key];\n  } else {\n    throw new Error(`Invalid list key provided to useList: ${key}`);\n  }\n};\n\nexports.KeystoneProvider = KeystoneProvider;\nexports.useKeystone = useKeystone;\nexports.useList = useList;\nexports.useRawKeystone = useRawKeystone;\nexports.useReinitContext = useReinitContext;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvYWRtaW4tdWkvY29udGV4dC9kaXN0L2tleXN0b25lLTYtY29yZS1hZG1pbi11aS1jb250ZXh0LmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDLEVBQUUsYUFBYSxFQUFDOztBQUU3RCxZQUFZLG1CQUFPLENBQUMsb0JBQU87QUFDM0IsYUFBYSxtQkFBTyxDQUFDLDRDQUFtQjtBQUN4QyxZQUFZLG1CQUFPLENBQUMsOENBQW9CO0FBQ3hDLGNBQWMsbUJBQU8sQ0FBQyxrREFBc0I7QUFDNUMsYUFBYSxtQkFBTyxDQUFDLGdEQUFxQjtBQUMxQyx5QkFBeUIsbUJBQU8sQ0FBQyxrREFBc0I7QUFDdkQsb0JBQW9CLG1CQUFPLENBQUMsd0dBQXNDO0FBQ2xFLGlCQUFpQixtQkFBTyxDQUFDLG9DQUFlO0FBQ3hDLFdBQVcsbUJBQU8sQ0FBQyxpSEFBd0M7QUFDM0QsbUJBQU8sQ0FBQyxxSEFBMEM7QUFDbEQsbUJBQU8sQ0FBQyw0SEFBZ0Q7QUFDeEQsbUJBQU8sQ0FBQywySUFBcUQ7QUFDN0QsYUFBYSxtQkFBTyxDQUFDLHNDQUFnQjtBQUNyQyx1QkFBdUIsbUJBQU8sQ0FBQyw2SUFBc0Q7QUFDckYsaUJBQWlCLG1CQUFPLENBQUMsNkhBQThDO0FBQ3ZFLG1CQUFPLENBQUMsOEJBQVk7QUFDcEIsbUJBQU8sQ0FBQyxvREFBdUI7QUFDL0IsbUJBQU8sQ0FBQyxzRkFBd0M7QUFDaEQsbUJBQU8sQ0FBQyw4Q0FBb0I7QUFDNUIsbUJBQU8sQ0FBQyw0Q0FBbUI7QUFDM0IsbUJBQU8sQ0FBQyxzRkFBd0M7QUFDaEQsbUJBQU8sQ0FBQyx3QkFBUztBQUNqQixtQkFBTyxDQUFDLDhDQUFvQjtBQUM1QixtQkFBTyxDQUFDLGdGQUFxQzs7QUFFN0MsK0JBQStCLGlDQUFpQzs7QUFFaEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUcsb0JBQW9COztBQUV2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLFdBQVc7QUFDbEY7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlEQUF5RCxTQUFTLEdBQUcsWUFBWSxpQkFBaUIsWUFBWTtBQUM5RztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsdURBQXVELFlBQVksa0NBQWtDLFNBQVMsR0FBRyxXQUFXO0FBQzVIO0FBQ0EsU0FBUzs7QUFFVCxzQ0FBc0M7O0FBRXRDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBLGNBQWM7QUFDZCx5REFBeUQsWUFBWSxxQ0FBcUMsU0FBUyxHQUFHLFdBQVc7QUFDakk7QUFDQSxXQUFXO0FBQ1g7O0FBRUEsNEZBQTRGLFlBQVk7QUFDeEc7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7QUFDSiw2REFBNkQsSUFBSTtBQUNqRTtBQUNBOztBQUVBLHdCQUF3QjtBQUN4QixtQkFBbUI7QUFDbkIsZUFBZTtBQUNmLHNCQUFzQjtBQUN0Qix3QkFBd0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvYWRtaW4tdWkvY29udGV4dC9kaXN0L2tleXN0b25lLTYtY29yZS1hZG1pbi11aS1jb250ZXh0LmNqcy5kZXYuanM/Zjc1NSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgY29yZSQxID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2NvcmUnKTtcbnZhciB0b2FzdCA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS90b2FzdCcpO1xudmFyIGxvYWRpbmcgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvbG9hZGluZycpO1xudmFyIG1vZGFscyA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9tb2RhbHMnKTtcbnZhciBhcG9sbG9VcGxvYWRDbGllbnQgPSByZXF1aXJlKCdhcG9sbG8tdXBsb2FkLWNsaWVudCcpO1xudmFyIF9vYmplY3RTcHJlYWQgPSByZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZDInKTtcbnZhciBoYXNoU3RyaW5nID0gcmVxdWlyZSgnQGVtb3Rpb24vaGFzaCcpO1xudmFyIGNvcmUgPSByZXF1aXJlKCcuLi8uLi8uLi9kaXN0L2NvcmUtMTFjOWZmZWEuY2pzLmRldi5qcycpO1xucmVxdWlyZSgnLi4vLi4vLi4vZGlzdC9zcWxpdGUtYTIzODVhODEuY2pzLmRldi5qcycpO1xucmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xucmVxdWlyZSgnLi4vLi4vLi4vZGlzdC9ncmFwaHFsLXRzLXNjaGVtYS0yYTIyMDEyMC5janMuZGV2LmpzJyk7XG52YXIgY2xpZW50ID0gcmVxdWlyZSgnQGFwb2xsby9jbGllbnQnKTtcbnZhciBhZG1pbk1ldGFHcmFwaHFsID0gcmVxdWlyZSgnLi4vLi4vLi4vZGlzdC9hZG1pbi1tZXRhLWdyYXBocWwtOWY5YTljMTEuY2pzLmRldi5qcycpO1xudmFyIGRhdGFHZXR0ZXIgPSByZXF1aXJlKCcuLi8uLi8uLi9kaXN0L2RhdGFHZXR0ZXItOWZiZTJmOGUuY2pzLmRldi5qcycpO1xucmVxdWlyZSgnZGVjaW1hbC5qcycpO1xucmVxdWlyZSgnQGdyYXBocWwtdG9vbHMvc2NoZW1hJyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10cy9zY2hlbWEvYXBpLXdpdGhvdXQtY29udGV4dCcpO1xucmVxdWlyZSgnQGdyYXBocWwtdHMvc2NoZW1hJyk7XG5yZXF1aXJlKCdncmFwaHFsLXR5cGUtanNvbicpO1xucmVxdWlyZSgnZ3JhcGhxbC11cGxvYWQvcHVibGljL0dyYXBoUUxVcGxvYWQuanMnKTtcbnJlcXVpcmUoJ2dyYXBocWwnKTtcbnJlcXVpcmUoJ0BncmFwaHFsLXRzL2V4dGVuZCcpO1xucmVxdWlyZSgnQGdyYXBocWwtdHMvc2NoZW1hL2FwaS13aXRoLWNvbnRleHQnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BEZWZhdWx0IChlKSB7IHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7ICdkZWZhdWx0JzogZSB9OyB9XG5cbnZhciBSZWFjdF9fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9faW50ZXJvcERlZmF1bHQoUmVhY3QpO1xudmFyIGhhc2hTdHJpbmdfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0KGhhc2hTdHJpbmcpO1xuXG5jb25zdCBleHBlY3RlZEV4cG9ydHMgPSBuZXcgU2V0KFsnQ2VsbCcsICdGaWVsZCcsICdjb250cm9sbGVyJywgJ0NhcmRWYWx1ZSddKTtcbmNvbnN0IGFkbWluTWV0YUxvY2FsU3RvcmFnZUtleSA9ICdrZXlzdG9uZS5hZG1pbk1ldGEnO1xubGV0IF9tdXN0UmVuZGVyU2VydmVyUmVzdWx0ID0gdHJ1ZTtcblxuZnVuY3Rpb24gdXNlTXVzdFJlbmRlclNlcnZlclJlc3VsdCgpIHtcbiAgbGV0IFssIGZvcmNlVXBkYXRlXSA9IFJlYWN0LnVzZVN0YXRlKDApO1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIF9tdXN0UmVuZGVyU2VydmVyUmVzdWx0ID0gZmFsc2U7XG4gICAgZm9yY2VVcGRhdGUoMSk7XG4gIH0sIFtdKTtcblxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBfbXVzdFJlbmRlclNlcnZlclJlc3VsdDtcbn1cblxuZnVuY3Rpb24gdXNlQWRtaW5NZXRhKGFkbWluTWV0YUhhc2gsIGZpZWxkVmlld3MpIHtcbiAgY29uc3QgYWRtaW5NZXRhRnJvbUxvY2FsU3RvcmFnZSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGl0ZW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShhZG1pbk1ldGFMb2NhbFN0b3JhZ2VLZXkpO1xuXG4gICAgaWYgKGl0ZW0gPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgbGV0IHBhcnNlZCA9IEpTT04ucGFyc2UoaXRlbSk7XG5cbiAgICAgIGlmIChwYXJzZWQuaGFzaCA9PT0gYWRtaW5NZXRhSGFzaCkge1xuICAgICAgICByZXR1cm4gcGFyc2VkLm1ldGE7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LCBbYWRtaW5NZXRhSGFzaF0pOyAvLyBpdCBzZWVtcyBsaWtlIEFwb2xsbyBkb2Vzbid0IHNraXAgdGhlIGZpcnN0IGZldGNoIHdoZW4gdXNpbmcgc2tpcDogdHJ1ZSBzbyB3ZSdyZSB1c2luZyB1c2VMYXp5UXVlcnkgaW5zdGVhZFxuXG4gIGNvbnN0IFtmZXRjaFN0YXRpY0FkbWluTWV0YSwge1xuICAgIGRhdGEsXG4gICAgZXJyb3IsXG4gICAgY2FsbGVkXG4gIH1dID0gY2xpZW50LnVzZUxhenlRdWVyeShhZG1pbk1ldGFHcmFwaHFsLnN0YXRpY0FkbWluTWV0YVF1ZXJ5LCB7XG4gICAgZmV0Y2hQb2xpY3k6ICduZXR3b3JrLW9ubHknXG4gIH0pO1xuICBsZXQgc2hvdWxkRmV0Y2hBZG1pbk1ldGEgPSBhZG1pbk1ldGFGcm9tTG9jYWxTdG9yYWdlID09PSB1bmRlZmluZWQgJiYgIWNhbGxlZDtcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoc2hvdWxkRmV0Y2hBZG1pbk1ldGEpIHtcbiAgICAgIGZldGNoU3RhdGljQWRtaW5NZXRhKCk7XG4gICAgfVxuICB9LCBbc2hvdWxkRmV0Y2hBZG1pbk1ldGEsIGZldGNoU3RhdGljQWRtaW5NZXRhXSk7XG4gIGNvbnN0IHJ1bnRpbWVBZG1pbk1ldGEgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoKCFkYXRhIHx8IGVycm9yKSAmJiAhYWRtaW5NZXRhRnJvbUxvY2FsU3RvcmFnZSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCBhZG1pbk1ldGEgPSBhZG1pbk1ldGFGcm9tTG9jYWxTdG9yYWdlID8gYWRtaW5NZXRhRnJvbUxvY2FsU3RvcmFnZSA6IGRhdGEua2V5c3RvbmUuYWRtaW5NZXRhO1xuICAgIGNvbnN0IHJ1bnRpbWVBZG1pbk1ldGEgPSB7XG4gICAgICBlbmFibGVTZXNzaW9uSXRlbTogYWRtaW5NZXRhLmVuYWJsZVNlc3Npb25JdGVtLFxuICAgICAgZW5hYmxlU2lnbm91dDogYWRtaW5NZXRhLmVuYWJsZVNpZ25vdXQsXG4gICAgICBsaXN0czoge31cbiAgICB9O1xuICAgIGFkbWluTWV0YS5saXN0cy5mb3JFYWNoKGxpc3QgPT4ge1xuICAgICAgcnVudGltZUFkbWluTWV0YS5saXN0c1tsaXN0LmtleV0gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGxpc3QpLCB7fSwge1xuICAgICAgICBncWxOYW1lczogY29yZS5nZXRHcWxOYW1lcyh7XG4gICAgICAgICAgbGlzdEtleTogbGlzdC5rZXksXG4gICAgICAgICAgcGx1cmFsR3JhcGhRTE5hbWU6IGxpc3QubGlzdFF1ZXJ5TmFtZVxuICAgICAgICB9KSxcbiAgICAgICAgZmllbGRzOiB7fVxuICAgICAgfSk7XG4gICAgICBsaXN0LmZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgdmFyIF9maWVsZCRpdGVtVmlldyRmaWVsZCwgX2ZpZWxkJGl0ZW1WaWV3O1xuXG4gICAgICAgIGV4cGVjdGVkRXhwb3J0cy5mb3JFYWNoKGV4cG9ydE5hbWUgPT4ge1xuICAgICAgICAgIGlmIChmaWVsZFZpZXdzW2ZpZWxkLnZpZXdzSW5kZXhdW2V4cG9ydE5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIHZpZXcgZm9yIHRoZSBmaWVsZCBhdCAke2xpc3Qua2V5fS4ke2ZpZWxkLnBhdGh9IGlzIG1pc3NpbmcgdGhlICR7ZXhwb3J0TmFtZX0gZXhwb3J0YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmtleXMoZmllbGRWaWV3c1tmaWVsZC52aWV3c0luZGV4XSkuZm9yRWFjaChleHBvcnROYW1lID0+IHtcbiAgICAgICAgICBpZiAoIWV4cGVjdGVkRXhwb3J0cy5oYXMoZXhwb3J0TmFtZSkgJiYgZXhwb3J0TmFtZSAhPT0gJ2FsbG93ZWRFeHBvcnRzT25DdXN0b21WaWV3cycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBleHBvcnQgbmFtZWQgJHtleHBvcnROYW1lfSBmcm9tIHRoZSB2aWV3IGZyb20gdGhlIGZpZWxkIGF0ICR7bGlzdC5rZXl9LiR7ZmllbGQucGF0aH1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHZpZXdzID0gX29iamVjdFNwcmVhZCh7fSwgZmllbGRWaWV3c1tmaWVsZC52aWV3c0luZGV4XSk7XG5cbiAgICAgICAgY29uc3QgY3VzdG9tVmlld3MgPSB7fTtcblxuICAgICAgICBpZiAoZmllbGQuY3VzdG9tVmlld3NJbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgIGNvbnN0IGN1c3RvbVZpZXdzU291cmNlID0gZmllbGRWaWV3c1tmaWVsZC5jdXN0b21WaWV3c0luZGV4XTtcbiAgICAgICAgICBjb25zdCBhbGxvd2VkRXhwb3J0c09uQ3VzdG9tVmlld3MgPSBuZXcgU2V0KHZpZXdzLmFsbG93ZWRFeHBvcnRzT25DdXN0b21WaWV3cyk7XG4gICAgICAgICAgT2JqZWN0LmtleXMoY3VzdG9tVmlld3NTb3VyY2UpLmZvckVhY2goZXhwb3J0TmFtZSA9PiB7XG4gICAgICAgICAgICBpZiAoYWxsb3dlZEV4cG9ydHNPbkN1c3RvbVZpZXdzLmhhcyhleHBvcnROYW1lKSkge1xuICAgICAgICAgICAgICBjdXN0b21WaWV3c1tleHBvcnROYW1lXSA9IGN1c3RvbVZpZXdzU291cmNlW2V4cG9ydE5hbWVdO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleHBlY3RlZEV4cG9ydHMuaGFzKGV4cG9ydE5hbWUpKSB7XG4gICAgICAgICAgICAgIHZpZXdzW2V4cG9ydE5hbWVdID0gY3VzdG9tVmlld3NTb3VyY2VbZXhwb3J0TmFtZV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgZXhwb3J0IG5hbWVkICR7ZXhwb3J0TmFtZX0gZnJvbSB0aGUgY3VzdG9tIHZpZXcgZnJvbSBmaWVsZCBhdCAke2xpc3Qua2V5fS4ke2ZpZWxkLnBhdGh9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBydW50aW1lQWRtaW5NZXRhLmxpc3RzW2xpc3Qua2V5XS5maWVsZHNbZmllbGQucGF0aF0gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGZpZWxkKSwge30sIHtcbiAgICAgICAgICBpdGVtVmlldzoge1xuICAgICAgICAgICAgZmllbGRNb2RlOiAoX2ZpZWxkJGl0ZW1WaWV3JGZpZWxkID0gKF9maWVsZCRpdGVtVmlldyA9IGZpZWxkLml0ZW1WaWV3KSA9PT0gbnVsbCB8fCBfZmllbGQkaXRlbVZpZXcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9maWVsZCRpdGVtVmlldy5maWVsZE1vZGUpICE9PSBudWxsICYmIF9maWVsZCRpdGVtVmlldyRmaWVsZCAhPT0gdm9pZCAwID8gX2ZpZWxkJGl0ZW1WaWV3JGZpZWxkIDogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdmlld3MsXG4gICAgICAgICAgY29udHJvbGxlcjogZmllbGRWaWV3c1tmaWVsZC52aWV3c0luZGV4XS5jb250cm9sbGVyKHtcbiAgICAgICAgICAgIGxpc3RLZXk6IGxpc3Qua2V5LFxuICAgICAgICAgICAgZmllbGRNZXRhOiBmaWVsZC5maWVsZE1ldGEsXG4gICAgICAgICAgICBsYWJlbDogZmllbGQubGFiZWwsXG4gICAgICAgICAgICBwYXRoOiBmaWVsZC5wYXRoLFxuICAgICAgICAgICAgY3VzdG9tVmlld3NcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICFhZG1pbk1ldGFGcm9tTG9jYWxTdG9yYWdlKSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShhZG1pbk1ldGFMb2NhbFN0b3JhZ2VLZXksIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaGFzaDogaGFzaFN0cmluZ19fZGVmYXVsdFtcImRlZmF1bHRcIl0oSlNPTi5zdHJpbmdpZnkoYWRtaW5NZXRhKSksXG4gICAgICAgIG1ldGE6IGFkbWluTWV0YVxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIHJldHVybiBydW50aW1lQWRtaW5NZXRhO1xuICB9LCBbZGF0YSwgZXJyb3IsIGFkbWluTWV0YUZyb21Mb2NhbFN0b3JhZ2UsIGZpZWxkVmlld3NdKTtcbiAgY29uc3QgbXVzdFJlbmRlclNlcnZlclJlc3VsdCA9IHVzZU11c3RSZW5kZXJTZXJ2ZXJSZXN1bHQoKTtcblxuICBpZiAobXVzdFJlbmRlclNlcnZlclJlc3VsdCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0ZTogJ2xvYWRpbmcnXG4gICAgfTtcbiAgfVxuXG4gIGlmIChydW50aW1lQWRtaW5NZXRhKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXRlOiAnbG9hZGVkJyxcbiAgICAgIHZhbHVlOiBydW50aW1lQWRtaW5NZXRhXG4gICAgfTtcbiAgfVxuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0ZTogJ2Vycm9yJyxcbiAgICAgIGVycm9yLFxuICAgICAgcmVmZXRjaDogKCkgPT4ge1xuICAgICAgICBmZXRjaFN0YXRpY0FkbWluTWV0YSgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHN0YXRlOiAnbG9hZGluZydcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXNlTGF6eU1ldGFkYXRhKHF1ZXJ5KSB7XG4gIGxldCByZXN1bHQgPSBjbGllbnQudXNlUXVlcnkocXVlcnksIHtcbiAgICBlcnJvclBvbGljeTogJ2FsbCcsXG4gICAgZmV0Y2hQb2xpY3k6ICduZXR3b3JrLW9ubHknXG4gIH0pO1xuICByZXR1cm4gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgdmFyIF9yZXN1bHQkZXJyb3IsIF9yZXN1bHQkZXJyb3IkbmV0d29yaywgX3Jlc3VsdCRlcnJvcjIsIF9yZXN1bHQkZXJyb3IkbmV0d29yazIsIF9yZXN1bHQkZXJyb3IzLCBfcmVzdWx0JGVycm9yJG5ldHdvcmszLCBfcmVzdWx0JGVycm9yNDtcblxuICAgIGxldCByZWZldGNoID0gKCkgPT4ge1xuICAgICAgcmVzdWx0LnJlZmV0Y2goKTtcbiAgICB9O1xuXG4gICAgbGV0IGRhdGFHZXR0ZXIkMSA9IGRhdGFHZXR0ZXIubWFrZURhdGFHZXR0ZXIocmVzdWx0LmRhdGEsIChfcmVzdWx0JGVycm9yID0gcmVzdWx0LmVycm9yKSA9PT0gbnVsbCB8fCBfcmVzdWx0JGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzdWx0JGVycm9yLmdyYXBoUUxFcnJvcnMpO1xuICAgIGNvbnN0IGF1dGhlbnRpY2F0ZWRJdGVtR2V0dGVyID0gZGF0YUdldHRlciQxLmdldCgnYXV0aGVudGljYXRlZEl0ZW0nKTtcbiAgICBjb25zdCBrZXlzdG9uZU1ldGFHZXR0ZXIgPSBkYXRhR2V0dGVyJDEuZ2V0KCdrZXlzdG9uZScpO1xuICAgIHJldHVybiB7XG4gICAgICByZWZldGNoLFxuICAgICAgYXV0aGVudGljYXRlZEl0ZW06IGdldEF1dGhlbnRpY2F0ZWRJdGVtKHJlc3VsdCwgYXV0aGVudGljYXRlZEl0ZW1HZXR0ZXIuZXJyb3JzIHx8ICgoX3Jlc3VsdCRlcnJvciRuZXR3b3JrID0gKF9yZXN1bHQkZXJyb3IyID0gcmVzdWx0LmVycm9yKSA9PT0gbnVsbCB8fCBfcmVzdWx0JGVycm9yMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc3VsdCRlcnJvcjIubmV0d29ya0Vycm9yKSAhPT0gbnVsbCAmJiBfcmVzdWx0JGVycm9yJG5ldHdvcmsgIT09IHZvaWQgMCA/IF9yZXN1bHQkZXJyb3IkbmV0d29yayA6IHVuZGVmaW5lZCkpLFxuICAgICAgdmlzaWJsZUxpc3RzOiBnZXRWaXNpYmxlTGlzdHMocmVzdWx0LCBrZXlzdG9uZU1ldGFHZXR0ZXIuZXJyb3JzIHx8ICgoX3Jlc3VsdCRlcnJvciRuZXR3b3JrMiA9IChfcmVzdWx0JGVycm9yMyA9IHJlc3VsdC5lcnJvcikgPT09IG51bGwgfHwgX3Jlc3VsdCRlcnJvcjMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXN1bHQkZXJyb3IzLm5ldHdvcmtFcnJvcikgIT09IG51bGwgJiYgX3Jlc3VsdCRlcnJvciRuZXR3b3JrMiAhPT0gdm9pZCAwID8gX3Jlc3VsdCRlcnJvciRuZXR3b3JrMiA6IHVuZGVmaW5lZCkpLFxuICAgICAgY3JlYXRlVmlld0ZpZWxkTW9kZXM6IGdldENyZWF0ZVZpZXdGaWVsZE1vZGVzKHJlc3VsdCwga2V5c3RvbmVNZXRhR2V0dGVyLmVycm9ycyB8fCAoKF9yZXN1bHQkZXJyb3IkbmV0d29yazMgPSAoX3Jlc3VsdCRlcnJvcjQgPSByZXN1bHQuZXJyb3IpID09PSBudWxsIHx8IF9yZXN1bHQkZXJyb3I0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzdWx0JGVycm9yNC5uZXR3b3JrRXJyb3IpICE9PSBudWxsICYmIF9yZXN1bHQkZXJyb3IkbmV0d29yazMgIT09IHZvaWQgMCA/IF9yZXN1bHQkZXJyb3IkbmV0d29yazMgOiB1bmRlZmluZWQpKVxuICAgIH07XG4gIH0sIFtyZXN1bHRdKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q3JlYXRlVmlld0ZpZWxkTW9kZXMoX3JlZiwgZXJyb3IpIHtcbiAgbGV0IHtcbiAgICBkYXRhXG4gIH0gPSBfcmVmO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0ZTogJ2Vycm9yJyxcbiAgICAgIGVycm9yXG4gICAgfTtcbiAgfVxuXG4gIGlmIChkYXRhKSB7XG4gICAgY29uc3QgbGlzdHMgPSB7fTtcbiAgICBkYXRhLmtleXN0b25lLmFkbWluTWV0YS5saXN0cy5mb3JFYWNoKGxpc3QgPT4ge1xuICAgICAgbGlzdHNbbGlzdC5rZXldID0ge307XG4gICAgICBsaXN0LmZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgbGlzdHNbbGlzdC5rZXldW2ZpZWxkLnBhdGhdID0gZmllbGQuY3JlYXRlVmlldy5maWVsZE1vZGU7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdGU6ICdsb2FkZWQnLFxuICAgICAgbGlzdHNcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzdGF0ZTogJ2xvYWRpbmcnXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFZpc2libGVMaXN0cyhfcmVmMiwgZXJyb3IpIHtcbiAgbGV0IHtcbiAgICBkYXRhXG4gIH0gPSBfcmVmMjtcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdGU6ICdlcnJvcicsXG4gICAgICBlcnJvclxuICAgIH07XG4gIH1cblxuICBpZiAoZGF0YSkge1xuICAgIGNvbnN0IGxpc3RzID0gbmV3IFNldCgpO1xuICAgIGRhdGEua2V5c3RvbmUuYWRtaW5NZXRhLmxpc3RzLmZvckVhY2gobGlzdCA9PiB7XG4gICAgICBpZiAoIWxpc3QuaXNIaWRkZW4pIHtcbiAgICAgICAgbGlzdHMuYWRkKGxpc3Qua2V5KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdGU6ICdsb2FkZWQnLFxuICAgICAgbGlzdHNcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzdGF0ZTogJ2xvYWRpbmcnXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldEF1dGhlbnRpY2F0ZWRJdGVtKF9yZWYzLCBlcnJvcikge1xuICBsZXQge1xuICAgIGRhdGFcbiAgfSA9IF9yZWYzO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0ZTogJ2Vycm9yJyxcbiAgICAgIGVycm9yXG4gICAgfTtcbiAgfVxuXG4gIGlmIChkYXRhKSB7XG4gICAgaWYgKCFkYXRhLmF1dGhlbnRpY2F0ZWRJdGVtIHx8IC8vIHRoaXMgaXMgZm9yIHRoZSBjYXNlIHdoZXJlIHRoZXJlIGlzIGEgbmV3IHR5cGVcbiAgICAvLyBpbiB0aGUgQXV0aGVudGljYXRlZEl0ZW0gdW5pb24gYW5kIHRoZSBxdWVyeVxuICAgIC8vIHRoYXQgdGhlIGFkbWluIHVpIGhhcyBkb2Vzbid0IGdldCB0aGUgaWRcbiAgICAvLyAoeWVzLCB1bmRlZmluZWQgaXMgdmVyeSBzcGVjaWZpYyBhbmQgdmVyeSBpbnRlbnRpb25hbCwgaXQgc2hvdWxkIG5vdCBiZSBjaGVja2luZyBmb3IgbnVsbClcbiAgICBkYXRhLmF1dGhlbnRpY2F0ZWRJdGVtLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXRlOiAndW5hdXRoZW50aWNhdGVkJ1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBsYWJlbEZpZWxkID0gT2JqZWN0LmtleXMoZGF0YS5hdXRoZW50aWNhdGVkSXRlbSkuZmlsdGVyKHggPT4geCAhPT0gJ19fdHlwZW5hbWUnICYmIHggIT09ICdpZCcpWzBdO1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0ZTogJ2F1dGhlbnRpY2F0ZWQnLFxuICAgICAgaWQ6IGRhdGEuYXV0aGVudGljYXRlZEl0ZW0uaWQsXG4gICAgICBsYWJlbDogZGF0YS5hdXRoZW50aWNhdGVkSXRlbVtsYWJlbEZpZWxkXSB8fCBkYXRhLmF1dGhlbnRpY2F0ZWRJdGVtLmlkLFxuICAgICAgbGlzdEtleTogZGF0YS5hdXRoZW50aWNhdGVkSXRlbS5fX3R5cGVuYW1lXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc3RhdGU6ICdsb2FkaW5nJ1xuICB9O1xufVxuXG5jb25zdCBLZXlzdG9uZUNvbnRleHQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlQ29udGV4dCh1bmRlZmluZWQpO1xuXG5mdW5jdGlvbiBJbnRlcm5hbEtleXN0b25lUHJvdmlkZXIoX3JlZikge1xuICBsZXQge1xuICAgIGFkbWluQ29uZmlnLFxuICAgIGZpZWxkVmlld3MsXG4gICAgYWRtaW5NZXRhSGFzaCxcbiAgICBjaGlsZHJlbixcbiAgICBsYXp5TWV0YWRhdGFRdWVyeSxcbiAgICBhcGlQYXRoXG4gIH0gPSBfcmVmO1xuICBjb25zdCBhZG1pbk1ldGEgPSB1c2VBZG1pbk1ldGEoYWRtaW5NZXRhSGFzaCwgZmllbGRWaWV3cyk7XG4gIGNvbnN0IHtcbiAgICBhdXRoZW50aWNhdGVkSXRlbSxcbiAgICB2aXNpYmxlTGlzdHMsXG4gICAgY3JlYXRlVmlld0ZpZWxkTW9kZXMsXG4gICAgcmVmZXRjaFxuICB9ID0gdXNlTGF6eU1ldGFkYXRhKGxhenlNZXRhZGF0YVF1ZXJ5KTtcblxuICBjb25zdCByZWluaXRDb250ZXh0ID0gKCkgPT4ge1xuICAgIHZhciBfYWRtaW5NZXRhJHJlZmV0Y2g7XG5cbiAgICBhZG1pbk1ldGEgPT09IG51bGwgfHwgYWRtaW5NZXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2FkbWluTWV0YSRyZWZldGNoID0gYWRtaW5NZXRhLnJlZmV0Y2gpID09PSBudWxsIHx8IF9hZG1pbk1ldGEkcmVmZXRjaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FkbWluTWV0YSRyZWZldGNoLmNhbGwoYWRtaW5NZXRhKTtcbiAgICByZWZldGNoKCk7XG4gIH07XG5cbiAgaWYgKGFkbWluTWV0YS5zdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChjb3JlJDEuQ2VudGVyLCB7XG4gICAgICBmaWxsVmlldzogdHJ1ZVxuICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChsb2FkaW5nLkxvYWRpbmdEb3RzLCB7XG4gICAgICBsYWJlbDogXCJMb2FkaW5nIEFkbWluIE1ldGFkYXRhXCIsXG4gICAgICBzaXplOiBcImxhcmdlXCJcbiAgICB9KSk7XG4gIH1cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KHRvYXN0LlRvYXN0UHJvdmlkZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChtb2RhbHMuRHJhd2VyUHJvdmlkZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChLZXlzdG9uZUNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZToge1xuICAgICAgYWRtaW5Db25maWcsXG4gICAgICBhZG1pbk1ldGEsXG4gICAgICBmaWVsZFZpZXdzLFxuICAgICAgYXV0aGVudGljYXRlZEl0ZW0sXG4gICAgICByZWluaXRDb250ZXh0LFxuICAgICAgdmlzaWJsZUxpc3RzLFxuICAgICAgY3JlYXRlVmlld0ZpZWxkTW9kZXMsXG4gICAgICBhcGlQYXRoXG4gICAgfVxuICB9LCBjaGlsZHJlbikpKTtcbn1cblxuY29uc3QgS2V5c3RvbmVQcm92aWRlciA9IHByb3BzID0+IHtcbiAgY29uc3QgYXBvbGxvQ2xpZW50ID0gUmVhY3QudXNlTWVtbygoKSA9PiBuZXcgY2xpZW50LkFwb2xsb0NsaWVudCh7XG4gICAgY2FjaGU6IG5ldyBjbGllbnQuSW5NZW1vcnlDYWNoZSgpLFxuICAgIGxpbms6IGFwb2xsb1VwbG9hZENsaWVudC5jcmVhdGVVcGxvYWRMaW5rKHtcbiAgICAgIHVyaTogcHJvcHMuYXBpUGF0aFxuICAgIH0pXG4gIH0pLCBbcHJvcHMuYXBpUGF0aF0pO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KGNsaWVudC5BcG9sbG9Qcm92aWRlciwge1xuICAgIGNsaWVudDogYXBvbGxvQ2xpZW50XG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChJbnRlcm5hbEtleXN0b25lUHJvdmlkZXIsIHByb3BzKSk7XG59O1xuY29uc3QgdXNlS2V5c3RvbmUgPSAoKSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gUmVhY3QudXNlQ29udGV4dChLZXlzdG9uZUNvbnRleHQpO1xuXG4gIGlmICghdmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZUtleXN0b25lIG11c3QgYmUgY2FsbGVkIGluc2lkZSBhIEtleXN0b25lUHJvdmlkZXIgY29tcG9uZW50Jyk7XG4gIH1cblxuICBpZiAodmFsdWUuYWRtaW5NZXRhLnN0YXRlID09PSAnZXJyb3InKSB7XG4gICAgLy8gSWYgd2UgZ2V0IGFuIFwiQWNjZXNzIGRlbmllZFwiIGVycm9yLCBpdCBwcm9iYWJseSBtZWFucyB0aGUgdXNlciBkb2Vzbid0IGhhdmUgYWNjZXNzIHRvIHRoZVxuICAgIC8vIGFkbWluTWV0YSBidXQgaGFzIG5hdmlnYXRlZCAocHJvYmFibHkgY2xpZW50LXNpZGUpIHRvIGEgcGFnZSB0aGF0IHJlcXVpcmVzIGl0LiBXZSByZWxvYWRcbiAgICAvLyB0aGUgcGFnZSBzbyB0aGUgc2VydmVyLXNpZGUgYWNjZXNzIGNvbnRyb2wgY2FuIHJ1biB3aGljaCBzaG91bGQgYm91bmNlIHRoZW0gdG8gdGhlIHJpZ2h0XG4gICAgLy8gcGxhY2UgKG9yIGRpc3BsYXkgdGhlIG5vLWFjY2VzcyBwYWdlKVxuICAgIGlmICh2YWx1ZS5hZG1pbk1ldGEuZXJyb3IubWVzc2FnZSA9PT0gJ0FjY2VzcyBkZW5pZWQnKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKCdBbiBlcnJvciBvY2N1cnJlZCB3aGVuIGxvYWRpbmcgQWRtaW4gTWV0YWRhdGEnKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYWRtaW5Db25maWc6IHZhbHVlLmFkbWluQ29uZmlnLFxuICAgIGFkbWluTWV0YTogdmFsdWUuYWRtaW5NZXRhLnZhbHVlLFxuICAgIGF1dGhlbnRpY2F0ZWRJdGVtOiB2YWx1ZS5hdXRoZW50aWNhdGVkSXRlbSxcbiAgICB2aXNpYmxlTGlzdHM6IHZhbHVlLnZpc2libGVMaXN0cyxcbiAgICBjcmVhdGVWaWV3RmllbGRNb2RlczogdmFsdWUuY3JlYXRlVmlld0ZpZWxkTW9kZXMsXG4gICAgYXBpUGF0aDogdmFsdWUuYXBpUGF0aFxuICB9O1xufTtcbmNvbnN0IHVzZVJlaW5pdENvbnRleHQgPSAoKSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gUmVhY3QudXNlQ29udGV4dChLZXlzdG9uZUNvbnRleHQpO1xuXG4gIGlmICghdmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZVJlaW5pdENvbnRleHQgbXVzdCBiZSBjYWxsZWQgaW5zaWRlIGEgS2V5c3RvbmVQcm92aWRlciBjb21wb25lbnQnKTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZS5yZWluaXRDb250ZXh0O1xufTtcbmNvbnN0IHVzZVJhd0tleXN0b25lID0gKCkgPT4ge1xuICBjb25zdCB2YWx1ZSA9IFJlYWN0LnVzZUNvbnRleHQoS2V5c3RvbmVDb250ZXh0KTtcblxuICBpZiAoIXZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VSYXdLZXlzdG9uZSBtdXN0IGJlIGNhbGxlZCBpbnNpZGUgYSBLZXlzdG9uZVByb3ZpZGVyIGNvbXBvbmVudCcpO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufTtcbmNvbnN0IHVzZUxpc3QgPSBrZXkgPT4ge1xuICBjb25zdCB7XG4gICAgYWRtaW5NZXRhOiB7XG4gICAgICBsaXN0c1xuICAgIH1cbiAgfSA9IHVzZUtleXN0b25lKCk7XG5cbiAgaWYgKGxpc3RzW2tleV0pIHtcbiAgICByZXR1cm4gbGlzdHNba2V5XTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgbGlzdCBrZXkgcHJvdmlkZWQgdG8gdXNlTGlzdDogJHtrZXl9YCk7XG4gIH1cbn07XG5cbmV4cG9ydHMuS2V5c3RvbmVQcm92aWRlciA9IEtleXN0b25lUHJvdmlkZXI7XG5leHBvcnRzLnVzZUtleXN0b25lID0gdXNlS2V5c3RvbmU7XG5leHBvcnRzLnVzZUxpc3QgPSB1c2VMaXN0O1xuZXhwb3J0cy51c2VSYXdLZXlzdG9uZSA9IHVzZVJhd0tleXN0b25lO1xuZXhwb3J0cy51c2VSZWluaXRDb250ZXh0ID0gdXNlUmVpbml0Q29udGV4dDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/admin-ui/context/dist/keystone-6-core-admin-ui-context.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js":
/*!***********************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar _objectWithoutProperties = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\nvar router = __webpack_require__(/*! next/router */ \"next/router\");\nvar Link$1 = __webpack_require__(/*! next/link */ \"../../node_modules/next/link.js\");\nvar React = __webpack_require__(/*! react */ \"react\");\n\nfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\nvar Link__default = /*#__PURE__*/_interopDefault(Link$1);\nvar React__default = /*#__PURE__*/_interopDefault(React);\n\nconst _excluded = [\"href\", \"as\", \"replace\", \"scroll\", \"shallow\", \"prefetch\"];\nconst Link = _ref => {\n  let {\n    href,\n    as,\n    replace,\n    scroll,\n    shallow,\n    prefetch\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React__default[\"default\"].createElement(Link__default[\"default\"], {\n    href: href,\n    as: as,\n    replace: replace,\n    scroll: scroll,\n    shallow: shallow,\n    prefetch: prefetch\n  }, /*#__PURE__*/React__default[\"default\"].createElement(\"a\", props));\n};\n\nObject.defineProperty(exports, \"Router\", ({\n  enumerable: true,\n  get: function () { return router.Router; }\n}));\nObject.defineProperty(exports, \"createRouter\", ({\n  enumerable: true,\n  get: function () { return router.createRouter; }\n}));\nObject.defineProperty(exports, \"makePublicRouterInstance\", ({\n  enumerable: true,\n  get: function () { return router.makePublicRouterInstance; }\n}));\nObject.defineProperty(exports, \"useRouter\", ({\n  enumerable: true,\n  get: function () { return router.useRouter; }\n}));\nObject.defineProperty(exports, \"withRouter\", ({\n  enumerable: true,\n  get: function () { return router.withRouter; }\n}));\nexports.Link = Link;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvYWRtaW4tdWkvcm91dGVyL2Rpc3Qva2V5c3RvbmUtNi1jb3JlLWFkbWluLXVpLXJvdXRlci5janMuZGV2LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QyxFQUFFLGFBQWEsRUFBQzs7QUFFN0QsK0JBQStCLG1CQUFPLENBQUMsNEhBQWdEO0FBQ3ZGLGFBQWEsbUJBQU8sQ0FBQyxnQ0FBYTtBQUNsQyxhQUFhLG1CQUFPLENBQUMsa0RBQVc7QUFDaEMsWUFBWSxtQkFBTyxDQUFDLG9CQUFPOztBQUUzQiwrQkFBK0IsaUNBQWlDOztBQUVoRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQSwwQ0FBeUM7QUFDekM7QUFDQSxxQkFBcUI7QUFDckIsQ0FBQyxFQUFDO0FBQ0YsZ0RBQStDO0FBQy9DO0FBQ0EscUJBQXFCO0FBQ3JCLENBQUMsRUFBQztBQUNGLDREQUEyRDtBQUMzRDtBQUNBLHFCQUFxQjtBQUNyQixDQUFDLEVBQUM7QUFDRiw2Q0FBNEM7QUFDNUM7QUFDQSxxQkFBcUI7QUFDckIsQ0FBQyxFQUFDO0FBQ0YsOENBQTZDO0FBQzdDO0FBQ0EscUJBQXFCO0FBQ3JCLENBQUMsRUFBQztBQUNGLFlBQVkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvYWRtaW4tdWkvcm91dGVyL2Rpc3Qva2V5c3RvbmUtNi1jb3JlLWFkbWluLXVpLXJvdXRlci5janMuZGV2LmpzPzM5MzUiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzID0gcmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xudmFyIHJvdXRlciA9IHJlcXVpcmUoJ25leHQvcm91dGVyJyk7XG52YXIgTGluayQxID0gcmVxdWlyZSgnbmV4dC9saW5rJyk7XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcERlZmF1bHQgKGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgJ2RlZmF1bHQnOiBlIH07IH1cblxudmFyIExpbmtfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0KExpbmskMSk7XG52YXIgUmVhY3RfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0KFJlYWN0KTtcblxuY29uc3QgX2V4Y2x1ZGVkID0gW1wiaHJlZlwiLCBcImFzXCIsIFwicmVwbGFjZVwiLCBcInNjcm9sbFwiLCBcInNoYWxsb3dcIiwgXCJwcmVmZXRjaFwiXTtcbmNvbnN0IExpbmsgPSBfcmVmID0+IHtcbiAgbGV0IHtcbiAgICBocmVmLFxuICAgIGFzLFxuICAgIHJlcGxhY2UsXG4gICAgc2Nyb2xsLFxuICAgIHNoYWxsb3csXG4gICAgcHJlZmV0Y2hcbiAgfSA9IF9yZWYsXG4gICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBfZXhjbHVkZWQpO1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3RfX2RlZmF1bHRbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoTGlua19fZGVmYXVsdFtcImRlZmF1bHRcIl0sIHtcbiAgICBocmVmOiBocmVmLFxuICAgIGFzOiBhcyxcbiAgICByZXBsYWNlOiByZXBsYWNlLFxuICAgIHNjcm9sbDogc2Nyb2xsLFxuICAgIHNoYWxsb3c6IHNoYWxsb3csXG4gICAgcHJlZmV0Y2g6IHByZWZldGNoXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImFcIiwgcHJvcHMpKTtcbn07XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnUm91dGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJvdXRlci5Sb3V0ZXI7IH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdjcmVhdGVSb3V0ZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcm91dGVyLmNyZWF0ZVJvdXRlcjsgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ21ha2VQdWJsaWNSb3V0ZXJJbnN0YW5jZScsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiByb3V0ZXIubWFrZVB1YmxpY1JvdXRlckluc3RhbmNlOyB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAndXNlUm91dGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJvdXRlci51c2VSb3V0ZXI7IH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICd3aXRoUm91dGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJvdXRlci53aXRoUm91dGVyOyB9XG59KTtcbmV4cG9ydHMuTGluayA9IExpbms7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/CellContainer-453254b5.cjs.dev.js":
/*!**********************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/CellContainer-453254b5.cjs.dev.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar _extends = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"../../node_modules/@babel/runtime/helpers/extends.js\");\nvar _objectWithoutProperties = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\n\nconst _excluded = [\"children\"];\n/**\n * This is the component you should use when you want the standard padding around a cell value\n */\n\nconst CellContainer = _ref => {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  const {\n    spacing\n  } = core.useTheme();\n  return core.jsx(\"div\", _extends({\n    css: {\n      padding: spacing.small\n    }\n  }, props), children);\n};\n\nexports.CellContainer = CellContainer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9DZWxsQ29udGFpbmVyLTQ1MzI1NGI1LmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsZUFBZSxtQkFBTyxDQUFDLDRGQUFnQztBQUN2RCwrQkFBK0IsbUJBQU8sQ0FBQyw0SEFBZ0Q7QUFDdkYsV0FBVyxtQkFBTyxDQUFDLDRDQUFtQjs7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUEscUJBQXFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2Rpc3QvQ2VsbENvbnRhaW5lci00NTMyNTRiNS5janMuZGV2LmpzPzAwNmYiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2V4dGVuZHMgPSByZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHMnKTtcbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgPSByZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzJyk7XG52YXIgY29yZSA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9jb3JlJyk7XG5cbmNvbnN0IF9leGNsdWRlZCA9IFtcImNoaWxkcmVuXCJdO1xuLyoqXG4gKiBUaGlzIGlzIHRoZSBjb21wb25lbnQgeW91IHNob3VsZCB1c2Ugd2hlbiB5b3Ugd2FudCB0aGUgc3RhbmRhcmQgcGFkZGluZyBhcm91bmQgYSBjZWxsIHZhbHVlXG4gKi9cblxuY29uc3QgQ2VsbENvbnRhaW5lciA9IF9yZWYgPT4ge1xuICBsZXQge1xuICAgIGNoaWxkcmVuXG4gIH0gPSBfcmVmLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgX2V4Y2x1ZGVkKTtcblxuICBjb25zdCB7XG4gICAgc3BhY2luZ1xuICB9ID0gY29yZS51c2VUaGVtZSgpO1xuICByZXR1cm4gY29yZS5qc3goXCJkaXZcIiwgX2V4dGVuZHMoe1xuICAgIGNzczoge1xuICAgICAgcGFkZGluZzogc3BhY2luZy5zbWFsbFxuICAgIH1cbiAgfSwgcHJvcHMpLCBjaGlsZHJlbik7XG59O1xuXG5leHBvcnRzLkNlbGxDb250YWluZXIgPSBDZWxsQ29udGFpbmVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/CellContainer-453254b5.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/CellLink-5308c32b.cjs.dev.js":
/*!*****************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/CellLink-5308c32b.cjs.dev.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar _extends = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"../../node_modules/@babel/runtime/helpers/extends.js\");\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar adminUi_router_dist_keystone6CoreAdminUiRouter = __webpack_require__(/*! ../admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js */ \"../../node_modules/@keystone-6/core/admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js\");\n\n/**\n * This is the component you should use when linking a Cell to an item (i.e when the Cell supports\n * the linkTo prop)\n */\n\nconst CellLink = props => {\n  const {\n    colors,\n    spacing\n  } = core.useTheme();\n  return core.jsx(adminUi_router_dist_keystone6CoreAdminUiRouter.Link, _extends({\n    css: {\n      color: colors.foreground,\n      display: 'block',\n      padding: spacing.small,\n      textDecoration: 'none',\n      ':hover': {\n        textDecoration: 'underline'\n      }\n    }\n  }, props));\n};\n\nexports.CellLink = CellLink;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9DZWxsTGluay01MzA4YzMyYi5janMuZGV2LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGVBQWUsbUJBQU8sQ0FBQyw0RkFBZ0M7QUFDdkQsV0FBVyxtQkFBTyxDQUFDLDRDQUFtQjtBQUN0QyxxREFBcUQsbUJBQU8sQ0FBQywrS0FBb0U7O0FBRWpJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBLGdCQUFnQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvQGtleXN0b25lLTYvY29yZS9kaXN0L0NlbGxMaW5rLTUzMDhjMzJiLmNqcy5kZXYuanM/NjdiOSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBfZXh0ZW5kcyA9IHJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xudmFyIGNvcmUgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvY29yZScpO1xudmFyIGFkbWluVWlfcm91dGVyX2Rpc3Rfa2V5c3RvbmU2Q29yZUFkbWluVWlSb3V0ZXIgPSByZXF1aXJlKCcuLi9hZG1pbi11aS9yb3V0ZXIvZGlzdC9rZXlzdG9uZS02LWNvcmUtYWRtaW4tdWktcm91dGVyLmNqcy5kZXYuanMnKTtcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBjb21wb25lbnQgeW91IHNob3VsZCB1c2Ugd2hlbiBsaW5raW5nIGEgQ2VsbCB0byBhbiBpdGVtIChpLmUgd2hlbiB0aGUgQ2VsbCBzdXBwb3J0c1xuICogdGhlIGxpbmtUbyBwcm9wKVxuICovXG5cbmNvbnN0IENlbGxMaW5rID0gcHJvcHMgPT4ge1xuICBjb25zdCB7XG4gICAgY29sb3JzLFxuICAgIHNwYWNpbmdcbiAgfSA9IGNvcmUudXNlVGhlbWUoKTtcbiAgcmV0dXJuIGNvcmUuanN4KGFkbWluVWlfcm91dGVyX2Rpc3Rfa2V5c3RvbmU2Q29yZUFkbWluVWlSb3V0ZXIuTGluaywgX2V4dGVuZHMoe1xuICAgIGNzczoge1xuICAgICAgY29sb3I6IGNvbG9ycy5mb3JlZ3JvdW5kLFxuICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgIHBhZGRpbmc6IHNwYWNpbmcuc21hbGwsXG4gICAgICB0ZXh0RGVjb3JhdGlvbjogJ25vbmUnLFxuICAgICAgJzpob3Zlcic6IHtcbiAgICAgICAgdGV4dERlY29yYXRpb246ICd1bmRlcmxpbmUnXG4gICAgICB9XG4gICAgfVxuICB9LCBwcm9wcykpO1xufTtcblxuZXhwb3J0cy5DZWxsTGluayA9IENlbGxMaW5rO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/CellLink-5308c32b.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/CreateItemDrawer-8e0605de.cjs.dev.js":
/*!*************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/CreateItemDrawer-8e0605de.cjs.dev.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar React = __webpack_require__(/*! react */ \"react\");\nvar isDeepEqual = __webpack_require__(/*! fast-deep-equal */ \"fast-deep-equal\");\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar modals = __webpack_require__(/*! @keystone-ui/modals */ \"@keystone-ui/modals\");\nvar toast = __webpack_require__(/*! @keystone-ui/toast */ \"@keystone-ui/toast\");\nvar loading = __webpack_require__(/*! @keystone-ui/loading */ \"@keystone-ui/loading\");\nvar client = __webpack_require__(/*! @apollo/client */ \"@apollo/client\");\nvar adminUi_context_dist_keystone6CoreAdminUiContext = __webpack_require__(/*! ../admin-ui/context/dist/keystone-6-core-admin-ui-context.cjs.dev.js */ \"../../node_modules/@keystone-6/core/admin-ui/context/dist/keystone-6-core-admin-ui-context.cjs.dev.js\");\nvar Fields = __webpack_require__(/*! ./Fields-6e862a67.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/Fields-6e862a67.cjs.dev.js\");\nvar GraphQLErrorNotice = __webpack_require__(/*! ./GraphQLErrorNotice-6a857a3a.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/GraphQLErrorNotice-6a857a3a.cjs.dev.js\");\n\nfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\nvar isDeepEqual__default = /*#__PURE__*/_interopDefault(isDeepEqual);\n\n/** @jsxRuntime classic */\nfunction CreateItemDrawer(_ref) {\n  let {\n    listKey,\n    onClose,\n    onCreate\n  } = _ref;\n  const {\n    createViewFieldModes\n  } = adminUi_context_dist_keystone6CoreAdminUiContext.useKeystone();\n  const list = adminUi_context_dist_keystone6CoreAdminUiContext.useList(listKey);\n  const toasts = toast.useToasts();\n  const [createItem, {\n    loading: loading$1,\n    error\n  }] = client.useMutation(client.gql`mutation($data: ${list.gqlNames.createInputName}!) {\n      item: ${list.gqlNames.createMutationName}(data: $data) {\n        id\n        label: ${list.labelField}\n    }\n  }`);\n  const [value, setValue] = React.useState(() => {\n    const value = {};\n    Object.keys(list.fields).forEach(fieldPath => {\n      value[fieldPath] = {\n        kind: 'value',\n        value: list.fields[fieldPath].controller.defaultValue\n      };\n    });\n    return value;\n  });\n  const invalidFields = React.useMemo(() => {\n    const invalidFields = new Set();\n    Object.keys(value).forEach(fieldPath => {\n      const val = value[fieldPath].value;\n      const validateFn = list.fields[fieldPath].controller.validate;\n\n      if (validateFn) {\n        const result = validateFn(val);\n\n        if (result === false) {\n          invalidFields.add(fieldPath);\n        }\n      }\n    });\n    return invalidFields;\n  }, [list, value]);\n  const [forceValidation, setForceValidation] = React.useState(false);\n  return core.jsx(modals.Drawer, {\n    title: `Create ${list.singular}`,\n    width: \"wide\",\n    actions: {\n      confirm: {\n        label: `Create ${list.singular}`,\n        loading: loading$1,\n        action: () => {\n          const newForceValidation = invalidFields.size !== 0;\n          setForceValidation(newForceValidation);\n          if (newForceValidation) return;\n          const data = {};\n          Object.keys(list.fields).forEach(fieldPath => {\n            const {\n              controller\n            } = list.fields[fieldPath];\n            const serialized = controller.serialize(value[fieldPath].value);\n\n            if (!isDeepEqual__default[\"default\"](serialized, controller.serialize(controller.defaultValue))) {\n              Object.assign(data, serialized);\n            }\n          });\n          createItem({\n            variables: {\n              data\n            }\n          }).then(_ref2 => {\n            let {\n              data\n            } = _ref2;\n            const label = data.item.label || data.item.id;\n            onCreate({\n              id: data.item.id,\n              label\n            });\n            toasts.addToast({\n              title: label,\n              message: 'Created Successfully',\n              tone: 'positive'\n            });\n          }).catch(() => {});\n        }\n      },\n      cancel: {\n        label: 'Cancel',\n        action: onClose\n      }\n    }\n  }, createViewFieldModes.state === 'error' && core.jsx(GraphQLErrorNotice.GraphQLErrorNotice, {\n    networkError: createViewFieldModes.error instanceof Error ? createViewFieldModes.error : undefined,\n    errors: createViewFieldModes.error instanceof Error ? undefined : createViewFieldModes.error\n  }), createViewFieldModes.state === 'loading' && core.jsx(loading.LoadingDots, {\n    label: \"Loading create form\"\n  }), error && core.jsx(GraphQLErrorNotice.GraphQLErrorNotice, {\n    networkError: error === null || error === void 0 ? void 0 : error.networkError,\n    errors: error === null || error === void 0 ? void 0 : error.graphQLErrors\n  }), core.jsx(core.Box, {\n    paddingY: \"xlarge\"\n  }, core.jsx(Fields.Fields, {\n    fields: list.fields,\n    fieldModes: createViewFieldModes.state === 'loaded' ? createViewFieldModes.lists[list.key] : null,\n    forceValidation: forceValidation,\n    invalidFields: invalidFields,\n    value: value,\n    onChange: React.useCallback(getNewValue => {\n      setValue(oldValues => getNewValue(oldValues));\n    }, [])\n  })));\n}\n\nexports.CreateItemDrawer = CreateItemDrawer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9DcmVhdGVJdGVtRHJhd2VyLThlMDYwNWRlLmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsWUFBWSxtQkFBTyxDQUFDLG9CQUFPO0FBQzNCLGtCQUFrQixtQkFBTyxDQUFDLHdDQUFpQjtBQUMzQyxXQUFXLG1CQUFPLENBQUMsNENBQW1CO0FBQ3RDLGFBQWEsbUJBQU8sQ0FBQyxnREFBcUI7QUFDMUMsWUFBWSxtQkFBTyxDQUFDLDhDQUFvQjtBQUN4QyxjQUFjLG1CQUFPLENBQUMsa0RBQXNCO0FBQzVDLGFBQWEsbUJBQU8sQ0FBQyxzQ0FBZ0I7QUFDckMsdURBQXVELG1CQUFPLENBQUMsbUxBQXNFO0FBQ3JJLGFBQWEsbUJBQU8sQ0FBQyx5R0FBOEI7QUFDbkQseUJBQXlCLG1CQUFPLENBQUMsaUlBQTBDOztBQUUzRSwrQkFBK0IsaUNBQWlDOztBQUVoRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxvREFBb0QsOEJBQThCO0FBQ3JGLGNBQWMsaUNBQWlDO0FBQy9DO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EscUJBQXFCLGNBQWM7QUFDbkM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGNBQWM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFdBQVcsZ0JBQWdCO0FBQzNCO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQSx3QkFBd0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9DcmVhdGVJdGVtRHJhd2VyLThlMDYwNWRlLmNqcy5kZXYuanM/NjQxZCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgaXNEZWVwRXF1YWwgPSByZXF1aXJlKCdmYXN0LWRlZXAtZXF1YWwnKTtcbnZhciBjb3JlID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2NvcmUnKTtcbnZhciBtb2RhbHMgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvbW9kYWxzJyk7XG52YXIgdG9hc3QgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvdG9hc3QnKTtcbnZhciBsb2FkaW5nID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2xvYWRpbmcnKTtcbnZhciBjbGllbnQgPSByZXF1aXJlKCdAYXBvbGxvL2NsaWVudCcpO1xudmFyIGFkbWluVWlfY29udGV4dF9kaXN0X2tleXN0b25lNkNvcmVBZG1pblVpQ29udGV4dCA9IHJlcXVpcmUoJy4uL2FkbWluLXVpL2NvbnRleHQvZGlzdC9rZXlzdG9uZS02LWNvcmUtYWRtaW4tdWktY29udGV4dC5janMuZGV2LmpzJyk7XG52YXIgRmllbGRzID0gcmVxdWlyZSgnLi9GaWVsZHMtNmU4NjJhNjcuY2pzLmRldi5qcycpO1xudmFyIEdyYXBoUUxFcnJvck5vdGljZSA9IHJlcXVpcmUoJy4vR3JhcGhRTEVycm9yTm90aWNlLTZhODU3YTNhLmNqcy5kZXYuanMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BEZWZhdWx0IChlKSB7IHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7ICdkZWZhdWx0JzogZSB9OyB9XG5cbnZhciBpc0RlZXBFcXVhbF9fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9faW50ZXJvcERlZmF1bHQoaXNEZWVwRXF1YWwpO1xuXG4vKiogQGpzeFJ1bnRpbWUgY2xhc3NpYyAqL1xuZnVuY3Rpb24gQ3JlYXRlSXRlbURyYXdlcihfcmVmKSB7XG4gIGxldCB7XG4gICAgbGlzdEtleSxcbiAgICBvbkNsb3NlLFxuICAgIG9uQ3JlYXRlXG4gIH0gPSBfcmVmO1xuICBjb25zdCB7XG4gICAgY3JlYXRlVmlld0ZpZWxkTW9kZXNcbiAgfSA9IGFkbWluVWlfY29udGV4dF9kaXN0X2tleXN0b25lNkNvcmVBZG1pblVpQ29udGV4dC51c2VLZXlzdG9uZSgpO1xuICBjb25zdCBsaXN0ID0gYWRtaW5VaV9jb250ZXh0X2Rpc3Rfa2V5c3RvbmU2Q29yZUFkbWluVWlDb250ZXh0LnVzZUxpc3QobGlzdEtleSk7XG4gIGNvbnN0IHRvYXN0cyA9IHRvYXN0LnVzZVRvYXN0cygpO1xuICBjb25zdCBbY3JlYXRlSXRlbSwge1xuICAgIGxvYWRpbmc6IGxvYWRpbmckMSxcbiAgICBlcnJvclxuICB9XSA9IGNsaWVudC51c2VNdXRhdGlvbihjbGllbnQuZ3FsYG11dGF0aW9uKCRkYXRhOiAke2xpc3QuZ3FsTmFtZXMuY3JlYXRlSW5wdXROYW1lfSEpIHtcbiAgICAgIGl0ZW06ICR7bGlzdC5ncWxOYW1lcy5jcmVhdGVNdXRhdGlvbk5hbWV9KGRhdGE6ICRkYXRhKSB7XG4gICAgICAgIGlkXG4gICAgICAgIGxhYmVsOiAke2xpc3QubGFiZWxGaWVsZH1cbiAgICB9XG4gIH1gKTtcbiAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSBSZWFjdC51c2VTdGF0ZSgoKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSB7fTtcbiAgICBPYmplY3Qua2V5cyhsaXN0LmZpZWxkcykuZm9yRWFjaChmaWVsZFBhdGggPT4ge1xuICAgICAgdmFsdWVbZmllbGRQYXRoXSA9IHtcbiAgICAgICAga2luZDogJ3ZhbHVlJyxcbiAgICAgICAgdmFsdWU6IGxpc3QuZmllbGRzW2ZpZWxkUGF0aF0uY29udHJvbGxlci5kZWZhdWx0VmFsdWVcbiAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9KTtcbiAgY29uc3QgaW52YWxpZEZpZWxkcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGludmFsaWRGaWVsZHMgPSBuZXcgU2V0KCk7XG4gICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goZmllbGRQYXRoID0+IHtcbiAgICAgIGNvbnN0IHZhbCA9IHZhbHVlW2ZpZWxkUGF0aF0udmFsdWU7XG4gICAgICBjb25zdCB2YWxpZGF0ZUZuID0gbGlzdC5maWVsZHNbZmllbGRQYXRoXS5jb250cm9sbGVyLnZhbGlkYXRlO1xuXG4gICAgICBpZiAodmFsaWRhdGVGbikge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZUZuKHZhbCk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBpbnZhbGlkRmllbGRzLmFkZChmaWVsZFBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGludmFsaWRGaWVsZHM7XG4gIH0sIFtsaXN0LCB2YWx1ZV0pO1xuICBjb25zdCBbZm9yY2VWYWxpZGF0aW9uLCBzZXRGb3JjZVZhbGlkYXRpb25dID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICByZXR1cm4gY29yZS5qc3gobW9kYWxzLkRyYXdlciwge1xuICAgIHRpdGxlOiBgQ3JlYXRlICR7bGlzdC5zaW5ndWxhcn1gLFxuICAgIHdpZHRoOiBcIndpZGVcIixcbiAgICBhY3Rpb25zOiB7XG4gICAgICBjb25maXJtOiB7XG4gICAgICAgIGxhYmVsOiBgQ3JlYXRlICR7bGlzdC5zaW5ndWxhcn1gLFxuICAgICAgICBsb2FkaW5nOiBsb2FkaW5nJDEsXG4gICAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG5ld0ZvcmNlVmFsaWRhdGlvbiA9IGludmFsaWRGaWVsZHMuc2l6ZSAhPT0gMDtcbiAgICAgICAgICBzZXRGb3JjZVZhbGlkYXRpb24obmV3Rm9yY2VWYWxpZGF0aW9uKTtcbiAgICAgICAgICBpZiAobmV3Rm9yY2VWYWxpZGF0aW9uKSByZXR1cm47XG4gICAgICAgICAgY29uc3QgZGF0YSA9IHt9O1xuICAgICAgICAgIE9iamVjdC5rZXlzKGxpc3QuZmllbGRzKS5mb3JFYWNoKGZpZWxkUGF0aCA9PiB7XG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXJcbiAgICAgICAgICAgIH0gPSBsaXN0LmZpZWxkc1tmaWVsZFBhdGhdO1xuICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZCA9IGNvbnRyb2xsZXIuc2VyaWFsaXplKHZhbHVlW2ZpZWxkUGF0aF0udmFsdWUpO1xuXG4gICAgICAgICAgICBpZiAoIWlzRGVlcEVxdWFsX19kZWZhdWx0W1wiZGVmYXVsdFwiXShzZXJpYWxpemVkLCBjb250cm9sbGVyLnNlcmlhbGl6ZShjb250cm9sbGVyLmRlZmF1bHRWYWx1ZSkpKSB7XG4gICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oZGF0YSwgc2VyaWFsaXplZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY3JlYXRlSXRlbSh7XG4gICAgICAgICAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgICAgICAgZGF0YVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLnRoZW4oX3JlZjIgPT4ge1xuICAgICAgICAgICAgbGV0IHtcbiAgICAgICAgICAgICAgZGF0YVxuICAgICAgICAgICAgfSA9IF9yZWYyO1xuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkYXRhLml0ZW0ubGFiZWwgfHwgZGF0YS5pdGVtLmlkO1xuICAgICAgICAgICAgb25DcmVhdGUoe1xuICAgICAgICAgICAgICBpZDogZGF0YS5pdGVtLmlkLFxuICAgICAgICAgICAgICBsYWJlbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0b2FzdHMuYWRkVG9hc3Qoe1xuICAgICAgICAgICAgICB0aXRsZTogbGFiZWwsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdDcmVhdGVkIFN1Y2Nlc3NmdWxseScsXG4gICAgICAgICAgICAgIHRvbmU6ICdwb3NpdGl2ZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNhbmNlbDoge1xuICAgICAgICBsYWJlbDogJ0NhbmNlbCcsXG4gICAgICAgIGFjdGlvbjogb25DbG9zZVxuICAgICAgfVxuICAgIH1cbiAgfSwgY3JlYXRlVmlld0ZpZWxkTW9kZXMuc3RhdGUgPT09ICdlcnJvcicgJiYgY29yZS5qc3goR3JhcGhRTEVycm9yTm90aWNlLkdyYXBoUUxFcnJvck5vdGljZSwge1xuICAgIG5ldHdvcmtFcnJvcjogY3JlYXRlVmlld0ZpZWxkTW9kZXMuZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGNyZWF0ZVZpZXdGaWVsZE1vZGVzLmVycm9yIDogdW5kZWZpbmVkLFxuICAgIGVycm9yczogY3JlYXRlVmlld0ZpZWxkTW9kZXMuZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHVuZGVmaW5lZCA6IGNyZWF0ZVZpZXdGaWVsZE1vZGVzLmVycm9yXG4gIH0pLCBjcmVhdGVWaWV3RmllbGRNb2Rlcy5zdGF0ZSA9PT0gJ2xvYWRpbmcnICYmIGNvcmUuanN4KGxvYWRpbmcuTG9hZGluZ0RvdHMsIHtcbiAgICBsYWJlbDogXCJMb2FkaW5nIGNyZWF0ZSBmb3JtXCJcbiAgfSksIGVycm9yICYmIGNvcmUuanN4KEdyYXBoUUxFcnJvck5vdGljZS5HcmFwaFFMRXJyb3JOb3RpY2UsIHtcbiAgICBuZXR3b3JrRXJyb3I6IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5uZXR3b3JrRXJyb3IsXG4gICAgZXJyb3JzOiBlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IuZ3JhcGhRTEVycm9yc1xuICB9KSwgY29yZS5qc3goY29yZS5Cb3gsIHtcbiAgICBwYWRkaW5nWTogXCJ4bGFyZ2VcIlxuICB9LCBjb3JlLmpzeChGaWVsZHMuRmllbGRzLCB7XG4gICAgZmllbGRzOiBsaXN0LmZpZWxkcyxcbiAgICBmaWVsZE1vZGVzOiBjcmVhdGVWaWV3RmllbGRNb2Rlcy5zdGF0ZSA9PT0gJ2xvYWRlZCcgPyBjcmVhdGVWaWV3RmllbGRNb2Rlcy5saXN0c1tsaXN0LmtleV0gOiBudWxsLFxuICAgIGZvcmNlVmFsaWRhdGlvbjogZm9yY2VWYWxpZGF0aW9uLFxuICAgIGludmFsaWRGaWVsZHM6IGludmFsaWRGaWVsZHMsXG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIG9uQ2hhbmdlOiBSZWFjdC51c2VDYWxsYmFjayhnZXROZXdWYWx1ZSA9PiB7XG4gICAgICBzZXRWYWx1ZShvbGRWYWx1ZXMgPT4gZ2V0TmV3VmFsdWUob2xkVmFsdWVzKSk7XG4gICAgfSwgW10pXG4gIH0pKSk7XG59XG5cbmV4cG9ydHMuQ3JlYXRlSXRlbURyYXdlciA9IENyZWF0ZUl0ZW1EcmF3ZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/CreateItemDrawer-8e0605de.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/Fields-6e862a67.cjs.dev.js":
/*!***************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/Fields-6e862a67.cjs.dev.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar _objectSpread = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"../../node_modules/@babel/runtime/helpers/objectSpread2.js\");\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar React = __webpack_require__(/*! react */ \"react\");\n\nconst RenderField = /*#__PURE__*/React.memo(function RenderField(_ref) {\n  let {\n    field,\n    value,\n    autoFocus,\n    forceValidation,\n    onChange\n  } = _ref;\n  return core.jsx(field.views.Field, {\n    field: field.controller,\n    onChange: React.useMemo(() => {\n      if (onChange === undefined) return undefined;\n      return value => {\n        onChange(val => _objectSpread(_objectSpread({}, val), {}, {\n          [field.controller.path]: {\n            kind: 'value',\n            value\n          }\n        }));\n      };\n    }, [onChange, field.controller.path]),\n    value: value,\n    autoFocus: autoFocus,\n    forceValidation: forceValidation\n  });\n});\nfunction Fields(_ref2) {\n  let {\n    fields,\n    value,\n    fieldModes,\n    forceValidation,\n    invalidFields,\n    onChange\n  } = _ref2;\n  const renderedFields = Object.keys(fields).filter(fieldPath => fieldModes === null || fieldModes[fieldPath] !== 'hidden').map((fieldPath, index) => {\n    const field = fields[fieldPath];\n    const val = value[fieldPath];\n    const fieldMode = fieldModes === null ? 'edit' : fieldModes[fieldPath];\n\n    if (val.kind === 'error') {\n      return core.jsx(\"div\", null, field.label, \": \", core.jsx(\"span\", {\n        css: {\n          color: 'red'\n        }\n      }, val.errors[0].message));\n    }\n\n    return core.jsx(RenderField, {\n      key: fieldPath,\n      field: field,\n      value: val.value,\n      forceValidation: forceValidation && invalidFields.has(fieldPath),\n      onChange: fieldMode === 'edit' ? onChange : undefined,\n      autoFocus: index === 0\n    });\n  });\n  return core.jsx(core.Stack, {\n    gap: \"xlarge\"\n  }, renderedFields, renderedFields.length === 0 && 'There are no fields that you can read or edit');\n}\n\nexports.Fields = Fields;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9GaWVsZHMtNmU4NjJhNjcuY2pzLmRldi5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixvQkFBb0IsbUJBQU8sQ0FBQyx3R0FBc0M7QUFDbEUsV0FBVyxtQkFBTyxDQUFDLDRDQUFtQjtBQUN0QyxZQUFZLG1CQUFPLENBQUMsb0JBQU87O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsVUFBVTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQSxjQUFjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2Rpc3QvRmllbGRzLTZlODYyYTY3LmNqcy5kZXYuanM/ZmU3OSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBfb2JqZWN0U3ByZWFkID0gcmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWQyJyk7XG52YXIgY29yZSA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9jb3JlJyk7XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG5jb25zdCBSZW5kZXJGaWVsZCA9IC8qI19fUFVSRV9fKi9SZWFjdC5tZW1vKGZ1bmN0aW9uIFJlbmRlckZpZWxkKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBmaWVsZCxcbiAgICB2YWx1ZSxcbiAgICBhdXRvRm9jdXMsXG4gICAgZm9yY2VWYWxpZGF0aW9uLFxuICAgIG9uQ2hhbmdlXG4gIH0gPSBfcmVmO1xuICByZXR1cm4gY29yZS5qc3goZmllbGQudmlld3MuRmllbGQsIHtcbiAgICBmaWVsZDogZmllbGQuY29udHJvbGxlcixcbiAgICBvbkNoYW5nZTogUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICBpZiAob25DaGFuZ2UgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiB2YWx1ZSA9PiB7XG4gICAgICAgIG9uQ2hhbmdlKHZhbCA9PiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbCksIHt9LCB7XG4gICAgICAgICAgW2ZpZWxkLmNvbnRyb2xsZXIucGF0aF06IHtcbiAgICAgICAgICAgIGtpbmQ6ICd2YWx1ZScsXG4gICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgfTtcbiAgICB9LCBbb25DaGFuZ2UsIGZpZWxkLmNvbnRyb2xsZXIucGF0aF0pLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBhdXRvRm9jdXM6IGF1dG9Gb2N1cyxcbiAgICBmb3JjZVZhbGlkYXRpb246IGZvcmNlVmFsaWRhdGlvblxuICB9KTtcbn0pO1xuZnVuY3Rpb24gRmllbGRzKF9yZWYyKSB7XG4gIGxldCB7XG4gICAgZmllbGRzLFxuICAgIHZhbHVlLFxuICAgIGZpZWxkTW9kZXMsXG4gICAgZm9yY2VWYWxpZGF0aW9uLFxuICAgIGludmFsaWRGaWVsZHMsXG4gICAgb25DaGFuZ2VcbiAgfSA9IF9yZWYyO1xuICBjb25zdCByZW5kZXJlZEZpZWxkcyA9IE9iamVjdC5rZXlzKGZpZWxkcykuZmlsdGVyKGZpZWxkUGF0aCA9PiBmaWVsZE1vZGVzID09PSBudWxsIHx8IGZpZWxkTW9kZXNbZmllbGRQYXRoXSAhPT0gJ2hpZGRlbicpLm1hcCgoZmllbGRQYXRoLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGZpZWxkID0gZmllbGRzW2ZpZWxkUGF0aF07XG4gICAgY29uc3QgdmFsID0gdmFsdWVbZmllbGRQYXRoXTtcbiAgICBjb25zdCBmaWVsZE1vZGUgPSBmaWVsZE1vZGVzID09PSBudWxsID8gJ2VkaXQnIDogZmllbGRNb2Rlc1tmaWVsZFBhdGhdO1xuXG4gICAgaWYgKHZhbC5raW5kID09PSAnZXJyb3InKSB7XG4gICAgICByZXR1cm4gY29yZS5qc3goXCJkaXZcIiwgbnVsbCwgZmllbGQubGFiZWwsIFwiOiBcIiwgY29yZS5qc3goXCJzcGFuXCIsIHtcbiAgICAgICAgY3NzOiB7XG4gICAgICAgICAgY29sb3I6ICdyZWQnXG4gICAgICAgIH1cbiAgICAgIH0sIHZhbC5lcnJvcnNbMF0ubWVzc2FnZSkpO1xuICAgIH1cblxuICAgIHJldHVybiBjb3JlLmpzeChSZW5kZXJGaWVsZCwge1xuICAgICAga2V5OiBmaWVsZFBhdGgsXG4gICAgICBmaWVsZDogZmllbGQsXG4gICAgICB2YWx1ZTogdmFsLnZhbHVlLFxuICAgICAgZm9yY2VWYWxpZGF0aW9uOiBmb3JjZVZhbGlkYXRpb24gJiYgaW52YWxpZEZpZWxkcy5oYXMoZmllbGRQYXRoKSxcbiAgICAgIG9uQ2hhbmdlOiBmaWVsZE1vZGUgPT09ICdlZGl0JyA/IG9uQ2hhbmdlIDogdW5kZWZpbmVkLFxuICAgICAgYXV0b0ZvY3VzOiBpbmRleCA9PT0gMFxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGNvcmUuanN4KGNvcmUuU3RhY2ssIHtcbiAgICBnYXA6IFwieGxhcmdlXCJcbiAgfSwgcmVuZGVyZWRGaWVsZHMsIHJlbmRlcmVkRmllbGRzLmxlbmd0aCA9PT0gMCAmJiAnVGhlcmUgYXJlIG5vIGZpZWxkcyB0aGF0IHlvdSBjYW4gcmVhZCBvciBlZGl0Jyk7XG59XG5cbmV4cG9ydHMuRmllbGRzID0gRmllbGRzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/Fields-6e862a67.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/GraphQLErrorNotice-6a857a3a.cjs.dev.js":
/*!***************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/GraphQLErrorNotice-6a857a3a.cjs.dev.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar notice = __webpack_require__(/*! @keystone-ui/notice */ \"@keystone-ui/notice\");\nvar React = __webpack_require__(/*! react */ \"react\");\n\nfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefault(React);\n\nfunction GraphQLErrorNotice(_ref) {\n  let {\n    errors,\n    networkError\n  } = _ref;\n\n  if (networkError) {\n    return /*#__PURE__*/React__default[\"default\"].createElement(notice.Notice, {\n      tone: \"negative\",\n      marginBottom: \"large\"\n    }, networkError.message);\n  }\n\n  if (errors !== null && errors !== void 0 && errors.length) {\n    return /*#__PURE__*/React__default[\"default\"].createElement(core.Stack, {\n      gap: \"small\",\n      marginBottom: \"large\"\n    }, errors.map(err => /*#__PURE__*/React__default[\"default\"].createElement(notice.Notice, {\n      tone: \"negative\"\n    }, err.message)));\n  }\n\n  return null;\n}\n\nexports.GraphQLErrorNotice = GraphQLErrorNotice;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9HcmFwaFFMRXJyb3JOb3RpY2UtNmE4NTdhM2EuY2pzLmRldi5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixXQUFXLG1CQUFPLENBQUMsNENBQW1CO0FBQ3RDLGFBQWEsbUJBQU8sQ0FBQyxnREFBcUI7QUFDMUMsWUFBWSxtQkFBTyxDQUFDLG9CQUFPOztBQUUzQiwrQkFBK0IsaUNBQWlDOztBQUVoRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQSwwQkFBMEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9HcmFwaFFMRXJyb3JOb3RpY2UtNmE4NTdhM2EuY2pzLmRldi5qcz8xMDVhIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGNvcmUgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvY29yZScpO1xudmFyIG5vdGljZSA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9ub3RpY2UnKTtcbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wRGVmYXVsdCAoZSkgeyByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyAnZGVmYXVsdCc6IGUgfTsgfVxuXG52YXIgUmVhY3RfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0KFJlYWN0KTtcblxuZnVuY3Rpb24gR3JhcGhRTEVycm9yTm90aWNlKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBlcnJvcnMsXG4gICAgbmV0d29ya0Vycm9yXG4gIH0gPSBfcmVmO1xuXG4gIGlmIChuZXR3b3JrRXJyb3IpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KG5vdGljZS5Ob3RpY2UsIHtcbiAgICAgIHRvbmU6IFwibmVnYXRpdmVcIixcbiAgICAgIG1hcmdpbkJvdHRvbTogXCJsYXJnZVwiXG4gICAgfSwgbmV0d29ya0Vycm9yLm1lc3NhZ2UpO1xuICB9XG5cbiAgaWYgKGVycm9ycyAhPT0gbnVsbCAmJiBlcnJvcnMgIT09IHZvaWQgMCAmJiBlcnJvcnMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChjb3JlLlN0YWNrLCB7XG4gICAgICBnYXA6IFwic21hbGxcIixcbiAgICAgIG1hcmdpbkJvdHRvbTogXCJsYXJnZVwiXG4gICAgfSwgZXJyb3JzLm1hcChlcnIgPT4gLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KG5vdGljZS5Ob3RpY2UsIHtcbiAgICAgIHRvbmU6IFwibmVnYXRpdmVcIlxuICAgIH0sIGVyci5tZXNzYWdlKSkpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydHMuR3JhcGhRTEVycm9yTm90aWNlID0gR3JhcGhRTEVycm9yTm90aWNlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/GraphQLErrorNotice-6a857a3a.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/SignoutButton-081410d6.cjs.dev.js":
/*!**********************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/SignoutButton-081410d6.cjs.dev.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar button = __webpack_require__(/*! @keystone-ui/button */ \"@keystone-ui/button\");\nvar React = __webpack_require__(/*! react */ \"react\");\nvar client = __webpack_require__(/*! @apollo/client */ \"@apollo/client\");\n\n/** @jsxRuntime classic */\nconst END_SESSION = client.gql`\n  mutation EndSession {\n    endSession\n  }\n`;\n\nconst SignoutButton = _ref => {\n  let {\n    children\n  } = _ref;\n  const [endSession, {\n    loading,\n    data\n  }] = client.useMutation(END_SESSION);\n  React.useEffect(() => {\n    if (data !== null && data !== void 0 && data.endSession) {\n      window.location.reload();\n    }\n  }, [data]);\n  return core.jsx(button.Button, {\n    size: \"small\",\n    isLoading: loading,\n    onClick: () => endSession()\n  }, children || 'Sign out');\n};\n\nexports.SignoutButton = SignoutButton;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9TaWdub3V0QnV0dG9uLTA4MTQxMGQ2LmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsV0FBVyxtQkFBTyxDQUFDLDRDQUFtQjtBQUN0QyxhQUFhLG1CQUFPLENBQUMsZ0RBQXFCO0FBQzFDLFlBQVksbUJBQU8sQ0FBQyxvQkFBTztBQUMzQixhQUFhLG1CQUFPLENBQUMsc0NBQWdCOztBQUVyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQSxxQkFBcUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9TaWdub3V0QnV0dG9uLTA4MTQxMGQ2LmNqcy5kZXYuanM/NmY4NCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBjb3JlID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2NvcmUnKTtcbnZhciBidXR0b24gPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvYnV0dG9uJyk7XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGNsaWVudCA9IHJlcXVpcmUoJ0BhcG9sbG8vY2xpZW50Jyk7XG5cbi8qKiBAanN4UnVudGltZSBjbGFzc2ljICovXG5jb25zdCBFTkRfU0VTU0lPTiA9IGNsaWVudC5ncWxgXG4gIG11dGF0aW9uIEVuZFNlc3Npb24ge1xuICAgIGVuZFNlc3Npb25cbiAgfVxuYDtcblxuY29uc3QgU2lnbm91dEJ1dHRvbiA9IF9yZWYgPT4ge1xuICBsZXQge1xuICAgIGNoaWxkcmVuXG4gIH0gPSBfcmVmO1xuICBjb25zdCBbZW5kU2Vzc2lvbiwge1xuICAgIGxvYWRpbmcsXG4gICAgZGF0YVxuICB9XSA9IGNsaWVudC51c2VNdXRhdGlvbihFTkRfU0VTU0lPTik7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGRhdGEgIT09IG51bGwgJiYgZGF0YSAhPT0gdm9pZCAwICYmIGRhdGEuZW5kU2Vzc2lvbikge1xuICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH1cbiAgfSwgW2RhdGFdKTtcbiAgcmV0dXJuIGNvcmUuanN4KGJ1dHRvbi5CdXR0b24sIHtcbiAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgaXNMb2FkaW5nOiBsb2FkaW5nLFxuICAgIG9uQ2xpY2s6ICgpID0+IGVuZFNlc3Npb24oKVxuICB9LCBjaGlsZHJlbiB8fCAnU2lnbiBvdXQnKTtcbn07XG5cbmV4cG9ydHMuU2lnbm91dEJ1dHRvbiA9IFNpZ25vdXRCdXR0b247XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/SignoutButton-081410d6.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/admin-meta-graphql-9f9a9c11.cjs.dev.js":
/*!***************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/admin-meta-graphql-9f9a9c11.cjs.dev.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar client = __webpack_require__(/*! @apollo/client */ \"@apollo/client\");\n\nconst staticAdminMetaQuery = client.gql`\n  query StaticAdminMeta {\n    keystone {\n      __typename\n      adminMeta {\n        __typename\n        enableSignout\n        enableSessionItem\n        lists {\n          __typename\n          key\n          itemQueryName\n          listQueryName\n          initialSort {\n            __typename\n            field\n            direction\n          }\n          path\n          label\n          singular\n          plural\n          description\n          initialColumns\n          pageSize\n          labelField\n          fields {\n            __typename\n            path\n            label\n            fieldMeta\n            viewsIndex\n            customViewsIndex\n            search\n            itemView {\n              fieldMode\n            }\n          }\n        }\n      }\n    }\n  }\n`; // generated by https://graphql-code-generator.com with these options:\n// generates:\n//   types.ts:\n//     plugins:\n//       - typescript-operations:\n//           namingConvention: keep\n//       - typescript:\n//           enumsAsTypes: true\n//           nonOptionalTypename: true\n//           namingConvention: keep\n//           noExport: true\n//           avoidOptionals: true\n//           scalars:\n//             JSON: JSONValue\n\nexports.staticAdminMetaQuery = staticAdminMetaQuery;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9hZG1pbi1tZXRhLWdyYXBocWwtOWY5YTljMTEuY2pzLmRldi5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixhQUFhLG1CQUFPLENBQUMsc0NBQWdCOztBQUVyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNEJBQTRCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2Rpc3QvYWRtaW4tbWV0YS1ncmFwaHFsLTlmOWE5YzExLmNqcy5kZXYuanM/YjRiZCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBjbGllbnQgPSByZXF1aXJlKCdAYXBvbGxvL2NsaWVudCcpO1xuXG5jb25zdCBzdGF0aWNBZG1pbk1ldGFRdWVyeSA9IGNsaWVudC5ncWxgXG4gIHF1ZXJ5IFN0YXRpY0FkbWluTWV0YSB7XG4gICAga2V5c3RvbmUge1xuICAgICAgX190eXBlbmFtZVxuICAgICAgYWRtaW5NZXRhIHtcbiAgICAgICAgX190eXBlbmFtZVxuICAgICAgICBlbmFibGVTaWdub3V0XG4gICAgICAgIGVuYWJsZVNlc3Npb25JdGVtXG4gICAgICAgIGxpc3RzIHtcbiAgICAgICAgICBfX3R5cGVuYW1lXG4gICAgICAgICAga2V5XG4gICAgICAgICAgaXRlbVF1ZXJ5TmFtZVxuICAgICAgICAgIGxpc3RRdWVyeU5hbWVcbiAgICAgICAgICBpbml0aWFsU29ydCB7XG4gICAgICAgICAgICBfX3R5cGVuYW1lXG4gICAgICAgICAgICBmaWVsZFxuICAgICAgICAgICAgZGlyZWN0aW9uXG4gICAgICAgICAgfVxuICAgICAgICAgIHBhdGhcbiAgICAgICAgICBsYWJlbFxuICAgICAgICAgIHNpbmd1bGFyXG4gICAgICAgICAgcGx1cmFsXG4gICAgICAgICAgZGVzY3JpcHRpb25cbiAgICAgICAgICBpbml0aWFsQ29sdW1uc1xuICAgICAgICAgIHBhZ2VTaXplXG4gICAgICAgICAgbGFiZWxGaWVsZFxuICAgICAgICAgIGZpZWxkcyB7XG4gICAgICAgICAgICBfX3R5cGVuYW1lXG4gICAgICAgICAgICBwYXRoXG4gICAgICAgICAgICBsYWJlbFxuICAgICAgICAgICAgZmllbGRNZXRhXG4gICAgICAgICAgICB2aWV3c0luZGV4XG4gICAgICAgICAgICBjdXN0b21WaWV3c0luZGV4XG4gICAgICAgICAgICBzZWFyY2hcbiAgICAgICAgICAgIGl0ZW1WaWV3IHtcbiAgICAgICAgICAgICAgZmllbGRNb2RlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5gOyAvLyBnZW5lcmF0ZWQgYnkgaHR0cHM6Ly9ncmFwaHFsLWNvZGUtZ2VuZXJhdG9yLmNvbSB3aXRoIHRoZXNlIG9wdGlvbnM6XG4vLyBnZW5lcmF0ZXM6XG4vLyAgIHR5cGVzLnRzOlxuLy8gICAgIHBsdWdpbnM6XG4vLyAgICAgICAtIHR5cGVzY3JpcHQtb3BlcmF0aW9uczpcbi8vICAgICAgICAgICBuYW1pbmdDb252ZW50aW9uOiBrZWVwXG4vLyAgICAgICAtIHR5cGVzY3JpcHQ6XG4vLyAgICAgICAgICAgZW51bXNBc1R5cGVzOiB0cnVlXG4vLyAgICAgICAgICAgbm9uT3B0aW9uYWxUeXBlbmFtZTogdHJ1ZVxuLy8gICAgICAgICAgIG5hbWluZ0NvbnZlbnRpb246IGtlZXBcbi8vICAgICAgICAgICBub0V4cG9ydDogdHJ1ZVxuLy8gICAgICAgICAgIGF2b2lkT3B0aW9uYWxzOiB0cnVlXG4vLyAgICAgICAgICAgc2NhbGFyczpcbi8vICAgICAgICAgICAgIEpTT046IEpTT05WYWx1ZVxuXG5leHBvcnRzLnN0YXRpY0FkbWluTWV0YVF1ZXJ5ID0gc3RhdGljQWRtaW5NZXRhUXVlcnk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/admin-meta-graphql-9f9a9c11.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/core-11c9ffea.cjs.dev.js":
/*!*************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/core-11c9ffea.cjs.dev.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\n// TODO: don't duplicate this between here and packages/keystone/ListTypes/list.js\nfunction getGqlNames(_ref) {\n  let {\n    listKey,\n    pluralGraphQLName\n  } = _ref;\n  const lowerPluralName = pluralGraphQLName.slice(0, 1).toLowerCase() + pluralGraphQLName.slice(1);\n  const lowerSingularName = listKey.slice(0, 1).toLowerCase() + listKey.slice(1);\n  return {\n    outputTypeName: listKey,\n    itemQueryName: lowerSingularName,\n    listQueryName: lowerPluralName,\n    listQueryCountName: `${lowerPluralName}Count`,\n    listOrderName: `${listKey}OrderByInput`,\n    deleteMutationName: `delete${listKey}`,\n    updateMutationName: `update${listKey}`,\n    createMutationName: `create${listKey}`,\n    deleteManyMutationName: `delete${pluralGraphQLName}`,\n    updateManyMutationName: `update${pluralGraphQLName}`,\n    createManyMutationName: `create${pluralGraphQLName}`,\n    whereInputName: `${listKey}WhereInput`,\n    whereUniqueInputName: `${listKey}WhereUniqueInput`,\n    updateInputName: `${listKey}UpdateInput`,\n    createInputName: `${listKey}CreateInput`,\n    updateManyInputName: `${listKey}UpdateArgs`,\n    relateToManyForCreateInputName: `${listKey}RelateToManyForCreateInput`,\n    relateToManyForUpdateInputName: `${listKey}RelateToManyForUpdateInput`,\n    relateToOneForCreateInputName: `${listKey}RelateToOneForCreateInput`,\n    relateToOneForUpdateInputName: `${listKey}RelateToOneForUpdateInput`\n  };\n}\n\nexports.getGqlNames = getGqlNames;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9jb3JlLTExYzlmZmVhLmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0JBQWdCO0FBQzNDLHNCQUFzQixRQUFRO0FBQzlCLGlDQUFpQyxRQUFRO0FBQ3pDLGlDQUFpQyxRQUFRO0FBQ3pDLGlDQUFpQyxRQUFRO0FBQ3pDLHFDQUFxQyxrQkFBa0I7QUFDdkQscUNBQXFDLGtCQUFrQjtBQUN2RCxxQ0FBcUMsa0JBQWtCO0FBQ3ZELHVCQUF1QixRQUFRO0FBQy9CLDZCQUE2QixRQUFRO0FBQ3JDLHdCQUF3QixRQUFRO0FBQ2hDLHdCQUF3QixRQUFRO0FBQ2hDLDRCQUE0QixRQUFRO0FBQ3BDLHVDQUF1QyxRQUFRO0FBQy9DLHVDQUF1QyxRQUFRO0FBQy9DLHNDQUFzQyxRQUFRO0FBQzlDLHNDQUFzQyxRQUFRO0FBQzlDO0FBQ0E7O0FBRUEsbUJBQW1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2Rpc3QvY29yZS0xMWM5ZmZlYS5janMuZGV2LmpzP2YwNjAiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vLyBUT0RPOiBkb24ndCBkdXBsaWNhdGUgdGhpcyBiZXR3ZWVuIGhlcmUgYW5kIHBhY2thZ2VzL2tleXN0b25lL0xpc3RUeXBlcy9saXN0LmpzXG5mdW5jdGlvbiBnZXRHcWxOYW1lcyhfcmVmKSB7XG4gIGxldCB7XG4gICAgbGlzdEtleSxcbiAgICBwbHVyYWxHcmFwaFFMTmFtZVxuICB9ID0gX3JlZjtcbiAgY29uc3QgbG93ZXJQbHVyYWxOYW1lID0gcGx1cmFsR3JhcGhRTE5hbWUuc2xpY2UoMCwgMSkudG9Mb3dlckNhc2UoKSArIHBsdXJhbEdyYXBoUUxOYW1lLnNsaWNlKDEpO1xuICBjb25zdCBsb3dlclNpbmd1bGFyTmFtZSA9IGxpc3RLZXkuc2xpY2UoMCwgMSkudG9Mb3dlckNhc2UoKSArIGxpc3RLZXkuc2xpY2UoMSk7XG4gIHJldHVybiB7XG4gICAgb3V0cHV0VHlwZU5hbWU6IGxpc3RLZXksXG4gICAgaXRlbVF1ZXJ5TmFtZTogbG93ZXJTaW5ndWxhck5hbWUsXG4gICAgbGlzdFF1ZXJ5TmFtZTogbG93ZXJQbHVyYWxOYW1lLFxuICAgIGxpc3RRdWVyeUNvdW50TmFtZTogYCR7bG93ZXJQbHVyYWxOYW1lfUNvdW50YCxcbiAgICBsaXN0T3JkZXJOYW1lOiBgJHtsaXN0S2V5fU9yZGVyQnlJbnB1dGAsXG4gICAgZGVsZXRlTXV0YXRpb25OYW1lOiBgZGVsZXRlJHtsaXN0S2V5fWAsXG4gICAgdXBkYXRlTXV0YXRpb25OYW1lOiBgdXBkYXRlJHtsaXN0S2V5fWAsXG4gICAgY3JlYXRlTXV0YXRpb25OYW1lOiBgY3JlYXRlJHtsaXN0S2V5fWAsXG4gICAgZGVsZXRlTWFueU11dGF0aW9uTmFtZTogYGRlbGV0ZSR7cGx1cmFsR3JhcGhRTE5hbWV9YCxcbiAgICB1cGRhdGVNYW55TXV0YXRpb25OYW1lOiBgdXBkYXRlJHtwbHVyYWxHcmFwaFFMTmFtZX1gLFxuICAgIGNyZWF0ZU1hbnlNdXRhdGlvbk5hbWU6IGBjcmVhdGUke3BsdXJhbEdyYXBoUUxOYW1lfWAsXG4gICAgd2hlcmVJbnB1dE5hbWU6IGAke2xpc3RLZXl9V2hlcmVJbnB1dGAsXG4gICAgd2hlcmVVbmlxdWVJbnB1dE5hbWU6IGAke2xpc3RLZXl9V2hlcmVVbmlxdWVJbnB1dGAsXG4gICAgdXBkYXRlSW5wdXROYW1lOiBgJHtsaXN0S2V5fVVwZGF0ZUlucHV0YCxcbiAgICBjcmVhdGVJbnB1dE5hbWU6IGAke2xpc3RLZXl9Q3JlYXRlSW5wdXRgLFxuICAgIHVwZGF0ZU1hbnlJbnB1dE5hbWU6IGAke2xpc3RLZXl9VXBkYXRlQXJnc2AsXG4gICAgcmVsYXRlVG9NYW55Rm9yQ3JlYXRlSW5wdXROYW1lOiBgJHtsaXN0S2V5fVJlbGF0ZVRvTWFueUZvckNyZWF0ZUlucHV0YCxcbiAgICByZWxhdGVUb01hbnlGb3JVcGRhdGVJbnB1dE5hbWU6IGAke2xpc3RLZXl9UmVsYXRlVG9NYW55Rm9yVXBkYXRlSW5wdXRgLFxuICAgIHJlbGF0ZVRvT25lRm9yQ3JlYXRlSW5wdXROYW1lOiBgJHtsaXN0S2V5fVJlbGF0ZVRvT25lRm9yQ3JlYXRlSW5wdXRgLFxuICAgIHJlbGF0ZVRvT25lRm9yVXBkYXRlSW5wdXROYW1lOiBgJHtsaXN0S2V5fVJlbGF0ZVRvT25lRm9yVXBkYXRlSW5wdXRgXG4gIH07XG59XG5cbmV4cG9ydHMuZ2V0R3FsTmFtZXMgPSBnZXRHcWxOYW1lcztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/core-11c9ffea.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/dataGetter-9fbe2f8e.cjs.dev.js":
/*!*******************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/dataGetter-9fbe2f8e.cjs.dev.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nfunction dataGetterWithNoErrors(data, path) {\n  return {\n    data,\n    path,\n\n    get(field) {\n      var _data$field;\n\n      return dataGetterWithNoErrors((_data$field = data === null || data === void 0 ? void 0 : data[field]) !== null && _data$field !== void 0 ? _data$field : null, path.concat(field));\n    }\n\n  };\n}\n\nfunction dataGetterWithErrors(data, errors, path) {\n  return {\n    data,\n    errors,\n    path,\n\n    get(field) {\n      var _data$field2;\n\n      const newPath = path.concat(field);\n      const newItem = (_data$field2 = data === null || data === void 0 ? void 0 : data[field]) !== null && _data$field2 !== void 0 ? _data$field2 : null;\n      let errorsForField = errors.filter(error => {\n        if (error.path === undefined) {\n          return true;\n        }\n\n        const errorPath = error.path;\n        return newPath.every((value, index) => errorPath[index] === undefined || errorPath[index] === value);\n      });\n\n      if (errorsForField.length) {\n        return dataGetterWithErrors(newItem, errors, newPath);\n      }\n\n      return dataGetterWithNoErrors(newItem, newPath);\n    }\n\n  };\n}\n\nfunction makeDataGetter(data, errors) {\n  if (errors !== null && errors !== void 0 && errors.length) {\n    return dataGetterWithErrors(data, errors, []);\n  }\n\n  return dataGetterWithNoErrors(data, []);\n}\n\nexports.makeDataGetter = makeDataGetter;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9kYXRhR2V0dGVyLTlmYmUyZjhlLmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsc0JBQXNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2Rpc3QvZGF0YUdldHRlci05ZmJlMmY4ZS5janMuZGV2LmpzP2UxZWIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBkYXRhR2V0dGVyV2l0aE5vRXJyb3JzKGRhdGEsIHBhdGgpIHtcbiAgcmV0dXJuIHtcbiAgICBkYXRhLFxuICAgIHBhdGgsXG5cbiAgICBnZXQoZmllbGQpIHtcbiAgICAgIHZhciBfZGF0YSRmaWVsZDtcblxuICAgICAgcmV0dXJuIGRhdGFHZXR0ZXJXaXRoTm9FcnJvcnMoKF9kYXRhJGZpZWxkID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhW2ZpZWxkXSkgIT09IG51bGwgJiYgX2RhdGEkZmllbGQgIT09IHZvaWQgMCA/IF9kYXRhJGZpZWxkIDogbnVsbCwgcGF0aC5jb25jYXQoZmllbGQpKTtcbiAgICB9XG5cbiAgfTtcbn1cblxuZnVuY3Rpb24gZGF0YUdldHRlcldpdGhFcnJvcnMoZGF0YSwgZXJyb3JzLCBwYXRoKSB7XG4gIHJldHVybiB7XG4gICAgZGF0YSxcbiAgICBlcnJvcnMsXG4gICAgcGF0aCxcblxuICAgIGdldChmaWVsZCkge1xuICAgICAgdmFyIF9kYXRhJGZpZWxkMjtcblxuICAgICAgY29uc3QgbmV3UGF0aCA9IHBhdGguY29uY2F0KGZpZWxkKTtcbiAgICAgIGNvbnN0IG5ld0l0ZW0gPSAoX2RhdGEkZmllbGQyID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhW2ZpZWxkXSkgIT09IG51bGwgJiYgX2RhdGEkZmllbGQyICE9PSB2b2lkIDAgPyBfZGF0YSRmaWVsZDIgOiBudWxsO1xuICAgICAgbGV0IGVycm9yc0ZvckZpZWxkID0gZXJyb3JzLmZpbHRlcihlcnJvciA9PiB7XG4gICAgICAgIGlmIChlcnJvci5wYXRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVycm9yUGF0aCA9IGVycm9yLnBhdGg7XG4gICAgICAgIHJldHVybiBuZXdQYXRoLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IGVycm9yUGF0aFtpbmRleF0gPT09IHVuZGVmaW5lZCB8fCBlcnJvclBhdGhbaW5kZXhdID09PSB2YWx1ZSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGVycm9yc0ZvckZpZWxkLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZGF0YUdldHRlcldpdGhFcnJvcnMobmV3SXRlbSwgZXJyb3JzLCBuZXdQYXRoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGFHZXR0ZXJXaXRoTm9FcnJvcnMobmV3SXRlbSwgbmV3UGF0aCk7XG4gICAgfVxuXG4gIH07XG59XG5cbmZ1bmN0aW9uIG1ha2VEYXRhR2V0dGVyKGRhdGEsIGVycm9ycykge1xuICBpZiAoZXJyb3JzICE9PSBudWxsICYmIGVycm9ycyAhPT0gdm9pZCAwICYmIGVycm9ycy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZGF0YUdldHRlcldpdGhFcnJvcnMoZGF0YSwgZXJyb3JzLCBbXSk7XG4gIH1cblxuICByZXR1cm4gZGF0YUdldHRlcldpdGhOb0Vycm9ycyhkYXRhLCBbXSk7XG59XG5cbmV4cG9ydHMubWFrZURhdGFHZXR0ZXIgPSBtYWtlRGF0YUdldHRlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/dataGetter-9fbe2f8e.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/getRootGraphQLFieldsFromFieldController-47699a0d.cjs.dev.js":
/*!************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/getRootGraphQLFieldsFromFieldController-47699a0d.cjs.dev.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar weakMemoize = __webpack_require__(/*! @emotion/weak-memoize */ \"@emotion/weak-memoize\");\nvar graphql = __webpack_require__(/*! graphql */ \"graphql\");\n\nfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\nvar weakMemoize__default = /*#__PURE__*/_interopDefault(weakMemoize);\n\nfunction extractRootFields(selectedFields, selectionSet) {\n  selectionSet.selections.forEach(selection => {\n    if (selection.kind === 'Field') {\n      selectedFields.add(selection.alias ? selection.alias.value : selection.name.value);\n    }\n\n    if (selection.kind === 'InlineFragment') {\n      extractRootFields(selectedFields, selection.selectionSet);\n    } // FragmentSpread will never happen for the use cases of getRootFieldsFromSelection\n\n  });\n}\n\nconst getRootGraphQLFieldsFromFieldController = weakMemoize__default[\"default\"](controller => {\n  const ast = graphql.parse(`fragment X on Y {\n  id\n  ${controller.graphqlSelection}\n  }`);\n  const selectedFields = new Set();\n  const fragmentNode = ast.definitions[0];\n  extractRootFields(selectedFields, fragmentNode.selectionSet);\n  return [...selectedFields];\n});\n\nexports.getRootGraphQLFieldsFromFieldController = getRootGraphQLFieldsFromFieldController;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9nZXRSb290R3JhcGhRTEZpZWxkc0Zyb21GaWVsZENvbnRyb2xsZXItNDc2OTlhMGQuY2pzLmRldi5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0IsbUJBQU8sQ0FBQyxvREFBdUI7QUFDakQsY0FBYyxtQkFBTyxDQUFDLHdCQUFTOztBQUUvQiwrQkFBK0IsaUNBQWlDOztBQUVoRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNOztBQUVOLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCwrQ0FBK0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9nZXRSb290R3JhcGhRTEZpZWxkc0Zyb21GaWVsZENvbnRyb2xsZXItNDc2OTlhMGQuY2pzLmRldi5qcz9hYWQ2Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIHdlYWtNZW1vaXplID0gcmVxdWlyZSgnQGVtb3Rpb24vd2Vhay1tZW1vaXplJyk7XG52YXIgZ3JhcGhxbCA9IHJlcXVpcmUoJ2dyYXBocWwnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BEZWZhdWx0IChlKSB7IHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7ICdkZWZhdWx0JzogZSB9OyB9XG5cbnZhciB3ZWFrTWVtb2l6ZV9fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9faW50ZXJvcERlZmF1bHQod2Vha01lbW9pemUpO1xuXG5mdW5jdGlvbiBleHRyYWN0Um9vdEZpZWxkcyhzZWxlY3RlZEZpZWxkcywgc2VsZWN0aW9uU2V0KSB7XG4gIHNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmZvckVhY2goc2VsZWN0aW9uID0+IHtcbiAgICBpZiAoc2VsZWN0aW9uLmtpbmQgPT09ICdGaWVsZCcpIHtcbiAgICAgIHNlbGVjdGVkRmllbGRzLmFkZChzZWxlY3Rpb24uYWxpYXMgPyBzZWxlY3Rpb24uYWxpYXMudmFsdWUgOiBzZWxlY3Rpb24ubmFtZS52YWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKHNlbGVjdGlvbi5raW5kID09PSAnSW5saW5lRnJhZ21lbnQnKSB7XG4gICAgICBleHRyYWN0Um9vdEZpZWxkcyhzZWxlY3RlZEZpZWxkcywgc2VsZWN0aW9uLnNlbGVjdGlvblNldCk7XG4gICAgfSAvLyBGcmFnbWVudFNwcmVhZCB3aWxsIG5ldmVyIGhhcHBlbiBmb3IgdGhlIHVzZSBjYXNlcyBvZiBnZXRSb290RmllbGRzRnJvbVNlbGVjdGlvblxuXG4gIH0pO1xufVxuXG5jb25zdCBnZXRSb290R3JhcGhRTEZpZWxkc0Zyb21GaWVsZENvbnRyb2xsZXIgPSB3ZWFrTWVtb2l6ZV9fZGVmYXVsdFtcImRlZmF1bHRcIl0oY29udHJvbGxlciA9PiB7XG4gIGNvbnN0IGFzdCA9IGdyYXBocWwucGFyc2UoYGZyYWdtZW50IFggb24gWSB7XG4gIGlkXG4gICR7Y29udHJvbGxlci5ncmFwaHFsU2VsZWN0aW9ufVxuICB9YCk7XG4gIGNvbnN0IHNlbGVjdGVkRmllbGRzID0gbmV3IFNldCgpO1xuICBjb25zdCBmcmFnbWVudE5vZGUgPSBhc3QuZGVmaW5pdGlvbnNbMF07XG4gIGV4dHJhY3RSb290RmllbGRzKHNlbGVjdGVkRmllbGRzLCBmcmFnbWVudE5vZGUuc2VsZWN0aW9uU2V0KTtcbiAgcmV0dXJuIFsuLi5zZWxlY3RlZEZpZWxkc107XG59KTtcblxuZXhwb3J0cy5nZXRSb290R3JhcGhRTEZpZWxkc0Zyb21GaWVsZENvbnRyb2xsZXIgPSBnZXRSb290R3JhcGhRTEZpZWxkc0Zyb21GaWVsZENvbnRyb2xsZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/getRootGraphQLFieldsFromFieldController-47699a0d.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/graphql-ts-schema-2a220120.cjs.dev.js":
/*!**************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/graphql-ts-schema-2a220120.cjs.dev.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar graphqlTsSchema = __webpack_require__(/*! @graphql-ts/schema */ \"@graphql-ts/schema\");\nvar graphqlTypeJson = __webpack_require__(/*! graphql-type-json */ \"graphql-type-json\");\nvar GraphQLUpload = __webpack_require__(/*! graphql-upload/public/GraphQLUpload.js */ \"graphql-upload/public/GraphQLUpload.js\");\nvar graphql = __webpack_require__(/*! graphql */ \"graphql\");\nvar Decimal$1 = __webpack_require__(/*! decimal.js */ \"decimal.js\");\nvar apiWithoutContext = __webpack_require__(/*! @graphql-ts/schema/api-without-context */ \"@graphql-ts/schema/api-without-context\");\nvar extend = __webpack_require__(/*! @graphql-ts/extend */ \"@graphql-ts/extend\");\nvar apiWithContext = __webpack_require__(/*! @graphql-ts/schema/api-with-context */ \"@graphql-ts/schema/api-with-context\");\n\nfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () { return e[k]; }\n        });\n      }\n    });\n  }\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\n\nvar graphqlTsSchema__namespace = /*#__PURE__*/_interopNamespace(graphqlTsSchema);\nvar GraphQLUpload__default = /*#__PURE__*/_interopDefault(GraphQLUpload);\n\nconst JSON = graphqlTsSchema__namespace.graphql.scalar(graphqlTypeJson.GraphQLJSON);\nconst Upload = graphqlTsSchema__namespace.graphql.scalar(GraphQLUpload__default[\"default\"]); // - Decimal.js throws on invalid inputs\n// - Decimal.js can represent +Infinity and -Infinity, these aren't values in Postgres' decimal,\n//   NaN is but Prisma doesn't support it\n//   .isFinite refers to +Infinity, -Infinity and NaN\n\nconst Decimal = graphqlTsSchema__namespace.graphql.scalar(new graphql.GraphQLScalarType({\n  name: 'Decimal',\n\n  serialize(value) {\n    if (!Decimal$1.Decimal.isDecimal(value)) {\n      throw new graphql.GraphQLError(`unexpected value provided to Decimal scalar: ${value}`);\n    }\n\n    if (value.scaleToPrint !== undefined) {\n      return value.toFixed(value.scaleToPrint);\n    }\n\n    return value.toString();\n  },\n\n  parseLiteral(value) {\n    if (value.kind !== 'StringValue') {\n      throw new graphql.GraphQLError('Decimal only accepts values as strings');\n    }\n\n    let decimal = new Decimal$1.Decimal(value.value);\n\n    if (!decimal.isFinite()) {\n      throw new graphql.GraphQLError('Decimal values must be finite');\n    }\n\n    return decimal;\n  },\n\n  parseValue(value) {\n    if (Decimal$1.Decimal.isDecimal(value)) {\n      if (!value.isFinite()) {\n        throw new graphql.GraphQLError('Decimal values must be finite');\n      }\n\n      return value;\n    }\n\n    if (typeof value !== 'string') {\n      throw new graphql.GraphQLError('Decimal only accepts values as strings');\n    }\n\n    let decimal = new Decimal$1.Decimal(value);\n\n    if (!decimal.isFinite()) {\n      throw new graphql.GraphQLError('Decimal values must be finite');\n    }\n\n    return decimal;\n  }\n\n})); // from https://github.com/excitement-engineer/graphql-iso-date/blob/master/src/utils/validator.js#L121\n// this is also what prisma uses https://github.com/prisma/prisma/blob/20b58fe65d581bcb43c0d5c28d4b89cabc2d99b2/packages/client/src/runtime/utils/common.ts#L126-L128\n\nconst RFC_3339_REGEX = /^(\\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60))(\\.\\d{1,})?(([Z])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))$/;\n\nfunction parseDate(input) {\n  if (!RFC_3339_REGEX.test(input)) {\n    throw new graphql.GraphQLError('DateTime scalars must be in the form of a full ISO 8601 date-time string');\n  }\n\n  const parsed = new Date(input);\n\n  if (isNaN(parsed.valueOf())) {\n    throw new graphql.GraphQLError('DateTime scalars must be in the form of a full ISO 8601 date-time string');\n  }\n\n  return parsed;\n}\n\nconst DateTime = graphqlTsSchema__namespace.graphql.scalar(new graphql.GraphQLScalarType({\n  name: 'DateTime',\n  specifiedByUrl: 'https://datatracker.ietf.org/doc/html/rfc3339#section-5.6',\n\n  serialize(value) {\n    if (!(value instanceof Date) || isNaN(value.valueOf())) {\n      throw new graphql.GraphQLError(`unexpected value provided to DateTime scalar: ${value}`);\n    }\n\n    return value.toISOString();\n  },\n\n  parseLiteral(value) {\n    if (value.kind !== 'StringValue') {\n      throw new graphql.GraphQLError('DateTime only accepts values as strings');\n    }\n\n    return parseDate(value.value);\n  },\n\n  parseValue(value) {\n    if (value instanceof Date) {\n      return value;\n    }\n\n    if (typeof value !== 'string') {\n      throw new graphql.GraphQLError('DateTime only accepts values as strings');\n    }\n\n    return parseDate(value);\n  }\n\n}));\n\nvar graphqlBoundToKeystoneContext = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  JSON: JSON,\n  Upload: Upload,\n  Decimal: Decimal,\n  DateTime: DateTime,\n  Boolean: apiWithoutContext.Boolean,\n  Float: apiWithoutContext.Float,\n  ID: apiWithoutContext.ID,\n  Int: apiWithoutContext.Int,\n  String: apiWithoutContext.String,\n  'enum': apiWithoutContext[\"enum\"],\n  enumValues: apiWithoutContext.enumValues,\n  arg: apiWithoutContext.arg,\n  inputObject: apiWithoutContext.inputObject,\n  list: apiWithoutContext.list,\n  nonNull: apiWithoutContext.nonNull,\n  scalar: apiWithoutContext.scalar,\n  bindGraphQLSchemaAPIToContext: graphqlTsSchema.bindGraphQLSchemaAPIToContext,\n  extend: extend.extend,\n  wrap: extend.wrap,\n  field: apiWithContext.field,\n  fields: apiWithContext.fields,\n  'interface': apiWithContext[\"interface\"],\n  interfaceField: apiWithContext.interfaceField,\n  object: apiWithContext.object,\n  union: apiWithContext.union\n});\n\nexports.DateTime = DateTime;\nexports.Decimal = Decimal;\nexports.JSON = JSON;\nexports.Upload = Upload;\nexports.graphqlBoundToKeystoneContext = graphqlBoundToKeystoneContext;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9ncmFwaHFsLXRzLXNjaGVtYS0yYTIyMDEyMC5janMuZGV2LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLHNCQUFzQixtQkFBTyxDQUFDLDhDQUFvQjtBQUNsRCxzQkFBc0IsbUJBQU8sQ0FBQyw0Q0FBbUI7QUFDakQsb0JBQW9CLG1CQUFPLENBQUMsc0ZBQXdDO0FBQ3BFLGNBQWMsbUJBQU8sQ0FBQyx3QkFBUztBQUMvQixnQkFBZ0IsbUJBQU8sQ0FBQyw4QkFBWTtBQUNwQyx3QkFBd0IsbUJBQU8sQ0FBQyxzRkFBd0M7QUFDeEUsYUFBYSxtQkFBTyxDQUFDLDhDQUFvQjtBQUN6QyxxQkFBcUIsbUJBQU8sQ0FBQyxnRkFBcUM7O0FBRWxFLCtCQUErQixpQ0FBaUM7O0FBRWhFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QixTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDZGQUE2RjtBQUM3RjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUZBQXFGLE1BQU07QUFDM0Y7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQyxJQUFJO0FBQ0w7O0FBRUEsNkJBQTZCLEVBQUUsZ0dBQWdHLEdBQUc7O0FBRWxJO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0ZBQXNGLE1BQU07QUFDNUY7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsZ0JBQWdCO0FBQ2hCLGVBQWU7QUFDZixZQUFZO0FBQ1osY0FBYztBQUNkLHFDQUFxQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvQGtleXN0b25lLTYvY29yZS9kaXN0L2dyYXBocWwtdHMtc2NoZW1hLTJhMjIwMTIwLmNqcy5kZXYuanM/MWVkMiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBncmFwaHFsVHNTY2hlbWEgPSByZXF1aXJlKCdAZ3JhcGhxbC10cy9zY2hlbWEnKTtcbnZhciBncmFwaHFsVHlwZUpzb24gPSByZXF1aXJlKCdncmFwaHFsLXR5cGUtanNvbicpO1xudmFyIEdyYXBoUUxVcGxvYWQgPSByZXF1aXJlKCdncmFwaHFsLXVwbG9hZC9wdWJsaWMvR3JhcGhRTFVwbG9hZC5qcycpO1xudmFyIGdyYXBocWwgPSByZXF1aXJlKCdncmFwaHFsJyk7XG52YXIgRGVjaW1hbCQxID0gcmVxdWlyZSgnZGVjaW1hbC5qcycpO1xudmFyIGFwaVdpdGhvdXRDb250ZXh0ID0gcmVxdWlyZSgnQGdyYXBocWwtdHMvc2NoZW1hL2FwaS13aXRob3V0LWNvbnRleHQnKTtcbnZhciBleHRlbmQgPSByZXF1aXJlKCdAZ3JhcGhxbC10cy9leHRlbmQnKTtcbnZhciBhcGlXaXRoQ29udGV4dCA9IHJlcXVpcmUoJ0BncmFwaHFsLXRzL3NjaGVtYS9hcGktd2l0aC1jb250ZXh0Jyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wRGVmYXVsdCAoZSkgeyByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyAnZGVmYXVsdCc6IGUgfTsgfVxuXG5mdW5jdGlvbiBfaW50ZXJvcE5hbWVzcGFjZShlKSB7XG4gIGlmIChlICYmIGUuX19lc01vZHVsZSkgcmV0dXJuIGU7XG4gIHZhciBuID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgaWYgKGUpIHtcbiAgICBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICBpZiAoayAhPT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgIHZhciBkID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCBrKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIGssIGQuZ2V0ID8gZCA6IHtcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZVtrXTsgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBuW1wiZGVmYXVsdFwiXSA9IGU7XG4gIHJldHVybiBPYmplY3QuZnJlZXplKG4pO1xufVxuXG52YXIgZ3JhcGhxbFRzU2NoZW1hX19uYW1lc3BhY2UgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BOYW1lc3BhY2UoZ3JhcGhxbFRzU2NoZW1hKTtcbnZhciBHcmFwaFFMVXBsb2FkX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdChHcmFwaFFMVXBsb2FkKTtcblxuY29uc3QgSlNPTiA9IGdyYXBocWxUc1NjaGVtYV9fbmFtZXNwYWNlLmdyYXBocWwuc2NhbGFyKGdyYXBocWxUeXBlSnNvbi5HcmFwaFFMSlNPTik7XG5jb25zdCBVcGxvYWQgPSBncmFwaHFsVHNTY2hlbWFfX25hbWVzcGFjZS5ncmFwaHFsLnNjYWxhcihHcmFwaFFMVXBsb2FkX19kZWZhdWx0W1wiZGVmYXVsdFwiXSk7IC8vIC0gRGVjaW1hbC5qcyB0aHJvd3Mgb24gaW52YWxpZCBpbnB1dHNcbi8vIC0gRGVjaW1hbC5qcyBjYW4gcmVwcmVzZW50ICtJbmZpbml0eSBhbmQgLUluZmluaXR5LCB0aGVzZSBhcmVuJ3QgdmFsdWVzIGluIFBvc3RncmVzJyBkZWNpbWFsLFxuLy8gICBOYU4gaXMgYnV0IFByaXNtYSBkb2Vzbid0IHN1cHBvcnQgaXRcbi8vICAgLmlzRmluaXRlIHJlZmVycyB0byArSW5maW5pdHksIC1JbmZpbml0eSBhbmQgTmFOXG5cbmNvbnN0IERlY2ltYWwgPSBncmFwaHFsVHNTY2hlbWFfX25hbWVzcGFjZS5ncmFwaHFsLnNjYWxhcihuZXcgZ3JhcGhxbC5HcmFwaFFMU2NhbGFyVHlwZSh7XG4gIG5hbWU6ICdEZWNpbWFsJyxcblxuICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICBpZiAoIURlY2ltYWwkMS5EZWNpbWFsLmlzRGVjaW1hbCh2YWx1ZSkpIHtcbiAgICAgIHRocm93IG5ldyBncmFwaHFsLkdyYXBoUUxFcnJvcihgdW5leHBlY3RlZCB2YWx1ZSBwcm92aWRlZCB0byBEZWNpbWFsIHNjYWxhcjogJHt2YWx1ZX1gKTtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUuc2NhbGVUb1ByaW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB2YWx1ZS50b0ZpeGVkKHZhbHVlLnNjYWxlVG9QcmludCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gIH0sXG5cbiAgcGFyc2VMaXRlcmFsKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlLmtpbmQgIT09ICdTdHJpbmdWYWx1ZScpIHtcbiAgICAgIHRocm93IG5ldyBncmFwaHFsLkdyYXBoUUxFcnJvcignRGVjaW1hbCBvbmx5IGFjY2VwdHMgdmFsdWVzIGFzIHN0cmluZ3MnKTtcbiAgICB9XG5cbiAgICBsZXQgZGVjaW1hbCA9IG5ldyBEZWNpbWFsJDEuRGVjaW1hbCh2YWx1ZS52YWx1ZSk7XG5cbiAgICBpZiAoIWRlY2ltYWwuaXNGaW5pdGUoKSkge1xuICAgICAgdGhyb3cgbmV3IGdyYXBocWwuR3JhcGhRTEVycm9yKCdEZWNpbWFsIHZhbHVlcyBtdXN0IGJlIGZpbml0ZScpO1xuICAgIH1cblxuICAgIHJldHVybiBkZWNpbWFsO1xuICB9LFxuXG4gIHBhcnNlVmFsdWUodmFsdWUpIHtcbiAgICBpZiAoRGVjaW1hbCQxLkRlY2ltYWwuaXNEZWNpbWFsKHZhbHVlKSkge1xuICAgICAgaWYgKCF2YWx1ZS5pc0Zpbml0ZSgpKSB7XG4gICAgICAgIHRocm93IG5ldyBncmFwaHFsLkdyYXBoUUxFcnJvcignRGVjaW1hbCB2YWx1ZXMgbXVzdCBiZSBmaW5pdGUnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgZ3JhcGhxbC5HcmFwaFFMRXJyb3IoJ0RlY2ltYWwgb25seSBhY2NlcHRzIHZhbHVlcyBhcyBzdHJpbmdzJyk7XG4gICAgfVxuXG4gICAgbGV0IGRlY2ltYWwgPSBuZXcgRGVjaW1hbCQxLkRlY2ltYWwodmFsdWUpO1xuXG4gICAgaWYgKCFkZWNpbWFsLmlzRmluaXRlKCkpIHtcbiAgICAgIHRocm93IG5ldyBncmFwaHFsLkdyYXBoUUxFcnJvcignRGVjaW1hbCB2YWx1ZXMgbXVzdCBiZSBmaW5pdGUnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVjaW1hbDtcbiAgfVxuXG59KSk7IC8vIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2V4Y2l0ZW1lbnQtZW5naW5lZXIvZ3JhcGhxbC1pc28tZGF0ZS9ibG9iL21hc3Rlci9zcmMvdXRpbHMvdmFsaWRhdG9yLmpzI0wxMjFcbi8vIHRoaXMgaXMgYWxzbyB3aGF0IHByaXNtYSB1c2VzIGh0dHBzOi8vZ2l0aHViLmNvbS9wcmlzbWEvcHJpc21hL2Jsb2IvMjBiNThmZTY1ZDU4MWJjYjQzYzBkNWMyOGQ0Yjg5Y2FiYzJkOTliMi9wYWNrYWdlcy9jbGllbnQvc3JjL3J1bnRpbWUvdXRpbHMvY29tbW9uLnRzI0wxMjYtTDEyOFxuXG5jb25zdCBSRkNfMzMzOV9SRUdFWCA9IC9eKFxcZHs0fS0oMFsxLTldfDFbMDEyXSktKDBbMS05XXxbMTJdWzAtOV18M1swMV0pVChbMDFdWzAtOV18MlswLTNdKTooWzAtNV1bMC05XSk6KFswLTVdWzAtOV18NjApKShcXC5cXGR7MSx9KT8oKFtaXSl8KFsrfC1dKFswMV1bMC05XXwyWzAtM10pOlswLTVdWzAtOV0pKSQvO1xuXG5mdW5jdGlvbiBwYXJzZURhdGUoaW5wdXQpIHtcbiAgaWYgKCFSRkNfMzMzOV9SRUdFWC50ZXN0KGlucHV0KSkge1xuICAgIHRocm93IG5ldyBncmFwaHFsLkdyYXBoUUxFcnJvcignRGF0ZVRpbWUgc2NhbGFycyBtdXN0IGJlIGluIHRoZSBmb3JtIG9mIGEgZnVsbCBJU08gODYwMSBkYXRlLXRpbWUgc3RyaW5nJyk7XG4gIH1cblxuICBjb25zdCBwYXJzZWQgPSBuZXcgRGF0ZShpbnB1dCk7XG5cbiAgaWYgKGlzTmFOKHBhcnNlZC52YWx1ZU9mKCkpKSB7XG4gICAgdGhyb3cgbmV3IGdyYXBocWwuR3JhcGhRTEVycm9yKCdEYXRlVGltZSBzY2FsYXJzIG11c3QgYmUgaW4gdGhlIGZvcm0gb2YgYSBmdWxsIElTTyA4NjAxIGRhdGUtdGltZSBzdHJpbmcnKTtcbiAgfVxuXG4gIHJldHVybiBwYXJzZWQ7XG59XG5cbmNvbnN0IERhdGVUaW1lID0gZ3JhcGhxbFRzU2NoZW1hX19uYW1lc3BhY2UuZ3JhcGhxbC5zY2FsYXIobmV3IGdyYXBocWwuR3JhcGhRTFNjYWxhclR5cGUoe1xuICBuYW1lOiAnRGF0ZVRpbWUnLFxuICBzcGVjaWZpZWRCeVVybDogJ2h0dHBzOi8vZGF0YXRyYWNrZXIuaWV0Zi5vcmcvZG9jL2h0bWwvcmZjMzMzOSNzZWN0aW9uLTUuNicsXG5cbiAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB8fCBpc05hTih2YWx1ZS52YWx1ZU9mKCkpKSB7XG4gICAgICB0aHJvdyBuZXcgZ3JhcGhxbC5HcmFwaFFMRXJyb3IoYHVuZXhwZWN0ZWQgdmFsdWUgcHJvdmlkZWQgdG8gRGF0ZVRpbWUgc2NhbGFyOiAke3ZhbHVlfWApO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZS50b0lTT1N0cmluZygpO1xuICB9LFxuXG4gIHBhcnNlTGl0ZXJhbCh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZS5raW5kICE9PSAnU3RyaW5nVmFsdWUnKSB7XG4gICAgICB0aHJvdyBuZXcgZ3JhcGhxbC5HcmFwaFFMRXJyb3IoJ0RhdGVUaW1lIG9ubHkgYWNjZXB0cyB2YWx1ZXMgYXMgc3RyaW5ncycpO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJzZURhdGUodmFsdWUudmFsdWUpO1xuICB9LFxuXG4gIHBhcnNlVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBncmFwaHFsLkdyYXBoUUxFcnJvcignRGF0ZVRpbWUgb25seSBhY2NlcHRzIHZhbHVlcyBhcyBzdHJpbmdzJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnNlRGF0ZSh2YWx1ZSk7XG4gIH1cblxufSkpO1xuXG52YXIgZ3JhcGhxbEJvdW5kVG9LZXlzdG9uZUNvbnRleHQgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgSlNPTjogSlNPTixcbiAgVXBsb2FkOiBVcGxvYWQsXG4gIERlY2ltYWw6IERlY2ltYWwsXG4gIERhdGVUaW1lOiBEYXRlVGltZSxcbiAgQm9vbGVhbjogYXBpV2l0aG91dENvbnRleHQuQm9vbGVhbixcbiAgRmxvYXQ6IGFwaVdpdGhvdXRDb250ZXh0LkZsb2F0LFxuICBJRDogYXBpV2l0aG91dENvbnRleHQuSUQsXG4gIEludDogYXBpV2l0aG91dENvbnRleHQuSW50LFxuICBTdHJpbmc6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZyxcbiAgJ2VudW0nOiBhcGlXaXRob3V0Q29udGV4dFtcImVudW1cIl0sXG4gIGVudW1WYWx1ZXM6IGFwaVdpdGhvdXRDb250ZXh0LmVudW1WYWx1ZXMsXG4gIGFyZzogYXBpV2l0aG91dENvbnRleHQuYXJnLFxuICBpbnB1dE9iamVjdDogYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3QsXG4gIGxpc3Q6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QsXG4gIG5vbk51bGw6IGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwsXG4gIHNjYWxhcjogYXBpV2l0aG91dENvbnRleHQuc2NhbGFyLFxuICBiaW5kR3JhcGhRTFNjaGVtYUFQSVRvQ29udGV4dDogZ3JhcGhxbFRzU2NoZW1hLmJpbmRHcmFwaFFMU2NoZW1hQVBJVG9Db250ZXh0LFxuICBleHRlbmQ6IGV4dGVuZC5leHRlbmQsXG4gIHdyYXA6IGV4dGVuZC53cmFwLFxuICBmaWVsZDogYXBpV2l0aENvbnRleHQuZmllbGQsXG4gIGZpZWxkczogYXBpV2l0aENvbnRleHQuZmllbGRzLFxuICAnaW50ZXJmYWNlJzogYXBpV2l0aENvbnRleHRbXCJpbnRlcmZhY2VcIl0sXG4gIGludGVyZmFjZUZpZWxkOiBhcGlXaXRoQ29udGV4dC5pbnRlcmZhY2VGaWVsZCxcbiAgb2JqZWN0OiBhcGlXaXRoQ29udGV4dC5vYmplY3QsXG4gIHVuaW9uOiBhcGlXaXRoQ29udGV4dC51bmlvblxufSk7XG5cbmV4cG9ydHMuRGF0ZVRpbWUgPSBEYXRlVGltZTtcbmV4cG9ydHMuRGVjaW1hbCA9IERlY2ltYWw7XG5leHBvcnRzLkpTT04gPSBKU09OO1xuZXhwb3J0cy5VcGxvYWQgPSBVcGxvYWQ7XG5leHBvcnRzLmdyYXBocWxCb3VuZFRvS2V5c3RvbmVDb250ZXh0ID0gZ3JhcGhxbEJvdW5kVG9LZXlzdG9uZUNvbnRleHQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/graphql-ts-schema-2a220120.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/sqlite-a2385a81.cjs.dev.js":
/*!***************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/sqlite-a2385a81.cjs.dev.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar graphqlTsSchema = __webpack_require__(/*! ./graphql-ts-schema-2a220120.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/graphql-ts-schema-2a220120.cjs.dev.js\");\nvar _objectSpread = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"../../node_modules/@babel/runtime/helpers/objectSpread2.js\");\n__webpack_require__(/*! decimal.js */ \"decimal.js\");\n__webpack_require__(/*! @graphql-tools/schema */ \"@graphql-tools/schema\");\nvar apiWithoutContext = __webpack_require__(/*! @graphql-ts/schema/api-without-context */ \"@graphql-ts/schema/api-without-context\");\n\nconst orderDirectionEnum = apiWithoutContext[\"enum\"]({\n  name: 'OrderDirection',\n  values: apiWithoutContext.enumValues(['asc', 'desc'])\n});\nconst QueryMode = apiWithoutContext[\"enum\"]({\n  name: 'QueryMode',\n  values: apiWithoutContext.enumValues(['default', 'insensitive'])\n});\n// fieldType(dbField)(fieldInfo) => { ...fieldInfo, dbField };\nfunction fieldType(dbField) {\n  return function (graphQLInfo) {\n    return _objectSpread(_objectSpread({}, graphQLInfo), {}, {\n      dbField\n    });\n  };\n}\n\n// (even though, yes, having EnumFilter by defined as EnumNullableFilter<Enum>, would be the same type but names would show up differently in editors for example)\n\nfunction enumFilters(enumType) {\n  const optional = apiWithoutContext.inputObject({\n    name: `${enumType.graphQLType.name}NullableFilter`,\n    fields: () => ({\n      equals: apiWithoutContext.arg({\n        type: enumType\n      }),\n      in: apiWithoutContext.arg({\n        type: apiWithoutContext.list(apiWithoutContext.nonNull(enumType))\n      }),\n      notIn: apiWithoutContext.arg({\n        type: apiWithoutContext.list(apiWithoutContext.nonNull(enumType))\n      }),\n      not: apiWithoutContext.arg({\n        type: optional\n      })\n    })\n  });\n  const required = apiWithoutContext.inputObject({\n    name: `${enumType.graphQLType.name}Filter`,\n    fields: () => ({\n      equals: apiWithoutContext.arg({\n        type: enumType\n      }),\n      in: apiWithoutContext.arg({\n        type: apiWithoutContext.list(apiWithoutContext.nonNull(enumType))\n      }),\n      notIn: apiWithoutContext.arg({\n        type: apiWithoutContext.list(apiWithoutContext.nonNull(enumType))\n      }),\n      not: apiWithoutContext.arg({\n        type: optional\n      })\n    })\n  });\n  const many = apiWithoutContext.inputObject({\n    name: `${enumType.graphQLType.name}NullableListFilter`,\n    fields: () => ({\n      // can be null\n      equals: apiWithoutContext.arg({\n        type: apiWithoutContext.list(apiWithoutContext.nonNull(enumType))\n      }),\n      // can be null\n      has: apiWithoutContext.arg({\n        type: enumType\n      }),\n      hasEvery: apiWithoutContext.arg({\n        type: apiWithoutContext.list(apiWithoutContext.nonNull(enumType))\n      }),\n      hasSome: apiWithoutContext.arg({\n        type: apiWithoutContext.list(apiWithoutContext.nonNull(enumType))\n      }),\n      isEmpty: apiWithoutContext.arg({\n        type: enumType\n      })\n    })\n  });\n  return {\n    optional,\n    required,\n    many\n  };\n}\n\n// Do not manually modify this file, it is automatically generated by the package at /prisma-utils in this repo.\nconst StringNullableFilter$1 = apiWithoutContext.inputObject({\n  name: 'StringNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    // can be null\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    // can be null\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    contains: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    startsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    endsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    mode: apiWithoutContext.arg({\n      type: QueryMode\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: NestedStringNullableFilter$1\n    })\n  })\n});\nconst NestedStringNullableFilter$1 = apiWithoutContext.inputObject({\n  name: 'NestedStringNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    // can be null\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    // can be null\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    contains: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    startsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    endsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: NestedStringNullableFilter$1\n    })\n  })\n});\nconst StringFilter$1 = apiWithoutContext.inputObject({\n  name: 'StringFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    contains: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    startsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    endsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    mode: apiWithoutContext.arg({\n      type: QueryMode\n    }),\n    not: apiWithoutContext.arg({\n      type: NestedStringFilter$1\n    })\n  })\n});\nconst NestedStringFilter$1 = apiWithoutContext.inputObject({\n  name: 'NestedStringFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    contains: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    startsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    endsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    not: apiWithoutContext.arg({\n      type: NestedStringFilter$1\n    })\n  })\n});\nconst StringNullableListFilter = apiWithoutContext.inputObject({\n  name: 'StringNullableListFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    // can be null\n    has: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    hasEvery: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    hasSome: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    isEmpty: apiWithoutContext.arg({\n      type: apiWithoutContext.Boolean\n    })\n  })\n});\nconst BoolNullableFilter$1 = apiWithoutContext.inputObject({\n  name: 'BooleanNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.Boolean\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: BoolNullableFilter$1\n    })\n  })\n});\nconst BoolFilter$1 = apiWithoutContext.inputObject({\n  name: 'BooleanFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.Boolean\n    }),\n    not: apiWithoutContext.arg({\n      type: BoolFilter$1\n    })\n  })\n});\nconst BoolNullableListFilter = apiWithoutContext.inputObject({\n  name: 'BooleanNullableListFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Boolean))\n    }),\n    // can be null\n    has: apiWithoutContext.arg({\n      type: apiWithoutContext.Boolean\n    }),\n    hasEvery: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Boolean))\n    }),\n    hasSome: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Boolean))\n    }),\n    isEmpty: apiWithoutContext.arg({\n      type: apiWithoutContext.Boolean\n    })\n  })\n});\nconst IntNullableFilter$1 = apiWithoutContext.inputObject({\n  name: 'IntNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    // can be null\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Int))\n    }),\n    // can be null\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Int))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: IntNullableFilter$1\n    })\n  })\n});\nconst IntFilter$1 = apiWithoutContext.inputObject({\n  name: 'IntFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Int))\n    }),\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Int))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    not: apiWithoutContext.arg({\n      type: IntFilter$1\n    })\n  })\n});\nconst IntNullableListFilter = apiWithoutContext.inputObject({\n  name: 'IntNullableListFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Int))\n    }),\n    // can be null\n    has: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    hasEvery: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Int))\n    }),\n    hasSome: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Int))\n    }),\n    isEmpty: apiWithoutContext.arg({\n      type: apiWithoutContext.Boolean\n    })\n  })\n});\nconst FloatNullableFilter$1 = apiWithoutContext.inputObject({\n  name: 'FloatNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    // can be null\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Float))\n    }),\n    // can be null\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Float))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: FloatNullableFilter$1\n    })\n  })\n});\nconst FloatFilter$1 = apiWithoutContext.inputObject({\n  name: 'FloatFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Float))\n    }),\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Float))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    not: apiWithoutContext.arg({\n      type: FloatFilter$1\n    })\n  })\n});\nconst FloatNullableListFilter = apiWithoutContext.inputObject({\n  name: 'FloatNullableListFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Float))\n    }),\n    // can be null\n    has: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    hasEvery: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Float))\n    }),\n    hasSome: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Float))\n    }),\n    isEmpty: apiWithoutContext.arg({\n      type: apiWithoutContext.Boolean\n    })\n  })\n});\nconst DateTimeNullableFilter$1 = apiWithoutContext.inputObject({\n  name: 'DateTimeNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    // can be null\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.DateTime))\n    }),\n    // can be null\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.DateTime))\n    }),\n    lt: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    lte: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    gt: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    gte: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: DateTimeNullableFilter$1\n    })\n  })\n});\nconst DateTimeFilter$1 = apiWithoutContext.inputObject({\n  name: 'DateTimeFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.DateTime))\n    }),\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.DateTime))\n    }),\n    lt: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    lte: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    gt: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    gte: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    not: apiWithoutContext.arg({\n      type: DateTimeFilter$1\n    })\n  })\n});\nconst DateTimeNullableListFilter = apiWithoutContext.inputObject({\n  name: 'DateTimeNullableListFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.DateTime))\n    }),\n    // can be null\n    has: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    hasEvery: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.DateTime))\n    }),\n    hasSome: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.DateTime))\n    }),\n    isEmpty: apiWithoutContext.arg({\n      type: apiWithoutContext.Boolean\n    })\n  })\n});\nconst DecimalNullableFilter$1 = apiWithoutContext.inputObject({\n  name: 'DecimalNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    // can be null\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.Decimal))\n    }),\n    // can be null\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.Decimal))\n    }),\n    lt: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    lte: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    gt: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    gte: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: DecimalNullableFilter$1\n    })\n  })\n});\nconst DecimalFilter$1 = apiWithoutContext.inputObject({\n  name: 'DecimalFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.Decimal))\n    }),\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.Decimal))\n    }),\n    lt: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    lte: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    gt: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    gte: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    not: apiWithoutContext.arg({\n      type: DecimalFilter$1\n    })\n  })\n});\nconst DecimalNullableListFilter = apiWithoutContext.inputObject({\n  name: 'DecimalNullableListFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.Decimal))\n    }),\n    // can be null\n    has: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    hasEvery: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.Decimal))\n    }),\n    hasSome: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.Decimal))\n    }),\n    isEmpty: apiWithoutContext.arg({\n      type: apiWithoutContext.Boolean\n    })\n  })\n});\nconst String$1 = {\n  optional: StringNullableFilter$1,\n  required: StringFilter$1,\n  many: StringNullableListFilter\n};\nconst Boolean$1 = {\n  optional: BoolNullableFilter$1,\n  required: BoolFilter$1,\n  many: BoolNullableListFilter\n};\nconst Int$1 = {\n  optional: IntNullableFilter$1,\n  required: IntFilter$1,\n  many: IntNullableListFilter\n};\nconst Float$1 = {\n  optional: FloatNullableFilter$1,\n  required: FloatFilter$1,\n  many: FloatNullableListFilter\n};\nconst DateTime$1 = {\n  optional: DateTimeNullableFilter$1,\n  required: DateTimeFilter$1,\n  many: DateTimeNullableListFilter\n};\nconst Decimal$1 = {\n  optional: DecimalNullableFilter$1,\n  required: DecimalFilter$1,\n  many: DecimalNullableListFilter\n};\n\nvar postgresql = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  String: String$1,\n  Boolean: Boolean$1,\n  Int: Int$1,\n  Float: Float$1,\n  DateTime: DateTime$1,\n  Decimal: Decimal$1,\n  'enum': enumFilters\n});\n\n// Do not manually modify this file, it is automatically generated by the package at /prisma-utils in this repo.\nconst StringNullableFilter = apiWithoutContext.inputObject({\n  name: 'StringNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    // can be null\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    // can be null\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    contains: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    startsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    endsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: NestedStringNullableFilter\n    })\n  })\n});\nconst NestedStringNullableFilter = apiWithoutContext.inputObject({\n  name: 'NestedStringNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    // can be null\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    // can be null\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    contains: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    startsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    endsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: NestedStringNullableFilter\n    })\n  })\n});\nconst StringFilter = apiWithoutContext.inputObject({\n  name: 'StringFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    contains: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    startsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    endsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    not: apiWithoutContext.arg({\n      type: NestedStringFilter\n    })\n  })\n});\nconst NestedStringFilter = apiWithoutContext.inputObject({\n  name: 'NestedStringFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.String))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    contains: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    startsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    endsWith: apiWithoutContext.arg({\n      type: apiWithoutContext.String\n    }),\n    not: apiWithoutContext.arg({\n      type: NestedStringFilter\n    })\n  })\n});\nconst BoolNullableFilter = apiWithoutContext.inputObject({\n  name: 'BooleanNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.Boolean\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: BoolNullableFilter\n    })\n  })\n});\nconst BoolFilter = apiWithoutContext.inputObject({\n  name: 'BooleanFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.Boolean\n    }),\n    not: apiWithoutContext.arg({\n      type: BoolFilter\n    })\n  })\n});\nconst IntNullableFilter = apiWithoutContext.inputObject({\n  name: 'IntNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    // can be null\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Int))\n    }),\n    // can be null\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Int))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: IntNullableFilter\n    })\n  })\n});\nconst IntFilter = apiWithoutContext.inputObject({\n  name: 'IntFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Int))\n    }),\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Int))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.Int\n    }),\n    not: apiWithoutContext.arg({\n      type: IntFilter\n    })\n  })\n});\nconst FloatNullableFilter = apiWithoutContext.inputObject({\n  name: 'FloatNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    // can be null\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Float))\n    }),\n    // can be null\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Float))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: FloatNullableFilter\n    })\n  })\n});\nconst FloatFilter = apiWithoutContext.inputObject({\n  name: 'FloatFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Float))\n    }),\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(apiWithoutContext.Float))\n    }),\n    lt: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    lte: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    gt: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    gte: apiWithoutContext.arg({\n      type: apiWithoutContext.Float\n    }),\n    not: apiWithoutContext.arg({\n      type: FloatFilter\n    })\n  })\n});\nconst DateTimeNullableFilter = apiWithoutContext.inputObject({\n  name: 'DateTimeNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    // can be null\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.DateTime))\n    }),\n    // can be null\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.DateTime))\n    }),\n    lt: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    lte: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    gt: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    gte: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: DateTimeNullableFilter\n    })\n  })\n});\nconst DateTimeFilter = apiWithoutContext.inputObject({\n  name: 'DateTimeFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.DateTime))\n    }),\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.DateTime))\n    }),\n    lt: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    lte: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    gt: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    gte: apiWithoutContext.arg({\n      type: graphqlTsSchema.DateTime\n    }),\n    not: apiWithoutContext.arg({\n      type: DateTimeFilter\n    })\n  })\n});\nconst DecimalNullableFilter = apiWithoutContext.inputObject({\n  name: 'DecimalNullableFilter',\n  fields: () => ({\n    // can be null\n    equals: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    // can be null\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.Decimal))\n    }),\n    // can be null\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.Decimal))\n    }),\n    lt: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    lte: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    gt: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    gte: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    // can be null\n    not: apiWithoutContext.arg({\n      type: DecimalNullableFilter\n    })\n  })\n});\nconst DecimalFilter = apiWithoutContext.inputObject({\n  name: 'DecimalFilter',\n  fields: () => ({\n    equals: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    in: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.Decimal))\n    }),\n    notIn: apiWithoutContext.arg({\n      type: apiWithoutContext.list(apiWithoutContext.nonNull(graphqlTsSchema.Decimal))\n    }),\n    lt: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    lte: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    gt: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    gte: apiWithoutContext.arg({\n      type: graphqlTsSchema.Decimal\n    }),\n    not: apiWithoutContext.arg({\n      type: DecimalFilter\n    })\n  })\n});\nconst String = {\n  optional: StringNullableFilter,\n  required: StringFilter\n};\nconst Boolean = {\n  optional: BoolNullableFilter,\n  required: BoolFilter\n};\nconst Int = {\n  optional: IntNullableFilter,\n  required: IntFilter\n};\nconst Float = {\n  optional: FloatNullableFilter,\n  required: FloatFilter\n};\nconst DateTime = {\n  optional: DateTimeNullableFilter,\n  required: DateTimeFilter\n};\nconst Decimal = {\n  optional: DecimalNullableFilter,\n  required: DecimalFilter\n};\n\nvar sqlite = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  String: String,\n  Boolean: Boolean,\n  Int: Int,\n  Float: Float,\n  DateTime: DateTime,\n  Decimal: Decimal,\n  'enum': enumFilters\n});\n\nexports.QueryMode = QueryMode;\nexports.fieldType = fieldType;\nexports.orderDirectionEnum = orderDirectionEnum;\nexports.postgresql = postgresql;\nexports.sqlite = sqlite;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC9zcWxpdGUtYTIzODVhODEuY2pzLmRldi5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixzQkFBc0IsbUJBQU8sQ0FBQywrSEFBeUM7QUFDdkUsb0JBQW9CLG1CQUFPLENBQUMsd0dBQXNDO0FBQ2xFLG1CQUFPLENBQUMsOEJBQVk7QUFDcEIsbUJBQU8sQ0FBQyxvREFBdUI7QUFDL0Isd0JBQXdCLG1CQUFPLENBQUMsc0ZBQXdDOztBQUV4RTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHNDQUFzQztBQUN0QztBQUNBO0FBQ0EseUNBQXlDLGtCQUFrQjtBQUMzRDtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLDBCQUEwQjtBQUN2QztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLGFBQWEsMEJBQTBCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0EsYUFBYSwwQkFBMEI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxpQkFBaUI7QUFDakIsaUJBQWlCO0FBQ2pCLDBCQUEwQjtBQUMxQixrQkFBa0I7QUFDbEIsY0FBYyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvQGtleXN0b25lLTYvY29yZS9kaXN0L3NxbGl0ZS1hMjM4NWE4MS5janMuZGV2LmpzPzk0ZDQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZ3JhcGhxbFRzU2NoZW1hID0gcmVxdWlyZSgnLi9ncmFwaHFsLXRzLXNjaGVtYS0yYTIyMDEyMC5janMuZGV2LmpzJyk7XG52YXIgX29iamVjdFNwcmVhZCA9IHJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0U3ByZWFkMicpO1xucmVxdWlyZSgnZGVjaW1hbC5qcycpO1xucmVxdWlyZSgnQGdyYXBocWwtdG9vbHMvc2NoZW1hJyk7XG52YXIgYXBpV2l0aG91dENvbnRleHQgPSByZXF1aXJlKCdAZ3JhcGhxbC10cy9zY2hlbWEvYXBpLXdpdGhvdXQtY29udGV4dCcpO1xuXG5jb25zdCBvcmRlckRpcmVjdGlvbkVudW0gPSBhcGlXaXRob3V0Q29udGV4dFtcImVudW1cIl0oe1xuICBuYW1lOiAnT3JkZXJEaXJlY3Rpb24nLFxuICB2YWx1ZXM6IGFwaVdpdGhvdXRDb250ZXh0LmVudW1WYWx1ZXMoWydhc2MnLCAnZGVzYyddKVxufSk7XG5jb25zdCBRdWVyeU1vZGUgPSBhcGlXaXRob3V0Q29udGV4dFtcImVudW1cIl0oe1xuICBuYW1lOiAnUXVlcnlNb2RlJyxcbiAgdmFsdWVzOiBhcGlXaXRob3V0Q29udGV4dC5lbnVtVmFsdWVzKFsnZGVmYXVsdCcsICdpbnNlbnNpdGl2ZSddKVxufSk7XG4vLyBmaWVsZFR5cGUoZGJGaWVsZCkoZmllbGRJbmZvKSA9PiB7IC4uLmZpZWxkSW5mbywgZGJGaWVsZCB9O1xuZnVuY3Rpb24gZmllbGRUeXBlKGRiRmllbGQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChncmFwaFFMSW5mbykge1xuICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGdyYXBoUUxJbmZvKSwge30sIHtcbiAgICAgIGRiRmllbGRcbiAgICB9KTtcbiAgfTtcbn1cblxuLy8gKGV2ZW4gdGhvdWdoLCB5ZXMsIGhhdmluZyBFbnVtRmlsdGVyIGJ5IGRlZmluZWQgYXMgRW51bU51bGxhYmxlRmlsdGVyPEVudW0+LCB3b3VsZCBiZSB0aGUgc2FtZSB0eXBlIGJ1dCBuYW1lcyB3b3VsZCBzaG93IHVwIGRpZmZlcmVudGx5IGluIGVkaXRvcnMgZm9yIGV4YW1wbGUpXG5cbmZ1bmN0aW9uIGVudW1GaWx0ZXJzKGVudW1UeXBlKSB7XG4gIGNvbnN0IG9wdGlvbmFsID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICAgIG5hbWU6IGAke2VudW1UeXBlLmdyYXBoUUxUeXBlLm5hbWV9TnVsbGFibGVGaWx0ZXJgLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgICAgdHlwZTogZW51bVR5cGVcbiAgICAgIH0pLFxuICAgICAgaW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChlbnVtVHlwZSkpXG4gICAgICB9KSxcbiAgICAgIG5vdEluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoZW51bVR5cGUpKVxuICAgICAgfSksXG4gICAgICBub3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICAgIHR5cGU6IG9wdGlvbmFsXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xuICBjb25zdCByZXF1aXJlZCA9IGFwaVdpdGhvdXRDb250ZXh0LmlucHV0T2JqZWN0KHtcbiAgICBuYW1lOiBgJHtlbnVtVHlwZS5ncmFwaFFMVHlwZS5uYW1lfUZpbHRlcmAsXG4gICAgZmllbGRzOiAoKSA9PiAoe1xuICAgICAgZXF1YWxzOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgICB0eXBlOiBlbnVtVHlwZVxuICAgICAgfSksXG4gICAgICBpbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGVudW1UeXBlKSlcbiAgICAgIH0pLFxuICAgICAgbm90SW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChlbnVtVHlwZSkpXG4gICAgICB9KSxcbiAgICAgIG5vdDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgICAgdHlwZTogb3B0aW9uYWxcbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG4gIGNvbnN0IG1hbnkgPSBhcGlXaXRob3V0Q29udGV4dC5pbnB1dE9iamVjdCh7XG4gICAgbmFtZTogYCR7ZW51bVR5cGUuZ3JhcGhRTFR5cGUubmFtZX1OdWxsYWJsZUxpc3RGaWx0ZXJgLFxuICAgIGZpZWxkczogKCkgPT4gKHtcbiAgICAgIC8vIGNhbiBiZSBudWxsXG4gICAgICBlcXVhbHM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChlbnVtVHlwZSkpXG4gICAgICB9KSxcbiAgICAgIC8vIGNhbiBiZSBudWxsXG4gICAgICBoYXM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICAgIHR5cGU6IGVudW1UeXBlXG4gICAgICB9KSxcbiAgICAgIGhhc0V2ZXJ5OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoZW51bVR5cGUpKVxuICAgICAgfSksXG4gICAgICBoYXNTb21lOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoZW51bVR5cGUpKVxuICAgICAgfSksXG4gICAgICBpc0VtcHR5OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgICB0eXBlOiBlbnVtVHlwZVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBvcHRpb25hbCxcbiAgICByZXF1aXJlZCxcbiAgICBtYW55XG4gIH07XG59XG5cbi8vIERvIG5vdCBtYW51YWxseSBtb2RpZnkgdGhpcyBmaWxlLCBpdCBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSB0aGUgcGFja2FnZSBhdCAvcHJpc21hLXV0aWxzIGluIHRoaXMgcmVwby5cbmNvbnN0IFN0cmluZ051bGxhYmxlRmlsdGVyJDEgPSBhcGlXaXRob3V0Q29udGV4dC5pbnB1dE9iamVjdCh7XG4gIG5hbWU6ICdTdHJpbmdOdWxsYWJsZUZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgaW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuU3RyaW5nKSlcbiAgICB9KSxcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIG5vdEluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZykpXG4gICAgfSksXG4gICAgbHQ6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBsdGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBndDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGd0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGNvbnRhaW5zOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgc3RhcnRzV2l0aDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGVuZHNXaXRoOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgbW9kZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IFF1ZXJ5TW9kZVxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgbm90OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogTmVzdGVkU3RyaW5nTnVsbGFibGVGaWx0ZXIkMVxuICAgIH0pXG4gIH0pXG59KTtcbmNvbnN0IE5lc3RlZFN0cmluZ051bGxhYmxlRmlsdGVyJDEgPSBhcGlXaXRob3V0Q29udGV4dC5pbnB1dE9iamVjdCh7XG4gIG5hbWU6ICdOZXN0ZWRTdHJpbmdOdWxsYWJsZUZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgaW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuU3RyaW5nKSlcbiAgICB9KSxcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIG5vdEluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZykpXG4gICAgfSksXG4gICAgbHQ6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBsdGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBndDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGd0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGNvbnRhaW5zOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgc3RhcnRzV2l0aDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGVuZHNXaXRoOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBub3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBOZXN0ZWRTdHJpbmdOdWxsYWJsZUZpbHRlciQxXG4gICAgfSlcbiAgfSlcbn0pO1xuY29uc3QgU3RyaW5nRmlsdGVyJDEgPSBhcGlXaXRob3V0Q29udGV4dC5pbnB1dE9iamVjdCh7XG4gIG5hbWU6ICdTdHJpbmdGaWx0ZXInLFxuICBmaWVsZHM6ICgpID0+ICh7XG4gICAgZXF1YWxzOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgaW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuU3RyaW5nKSlcbiAgICB9KSxcbiAgICBub3RJbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5TdHJpbmcpKVxuICAgIH0pLFxuICAgIGx0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgbHRlOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgZ3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBndGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBjb250YWluczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIHN0YXJ0c1dpdGg6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBlbmRzV2l0aDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIG1vZGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBRdWVyeU1vZGVcbiAgICB9KSxcbiAgICBub3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBOZXN0ZWRTdHJpbmdGaWx0ZXIkMVxuICAgIH0pXG4gIH0pXG59KTtcbmNvbnN0IE5lc3RlZFN0cmluZ0ZpbHRlciQxID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnTmVzdGVkU3RyaW5nRmlsdGVyJyxcbiAgZmllbGRzOiAoKSA9PiAoe1xuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZykpXG4gICAgfSksXG4gICAgbm90SW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuU3RyaW5nKSlcbiAgICB9KSxcbiAgICBsdDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGx0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGd0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgZ3RlOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgY29udGFpbnM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBzdGFydHNXaXRoOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgZW5kc1dpdGg6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBub3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBOZXN0ZWRTdHJpbmdGaWx0ZXIkMVxuICAgIH0pXG4gIH0pXG59KTtcbmNvbnN0IFN0cmluZ051bGxhYmxlTGlzdEZpbHRlciA9IGFwaVdpdGhvdXRDb250ZXh0LmlucHV0T2JqZWN0KHtcbiAgbmFtZTogJ1N0cmluZ051bGxhYmxlTGlzdEZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5TdHJpbmcpKVxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgaGFzOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgaGFzRXZlcnk6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuU3RyaW5nKSlcbiAgICB9KSxcbiAgICBoYXNTb21lOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZykpXG4gICAgfSksXG4gICAgaXNFbXB0eTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkJvb2xlYW5cbiAgICB9KVxuICB9KVxufSk7XG5jb25zdCBCb29sTnVsbGFibGVGaWx0ZXIkMSA9IGFwaVdpdGhvdXRDb250ZXh0LmlucHV0T2JqZWN0KHtcbiAgbmFtZTogJ0Jvb2xlYW5OdWxsYWJsZUZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkJvb2xlYW5cbiAgICB9KSxcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIG5vdDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IEJvb2xOdWxsYWJsZUZpbHRlciQxXG4gICAgfSlcbiAgfSlcbn0pO1xuY29uc3QgQm9vbEZpbHRlciQxID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnQm9vbGVhbkZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICBlcXVhbHM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5Cb29sZWFuXG4gICAgfSksXG4gICAgbm90OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogQm9vbEZpbHRlciQxXG4gICAgfSlcbiAgfSlcbn0pO1xuY29uc3QgQm9vbE51bGxhYmxlTGlzdEZpbHRlciA9IGFwaVdpdGhvdXRDb250ZXh0LmlucHV0T2JqZWN0KHtcbiAgbmFtZTogJ0Jvb2xlYW5OdWxsYWJsZUxpc3RGaWx0ZXInLFxuICBmaWVsZHM6ICgpID0+ICh7XG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBlcXVhbHM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuQm9vbGVhbikpXG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBoYXM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5Cb29sZWFuXG4gICAgfSksXG4gICAgaGFzRXZlcnk6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuQm9vbGVhbikpXG4gICAgfSksXG4gICAgaGFzU29tZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5Cb29sZWFuKSlcbiAgICB9KSxcbiAgICBpc0VtcHR5OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuQm9vbGVhblxuICAgIH0pXG4gIH0pXG59KTtcbmNvbnN0IEludE51bGxhYmxlRmlsdGVyJDEgPSBhcGlXaXRob3V0Q29udGV4dC5pbnB1dE9iamVjdCh7XG4gIG5hbWU6ICdJbnROdWxsYWJsZUZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkludFxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgaW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuSW50KSlcbiAgICB9KSxcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIG5vdEluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGFwaVdpdGhvdXRDb250ZXh0LkludCkpXG4gICAgfSksXG4gICAgbHQ6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5JbnRcbiAgICB9KSxcbiAgICBsdGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5JbnRcbiAgICB9KSxcbiAgICBndDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkludFxuICAgIH0pLFxuICAgIGd0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkludFxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgbm90OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogSW50TnVsbGFibGVGaWx0ZXIkMVxuICAgIH0pXG4gIH0pXG59KTtcbmNvbnN0IEludEZpbHRlciQxID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnSW50RmlsdGVyJyxcbiAgZmllbGRzOiAoKSA9PiAoe1xuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkludFxuICAgIH0pLFxuICAgIGluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGFwaVdpdGhvdXRDb250ZXh0LkludCkpXG4gICAgfSksXG4gICAgbm90SW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuSW50KSlcbiAgICB9KSxcbiAgICBsdDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkludFxuICAgIH0pLFxuICAgIGx0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkludFxuICAgIH0pLFxuICAgIGd0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuSW50XG4gICAgfSksXG4gICAgZ3RlOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuSW50XG4gICAgfSksXG4gICAgbm90OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogSW50RmlsdGVyJDFcbiAgICB9KVxuICB9KVxufSk7XG5jb25zdCBJbnROdWxsYWJsZUxpc3RGaWx0ZXIgPSBhcGlXaXRob3V0Q29udGV4dC5pbnB1dE9iamVjdCh7XG4gIG5hbWU6ICdJbnROdWxsYWJsZUxpc3RGaWx0ZXInLFxuICBmaWVsZHM6ICgpID0+ICh7XG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBlcXVhbHM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuSW50KSlcbiAgICB9KSxcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGhhczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkludFxuICAgIH0pLFxuICAgIGhhc0V2ZXJ5OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGFwaVdpdGhvdXRDb250ZXh0LkludCkpXG4gICAgfSksXG4gICAgaGFzU29tZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5JbnQpKVxuICAgIH0pLFxuICAgIGlzRW1wdHk6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5Cb29sZWFuXG4gICAgfSlcbiAgfSlcbn0pO1xuY29uc3QgRmxvYXROdWxsYWJsZUZpbHRlciQxID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnRmxvYXROdWxsYWJsZUZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkZsb2F0XG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBpbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5GbG9hdCkpXG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBub3RJbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5GbG9hdCkpXG4gICAgfSksXG4gICAgbHQ6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5GbG9hdFxuICAgIH0pLFxuICAgIGx0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkZsb2F0XG4gICAgfSksXG4gICAgZ3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5GbG9hdFxuICAgIH0pLFxuICAgIGd0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkZsb2F0XG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBub3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBGbG9hdE51bGxhYmxlRmlsdGVyJDFcbiAgICB9KVxuICB9KVxufSk7XG5jb25zdCBGbG9hdEZpbHRlciQxID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnRmxvYXRGaWx0ZXInLFxuICBmaWVsZHM6ICgpID0+ICh7XG4gICAgZXF1YWxzOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuRmxvYXRcbiAgICB9KSxcbiAgICBpbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5GbG9hdCkpXG4gICAgfSksXG4gICAgbm90SW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuRmxvYXQpKVxuICAgIH0pLFxuICAgIGx0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuRmxvYXRcbiAgICB9KSxcbiAgICBsdGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5GbG9hdFxuICAgIH0pLFxuICAgIGd0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuRmxvYXRcbiAgICB9KSxcbiAgICBndGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5GbG9hdFxuICAgIH0pLFxuICAgIG5vdDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IEZsb2F0RmlsdGVyJDFcbiAgICB9KVxuICB9KVxufSk7XG5jb25zdCBGbG9hdE51bGxhYmxlTGlzdEZpbHRlciA9IGFwaVdpdGhvdXRDb250ZXh0LmlucHV0T2JqZWN0KHtcbiAgbmFtZTogJ0Zsb2F0TnVsbGFibGVMaXN0RmlsdGVyJyxcbiAgZmllbGRzOiAoKSA9PiAoe1xuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgZXF1YWxzOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGFwaVdpdGhvdXRDb250ZXh0LkZsb2F0KSlcbiAgICB9KSxcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGhhczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkZsb2F0XG4gICAgfSksXG4gICAgaGFzRXZlcnk6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuRmxvYXQpKVxuICAgIH0pLFxuICAgIGhhc1NvbWU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuRmxvYXQpKVxuICAgIH0pLFxuICAgIGlzRW1wdHk6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5Cb29sZWFuXG4gICAgfSlcbiAgfSlcbn0pO1xuY29uc3QgRGF0ZVRpbWVOdWxsYWJsZUZpbHRlciQxID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnRGF0ZVRpbWVOdWxsYWJsZUZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZVxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgaW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoZ3JhcGhxbFRzU2NoZW1hLkRhdGVUaW1lKSlcbiAgICB9KSxcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIG5vdEluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZSkpXG4gICAgfSksXG4gICAgbHQ6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGF0ZVRpbWVcbiAgICB9KSxcbiAgICBsdGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGF0ZVRpbWVcbiAgICB9KSxcbiAgICBndDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZVxuICAgIH0pLFxuICAgIGd0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZVxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgbm90OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogRGF0ZVRpbWVOdWxsYWJsZUZpbHRlciQxXG4gICAgfSlcbiAgfSlcbn0pO1xuY29uc3QgRGF0ZVRpbWVGaWx0ZXIkMSA9IGFwaVdpdGhvdXRDb250ZXh0LmlucHV0T2JqZWN0KHtcbiAgbmFtZTogJ0RhdGVUaW1lRmlsdGVyJyxcbiAgZmllbGRzOiAoKSA9PiAoe1xuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZVxuICAgIH0pLFxuICAgIGluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZSkpXG4gICAgfSksXG4gICAgbm90SW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoZ3JhcGhxbFRzU2NoZW1hLkRhdGVUaW1lKSlcbiAgICB9KSxcbiAgICBsdDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZVxuICAgIH0pLFxuICAgIGx0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZVxuICAgIH0pLFxuICAgIGd0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogZ3JhcGhxbFRzU2NoZW1hLkRhdGVUaW1lXG4gICAgfSksXG4gICAgZ3RlOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogZ3JhcGhxbFRzU2NoZW1hLkRhdGVUaW1lXG4gICAgfSksXG4gICAgbm90OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogRGF0ZVRpbWVGaWx0ZXIkMVxuICAgIH0pXG4gIH0pXG59KTtcbmNvbnN0IERhdGVUaW1lTnVsbGFibGVMaXN0RmlsdGVyID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnRGF0ZVRpbWVOdWxsYWJsZUxpc3RGaWx0ZXInLFxuICBmaWVsZHM6ICgpID0+ICh7XG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBlcXVhbHM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoZ3JhcGhxbFRzU2NoZW1hLkRhdGVUaW1lKSlcbiAgICB9KSxcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGhhczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZVxuICAgIH0pLFxuICAgIGhhc0V2ZXJ5OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZSkpXG4gICAgfSksXG4gICAgaGFzU29tZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChncmFwaHFsVHNTY2hlbWEuRGF0ZVRpbWUpKVxuICAgIH0pLFxuICAgIGlzRW1wdHk6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5Cb29sZWFuXG4gICAgfSlcbiAgfSlcbn0pO1xuY29uc3QgRGVjaW1hbE51bGxhYmxlRmlsdGVyJDEgPSBhcGlXaXRob3V0Q29udGV4dC5pbnB1dE9iamVjdCh7XG4gIG5hbWU6ICdEZWNpbWFsTnVsbGFibGVGaWx0ZXInLFxuICBmaWVsZHM6ICgpID0+ICh7XG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBlcXVhbHM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGVjaW1hbFxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgaW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoZ3JhcGhxbFRzU2NoZW1hLkRlY2ltYWwpKVxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgbm90SW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoZ3JhcGhxbFRzU2NoZW1hLkRlY2ltYWwpKVxuICAgIH0pLFxuICAgIGx0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogZ3JhcGhxbFRzU2NoZW1hLkRlY2ltYWxcbiAgICB9KSxcbiAgICBsdGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGVjaW1hbFxuICAgIH0pLFxuICAgIGd0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogZ3JhcGhxbFRzU2NoZW1hLkRlY2ltYWxcbiAgICB9KSxcbiAgICBndGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGVjaW1hbFxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgbm90OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogRGVjaW1hbE51bGxhYmxlRmlsdGVyJDFcbiAgICB9KVxuICB9KVxufSk7XG5jb25zdCBEZWNpbWFsRmlsdGVyJDEgPSBhcGlXaXRob3V0Q29udGV4dC5pbnB1dE9iamVjdCh7XG4gIG5hbWU6ICdEZWNpbWFsRmlsdGVyJyxcbiAgZmllbGRzOiAoKSA9PiAoe1xuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EZWNpbWFsXG4gICAgfSksXG4gICAgaW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoZ3JhcGhxbFRzU2NoZW1hLkRlY2ltYWwpKVxuICAgIH0pLFxuICAgIG5vdEluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGdyYXBocWxUc1NjaGVtYS5EZWNpbWFsKSlcbiAgICB9KSxcbiAgICBsdDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EZWNpbWFsXG4gICAgfSksXG4gICAgbHRlOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogZ3JhcGhxbFRzU2NoZW1hLkRlY2ltYWxcbiAgICB9KSxcbiAgICBndDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EZWNpbWFsXG4gICAgfSksXG4gICAgZ3RlOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogZ3JhcGhxbFRzU2NoZW1hLkRlY2ltYWxcbiAgICB9KSxcbiAgICBub3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBEZWNpbWFsRmlsdGVyJDFcbiAgICB9KVxuICB9KVxufSk7XG5jb25zdCBEZWNpbWFsTnVsbGFibGVMaXN0RmlsdGVyID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnRGVjaW1hbE51bGxhYmxlTGlzdEZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChncmFwaHFsVHNTY2hlbWEuRGVjaW1hbCkpXG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBoYXM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGVjaW1hbFxuICAgIH0pLFxuICAgIGhhc0V2ZXJ5OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGdyYXBocWxUc1NjaGVtYS5EZWNpbWFsKSlcbiAgICB9KSxcbiAgICBoYXNTb21lOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGdyYXBocWxUc1NjaGVtYS5EZWNpbWFsKSlcbiAgICB9KSxcbiAgICBpc0VtcHR5OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuQm9vbGVhblxuICAgIH0pXG4gIH0pXG59KTtcbmNvbnN0IFN0cmluZyQxID0ge1xuICBvcHRpb25hbDogU3RyaW5nTnVsbGFibGVGaWx0ZXIkMSxcbiAgcmVxdWlyZWQ6IFN0cmluZ0ZpbHRlciQxLFxuICBtYW55OiBTdHJpbmdOdWxsYWJsZUxpc3RGaWx0ZXJcbn07XG5jb25zdCBCb29sZWFuJDEgPSB7XG4gIG9wdGlvbmFsOiBCb29sTnVsbGFibGVGaWx0ZXIkMSxcbiAgcmVxdWlyZWQ6IEJvb2xGaWx0ZXIkMSxcbiAgbWFueTogQm9vbE51bGxhYmxlTGlzdEZpbHRlclxufTtcbmNvbnN0IEludCQxID0ge1xuICBvcHRpb25hbDogSW50TnVsbGFibGVGaWx0ZXIkMSxcbiAgcmVxdWlyZWQ6IEludEZpbHRlciQxLFxuICBtYW55OiBJbnROdWxsYWJsZUxpc3RGaWx0ZXJcbn07XG5jb25zdCBGbG9hdCQxID0ge1xuICBvcHRpb25hbDogRmxvYXROdWxsYWJsZUZpbHRlciQxLFxuICByZXF1aXJlZDogRmxvYXRGaWx0ZXIkMSxcbiAgbWFueTogRmxvYXROdWxsYWJsZUxpc3RGaWx0ZXJcbn07XG5jb25zdCBEYXRlVGltZSQxID0ge1xuICBvcHRpb25hbDogRGF0ZVRpbWVOdWxsYWJsZUZpbHRlciQxLFxuICByZXF1aXJlZDogRGF0ZVRpbWVGaWx0ZXIkMSxcbiAgbWFueTogRGF0ZVRpbWVOdWxsYWJsZUxpc3RGaWx0ZXJcbn07XG5jb25zdCBEZWNpbWFsJDEgPSB7XG4gIG9wdGlvbmFsOiBEZWNpbWFsTnVsbGFibGVGaWx0ZXIkMSxcbiAgcmVxdWlyZWQ6IERlY2ltYWxGaWx0ZXIkMSxcbiAgbWFueTogRGVjaW1hbE51bGxhYmxlTGlzdEZpbHRlclxufTtcblxudmFyIHBvc3RncmVzcWwgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgU3RyaW5nOiBTdHJpbmckMSxcbiAgQm9vbGVhbjogQm9vbGVhbiQxLFxuICBJbnQ6IEludCQxLFxuICBGbG9hdDogRmxvYXQkMSxcbiAgRGF0ZVRpbWU6IERhdGVUaW1lJDEsXG4gIERlY2ltYWw6IERlY2ltYWwkMSxcbiAgJ2VudW0nOiBlbnVtRmlsdGVyc1xufSk7XG5cbi8vIERvIG5vdCBtYW51YWxseSBtb2RpZnkgdGhpcyBmaWxlLCBpdCBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSB0aGUgcGFja2FnZSBhdCAvcHJpc21hLXV0aWxzIGluIHRoaXMgcmVwby5cbmNvbnN0IFN0cmluZ051bGxhYmxlRmlsdGVyID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnU3RyaW5nTnVsbGFibGVGaWx0ZXInLFxuICBmaWVsZHM6ICgpID0+ICh7XG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBlcXVhbHM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZykpXG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBub3RJbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5TdHJpbmcpKVxuICAgIH0pLFxuICAgIGx0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgbHRlOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgZ3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBndGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBjb250YWluczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIHN0YXJ0c1dpdGg6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBlbmRzV2l0aDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgbm90OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogTmVzdGVkU3RyaW5nTnVsbGFibGVGaWx0ZXJcbiAgICB9KVxuICB9KVxufSk7XG5jb25zdCBOZXN0ZWRTdHJpbmdOdWxsYWJsZUZpbHRlciA9IGFwaVdpdGhvdXRDb250ZXh0LmlucHV0T2JqZWN0KHtcbiAgbmFtZTogJ05lc3RlZFN0cmluZ051bGxhYmxlRmlsdGVyJyxcbiAgZmllbGRzOiAoKSA9PiAoe1xuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgZXF1YWxzOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBpbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5TdHJpbmcpKVxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgbm90SW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuU3RyaW5nKSlcbiAgICB9KSxcbiAgICBsdDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGx0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGd0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgZ3RlOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgY29udGFpbnM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBzdGFydHNXaXRoOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgZW5kc1dpdGg6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIG5vdDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IE5lc3RlZFN0cmluZ051bGxhYmxlRmlsdGVyXG4gICAgfSlcbiAgfSlcbn0pO1xuY29uc3QgU3RyaW5nRmlsdGVyID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnU3RyaW5nRmlsdGVyJyxcbiAgZmllbGRzOiAoKSA9PiAoe1xuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZykpXG4gICAgfSksXG4gICAgbm90SW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuU3RyaW5nKSlcbiAgICB9KSxcbiAgICBsdDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGx0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIGd0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgZ3RlOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgY29udGFpbnM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBzdGFydHNXaXRoOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgZW5kc1dpdGg6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBub3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBOZXN0ZWRTdHJpbmdGaWx0ZXJcbiAgICB9KVxuICB9KVxufSk7XG5jb25zdCBOZXN0ZWRTdHJpbmdGaWx0ZXIgPSBhcGlXaXRob3V0Q29udGV4dC5pbnB1dE9iamVjdCh7XG4gIG5hbWU6ICdOZXN0ZWRTdHJpbmdGaWx0ZXInLFxuICBmaWVsZHM6ICgpID0+ICh7XG4gICAgZXF1YWxzOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgaW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuU3RyaW5nKSlcbiAgICB9KSxcbiAgICBub3RJbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5TdHJpbmcpKVxuICAgIH0pLFxuICAgIGx0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgbHRlOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuU3RyaW5nXG4gICAgfSksXG4gICAgZ3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBndGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBjb250YWluczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIHN0YXJ0c1dpdGg6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5TdHJpbmdcbiAgICB9KSxcbiAgICBlbmRzV2l0aDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LlN0cmluZ1xuICAgIH0pLFxuICAgIG5vdDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IE5lc3RlZFN0cmluZ0ZpbHRlclxuICAgIH0pXG4gIH0pXG59KTtcbmNvbnN0IEJvb2xOdWxsYWJsZUZpbHRlciA9IGFwaVdpdGhvdXRDb250ZXh0LmlucHV0T2JqZWN0KHtcbiAgbmFtZTogJ0Jvb2xlYW5OdWxsYWJsZUZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkJvb2xlYW5cbiAgICB9KSxcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIG5vdDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IEJvb2xOdWxsYWJsZUZpbHRlclxuICAgIH0pXG4gIH0pXG59KTtcbmNvbnN0IEJvb2xGaWx0ZXIgPSBhcGlXaXRob3V0Q29udGV4dC5pbnB1dE9iamVjdCh7XG4gIG5hbWU6ICdCb29sZWFuRmlsdGVyJyxcbiAgZmllbGRzOiAoKSA9PiAoe1xuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkJvb2xlYW5cbiAgICB9KSxcbiAgICBub3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBCb29sRmlsdGVyXG4gICAgfSlcbiAgfSlcbn0pO1xuY29uc3QgSW50TnVsbGFibGVGaWx0ZXIgPSBhcGlXaXRob3V0Q29udGV4dC5pbnB1dE9iamVjdCh7XG4gIG5hbWU6ICdJbnROdWxsYWJsZUZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkludFxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgaW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuSW50KSlcbiAgICB9KSxcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIG5vdEluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGFwaVdpdGhvdXRDb250ZXh0LkludCkpXG4gICAgfSksXG4gICAgbHQ6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5JbnRcbiAgICB9KSxcbiAgICBsdGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5JbnRcbiAgICB9KSxcbiAgICBndDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkludFxuICAgIH0pLFxuICAgIGd0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkludFxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgbm90OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogSW50TnVsbGFibGVGaWx0ZXJcbiAgICB9KVxuICB9KVxufSk7XG5jb25zdCBJbnRGaWx0ZXIgPSBhcGlXaXRob3V0Q29udGV4dC5pbnB1dE9iamVjdCh7XG4gIG5hbWU6ICdJbnRGaWx0ZXInLFxuICBmaWVsZHM6ICgpID0+ICh7XG4gICAgZXF1YWxzOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuSW50XG4gICAgfSksXG4gICAgaW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoYXBpV2l0aG91dENvbnRleHQuSW50KSlcbiAgICB9KSxcbiAgICBub3RJbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5JbnQpKVxuICAgIH0pLFxuICAgIGx0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuSW50XG4gICAgfSksXG4gICAgbHRlOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQuSW50XG4gICAgfSksXG4gICAgZ3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5JbnRcbiAgICB9KSxcbiAgICBndGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5JbnRcbiAgICB9KSxcbiAgICBub3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBJbnRGaWx0ZXJcbiAgICB9KVxuICB9KVxufSk7XG5jb25zdCBGbG9hdE51bGxhYmxlRmlsdGVyID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnRmxvYXROdWxsYWJsZUZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkZsb2F0XG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBpbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5GbG9hdCkpXG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBub3RJbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5GbG9hdCkpXG4gICAgfSksXG4gICAgbHQ6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5GbG9hdFxuICAgIH0pLFxuICAgIGx0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkZsb2F0XG4gICAgfSksXG4gICAgZ3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5GbG9hdFxuICAgIH0pLFxuICAgIGd0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkZsb2F0XG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBub3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBGbG9hdE51bGxhYmxlRmlsdGVyXG4gICAgfSlcbiAgfSlcbn0pO1xuY29uc3QgRmxvYXRGaWx0ZXIgPSBhcGlXaXRob3V0Q29udGV4dC5pbnB1dE9iamVjdCh7XG4gIG5hbWU6ICdGbG9hdEZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICBlcXVhbHM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5GbG9hdFxuICAgIH0pLFxuICAgIGluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGFwaVdpdGhvdXRDb250ZXh0LkZsb2F0KSlcbiAgICB9KSxcbiAgICBub3RJbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChhcGlXaXRob3V0Q29udGV4dC5GbG9hdCkpXG4gICAgfSksXG4gICAgbHQ6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5GbG9hdFxuICAgIH0pLFxuICAgIGx0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkZsb2F0XG4gICAgfSksXG4gICAgZ3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5GbG9hdFxuICAgIH0pLFxuICAgIGd0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0LkZsb2F0XG4gICAgfSksXG4gICAgbm90OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogRmxvYXRGaWx0ZXJcbiAgICB9KVxuICB9KVxufSk7XG5jb25zdCBEYXRlVGltZU51bGxhYmxlRmlsdGVyID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnRGF0ZVRpbWVOdWxsYWJsZUZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZVxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgaW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoZ3JhcGhxbFRzU2NoZW1hLkRhdGVUaW1lKSlcbiAgICB9KSxcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIG5vdEluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZSkpXG4gICAgfSksXG4gICAgbHQ6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGF0ZVRpbWVcbiAgICB9KSxcbiAgICBsdGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGF0ZVRpbWVcbiAgICB9KSxcbiAgICBndDogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZVxuICAgIH0pLFxuICAgIGd0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EYXRlVGltZVxuICAgIH0pLFxuICAgIC8vIGNhbiBiZSBudWxsXG4gICAgbm90OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogRGF0ZVRpbWVOdWxsYWJsZUZpbHRlclxuICAgIH0pXG4gIH0pXG59KTtcbmNvbnN0IERhdGVUaW1lRmlsdGVyID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnRGF0ZVRpbWVGaWx0ZXInLFxuICBmaWVsZHM6ICgpID0+ICh7XG4gICAgZXF1YWxzOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogZ3JhcGhxbFRzU2NoZW1hLkRhdGVUaW1lXG4gICAgfSksXG4gICAgaW46IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBhcGlXaXRob3V0Q29udGV4dC5saXN0KGFwaVdpdGhvdXRDb250ZXh0Lm5vbk51bGwoZ3JhcGhxbFRzU2NoZW1hLkRhdGVUaW1lKSlcbiAgICB9KSxcbiAgICBub3RJbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChncmFwaHFsVHNTY2hlbWEuRGF0ZVRpbWUpKVxuICAgIH0pLFxuICAgIGx0OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogZ3JhcGhxbFRzU2NoZW1hLkRhdGVUaW1lXG4gICAgfSksXG4gICAgbHRlOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogZ3JhcGhxbFRzU2NoZW1hLkRhdGVUaW1lXG4gICAgfSksXG4gICAgZ3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGF0ZVRpbWVcbiAgICB9KSxcbiAgICBndGU6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGF0ZVRpbWVcbiAgICB9KSxcbiAgICBub3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBEYXRlVGltZUZpbHRlclxuICAgIH0pXG4gIH0pXG59KTtcbmNvbnN0IERlY2ltYWxOdWxsYWJsZUZpbHRlciA9IGFwaVdpdGhvdXRDb250ZXh0LmlucHV0T2JqZWN0KHtcbiAgbmFtZTogJ0RlY2ltYWxOdWxsYWJsZUZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICAvLyBjYW4gYmUgbnVsbFxuICAgIGVxdWFsczogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EZWNpbWFsXG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBpbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChncmFwaHFsVHNTY2hlbWEuRGVjaW1hbCkpXG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBub3RJbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChncmFwaHFsVHNTY2hlbWEuRGVjaW1hbCkpXG4gICAgfSksXG4gICAgbHQ6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGVjaW1hbFxuICAgIH0pLFxuICAgIGx0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EZWNpbWFsXG4gICAgfSksXG4gICAgZ3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGVjaW1hbFxuICAgIH0pLFxuICAgIGd0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EZWNpbWFsXG4gICAgfSksXG4gICAgLy8gY2FuIGJlIG51bGxcbiAgICBub3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBEZWNpbWFsTnVsbGFibGVGaWx0ZXJcbiAgICB9KVxuICB9KVxufSk7XG5jb25zdCBEZWNpbWFsRmlsdGVyID0gYXBpV2l0aG91dENvbnRleHQuaW5wdXRPYmplY3Qoe1xuICBuYW1lOiAnRGVjaW1hbEZpbHRlcicsXG4gIGZpZWxkczogKCkgPT4gKHtcbiAgICBlcXVhbHM6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGVjaW1hbFxuICAgIH0pLFxuICAgIGluOiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogYXBpV2l0aG91dENvbnRleHQubGlzdChhcGlXaXRob3V0Q29udGV4dC5ub25OdWxsKGdyYXBocWxUc1NjaGVtYS5EZWNpbWFsKSlcbiAgICB9KSxcbiAgICBub3RJbjogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGFwaVdpdGhvdXRDb250ZXh0Lmxpc3QoYXBpV2l0aG91dENvbnRleHQubm9uTnVsbChncmFwaHFsVHNTY2hlbWEuRGVjaW1hbCkpXG4gICAgfSksXG4gICAgbHQ6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGVjaW1hbFxuICAgIH0pLFxuICAgIGx0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EZWNpbWFsXG4gICAgfSksXG4gICAgZ3Q6IGFwaVdpdGhvdXRDb250ZXh0LmFyZyh7XG4gICAgICB0eXBlOiBncmFwaHFsVHNTY2hlbWEuRGVjaW1hbFxuICAgIH0pLFxuICAgIGd0ZTogYXBpV2l0aG91dENvbnRleHQuYXJnKHtcbiAgICAgIHR5cGU6IGdyYXBocWxUc1NjaGVtYS5EZWNpbWFsXG4gICAgfSksXG4gICAgbm90OiBhcGlXaXRob3V0Q29udGV4dC5hcmcoe1xuICAgICAgdHlwZTogRGVjaW1hbEZpbHRlclxuICAgIH0pXG4gIH0pXG59KTtcbmNvbnN0IFN0cmluZyA9IHtcbiAgb3B0aW9uYWw6IFN0cmluZ051bGxhYmxlRmlsdGVyLFxuICByZXF1aXJlZDogU3RyaW5nRmlsdGVyXG59O1xuY29uc3QgQm9vbGVhbiA9IHtcbiAgb3B0aW9uYWw6IEJvb2xOdWxsYWJsZUZpbHRlcixcbiAgcmVxdWlyZWQ6IEJvb2xGaWx0ZXJcbn07XG5jb25zdCBJbnQgPSB7XG4gIG9wdGlvbmFsOiBJbnROdWxsYWJsZUZpbHRlcixcbiAgcmVxdWlyZWQ6IEludEZpbHRlclxufTtcbmNvbnN0IEZsb2F0ID0ge1xuICBvcHRpb25hbDogRmxvYXROdWxsYWJsZUZpbHRlcixcbiAgcmVxdWlyZWQ6IEZsb2F0RmlsdGVyXG59O1xuY29uc3QgRGF0ZVRpbWUgPSB7XG4gIG9wdGlvbmFsOiBEYXRlVGltZU51bGxhYmxlRmlsdGVyLFxuICByZXF1aXJlZDogRGF0ZVRpbWVGaWx0ZXJcbn07XG5jb25zdCBEZWNpbWFsID0ge1xuICBvcHRpb25hbDogRGVjaW1hbE51bGxhYmxlRmlsdGVyLFxuICByZXF1aXJlZDogRGVjaW1hbEZpbHRlclxufTtcblxudmFyIHNxbGl0ZSA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBTdHJpbmc6IFN0cmluZyxcbiAgQm9vbGVhbjogQm9vbGVhbixcbiAgSW50OiBJbnQsXG4gIEZsb2F0OiBGbG9hdCxcbiAgRGF0ZVRpbWU6IERhdGVUaW1lLFxuICBEZWNpbWFsOiBEZWNpbWFsLFxuICAnZW51bSc6IGVudW1GaWx0ZXJzXG59KTtcblxuZXhwb3J0cy5RdWVyeU1vZGUgPSBRdWVyeU1vZGU7XG5leHBvcnRzLmZpZWxkVHlwZSA9IGZpZWxkVHlwZTtcbmV4cG9ydHMub3JkZXJEaXJlY3Rpb25FbnVtID0gb3JkZXJEaXJlY3Rpb25FbnVtO1xuZXhwb3J0cy5wb3N0Z3Jlc3FsID0gcG9zdGdyZXNxbDtcbmV4cG9ydHMuc3FsaXRlID0gc3FsaXRlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/sqlite-a2385a81.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/useInvalidFields-162d1b9c.cjs.dev.js":
/*!*************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/useInvalidFields-162d1b9c.cjs.dev.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar React = __webpack_require__(/*! react */ \"react\");\nvar isDeepEqual = __webpack_require__(/*! fast-deep-equal */ \"fast-deep-equal\");\nvar getRootGraphQLFieldsFromFieldController = __webpack_require__(/*! ./getRootGraphQLFieldsFromFieldController-47699a0d.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/getRootGraphQLFieldsFromFieldController-47699a0d.cjs.dev.js\");\n\nfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\nvar isDeepEqual__default = /*#__PURE__*/_interopDefault(isDeepEqual);\n\nfunction deserializeValue(fields, itemGetter) {\n  const value = {};\n  Object.keys(fields).forEach(fieldKey => {\n    const field = fields[fieldKey];\n    const itemForField = {};\n    const errors = new Set();\n\n    for (const graphqlField of getRootGraphQLFieldsFromFieldController.getRootGraphQLFieldsFromFieldController(field.controller)) {\n      const fieldGetter = itemGetter.get(graphqlField);\n\n      if (fieldGetter.errors) {\n        fieldGetter.errors.forEach(error => {\n          errors.add(error);\n        });\n      }\n\n      itemForField[graphqlField] = fieldGetter.data;\n    }\n\n    if (errors.size) {\n      value[fieldKey] = {\n        kind: 'error',\n        errors: [...errors]\n      };\n    } else {\n      value[fieldKey] = {\n        kind: 'value',\n        value: field.controller.deserialize(itemForField)\n      };\n    }\n  });\n  return value;\n}\nfunction serializeValueToObjByFieldKey(fields, value) {\n  const obj = {};\n  Object.keys(fields).map(fieldKey => {\n    const val = value[fieldKey];\n\n    if (val.kind === 'value') {\n      obj[fieldKey] = fields[fieldKey].controller.serialize(val.value);\n    }\n  });\n  return obj;\n}\n\nfunction useChangedFieldsAndDataForUpdate(fields, itemGetter, value) {\n  const serializedValuesFromItem = React.useMemo(() => {\n    const value = deserializeValue(fields, itemGetter);\n    return serializeValueToObjByFieldKey(fields, value);\n  }, [fields, itemGetter]);\n  const serializedFieldValues = React.useMemo(() => {\n    return serializeValueToObjByFieldKey(fields, value);\n  }, [value, fields]);\n  return React.useMemo(() => {\n    let changedFields = new Set();\n    Object.keys(serializedFieldValues).forEach(fieldKey => {\n      let isEqual = isDeepEqual__default[\"default\"](serializedFieldValues[fieldKey], serializedValuesFromItem[fieldKey]);\n\n      if (!isEqual) {\n        changedFields.add(fieldKey);\n      }\n    });\n    const dataForUpdate = {};\n    changedFields.forEach(fieldKey => {\n      Object.assign(dataForUpdate, serializedFieldValues[fieldKey]);\n    });\n    return {\n      changedFields: changedFields,\n      dataForUpdate\n    };\n  }, [serializedFieldValues, serializedValuesFromItem]);\n}\n\nfunction useInvalidFields(fields, value) {\n  return React.useMemo(() => {\n    const invalidFields = new Set();\n    Object.keys(value).forEach(fieldPath => {\n      const val = value[fieldPath];\n\n      if (val.kind === 'value') {\n        const validateFn = fields[fieldPath].controller.validate;\n\n        if (validateFn) {\n          const result = validateFn(val.value);\n\n          if (result === false) {\n            invalidFields.add(fieldPath);\n          }\n        }\n      }\n    });\n    return invalidFields;\n  }, [fields, value]);\n}\n\nexports.deserializeValue = deserializeValue;\nexports.serializeValueToObjByFieldKey = serializeValueToObjByFieldKey;\nexports.useChangedFieldsAndDataForUpdate = useChangedFieldsAndDataForUpdate;\nexports.useInvalidFields = useInvalidFields;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC91c2VJbnZhbGlkRmllbGRzLTE2MmQxYjljLmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsWUFBWSxtQkFBTyxDQUFDLG9CQUFPO0FBQzNCLGtCQUFrQixtQkFBTyxDQUFDLHdDQUFpQjtBQUMzQyw4Q0FBOEMsbUJBQU8sQ0FBQywyS0FBK0Q7O0FBRXJILCtCQUErQixpQ0FBaUM7O0FBRWhFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7O0FBRUEsd0JBQXdCO0FBQ3hCLHFDQUFxQztBQUNyQyx3Q0FBd0M7QUFDeEMsd0JBQXdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2Rpc3QvdXNlSW52YWxpZEZpZWxkcy0xNjJkMWI5Yy5janMuZGV2LmpzP2MwNDIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGlzRGVlcEVxdWFsID0gcmVxdWlyZSgnZmFzdC1kZWVwLWVxdWFsJyk7XG52YXIgZ2V0Um9vdEdyYXBoUUxGaWVsZHNGcm9tRmllbGRDb250cm9sbGVyID0gcmVxdWlyZSgnLi9nZXRSb290R3JhcGhRTEZpZWxkc0Zyb21GaWVsZENvbnRyb2xsZXItNDc2OTlhMGQuY2pzLmRldi5qcycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcERlZmF1bHQgKGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgJ2RlZmF1bHQnOiBlIH07IH1cblxudmFyIGlzRGVlcEVxdWFsX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdChpc0RlZXBFcXVhbCk7XG5cbmZ1bmN0aW9uIGRlc2VyaWFsaXplVmFsdWUoZmllbGRzLCBpdGVtR2V0dGVyKSB7XG4gIGNvbnN0IHZhbHVlID0ge307XG4gIE9iamVjdC5rZXlzKGZpZWxkcykuZm9yRWFjaChmaWVsZEtleSA9PiB7XG4gICAgY29uc3QgZmllbGQgPSBmaWVsZHNbZmllbGRLZXldO1xuICAgIGNvbnN0IGl0ZW1Gb3JGaWVsZCA9IHt9O1xuICAgIGNvbnN0IGVycm9ycyA9IG5ldyBTZXQoKTtcblxuICAgIGZvciAoY29uc3QgZ3JhcGhxbEZpZWxkIG9mIGdldFJvb3RHcmFwaFFMRmllbGRzRnJvbUZpZWxkQ29udHJvbGxlci5nZXRSb290R3JhcGhRTEZpZWxkc0Zyb21GaWVsZENvbnRyb2xsZXIoZmllbGQuY29udHJvbGxlcikpIHtcbiAgICAgIGNvbnN0IGZpZWxkR2V0dGVyID0gaXRlbUdldHRlci5nZXQoZ3JhcGhxbEZpZWxkKTtcblxuICAgICAgaWYgKGZpZWxkR2V0dGVyLmVycm9ycykge1xuICAgICAgICBmaWVsZEdldHRlci5lcnJvcnMuZm9yRWFjaChlcnJvciA9PiB7XG4gICAgICAgICAgZXJyb3JzLmFkZChlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpdGVtRm9yRmllbGRbZ3JhcGhxbEZpZWxkXSA9IGZpZWxkR2V0dGVyLmRhdGE7XG4gICAgfVxuXG4gICAgaWYgKGVycm9ycy5zaXplKSB7XG4gICAgICB2YWx1ZVtmaWVsZEtleV0gPSB7XG4gICAgICAgIGtpbmQ6ICdlcnJvcicsXG4gICAgICAgIGVycm9yczogWy4uLmVycm9yc11cbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlW2ZpZWxkS2V5XSA9IHtcbiAgICAgICAga2luZDogJ3ZhbHVlJyxcbiAgICAgICAgdmFsdWU6IGZpZWxkLmNvbnRyb2xsZXIuZGVzZXJpYWxpemUoaXRlbUZvckZpZWxkKVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBzZXJpYWxpemVWYWx1ZVRvT2JqQnlGaWVsZEtleShmaWVsZHMsIHZhbHVlKSB7XG4gIGNvbnN0IG9iaiA9IHt9O1xuICBPYmplY3Qua2V5cyhmaWVsZHMpLm1hcChmaWVsZEtleSA9PiB7XG4gICAgY29uc3QgdmFsID0gdmFsdWVbZmllbGRLZXldO1xuXG4gICAgaWYgKHZhbC5raW5kID09PSAndmFsdWUnKSB7XG4gICAgICBvYmpbZmllbGRLZXldID0gZmllbGRzW2ZpZWxkS2V5XS5jb250cm9sbGVyLnNlcmlhbGl6ZSh2YWwudmFsdWUpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIHVzZUNoYW5nZWRGaWVsZHNBbmREYXRhRm9yVXBkYXRlKGZpZWxkcywgaXRlbUdldHRlciwgdmFsdWUpIHtcbiAgY29uc3Qgc2VyaWFsaXplZFZhbHVlc0Zyb21JdGVtID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBkZXNlcmlhbGl6ZVZhbHVlKGZpZWxkcywgaXRlbUdldHRlcik7XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVZhbHVlVG9PYmpCeUZpZWxkS2V5KGZpZWxkcywgdmFsdWUpO1xuICB9LCBbZmllbGRzLCBpdGVtR2V0dGVyXSk7XG4gIGNvbnN0IHNlcmlhbGl6ZWRGaWVsZFZhbHVlcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBzZXJpYWxpemVWYWx1ZVRvT2JqQnlGaWVsZEtleShmaWVsZHMsIHZhbHVlKTtcbiAgfSwgW3ZhbHVlLCBmaWVsZHNdKTtcbiAgcmV0dXJuIFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGxldCBjaGFuZ2VkRmllbGRzID0gbmV3IFNldCgpO1xuICAgIE9iamVjdC5rZXlzKHNlcmlhbGl6ZWRGaWVsZFZhbHVlcykuZm9yRWFjaChmaWVsZEtleSA9PiB7XG4gICAgICBsZXQgaXNFcXVhbCA9IGlzRGVlcEVxdWFsX19kZWZhdWx0W1wiZGVmYXVsdFwiXShzZXJpYWxpemVkRmllbGRWYWx1ZXNbZmllbGRLZXldLCBzZXJpYWxpemVkVmFsdWVzRnJvbUl0ZW1bZmllbGRLZXldKTtcblxuICAgICAgaWYgKCFpc0VxdWFsKSB7XG4gICAgICAgIGNoYW5nZWRGaWVsZHMuYWRkKGZpZWxkS2V5KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBkYXRhRm9yVXBkYXRlID0ge307XG4gICAgY2hhbmdlZEZpZWxkcy5mb3JFYWNoKGZpZWxkS2V5ID0+IHtcbiAgICAgIE9iamVjdC5hc3NpZ24oZGF0YUZvclVwZGF0ZSwgc2VyaWFsaXplZEZpZWxkVmFsdWVzW2ZpZWxkS2V5XSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYW5nZWRGaWVsZHM6IGNoYW5nZWRGaWVsZHMsXG4gICAgICBkYXRhRm9yVXBkYXRlXG4gICAgfTtcbiAgfSwgW3NlcmlhbGl6ZWRGaWVsZFZhbHVlcywgc2VyaWFsaXplZFZhbHVlc0Zyb21JdGVtXSk7XG59XG5cbmZ1bmN0aW9uIHVzZUludmFsaWRGaWVsZHMoZmllbGRzLCB2YWx1ZSkge1xuICByZXR1cm4gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgaW52YWxpZEZpZWxkcyA9IG5ldyBTZXQoKTtcbiAgICBPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaChmaWVsZFBhdGggPT4ge1xuICAgICAgY29uc3QgdmFsID0gdmFsdWVbZmllbGRQYXRoXTtcblxuICAgICAgaWYgKHZhbC5raW5kID09PSAndmFsdWUnKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRlRm4gPSBmaWVsZHNbZmllbGRQYXRoXS5jb250cm9sbGVyLnZhbGlkYXRlO1xuXG4gICAgICAgIGlmICh2YWxpZGF0ZUZuKSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVGbih2YWwudmFsdWUpO1xuXG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGludmFsaWRGaWVsZHMuYWRkKGZpZWxkUGF0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGludmFsaWRGaWVsZHM7XG4gIH0sIFtmaWVsZHMsIHZhbHVlXSk7XG59XG5cbmV4cG9ydHMuZGVzZXJpYWxpemVWYWx1ZSA9IGRlc2VyaWFsaXplVmFsdWU7XG5leHBvcnRzLnNlcmlhbGl6ZVZhbHVlVG9PYmpCeUZpZWxkS2V5ID0gc2VyaWFsaXplVmFsdWVUb09iakJ5RmllbGRLZXk7XG5leHBvcnRzLnVzZUNoYW5nZWRGaWVsZHNBbmREYXRhRm9yVXBkYXRlID0gdXNlQ2hhbmdlZEZpZWxkc0FuZERhdGFGb3JVcGRhdGU7XG5leHBvcnRzLnVzZUludmFsaWRGaWVsZHMgPSB1c2VJbnZhbGlkRmllbGRzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/useInvalidFields-162d1b9c.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/dist/utils-1eb8e360.cjs.dev.js":
/*!**************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/dist/utils-1eb8e360.cjs.dev.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar React = __webpack_require__(/*! react */ \"react\");\n\nfunction useFormattedInput(config, _ref) {\n  let {\n    value,\n    onChange,\n    onBlur,\n    onFocus\n  } = _ref;\n\n  // typeof value === 'string' implies the unparsed form\n  // typeof value !== 'string' implies the parsed form\n  if (typeof value === 'string' && typeof config.parse(value) !== 'string') {\n    throw new Error(`Valid values must be passed in as a parsed value, not a raw value. The value you passed was \\`${JSON.stringify(value)}\\`, you should pass \\`${JSON.stringify(config.parse(value))}\\` instead`);\n  }\n\n  let [internalValueState, setInternalValueState] = React.useState(() => typeof value === 'string' ? value : config.format(value));\n  const [isFocused, setIsFocused] = React.useState(false);\n\n  if (typeof value === 'string' && value !== internalValueState) {\n    setInternalValueState(value);\n  } // If the value is not a string, we know it's in the parsed form\n\n\n  if (typeof value !== 'string') {\n    const formatted = config.format(value); // When the input is blurred, we want to show always show the formatted\n    // version so if we're not focussed and the formatted version is different\n    // to the current version, we need to update it.\n\n    if (!isFocused && formatted !== internalValueState) {\n      setInternalValueState(formatted);\n    }\n\n    const parsedInternal = config.parse(internalValueState); // We updating the internal value here because the\n    // external value has changed.\n\n    if (typeof parsedInternal !== 'string' && config.format(parsedInternal) !== formatted) {\n      setInternalValueState(formatted);\n    }\n  }\n\n  return {\n    value: internalValueState,\n\n    onChange(event) {\n      const value = event.target.value;\n      const parsed = config.parse(value);\n      onChange(parsed);\n      setInternalValueState(value);\n    },\n\n    onFocus(event) {\n      onFocus === null || onFocus === void 0 ? void 0 : onFocus(event);\n      setIsFocused(true);\n    },\n\n    onBlur(event) {\n      onBlur === null || onBlur === void 0 ? void 0 : onBlur(event);\n      setIsFocused(false); // this isn't strictly necessary since we already do this in render\n      // this just saves another rerender after setIsFocused(false)\n\n      if (typeof value !== 'string') {\n        setInternalValueState(config.format(value));\n      }\n    }\n\n  };\n}\n\nexports.useFormattedInput = useFormattedInput;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZGlzdC91dGlscy0xZWI4ZTM2MC5janMuZGV2LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLFlBQVksbUJBQU8sQ0FBQyxvQkFBTzs7QUFFM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxxSEFBcUgsc0JBQXNCLHdCQUF3QixvQ0FBb0M7QUFDdk07O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7O0FBR0o7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsNkRBQTZEO0FBQzdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEseUJBQXlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2Rpc3QvdXRpbHMtMWViOGUzNjAuY2pzLmRldi5qcz84ZWU1Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxuZnVuY3Rpb24gdXNlRm9ybWF0dGVkSW5wdXQoY29uZmlnLCBfcmVmKSB7XG4gIGxldCB7XG4gICAgdmFsdWUsXG4gICAgb25DaGFuZ2UsXG4gICAgb25CbHVyLFxuICAgIG9uRm9jdXNcbiAgfSA9IF9yZWY7XG5cbiAgLy8gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyBpbXBsaWVzIHRoZSB1bnBhcnNlZCBmb3JtXG4gIC8vIHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgaW1wbGllcyB0aGUgcGFyc2VkIGZvcm1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGNvbmZpZy5wYXJzZSh2YWx1ZSkgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBWYWxpZCB2YWx1ZXMgbXVzdCBiZSBwYXNzZWQgaW4gYXMgYSBwYXJzZWQgdmFsdWUsIG5vdCBhIHJhdyB2YWx1ZS4gVGhlIHZhbHVlIHlvdSBwYXNzZWQgd2FzIFxcYCR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfVxcYCwgeW91IHNob3VsZCBwYXNzIFxcYCR7SlNPTi5zdHJpbmdpZnkoY29uZmlnLnBhcnNlKHZhbHVlKSl9XFxgIGluc3RlYWRgKTtcbiAgfVxuXG4gIGxldCBbaW50ZXJuYWxWYWx1ZVN0YXRlLCBzZXRJbnRlcm5hbFZhbHVlU3RhdGVdID0gUmVhY3QudXNlU3RhdGUoKCkgPT4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogY29uZmlnLmZvcm1hdCh2YWx1ZSkpO1xuICBjb25zdCBbaXNGb2N1c2VkLCBzZXRJc0ZvY3VzZWRdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlICE9PSBpbnRlcm5hbFZhbHVlU3RhdGUpIHtcbiAgICBzZXRJbnRlcm5hbFZhbHVlU3RhdGUodmFsdWUpO1xuICB9IC8vIElmIHRoZSB2YWx1ZSBpcyBub3QgYSBzdHJpbmcsIHdlIGtub3cgaXQncyBpbiB0aGUgcGFyc2VkIGZvcm1cblxuXG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgY29uc3QgZm9ybWF0dGVkID0gY29uZmlnLmZvcm1hdCh2YWx1ZSk7IC8vIFdoZW4gdGhlIGlucHV0IGlzIGJsdXJyZWQsIHdlIHdhbnQgdG8gc2hvdyBhbHdheXMgc2hvdyB0aGUgZm9ybWF0dGVkXG4gICAgLy8gdmVyc2lvbiBzbyBpZiB3ZSdyZSBub3QgZm9jdXNzZWQgYW5kIHRoZSBmb3JtYXR0ZWQgdmVyc2lvbiBpcyBkaWZmZXJlbnRcbiAgICAvLyB0byB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZSBuZWVkIHRvIHVwZGF0ZSBpdC5cblxuICAgIGlmICghaXNGb2N1c2VkICYmIGZvcm1hdHRlZCAhPT0gaW50ZXJuYWxWYWx1ZVN0YXRlKSB7XG4gICAgICBzZXRJbnRlcm5hbFZhbHVlU3RhdGUoZm9ybWF0dGVkKTtcbiAgICB9XG5cbiAgICBjb25zdCBwYXJzZWRJbnRlcm5hbCA9IGNvbmZpZy5wYXJzZShpbnRlcm5hbFZhbHVlU3RhdGUpOyAvLyBXZSB1cGRhdGluZyB0aGUgaW50ZXJuYWwgdmFsdWUgaGVyZSBiZWNhdXNlIHRoZVxuICAgIC8vIGV4dGVybmFsIHZhbHVlIGhhcyBjaGFuZ2VkLlxuXG4gICAgaWYgKHR5cGVvZiBwYXJzZWRJbnRlcm5hbCAhPT0gJ3N0cmluZycgJiYgY29uZmlnLmZvcm1hdChwYXJzZWRJbnRlcm5hbCkgIT09IGZvcm1hdHRlZCkge1xuICAgICAgc2V0SW50ZXJuYWxWYWx1ZVN0YXRlKGZvcm1hdHRlZCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB2YWx1ZTogaW50ZXJuYWxWYWx1ZVN0YXRlLFxuXG4gICAgb25DaGFuZ2UoZXZlbnQpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgY29uc3QgcGFyc2VkID0gY29uZmlnLnBhcnNlKHZhbHVlKTtcbiAgICAgIG9uQ2hhbmdlKHBhcnNlZCk7XG4gICAgICBzZXRJbnRlcm5hbFZhbHVlU3RhdGUodmFsdWUpO1xuICAgIH0sXG5cbiAgICBvbkZvY3VzKGV2ZW50KSB7XG4gICAgICBvbkZvY3VzID09PSBudWxsIHx8IG9uRm9jdXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uRm9jdXMoZXZlbnQpO1xuICAgICAgc2V0SXNGb2N1c2VkKHRydWUpO1xuICAgIH0sXG5cbiAgICBvbkJsdXIoZXZlbnQpIHtcbiAgICAgIG9uQmx1ciA9PT0gbnVsbCB8fCBvbkJsdXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uQmx1cihldmVudCk7XG4gICAgICBzZXRJc0ZvY3VzZWQoZmFsc2UpOyAvLyB0aGlzIGlzbid0IHN0cmljdGx5IG5lY2Vzc2FyeSBzaW5jZSB3ZSBhbHJlYWR5IGRvIHRoaXMgaW4gcmVuZGVyXG4gICAgICAvLyB0aGlzIGp1c3Qgc2F2ZXMgYW5vdGhlciByZXJlbmRlciBhZnRlciBzZXRJc0ZvY3VzZWQoZmFsc2UpXG5cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNldEludGVybmFsVmFsdWVTdGF0ZShjb25maWcuZm9ybWF0KHZhbHVlKSk7XG4gICAgICB9XG4gICAgfVxuXG4gIH07XG59XG5cbmV4cG9ydHMudXNlRm9ybWF0dGVkSW5wdXQgPSB1c2VGb3JtYXR0ZWRJbnB1dDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/dist/utils-1eb8e360.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/fields/types/password/views/dist/keystone-6-core-fields-types-password-views.cjs.dev.js":
/*!***********************************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/fields/types/password/views/dist/keystone-6-core-fields-types-password-views.cjs.dev.js ***!
  \***********************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar _objectSpread = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"../../node_modules/@babel/runtime/helpers/objectSpread2.js\");\nvar React = __webpack_require__(/*! react */ \"react\");\nvar button = __webpack_require__(/*! @keystone-ui/button */ \"@keystone-ui/button\");\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar fields = __webpack_require__(/*! @keystone-ui/fields */ \"@keystone-ui/fields\");\nvar EyeIcon = __webpack_require__(/*! @keystone-ui/icons/icons/EyeIcon */ \"@keystone-ui/icons/icons/EyeIcon\");\nvar EyeOffIcon = __webpack_require__(/*! @keystone-ui/icons/icons/EyeOffIcon */ \"@keystone-ui/icons/icons/EyeOffIcon\");\nvar XIcon = __webpack_require__(/*! @keystone-ui/icons/icons/XIcon */ \"@keystone-ui/icons/icons/XIcon\");\nvar segmentedControl = __webpack_require__(/*! @keystone-ui/segmented-control */ \"@keystone-ui/segmented-control\");\nvar dumbPasswords = __webpack_require__(/*! dumb-passwords */ \"dumb-passwords\");\nvar CellContainer = __webpack_require__(/*! ../../../../../dist/CellContainer-453254b5.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/CellContainer-453254b5.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/extends */ \"../../node_modules/@babel/runtime/helpers/extends.js\");\n__webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\n__webpack_require__(/*! next/router */ \"next/router\");\n__webpack_require__(/*! next/link */ \"../../node_modules/next/link.js\");\n__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"../../node_modules/@babel/runtime/helpers/defineProperty.js\");\n__webpack_require__(/*! @keystone-ui/icons/icons/AlertTriangleIcon */ \"@keystone-ui/icons/icons/AlertTriangleIcon\");\n__webpack_require__(/*! @keystone-ui/toast */ \"@keystone-ui/toast\");\n__webpack_require__(/*! @keystone-ui/loading */ \"@keystone-ui/loading\");\n__webpack_require__(/*! @keystone-ui/modals */ \"@keystone-ui/modals\");\n__webpack_require__(/*! apollo-upload-client */ \"apollo-upload-client\");\n__webpack_require__(/*! @emotion/hash */ \"@emotion/hash\");\n__webpack_require__(/*! ../../../../../dist/sqlite-a2385a81.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/sqlite-a2385a81.cjs.dev.js\");\n__webpack_require__(/*! ../../../../../dist/graphql-ts-schema-2a220120.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/graphql-ts-schema-2a220120.cjs.dev.js\");\n__webpack_require__(/*! @apollo/client */ \"@apollo/client\");\n__webpack_require__(/*! ../../../../../dist/admin-meta-graphql-9f9a9c11.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/admin-meta-graphql-9f9a9c11.cjs.dev.js\");\n__webpack_require__(/*! @keystone-ui/popover */ \"@keystone-ui/popover\");\n__webpack_require__(/*! @keystone-ui/icons/icons/MoreHorizontalIcon */ \"@keystone-ui/icons/icons/MoreHorizontalIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/ChevronRightIcon */ \"@keystone-ui/icons/icons/ChevronRightIcon\");\n__webpack_require__(/*! ../../../../../dist/SignoutButton-081410d6.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/SignoutButton-081410d6.cjs.dev.js\");\n__webpack_require__(/*! fast-deep-equal */ \"fast-deep-equal\");\n__webpack_require__(/*! @keystone-ui/notice */ \"@keystone-ui/notice\");\n__webpack_require__(/*! decimal.js */ \"decimal.js\");\n__webpack_require__(/*! @graphql-tools/schema */ \"@graphql-tools/schema\");\n__webpack_require__(/*! @graphql-ts/schema/api-without-context */ \"@graphql-ts/schema/api-without-context\");\n__webpack_require__(/*! @graphql-ts/schema */ \"@graphql-ts/schema\");\n__webpack_require__(/*! graphql-type-json */ \"graphql-type-json\");\n__webpack_require__(/*! graphql-upload/public/GraphQLUpload.js */ \"graphql-upload/public/GraphQLUpload.js\");\n__webpack_require__(/*! graphql */ \"graphql\");\n__webpack_require__(/*! @graphql-ts/extend */ \"@graphql-ts/extend\");\n__webpack_require__(/*! @graphql-ts/schema/api-with-context */ \"@graphql-ts/schema/api-with-context\");\n\nfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\nvar dumbPasswords__default = /*#__PURE__*/_interopDefault(dumbPasswords);\n\nfunction validate(value, validation, fieldLabel) {\n  if (value.kind === 'initial' && (value.isSet === null || value.isSet === true)) {\n    return undefined;\n  }\n\n  if (value.kind === 'initial' && validation !== null && validation !== void 0 && validation.isRequired) {\n    return `${fieldLabel} is required`;\n  }\n\n  if (value.kind === 'editing' && value.confirm !== value.value) {\n    return `The passwords do not match`;\n  }\n\n  if (value.kind === 'editing') {\n    const val = value.value;\n\n    if (val.length < validation.length.min) {\n      if (validation.length.min === 1) {\n        return `${fieldLabel} must not be empty`;\n      }\n\n      return `${fieldLabel} must be at least ${validation.length.min} characters long`;\n    }\n\n    if (validation.length.max !== null && val.length > validation.length.max) {\n      return `${fieldLabel} must be no longer than ${validation.length.min} characters`;\n    }\n\n    if (validation.match && !validation.match.regex.test(val)) {\n      return validation.match.explanation;\n    }\n\n    if (validation.rejectCommon && dumbPasswords__default[\"default\"].check(val)) {\n      return `${fieldLabel} is too common and is not allowed`;\n    }\n  }\n\n  return undefined;\n}\n\nfunction isSetText(isSet) {\n  return isSet == null ? 'Access Denied' : isSet ? 'Is set' : 'Is not set';\n}\n\nconst Field = _ref => {\n  let {\n    field,\n    value,\n    onChange,\n    forceValidation,\n    autoFocus\n  } = _ref;\n  const [showInputValue, setShowInputValue] = React.useState(false);\n  const [touchedFirstInput, setTouchedFirstInput] = React.useState(false);\n  const [touchedSecondInput, setTouchedSecondInput] = React.useState(false);\n  const shouldShowValidation = forceValidation || touchedFirstInput && touchedSecondInput;\n  const validationMessage = shouldShowValidation ? validate(value, field.validation, field.label) : undefined;\n  const validation = validationMessage && core.jsx(core.Text, {\n    color: \"red600\",\n    size: \"small\"\n  }, validationMessage);\n  const inputType = showInputValue ? 'text' : 'password';\n  return core.jsx(fields.FieldContainer, {\n    as: \"fieldset\"\n  }, core.jsx(fields.FieldLabel, {\n    as: \"legend\"\n  }, field.label), onChange === undefined ? isSetText(value.isSet) : value.kind === 'initial' ? core.jsx(React.Fragment, null, core.jsx(button.Button, {\n    autoFocus: autoFocus,\n    onClick: () => {\n      onChange({\n        kind: 'editing',\n        confirm: '',\n        value: '',\n        isSet: value.isSet\n      });\n    }\n  }, value.isSet ? 'Change Password' : 'Set Password'), validation) : core.jsx(core.Stack, {\n    gap: \"small\"\n  }, core.jsx(\"div\", {\n    css: {\n      display: 'flex'\n    }\n  }, core.jsx(core.VisuallyHidden, {\n    as: \"label\",\n    htmlFor: `${field.path}-new-password`\n  }, \"New Password\"), core.jsx(fields.TextInput, {\n    id: `${field.path}-new-password`,\n    autoFocus: true,\n    invalid: validationMessage !== undefined,\n    type: inputType,\n    value: value.value,\n    placeholder: \"New Password\",\n    onChange: event => {\n      onChange(_objectSpread(_objectSpread({}, value), {}, {\n        value: event.target.value\n      }));\n    },\n    onBlur: () => {\n      setTouchedFirstInput(true);\n    }\n  }), core.jsx(Spacer, null), core.jsx(core.VisuallyHidden, {\n    as: \"label\",\n    htmlFor: `${field.path}-confirm-password`\n  }, \"Confirm Password\"), core.jsx(fields.TextInput, {\n    id: `${field.path}-confirm-password`,\n    invalid: validationMessage !== undefined,\n    type: inputType,\n    value: value.confirm,\n    placeholder: \"Confirm Password\",\n    onChange: event => {\n      onChange(_objectSpread(_objectSpread({}, value), {}, {\n        confirm: event.target.value\n      }));\n    },\n    onBlur: () => {\n      setTouchedSecondInput(true);\n    }\n  }), core.jsx(Spacer, null), core.jsx(button.Button, {\n    onClick: () => {\n      setShowInputValue(!showInputValue);\n    }\n  }, core.jsx(core.VisuallyHidden, null, showInputValue ? 'Hide Text' : 'Show Text'), showInputValue ? core.jsx(EyeOffIcon.EyeOffIcon, null) : core.jsx(EyeIcon.EyeIcon, null)), core.jsx(Spacer, null), core.jsx(button.Button, {\n    onClick: () => {\n      onChange({\n        kind: 'initial',\n        isSet: value.isSet\n      });\n    }\n  }, core.jsx(core.VisuallyHidden, null, \"Cancel\"), core.jsx(XIcon.XIcon, null))), validation));\n};\nconst Cell = _ref2 => {\n  var _item$field$path;\n\n  let {\n    item,\n    field\n  } = _ref2;\n  return core.jsx(CellContainer.CellContainer, null, isSetText((_item$field$path = item[field.path]) === null || _item$field$path === void 0 ? void 0 : _item$field$path.isSet));\n};\nconst CardValue = _ref3 => {\n  var _item$field$path2;\n\n  let {\n    item,\n    field\n  } = _ref3;\n  return core.jsx(fields.FieldContainer, null, core.jsx(fields.FieldLabel, null, field.label), isSetText((_item$field$path2 = item[field.path]) === null || _item$field$path2 === void 0 ? void 0 : _item$field$path2.isSet));\n};\nconst controller = config => {\n  const validation = _objectSpread(_objectSpread({}, config.fieldMeta.validation), {}, {\n    match: config.fieldMeta.validation.match === null ? null : {\n      regex: new RegExp(config.fieldMeta.validation.match.regex.source, config.fieldMeta.validation.match.regex.flags),\n      explanation: config.fieldMeta.validation.match.explanation\n    }\n  });\n\n  return {\n    path: config.path,\n    label: config.label,\n    graphqlSelection: `${config.path} {isSet}`,\n    validation,\n    defaultValue: {\n      kind: 'initial',\n      isSet: false\n    },\n    validate: state => validate(state, validation, config.label) === undefined,\n    deserialize: data => {\n      var _data$config$path$isS, _data$config$path;\n\n      return {\n        kind: 'initial',\n        isSet: (_data$config$path$isS = (_data$config$path = data[config.path]) === null || _data$config$path === void 0 ? void 0 : _data$config$path.isSet) !== null && _data$config$path$isS !== void 0 ? _data$config$path$isS : null\n      };\n    },\n    serialize: value => {\n      if (value.kind === 'initial') return {};\n      return {\n        [config.path]: value.value\n      };\n    },\n    filter: config.fieldMeta.isNullable === false ? undefined : {\n      Filter(props) {\n        return core.jsx(segmentedControl.SegmentedControl, {\n          selectedIndex: Number(props.value),\n          onChange: value => {\n            props.onChange(!!value);\n          },\n          segments: ['Is Not Set', 'Is Set']\n        });\n      },\n\n      graphql: _ref4 => {\n        let {\n          value\n        } = _ref4;\n        return {\n          [config.path]: {\n            isSet: value\n          }\n        };\n      },\n\n      Label(_ref5) {\n        let {\n          value\n        } = _ref5;\n        return value ? 'is set' : 'is not set';\n      },\n\n      types: {\n        is_set: {\n          label: 'Is Set',\n          initialValue: true\n        }\n      }\n    }\n  };\n};\n\nconst Spacer = () => {\n  const {\n    spacing\n  } = core.useTheme();\n  return core.jsx(\"div\", {\n    css: {\n      width: spacing.small,\n      flexShrink: 0\n    }\n  });\n};\n\nexports.CardValue = CardValue;\nexports.Cell = Cell;\nexports.Field = Field;\nexports.controller = controller;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3Bhc3N3b3JkL3ZpZXdzL2Rpc3Qva2V5c3RvbmUtNi1jb3JlLWZpZWxkcy10eXBlcy1wYXNzd29yZC12aWV3cy5janMuZGV2LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLDhDQUE2QyxFQUFFLGFBQWEsRUFBQzs7QUFFN0Qsb0JBQW9CLG1CQUFPLENBQUMsd0dBQXNDO0FBQ2xFLFlBQVksbUJBQU8sQ0FBQyxvQkFBTztBQUMzQixhQUFhLG1CQUFPLENBQUMsZ0RBQXFCO0FBQzFDLFdBQVcsbUJBQU8sQ0FBQyw0Q0FBbUI7QUFDdEMsYUFBYSxtQkFBTyxDQUFDLGdEQUFxQjtBQUMxQyxjQUFjLG1CQUFPLENBQUMsMEVBQWtDO0FBQ3hELGlCQUFpQixtQkFBTyxDQUFDLGdGQUFxQztBQUM5RCxZQUFZLG1CQUFPLENBQUMsc0VBQWdDO0FBQ3BELHVCQUF1QixtQkFBTyxDQUFDLHNFQUFnQztBQUMvRCxvQkFBb0IsbUJBQU8sQ0FBQyxzQ0FBZ0I7QUFDNUMsb0JBQW9CLG1CQUFPLENBQUMseUlBQXVEO0FBQ25GLG1CQUFPLENBQUMsNEZBQWdDO0FBQ3hDLG1CQUFPLENBQUMsNEhBQWdEO0FBQ3hELG1CQUFPLENBQUMsZ0NBQWE7QUFDckIsbUJBQU8sQ0FBQyxrREFBVztBQUNuQixtQkFBTyxDQUFDLDBHQUF1QztBQUMvQyxtQkFBTyxDQUFDLDhGQUE0QztBQUNwRCxtQkFBTyxDQUFDLDhDQUFvQjtBQUM1QixtQkFBTyxDQUFDLGtEQUFzQjtBQUM5QixtQkFBTyxDQUFDLGdEQUFxQjtBQUM3QixtQkFBTyxDQUFDLGtEQUFzQjtBQUM5QixtQkFBTyxDQUFDLG9DQUFlO0FBQ3ZCLG1CQUFPLENBQUMsMkhBQWdEO0FBQ3hELG1CQUFPLENBQUMsaUpBQTJEO0FBQ25FLG1CQUFPLENBQUMsc0NBQWdCO0FBQ3hCLG1CQUFPLENBQUMsbUpBQTREO0FBQ3BFLG1CQUFPLENBQUMsa0RB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QUFHO0FBQ0g7O0FBRUEsaUJBQWlCO0FBQ2pCLFlBQVk7QUFDWixhQUFhO0FBQ2Isa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2ZpZWxkcy90eXBlcy9wYXNzd29yZC92aWV3cy9kaXN0L2tleXN0b25lLTYtY29yZS1maWVsZHMtdHlwZXMtcGFzc3dvcmQtdmlld3MuY2pzLmRldi5qcz8xOTY1Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIF9vYmplY3RTcHJlYWQgPSByZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZDInKTtcbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgYnV0dG9uID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2J1dHRvbicpO1xudmFyIGNvcmUgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvY29yZScpO1xudmFyIGZpZWxkcyA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9maWVsZHMnKTtcbnZhciBFeWVJY29uID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL0V5ZUljb24nKTtcbnZhciBFeWVPZmZJY29uID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL0V5ZU9mZkljb24nKTtcbnZhciBYSWNvbiA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9YSWNvbicpO1xudmFyIHNlZ21lbnRlZENvbnRyb2wgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvc2VnbWVudGVkLWNvbnRyb2wnKTtcbnZhciBkdW1iUGFzc3dvcmRzID0gcmVxdWlyZSgnZHVtYi1wYXNzd29yZHMnKTtcbnZhciBDZWxsQ29udGFpbmVyID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9DZWxsQ29udGFpbmVyLTQ1MzI1NGI1LmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xucmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xucmVxdWlyZSgnbmV4dC9yb3V0ZXInKTtcbnJlcXVpcmUoJ25leHQvbGluaycpO1xucmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eScpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL0FsZXJ0VHJpYW5nbGVJY29uJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvdG9hc3QnKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9sb2FkaW5nJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvbW9kYWxzJyk7XG5yZXF1aXJlKCdhcG9sbG8tdXBsb2FkLWNsaWVudCcpO1xucmVxdWlyZSgnQGVtb3Rpb24vaGFzaCcpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9zcWxpdGUtYTIzODVhODEuY2pzLmRldi5qcycpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9ncmFwaHFsLXRzLXNjaGVtYS0yYTIyMDEyMC5janMuZGV2LmpzJyk7XG5yZXF1aXJlKCdAYXBvbGxvL2NsaWVudCcpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9hZG1pbi1tZXRhLWdyYXBocWwtOWY5YTljMTEuY2pzLmRldi5qcycpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL3BvcG92ZXInKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9Nb3JlSG9yaXpvbnRhbEljb24nKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9DaGV2cm9uUmlnaHRJY29uJyk7XG5yZXF1aXJlKCcuLi8uLi8uLi8uLi8uLi9kaXN0L1NpZ25vdXRCdXR0b24tMDgxNDEwZDYuY2pzLmRldi5qcycpO1xucmVxdWlyZSgnZmFzdC1kZWVwLWVxdWFsJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvbm90aWNlJyk7XG5yZXF1aXJlKCdkZWNpbWFsLmpzJyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10b29scy9zY2hlbWEnKTtcbnJlcXVpcmUoJ0BncmFwaHFsLXRzL3NjaGVtYS9hcGktd2l0aG91dC1jb250ZXh0Jyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10cy9zY2hlbWEnKTtcbnJlcXVpcmUoJ2dyYXBocWwtdHlwZS1qc29uJyk7XG5yZXF1aXJlKCdncmFwaHFsLXVwbG9hZC9wdWJsaWMvR3JhcGhRTFVwbG9hZC5qcycpO1xucmVxdWlyZSgnZ3JhcGhxbCcpO1xucmVxdWlyZSgnQGdyYXBocWwtdHMvZXh0ZW5kJyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10cy9zY2hlbWEvYXBpLXdpdGgtY29udGV4dCcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcERlZmF1bHQgKGUpIHsgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsgJ2RlZmF1bHQnOiBlIH07IH1cblxudmFyIGR1bWJQYXNzd29yZHNfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0KGR1bWJQYXNzd29yZHMpO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZSh2YWx1ZSwgdmFsaWRhdGlvbiwgZmllbGRMYWJlbCkge1xuICBpZiAodmFsdWUua2luZCA9PT0gJ2luaXRpYWwnICYmICh2YWx1ZS5pc1NldCA9PT0gbnVsbCB8fCB2YWx1ZS5pc1NldCA9PT0gdHJ1ZSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHZhbHVlLmtpbmQgPT09ICdpbml0aWFsJyAmJiB2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQpIHtcbiAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gaXMgcmVxdWlyZWRgO1xuICB9XG5cbiAgaWYgKHZhbHVlLmtpbmQgPT09ICdlZGl0aW5nJyAmJiB2YWx1ZS5jb25maXJtICE9PSB2YWx1ZS52YWx1ZSkge1xuICAgIHJldHVybiBgVGhlIHBhc3N3b3JkcyBkbyBub3QgbWF0Y2hgO1xuICB9XG5cbiAgaWYgKHZhbHVlLmtpbmQgPT09ICdlZGl0aW5nJykge1xuICAgIGNvbnN0IHZhbCA9IHZhbHVlLnZhbHVlO1xuXG4gICAgaWYgKHZhbC5sZW5ndGggPCB2YWxpZGF0aW9uLmxlbmd0aC5taW4pIHtcbiAgICAgIGlmICh2YWxpZGF0aW9uLmxlbmd0aC5taW4gPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3Qgbm90IGJlIGVtcHR5YDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3QgYmUgYXQgbGVhc3QgJHt2YWxpZGF0aW9uLmxlbmd0aC5taW59IGNoYXJhY3RlcnMgbG9uZ2A7XG4gICAgfVxuXG4gICAgaWYgKHZhbGlkYXRpb24ubGVuZ3RoLm1heCAhPT0gbnVsbCAmJiB2YWwubGVuZ3RoID4gdmFsaWRhdGlvbi5sZW5ndGgubWF4KSB7XG4gICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBiZSBubyBsb25nZXIgdGhhbiAke3ZhbGlkYXRpb24ubGVuZ3RoLm1pbn0gY2hhcmFjdGVyc2A7XG4gICAgfVxuXG4gICAgaWYgKHZhbGlkYXRpb24ubWF0Y2ggJiYgIXZhbGlkYXRpb24ubWF0Y2gucmVnZXgudGVzdCh2YWwpKSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGlvbi5tYXRjaC5leHBsYW5hdGlvbjtcbiAgICB9XG5cbiAgICBpZiAodmFsaWRhdGlvbi5yZWplY3RDb21tb24gJiYgZHVtYlBhc3N3b3Jkc19fZGVmYXVsdFtcImRlZmF1bHRcIl0uY2hlY2sodmFsKSkge1xuICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IGlzIHRvbyBjb21tb24gYW5kIGlzIG5vdCBhbGxvd2VkYDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBpc1NldFRleHQoaXNTZXQpIHtcbiAgcmV0dXJuIGlzU2V0ID09IG51bGwgPyAnQWNjZXNzIERlbmllZCcgOiBpc1NldCA/ICdJcyBzZXQnIDogJ0lzIG5vdCBzZXQnO1xufVxuXG5jb25zdCBGaWVsZCA9IF9yZWYgPT4ge1xuICBsZXQge1xuICAgIGZpZWxkLFxuICAgIHZhbHVlLFxuICAgIG9uQ2hhbmdlLFxuICAgIGZvcmNlVmFsaWRhdGlvbixcbiAgICBhdXRvRm9jdXNcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IFtzaG93SW5wdXRWYWx1ZSwgc2V0U2hvd0lucHV0VmFsdWVdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdG91Y2hlZEZpcnN0SW5wdXQsIHNldFRvdWNoZWRGaXJzdElucHV0XSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3RvdWNoZWRTZWNvbmRJbnB1dCwgc2V0VG91Y2hlZFNlY29uZElucHV0XSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qgc2hvdWxkU2hvd1ZhbGlkYXRpb24gPSBmb3JjZVZhbGlkYXRpb24gfHwgdG91Y2hlZEZpcnN0SW5wdXQgJiYgdG91Y2hlZFNlY29uZElucHV0O1xuICBjb25zdCB2YWxpZGF0aW9uTWVzc2FnZSA9IHNob3VsZFNob3dWYWxpZGF0aW9uID8gdmFsaWRhdGUodmFsdWUsIGZpZWxkLnZhbGlkYXRpb24sIGZpZWxkLmxhYmVsKSA6IHVuZGVmaW5lZDtcbiAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRpb25NZXNzYWdlICYmIGNvcmUuanN4KGNvcmUuVGV4dCwge1xuICAgIGNvbG9yOiBcInJlZDYwMFwiLFxuICAgIHNpemU6IFwic21hbGxcIlxuICB9LCB2YWxpZGF0aW9uTWVzc2FnZSk7XG4gIGNvbnN0IGlucHV0VHlwZSA9IHNob3dJbnB1dFZhbHVlID8gJ3RleHQnIDogJ3Bhc3N3b3JkJztcbiAgcmV0dXJuIGNvcmUuanN4KGZpZWxkcy5GaWVsZENvbnRhaW5lciwge1xuICAgIGFzOiBcImZpZWxkc2V0XCJcbiAgfSwgY29yZS5qc3goZmllbGRzLkZpZWxkTGFiZWwsIHtcbiAgICBhczogXCJsZWdlbmRcIlxuICB9LCBmaWVsZC5sYWJlbCksIG9uQ2hhbmdlID09PSB1bmRlZmluZWQgPyBpc1NldFRleHQodmFsdWUuaXNTZXQpIDogdmFsdWUua2luZCA9PT0gJ2luaXRpYWwnID8gY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIG51bGwsIGNvcmUuanN4KGJ1dHRvbi5CdXR0b24sIHtcbiAgICBhdXRvRm9jdXM6IGF1dG9Gb2N1cyxcbiAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICBvbkNoYW5nZSh7XG4gICAgICAgIGtpbmQ6ICdlZGl0aW5nJyxcbiAgICAgICAgY29uZmlybTogJycsXG4gICAgICAgIHZhbHVlOiAnJyxcbiAgICAgICAgaXNTZXQ6IHZhbHVlLmlzU2V0XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHZhbHVlLmlzU2V0ID8gJ0NoYW5nZSBQYXNzd29yZCcgOiAnU2V0IFBhc3N3b3JkJyksIHZhbGlkYXRpb24pIDogY29yZS5qc3goY29yZS5TdGFjaywge1xuICAgIGdhcDogXCJzbWFsbFwiXG4gIH0sIGNvcmUuanN4KFwiZGl2XCIsIHtcbiAgICBjc3M6IHtcbiAgICAgIGRpc3BsYXk6ICdmbGV4J1xuICAgIH1cbiAgfSwgY29yZS5qc3goY29yZS5WaXN1YWxseUhpZGRlbiwge1xuICAgIGFzOiBcImxhYmVsXCIsXG4gICAgaHRtbEZvcjogYCR7ZmllbGQucGF0aH0tbmV3LXBhc3N3b3JkYFxuICB9LCBcIk5ldyBQYXNzd29yZFwiKSwgY29yZS5qc3goZmllbGRzLlRleHRJbnB1dCwge1xuICAgIGlkOiBgJHtmaWVsZC5wYXRofS1uZXctcGFzc3dvcmRgLFxuICAgIGF1dG9Gb2N1czogdHJ1ZSxcbiAgICBpbnZhbGlkOiB2YWxpZGF0aW9uTWVzc2FnZSAhPT0gdW5kZWZpbmVkLFxuICAgIHR5cGU6IGlucHV0VHlwZSxcbiAgICB2YWx1ZTogdmFsdWUudmFsdWUsXG4gICAgcGxhY2Vob2xkZXI6IFwiTmV3IFBhc3N3b3JkXCIsXG4gICAgb25DaGFuZ2U6IGV2ZW50ID0+IHtcbiAgICAgIG9uQ2hhbmdlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFsdWUpLCB7fSwge1xuICAgICAgICB2YWx1ZTogZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBvbkJsdXI6ICgpID0+IHtcbiAgICAgIHNldFRvdWNoZWRGaXJzdElucHV0KHRydWUpO1xuICAgIH1cbiAgfSksIGNvcmUuanN4KFNwYWNlciwgbnVsbCksIGNvcmUuanN4KGNvcmUuVmlzdWFsbHlIaWRkZW4sIHtcbiAgICBhczogXCJsYWJlbFwiLFxuICAgIGh0bWxGb3I6IGAke2ZpZWxkLnBhdGh9LWNvbmZpcm0tcGFzc3dvcmRgXG4gIH0sIFwiQ29uZmlybSBQYXNzd29yZFwiKSwgY29yZS5qc3goZmllbGRzLlRleHRJbnB1dCwge1xuICAgIGlkOiBgJHtmaWVsZC5wYXRofS1jb25maXJtLXBhc3N3b3JkYCxcbiAgICBpbnZhbGlkOiB2YWxpZGF0aW9uTWVzc2FnZSAhPT0gdW5kZWZpbmVkLFxuICAgIHR5cGU6IGlucHV0VHlwZSxcbiAgICB2YWx1ZTogdmFsdWUuY29uZmlybSxcbiAgICBwbGFjZWhvbGRlcjogXCJDb25maXJtIFBhc3N3b3JkXCIsXG4gICAgb25DaGFuZ2U6IGV2ZW50ID0+IHtcbiAgICAgIG9uQ2hhbmdlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFsdWUpLCB7fSwge1xuICAgICAgICBjb25maXJtOiBldmVudC50YXJnZXQudmFsdWVcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIG9uQmx1cjogKCkgPT4ge1xuICAgICAgc2V0VG91Y2hlZFNlY29uZElucHV0KHRydWUpO1xuICAgIH1cbiAgfSksIGNvcmUuanN4KFNwYWNlciwgbnVsbCksIGNvcmUuanN4KGJ1dHRvbi5CdXR0b24sIHtcbiAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICBzZXRTaG93SW5wdXRWYWx1ZSghc2hvd0lucHV0VmFsdWUpO1xuICAgIH1cbiAgfSwgY29yZS5qc3goY29yZS5WaXN1YWxseUhpZGRlbiwgbnVsbCwgc2hvd0lucHV0VmFsdWUgPyAnSGlkZSBUZXh0JyA6ICdTaG93IFRleHQnKSwgc2hvd0lucHV0VmFsdWUgPyBjb3JlLmpzeChFeWVPZmZJY29uLkV5ZU9mZkljb24sIG51bGwpIDogY29yZS5qc3goRXllSWNvbi5FeWVJY29uLCBudWxsKSksIGNvcmUuanN4KFNwYWNlciwgbnVsbCksIGNvcmUuanN4KGJ1dHRvbi5CdXR0b24sIHtcbiAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICBvbkNoYW5nZSh7XG4gICAgICAgIGtpbmQ6ICdpbml0aWFsJyxcbiAgICAgICAgaXNTZXQ6IHZhbHVlLmlzU2V0XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIGNvcmUuanN4KGNvcmUuVmlzdWFsbHlIaWRkZW4sIG51bGwsIFwiQ2FuY2VsXCIpLCBjb3JlLmpzeChYSWNvbi5YSWNvbiwgbnVsbCkpKSwgdmFsaWRhdGlvbikpO1xufTtcbmNvbnN0IENlbGwgPSBfcmVmMiA9PiB7XG4gIHZhciBfaXRlbSRmaWVsZCRwYXRoO1xuXG4gIGxldCB7XG4gICAgaXRlbSxcbiAgICBmaWVsZFxuICB9ID0gX3JlZjI7XG4gIHJldHVybiBjb3JlLmpzeChDZWxsQ29udGFpbmVyLkNlbGxDb250YWluZXIsIG51bGwsIGlzU2V0VGV4dCgoX2l0ZW0kZmllbGQkcGF0aCA9IGl0ZW1bZmllbGQucGF0aF0pID09PSBudWxsIHx8IF9pdGVtJGZpZWxkJHBhdGggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJGZpZWxkJHBhdGguaXNTZXQpKTtcbn07XG5jb25zdCBDYXJkVmFsdWUgPSBfcmVmMyA9PiB7XG4gIHZhciBfaXRlbSRmaWVsZCRwYXRoMjtcblxuICBsZXQge1xuICAgIGl0ZW0sXG4gICAgZmllbGRcbiAgfSA9IF9yZWYzO1xuICByZXR1cm4gY29yZS5qc3goZmllbGRzLkZpZWxkQ29udGFpbmVyLCBudWxsLCBjb3JlLmpzeChmaWVsZHMuRmllbGRMYWJlbCwgbnVsbCwgZmllbGQubGFiZWwpLCBpc1NldFRleHQoKF9pdGVtJGZpZWxkJHBhdGgyID0gaXRlbVtmaWVsZC5wYXRoXSkgPT09IG51bGwgfHwgX2l0ZW0kZmllbGQkcGF0aDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJGZpZWxkJHBhdGgyLmlzU2V0KSk7XG59O1xuY29uc3QgY29udHJvbGxlciA9IGNvbmZpZyA9PiB7XG4gIGNvbnN0IHZhbGlkYXRpb24gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGNvbmZpZy5maWVsZE1ldGEudmFsaWRhdGlvbiksIHt9LCB7XG4gICAgbWF0Y2g6IGNvbmZpZy5maWVsZE1ldGEudmFsaWRhdGlvbi5tYXRjaCA9PT0gbnVsbCA/IG51bGwgOiB7XG4gICAgICByZWdleDogbmV3IFJlZ0V4cChjb25maWcuZmllbGRNZXRhLnZhbGlkYXRpb24ubWF0Y2gucmVnZXguc291cmNlLCBjb25maWcuZmllbGRNZXRhLnZhbGlkYXRpb24ubWF0Y2gucmVnZXguZmxhZ3MpLFxuICAgICAgZXhwbGFuYXRpb246IGNvbmZpZy5maWVsZE1ldGEudmFsaWRhdGlvbi5tYXRjaC5leHBsYW5hdGlvblxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBwYXRoOiBjb25maWcucGF0aCxcbiAgICBsYWJlbDogY29uZmlnLmxhYmVsLFxuICAgIGdyYXBocWxTZWxlY3Rpb246IGAke2NvbmZpZy5wYXRofSB7aXNTZXR9YCxcbiAgICB2YWxpZGF0aW9uLFxuICAgIGRlZmF1bHRWYWx1ZToge1xuICAgICAga2luZDogJ2luaXRpYWwnLFxuICAgICAgaXNTZXQ6IGZhbHNlXG4gICAgfSxcbiAgICB2YWxpZGF0ZTogc3RhdGUgPT4gdmFsaWRhdGUoc3RhdGUsIHZhbGlkYXRpb24sIGNvbmZpZy5sYWJlbCkgPT09IHVuZGVmaW5lZCxcbiAgICBkZXNlcmlhbGl6ZTogZGF0YSA9PiB7XG4gICAgICB2YXIgX2RhdGEkY29uZmlnJHBhdGgkaXNTLCBfZGF0YSRjb25maWckcGF0aDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2luZDogJ2luaXRpYWwnLFxuICAgICAgICBpc1NldDogKF9kYXRhJGNvbmZpZyRwYXRoJGlzUyA9IChfZGF0YSRjb25maWckcGF0aCA9IGRhdGFbY29uZmlnLnBhdGhdKSA9PT0gbnVsbCB8fCBfZGF0YSRjb25maWckcGF0aCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RhdGEkY29uZmlnJHBhdGguaXNTZXQpICE9PSBudWxsICYmIF9kYXRhJGNvbmZpZyRwYXRoJGlzUyAhPT0gdm9pZCAwID8gX2RhdGEkY29uZmlnJHBhdGgkaXNTIDogbnVsbFxuICAgICAgfTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZTogdmFsdWUgPT4ge1xuICAgICAgaWYgKHZhbHVlLmtpbmQgPT09ICdpbml0aWFsJykgcmV0dXJuIHt9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgW2NvbmZpZy5wYXRoXTogdmFsdWUudmFsdWVcbiAgICAgIH07XG4gICAgfSxcbiAgICBmaWx0ZXI6IGNvbmZpZy5maWVsZE1ldGEuaXNOdWxsYWJsZSA9PT0gZmFsc2UgPyB1bmRlZmluZWQgOiB7XG4gICAgICBGaWx0ZXIocHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIGNvcmUuanN4KHNlZ21lbnRlZENvbnRyb2wuU2VnbWVudGVkQ29udHJvbCwge1xuICAgICAgICAgIHNlbGVjdGVkSW5kZXg6IE51bWJlcihwcm9wcy52YWx1ZSksXG4gICAgICAgICAgb25DaGFuZ2U6IHZhbHVlID0+IHtcbiAgICAgICAgICAgIHByb3BzLm9uQ2hhbmdlKCEhdmFsdWUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2VnbWVudHM6IFsnSXMgTm90IFNldCcsICdJcyBTZXQnXVxuICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIGdyYXBocWw6IF9yZWY0ID0+IHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICB2YWx1ZVxuICAgICAgICB9ID0gX3JlZjQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgW2NvbmZpZy5wYXRoXToge1xuICAgICAgICAgICAgaXNTZXQ6IHZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSxcblxuICAgICAgTGFiZWwoX3JlZjUpIHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICB2YWx1ZVxuICAgICAgICB9ID0gX3JlZjU7XG4gICAgICAgIHJldHVybiB2YWx1ZSA/ICdpcyBzZXQnIDogJ2lzIG5vdCBzZXQnO1xuICAgICAgfSxcblxuICAgICAgdHlwZXM6IHtcbiAgICAgICAgaXNfc2V0OiB7XG4gICAgICAgICAgbGFiZWw6ICdJcyBTZXQnLFxuICAgICAgICAgIGluaXRpYWxWYWx1ZTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuY29uc3QgU3BhY2VyID0gKCkgPT4ge1xuICBjb25zdCB7XG4gICAgc3BhY2luZ1xuICB9ID0gY29yZS51c2VUaGVtZSgpO1xuICByZXR1cm4gY29yZS5qc3goXCJkaXZcIiwge1xuICAgIGNzczoge1xuICAgICAgd2lkdGg6IHNwYWNpbmcuc21hbGwsXG4gICAgICBmbGV4U2hyaW5rOiAwXG4gICAgfVxuICB9KTtcbn07XG5cbmV4cG9ydHMuQ2FyZFZhbHVlID0gQ2FyZFZhbHVlO1xuZXhwb3J0cy5DZWxsID0gQ2VsbDtcbmV4cG9ydHMuRmllbGQgPSBGaWVsZDtcbmV4cG9ydHMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/fields/types/password/views/dist/keystone-6-core-fields-types-password-views.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/fields/types/password/views/dist/keystone-6-core-fields-types-password-views.cjs.js":
/*!*******************************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/fields/types/password/views/dist/keystone-6-core-fields-types-password-views.cjs.js ***!
  \*******************************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./keystone-6-core-fields-types-password-views.cjs.dev.js */ \"../../node_modules/@keystone-6/core/fields/types/password/views/dist/keystone-6-core-fields-types-password-views.cjs.dev.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3Bhc3N3b3JkL3ZpZXdzL2Rpc3Qva2V5c3RvbmUtNi1jb3JlLWZpZWxkcy10eXBlcy1wYXNzd29yZC12aWV3cy5janMuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsSUFBSSxLQUFxQyxFQUFFLEVBRTFDLENBQUM7QUFDRixFQUFFLG1PQUFvRjtBQUN0RiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvQGtleXN0b25lLTYvY29yZS9maWVsZHMvdHlwZXMvcGFzc3dvcmQvdmlld3MvZGlzdC9rZXlzdG9uZS02LWNvcmUtZmllbGRzLXR5cGVzLXBhc3N3b3JkLXZpZXdzLmNqcy5qcz9iN2VmIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2tleXN0b25lLTYtY29yZS1maWVsZHMtdHlwZXMtcGFzc3dvcmQtdmlld3MuY2pzLnByb2QuanNcIik7XG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2tleXN0b25lLTYtY29yZS1maWVsZHMtdHlwZXMtcGFzc3dvcmQtdmlld3MuY2pzLmRldi5qc1wiKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/fields/types/password/views/dist/keystone-6-core-fields-types-password-views.cjs.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/fields/types/relationship/views/RelationshipSelect/dist/keystone-6-core-fields-types-relationship-views-RelationshipSelect.cjs.dev.js":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/fields/types/relationship/views/RelationshipSelect/dist/keystone-6-core-fields-types-relationship-views-RelationshipSelect.cjs.dev.js ***!
  \*********************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar _objectWithoutProperties = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\nvar _toPropertyKey = __webpack_require__(/*! @babel/runtime/helpers/toPropertyKey */ \"../../node_modules/@babel/runtime/helpers/toPropertyKey.js\");\n__webpack_require__(/*! intersection-observer */ \"intersection-observer\");\nvar React = __webpack_require__(/*! react */ \"react\");\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar fields = __webpack_require__(/*! @keystone-ui/fields */ \"@keystone-ui/fields\");\nvar uuid = __webpack_require__(/*! uuid */ \"uuid\");\nvar client = __webpack_require__(/*! @apollo/client */ \"@apollo/client\");\n\nconst _excluded = [\"children\"];\n\nfunction useIntersectionObserver(cb, ref) {\n  const cbRef = React.useRef(cb);\n  React.useEffect(() => {\n    cbRef.current = cb;\n  });\n  React.useEffect(() => {\n    let observer = new IntersectionObserver(function () {\n      return cbRef.current(...arguments);\n    }, {});\n    let node = ref.current;\n\n    if (node !== null) {\n      observer.observe(node);\n      return () => observer.unobserve(node);\n    }\n  }, [ref]);\n}\n\nconst idValidators = {\n  uuid: uuid.validate,\n\n  cuid(value) {\n    return value.startsWith('c');\n  },\n\n  autoincrement(value) {\n    return /^\\d+$/.test(value);\n  }\n\n};\n\nfunction useDebouncedValue(value, limitMs) {\n  const [debouncedValue, setDebouncedValue] = React.useState(() => value);\n  React.useEffect(() => {\n    let id = setTimeout(() => {\n      setDebouncedValue(() => value);\n    }, limitMs);\n    return () => {\n      clearTimeout(id);\n    };\n  }, [value, limitMs]);\n  return debouncedValue;\n}\n\nfunction useFilter(search, list) {\n  return React.useMemo(() => {\n    let conditions = [];\n\n    if (search.length) {\n      const idFieldKind = list.fields.id.controller.idFieldKind;\n      const trimmedSearch = search.trim();\n      const isValidId = idValidators[idFieldKind](trimmedSearch);\n\n      if (isValidId) {\n        conditions.push({\n          id: {\n            equals: trimmedSearch\n          }\n        });\n      }\n\n      for (const field of Object.values(list.fields)) {\n        if (field.search !== null) {\n          conditions.push({\n            [field.path]: {\n              contains: trimmedSearch,\n              mode: field.search === 'insensitive' ? 'insensitive' : undefined\n            }\n          });\n        }\n      }\n    }\n\n    return {\n      OR: conditions\n    };\n  }, [search, list]);\n}\n\nconst initialItemsToLoad = 10;\nconst subsequentItemsToLoad = 50;\nconst idField = '____id____';\nconst labelField = '____label____';\nconst LoadingIndicatorContext = /*#__PURE__*/React.createContext({\n  count: 0,\n  ref: () => {}\n});\nconst RelationshipSelect = _ref => {\n  var _data$items;\n\n  let {\n    autoFocus,\n    controlShouldRenderValue,\n    isDisabled,\n    isLoading,\n    list,\n    placeholder,\n    portalMenu,\n    state,\n    extraSelection = ''\n  } = _ref;\n  const [search, setSearch] = React.useState(''); // note it's important that this is in state rather than a ref\n  // because we want a re-render if the element changes\n  // so that we can register the intersection observer\n  // on the right element\n\n  const [loadingIndicatorElement, setLoadingIndicatorElement] = React.useState(null);\n  const QUERY = client.gql`\n    query RelationshipSelect($where: ${list.gqlNames.whereInputName}!, $take: Int!, $skip: Int!) {\n      items: ${list.gqlNames.listQueryName}(where: $where, take: $take, skip: $skip) {\n        ${idField}: id\n        ${labelField}: ${list.labelField}\n        ${extraSelection}\n      }\n      count: ${list.gqlNames.listQueryCountName}(where: $where)\n    }\n  `;\n  const debouncedSearch = useDebouncedValue(search, 200);\n  const where = useFilter(debouncedSearch, list);\n  const link = client.useApolloClient().link; // we're using a local apollo client here because writing a global implementation of the typePolicies\n  // would require making assumptions about how pagination should work which won't always be right\n\n  const apolloClient = React.useMemo(() => new client.ApolloClient({\n    link,\n    cache: new client.InMemoryCache({\n      typePolicies: {\n        Query: {\n          fields: {\n            [list.gqlNames.listQueryName]: {\n              keyArgs: ['where'],\n              merge: (existing, incoming, _ref2) => {\n                let {\n                  args\n                } = _ref2;\n                const merged = existing ? existing.slice() : [];\n                const {\n                  skip\n                } = args;\n\n                for (let i = 0; i < incoming.length; ++i) {\n                  merged[skip + i] = incoming[i];\n                }\n\n                return merged;\n              }\n            }\n          }\n        }\n      }\n    })\n  }), [link, list.gqlNames.listQueryName]);\n  const {\n    data,\n    error,\n    loading,\n    fetchMore\n  } = client.useQuery(QUERY, {\n    fetchPolicy: 'network-only',\n    variables: {\n      where,\n      take: initialItemsToLoad,\n      skip: 0\n    },\n    client: apolloClient\n  });\n  const count = (data === null || data === void 0 ? void 0 : data.count) || 0;\n  const options = (data === null || data === void 0 ? void 0 : (_data$items = data.items) === null || _data$items === void 0 ? void 0 : _data$items.map(_ref3 => {\n    let {\n      [idField]: value,\n      [labelField]: label\n    } = _ref3,\n        data = _objectWithoutProperties(_ref3, [idField, labelField].map(_toPropertyKey));\n\n    return {\n      value,\n      label: label || value,\n      data\n    };\n  })) || [];\n  const loadingIndicatorContextVal = React.useMemo(() => ({\n    count,\n    ref: setLoadingIndicatorElement\n  }), [count]); // we want to avoid fetching more again and `loading` from Apollo\n  // doesn't seem to become true when fetching more\n\n  const [lastFetchMore, setLastFetchMore] = React.useState(null);\n  useIntersectionObserver(_ref4 => {\n    let [{\n      isIntersecting\n    }] = _ref4;\n    const skip = data === null || data === void 0 ? void 0 : data.items.length;\n\n    if (!loading && skip && isIntersecting && options.length < count && ((lastFetchMore === null || lastFetchMore === void 0 ? void 0 : lastFetchMore.extraSelection) !== extraSelection || (lastFetchMore === null || lastFetchMore === void 0 ? void 0 : lastFetchMore.where) !== where || (lastFetchMore === null || lastFetchMore === void 0 ? void 0 : lastFetchMore.list) !== list || (lastFetchMore === null || lastFetchMore === void 0 ? void 0 : lastFetchMore.skip) !== skip)) {\n      const QUERY = client.gql`\n              query RelationshipSelectMore($where: ${list.gqlNames.whereInputName}!, $take: Int!, $skip: Int!) {\n                items: ${list.gqlNames.listQueryName}(where: $where, take: $take, skip: $skip) {\n                  ${labelField}: ${list.labelField}\n                  ${idField}: id\n                  ${extraSelection}\n                }\n              }\n            `;\n      setLastFetchMore({\n        extraSelection,\n        list,\n        skip,\n        where\n      });\n      fetchMore({\n        query: QUERY,\n        variables: {\n          where,\n          take: subsequentItemsToLoad,\n          skip\n        }\n      }).then(() => {\n        setLastFetchMore(null);\n      }).catch(() => {\n        setLastFetchMore(null);\n      });\n    }\n  }, {\n    current: loadingIndicatorElement\n  }); // TODO: better error UI\n  // TODO: Handle permission errors\n  // (ie; user has permission to read this relationship field, but\n  // not the related list, or some items on the list)\n\n  if (error) {\n    return core.jsx(\"span\", null, \"Error\");\n  }\n\n  if (state.kind === 'one') {\n    return core.jsx(LoadingIndicatorContext.Provider, {\n      value: loadingIndicatorContextVal\n    }, core.jsx(fields.Select // this is necessary because react-select passes a second argument to onInputChange\n    // and useState setters log a warning if a second argument is passed\n    , {\n      onInputChange: val => setSearch(val),\n      isLoading: loading || isLoading,\n      autoFocus: autoFocus,\n      components: relationshipSelectComponents,\n      portalMenu: portalMenu,\n      value: state.value ? {\n        value: state.value.id,\n        label: state.value.label,\n        // @ts-ignore\n        data: state.value.data\n      } : null,\n      options: options,\n      onChange: value => {\n        state.onChange(value ? {\n          id: value.value,\n          label: value.label,\n          data: value.data\n        } : null);\n      },\n      placeholder: placeholder,\n      controlShouldRenderValue: controlShouldRenderValue,\n      isClearable: controlShouldRenderValue,\n      isDisabled: isDisabled\n    }));\n  }\n\n  return core.jsx(LoadingIndicatorContext.Provider, {\n    value: loadingIndicatorContextVal\n  }, core.jsx(fields.MultiSelect // this is necessary because react-select passes a second argument to onInputChange\n  // and useState setters log a warning if a second argument is passed\n  , {\n    onInputChange: val => setSearch(val),\n    isLoading: loading || isLoading,\n    autoFocus: autoFocus,\n    components: relationshipSelectComponents,\n    portalMenu: portalMenu,\n    value: state.value.map(value => ({\n      value: value.id,\n      label: value.label,\n      data: value.data\n    })),\n    options: options,\n    onChange: value => {\n      state.onChange(value.map(x => ({\n        id: x.value,\n        label: x.label,\n        data: x.data\n      })));\n    },\n    placeholder: placeholder,\n    controlShouldRenderValue: controlShouldRenderValue,\n    isClearable: controlShouldRenderValue,\n    isDisabled: isDisabled\n  }));\n};\nconst relationshipSelectComponents = {\n  MenuList: _ref5 => {\n    let {\n      children\n    } = _ref5,\n        props = _objectWithoutProperties(_ref5, _excluded);\n\n    const {\n      count,\n      ref\n    } = React.useContext(LoadingIndicatorContext);\n    return core.jsx(fields.selectComponents.MenuList, props, children, core.jsx(\"div\", {\n      css: {\n        textAlign: 'center'\n      },\n      ref: ref\n    }, props.options.length < count && core.jsx(\"span\", {\n      css: {\n        padding: 8\n      }\n    }, \"Loading...\")));\n  }\n};\n\nexports.RelationshipSelect = RelationshipSelect;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3JlbGF0aW9uc2hpcC92aWV3cy9SZWxhdGlvbnNoaXBTZWxlY3QvZGlzdC9rZXlzdG9uZS02LWNvcmUtZmllbGRzLXR5cGVzLXJlbGF0aW9uc2hpcC12aWV3cy1SZWxhdGlvbnNoaXBTZWxlY3QuY2pzLmRldi5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7O0FBRTdELCtCQUErQixtQkFBTyxDQUFDLDRIQUFnRDtBQUN2RixxQkFBcUIsbUJBQU8sQ0FBQyx3R0FBc0M7QUFDbkUsbUJBQU8sQ0FBQyxvREFBdUI7QUFDL0IsWUFBWSxtQkFBTyxDQUFDLG9CQUFPO0FBQzNCLFdBQVcsbUJBQU8sQ0FBQyw0Q0FBbUI7QUFDdEMsYUFBYSxtQkFBTyxDQUFDLGdEQUFxQjtBQUMxQyxXQUFXLG1CQUFPLENBQUMsa0JBQU07QUFDekIsYUFBYSxtQkFBTyxDQUFDLHNDQUFnQjs7QUFFckM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUNBQXVDLDZCQUE2QjtBQUNwRSxlQUFlLDRCQUE0QjtBQUMzQyxVQUFVLFFBQVE7QUFDbEIsVUFBVSxXQUFXLElBQUk7QUFDekIsVUFBVTtBQUNWO0FBQ0EsZUFBZSxpQ0FBaUM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7O0FBRWxCLGdDQUFnQyxxQkFBcUI7QUFDckQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRyxhQUFhO0FBQ2hCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxxREFBcUQsNkJBQTZCO0FBQ2xGLHlCQUF5Qiw0QkFBNEI7QUFDckQsb0JBQW9CLFdBQVcsSUFBSTtBQUNuQyxvQkFBb0IsUUFBUTtBQUM1QixvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUcsR0FBRztBQUNOO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBLDBCQUEwQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvQGtleXN0b25lLTYvY29yZS9maWVsZHMvdHlwZXMvcmVsYXRpb25zaGlwL3ZpZXdzL1JlbGF0aW9uc2hpcFNlbGVjdC9kaXN0L2tleXN0b25lLTYtY29yZS1maWVsZHMtdHlwZXMtcmVsYXRpb25zaGlwLXZpZXdzLVJlbGF0aW9uc2hpcFNlbGVjdC5janMuZGV2LmpzPzdhZTciXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzID0gcmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xudmFyIF90b1Byb3BlcnR5S2V5ID0gcmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy90b1Byb3BlcnR5S2V5Jyk7XG5yZXF1aXJlKCdpbnRlcnNlY3Rpb24tb2JzZXJ2ZXInKTtcbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgY29yZSA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9jb3JlJyk7XG52YXIgZmllbGRzID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2ZpZWxkcycpO1xudmFyIHV1aWQgPSByZXF1aXJlKCd1dWlkJyk7XG52YXIgY2xpZW50ID0gcmVxdWlyZSgnQGFwb2xsby9jbGllbnQnKTtcblxuY29uc3QgX2V4Y2x1ZGVkID0gW1wiY2hpbGRyZW5cIl07XG5cbmZ1bmN0aW9uIHVzZUludGVyc2VjdGlvbk9ic2VydmVyKGNiLCByZWYpIHtcbiAgY29uc3QgY2JSZWYgPSBSZWFjdC51c2VSZWYoY2IpO1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNiUmVmLmN1cnJlbnQgPSBjYjtcbiAgfSk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBjYlJlZi5jdXJyZW50KC4uLmFyZ3VtZW50cyk7XG4gICAgfSwge30pO1xuICAgIGxldCBub2RlID0gcmVmLmN1cnJlbnQ7XG5cbiAgICBpZiAobm9kZSAhPT0gbnVsbCkge1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlKTtcbiAgICAgIHJldHVybiAoKSA9PiBvYnNlcnZlci51bm9ic2VydmUobm9kZSk7XG4gICAgfVxuICB9LCBbcmVmXSk7XG59XG5cbmNvbnN0IGlkVmFsaWRhdG9ycyA9IHtcbiAgdXVpZDogdXVpZC52YWxpZGF0ZSxcblxuICBjdWlkKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLnN0YXJ0c1dpdGgoJ2MnKTtcbiAgfSxcblxuICBhdXRvaW5jcmVtZW50KHZhbHVlKSB7XG4gICAgcmV0dXJuIC9eXFxkKyQvLnRlc3QodmFsdWUpO1xuICB9XG5cbn07XG5cbmZ1bmN0aW9uIHVzZURlYm91bmNlZFZhbHVlKHZhbHVlLCBsaW1pdE1zKSB7XG4gIGNvbnN0IFtkZWJvdW5jZWRWYWx1ZSwgc2V0RGVib3VuY2VkVmFsdWVdID0gUmVhY3QudXNlU3RhdGUoKCkgPT4gdmFsdWUpO1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBpZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2V0RGVib3VuY2VkVmFsdWUoKCkgPT4gdmFsdWUpO1xuICAgIH0sIGxpbWl0TXMpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgIH07XG4gIH0sIFt2YWx1ZSwgbGltaXRNc10pO1xuICByZXR1cm4gZGVib3VuY2VkVmFsdWU7XG59XG5cbmZ1bmN0aW9uIHVzZUZpbHRlcihzZWFyY2gsIGxpc3QpIHtcbiAgcmV0dXJuIFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGxldCBjb25kaXRpb25zID0gW107XG5cbiAgICBpZiAoc2VhcmNoLmxlbmd0aCkge1xuICAgICAgY29uc3QgaWRGaWVsZEtpbmQgPSBsaXN0LmZpZWxkcy5pZC5jb250cm9sbGVyLmlkRmllbGRLaW5kO1xuICAgICAgY29uc3QgdHJpbW1lZFNlYXJjaCA9IHNlYXJjaC50cmltKCk7XG4gICAgICBjb25zdCBpc1ZhbGlkSWQgPSBpZFZhbGlkYXRvcnNbaWRGaWVsZEtpbmRdKHRyaW1tZWRTZWFyY2gpO1xuXG4gICAgICBpZiAoaXNWYWxpZElkKSB7XG4gICAgICAgIGNvbmRpdGlvbnMucHVzaCh7XG4gICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIGVxdWFsczogdHJpbW1lZFNlYXJjaFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgT2JqZWN0LnZhbHVlcyhsaXN0LmZpZWxkcykpIHtcbiAgICAgICAgaWYgKGZpZWxkLnNlYXJjaCAhPT0gbnVsbCkge1xuICAgICAgICAgIGNvbmRpdGlvbnMucHVzaCh7XG4gICAgICAgICAgICBbZmllbGQucGF0aF06IHtcbiAgICAgICAgICAgICAgY29udGFpbnM6IHRyaW1tZWRTZWFyY2gsXG4gICAgICAgICAgICAgIG1vZGU6IGZpZWxkLnNlYXJjaCA9PT0gJ2luc2Vuc2l0aXZlJyA/ICdpbnNlbnNpdGl2ZScgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBPUjogY29uZGl0aW9uc1xuICAgIH07XG4gIH0sIFtzZWFyY2gsIGxpc3RdKTtcbn1cblxuY29uc3QgaW5pdGlhbEl0ZW1zVG9Mb2FkID0gMTA7XG5jb25zdCBzdWJzZXF1ZW50SXRlbXNUb0xvYWQgPSA1MDtcbmNvbnN0IGlkRmllbGQgPSAnX19fX2lkX19fXyc7XG5jb25zdCBsYWJlbEZpZWxkID0gJ19fX19sYWJlbF9fX18nO1xuY29uc3QgTG9hZGluZ0luZGljYXRvckNvbnRleHQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlQ29udGV4dCh7XG4gIGNvdW50OiAwLFxuICByZWY6ICgpID0+IHt9XG59KTtcbmNvbnN0IFJlbGF0aW9uc2hpcFNlbGVjdCA9IF9yZWYgPT4ge1xuICB2YXIgX2RhdGEkaXRlbXM7XG5cbiAgbGV0IHtcbiAgICBhdXRvRm9jdXMsXG4gICAgY29udHJvbFNob3VsZFJlbmRlclZhbHVlLFxuICAgIGlzRGlzYWJsZWQsXG4gICAgaXNMb2FkaW5nLFxuICAgIGxpc3QsXG4gICAgcGxhY2Vob2xkZXIsXG4gICAgcG9ydGFsTWVudSxcbiAgICBzdGF0ZSxcbiAgICBleHRyYVNlbGVjdGlvbiA9ICcnXG4gIH0gPSBfcmVmO1xuICBjb25zdCBbc2VhcmNoLCBzZXRTZWFyY2hdID0gUmVhY3QudXNlU3RhdGUoJycpOyAvLyBub3RlIGl0J3MgaW1wb3J0YW50IHRoYXQgdGhpcyBpcyBpbiBzdGF0ZSByYXRoZXIgdGhhbiBhIHJlZlxuICAvLyBiZWNhdXNlIHdlIHdhbnQgYSByZS1yZW5kZXIgaWYgdGhlIGVsZW1lbnQgY2hhbmdlc1xuICAvLyBzbyB0aGF0IHdlIGNhbiByZWdpc3RlciB0aGUgaW50ZXJzZWN0aW9uIG9ic2VydmVyXG4gIC8vIG9uIHRoZSByaWdodCBlbGVtZW50XG5cbiAgY29uc3QgW2xvYWRpbmdJbmRpY2F0b3JFbGVtZW50LCBzZXRMb2FkaW5nSW5kaWNhdG9yRWxlbWVudF0gPSBSZWFjdC51c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgUVVFUlkgPSBjbGllbnQuZ3FsYFxuICAgIHF1ZXJ5IFJlbGF0aW9uc2hpcFNlbGVjdCgkd2hlcmU6ICR7bGlzdC5ncWxOYW1lcy53aGVyZUlucHV0TmFtZX0hLCAkdGFrZTogSW50ISwgJHNraXA6IEludCEpIHtcbiAgICAgIGl0ZW1zOiAke2xpc3QuZ3FsTmFtZXMubGlzdFF1ZXJ5TmFtZX0od2hlcmU6ICR3aGVyZSwgdGFrZTogJHRha2UsIHNraXA6ICRza2lwKSB7XG4gICAgICAgICR7aWRGaWVsZH06IGlkXG4gICAgICAgICR7bGFiZWxGaWVsZH06ICR7bGlzdC5sYWJlbEZpZWxkfVxuICAgICAgICAke2V4dHJhU2VsZWN0aW9ufVxuICAgICAgfVxuICAgICAgY291bnQ6ICR7bGlzdC5ncWxOYW1lcy5saXN0UXVlcnlDb3VudE5hbWV9KHdoZXJlOiAkd2hlcmUpXG4gICAgfVxuICBgO1xuICBjb25zdCBkZWJvdW5jZWRTZWFyY2ggPSB1c2VEZWJvdW5jZWRWYWx1ZShzZWFyY2gsIDIwMCk7XG4gIGNvbnN0IHdoZXJlID0gdXNlRmlsdGVyKGRlYm91bmNlZFNlYXJjaCwgbGlzdCk7XG4gIGNvbnN0IGxpbmsgPSBjbGllbnQudXNlQXBvbGxvQ2xpZW50KCkubGluazsgLy8gd2UncmUgdXNpbmcgYSBsb2NhbCBhcG9sbG8gY2xpZW50IGhlcmUgYmVjYXVzZSB3cml0aW5nIGEgZ2xvYmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSB0eXBlUG9saWNpZXNcbiAgLy8gd291bGQgcmVxdWlyZSBtYWtpbmcgYXNzdW1wdGlvbnMgYWJvdXQgaG93IHBhZ2luYXRpb24gc2hvdWxkIHdvcmsgd2hpY2ggd29uJ3QgYWx3YXlzIGJlIHJpZ2h0XG5cbiAgY29uc3QgYXBvbGxvQ2xpZW50ID0gUmVhY3QudXNlTWVtbygoKSA9PiBuZXcgY2xpZW50LkFwb2xsb0NsaWVudCh7XG4gICAgbGluayxcbiAgICBjYWNoZTogbmV3IGNsaWVudC5Jbk1lbW9yeUNhY2hlKHtcbiAgICAgIHR5cGVQb2xpY2llczoge1xuICAgICAgICBRdWVyeToge1xuICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgW2xpc3QuZ3FsTmFtZXMubGlzdFF1ZXJ5TmFtZV06IHtcbiAgICAgICAgICAgICAga2V5QXJnczogWyd3aGVyZSddLFxuICAgICAgICAgICAgICBtZXJnZTogKGV4aXN0aW5nLCBpbmNvbWluZywgX3JlZjIpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQge1xuICAgICAgICAgICAgICAgICAgYXJnc1xuICAgICAgICAgICAgICAgIH0gPSBfcmVmMjtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBleGlzdGluZyA/IGV4aXN0aW5nLnNsaWNlKCkgOiBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgICBza2lwXG4gICAgICAgICAgICAgICAgfSA9IGFyZ3M7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluY29taW5nLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICBtZXJnZWRbc2tpcCArIGldID0gaW5jb21pbmdbaV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH0pLCBbbGluaywgbGlzdC5ncWxOYW1lcy5saXN0UXVlcnlOYW1lXSk7XG4gIGNvbnN0IHtcbiAgICBkYXRhLFxuICAgIGVycm9yLFxuICAgIGxvYWRpbmcsXG4gICAgZmV0Y2hNb3JlXG4gIH0gPSBjbGllbnQudXNlUXVlcnkoUVVFUlksIHtcbiAgICBmZXRjaFBvbGljeTogJ25ldHdvcmstb25seScsXG4gICAgdmFyaWFibGVzOiB7XG4gICAgICB3aGVyZSxcbiAgICAgIHRha2U6IGluaXRpYWxJdGVtc1RvTG9hZCxcbiAgICAgIHNraXA6IDBcbiAgICB9LFxuICAgIGNsaWVudDogYXBvbGxvQ2xpZW50XG4gIH0pO1xuICBjb25zdCBjb3VudCA9IChkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEuY291bnQpIHx8IDA7XG4gIGNvbnN0IG9wdGlvbnMgPSAoZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RhdGEkaXRlbXMgPSBkYXRhLml0ZW1zKSA9PT0gbnVsbCB8fCBfZGF0YSRpdGVtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RhdGEkaXRlbXMubWFwKF9yZWYzID0+IHtcbiAgICBsZXQge1xuICAgICAgW2lkRmllbGRdOiB2YWx1ZSxcbiAgICAgIFtsYWJlbEZpZWxkXTogbGFiZWxcbiAgICB9ID0gX3JlZjMsXG4gICAgICAgIGRhdGEgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZjMsIFtpZEZpZWxkLCBsYWJlbEZpZWxkXS5tYXAoX3RvUHJvcGVydHlLZXkpKTtcblxuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZSxcbiAgICAgIGxhYmVsOiBsYWJlbCB8fCB2YWx1ZSxcbiAgICAgIGRhdGFcbiAgICB9O1xuICB9KSkgfHwgW107XG4gIGNvbnN0IGxvYWRpbmdJbmRpY2F0b3JDb250ZXh0VmFsID0gUmVhY3QudXNlTWVtbygoKSA9PiAoe1xuICAgIGNvdW50LFxuICAgIHJlZjogc2V0TG9hZGluZ0luZGljYXRvckVsZW1lbnRcbiAgfSksIFtjb3VudF0pOyAvLyB3ZSB3YW50IHRvIGF2b2lkIGZldGNoaW5nIG1vcmUgYWdhaW4gYW5kIGBsb2FkaW5nYCBmcm9tIEFwb2xsb1xuICAvLyBkb2Vzbid0IHNlZW0gdG8gYmVjb21lIHRydWUgd2hlbiBmZXRjaGluZyBtb3JlXG5cbiAgY29uc3QgW2xhc3RGZXRjaE1vcmUsIHNldExhc3RGZXRjaE1vcmVdID0gUmVhY3QudXNlU3RhdGUobnVsbCk7XG4gIHVzZUludGVyc2VjdGlvbk9ic2VydmVyKF9yZWY0ID0+IHtcbiAgICBsZXQgW3tcbiAgICAgIGlzSW50ZXJzZWN0aW5nXG4gICAgfV0gPSBfcmVmNDtcbiAgICBjb25zdCBza2lwID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLml0ZW1zLmxlbmd0aDtcblxuICAgIGlmICghbG9hZGluZyAmJiBza2lwICYmIGlzSW50ZXJzZWN0aW5nICYmIG9wdGlvbnMubGVuZ3RoIDwgY291bnQgJiYgKChsYXN0RmV0Y2hNb3JlID09PSBudWxsIHx8IGxhc3RGZXRjaE1vcmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxhc3RGZXRjaE1vcmUuZXh0cmFTZWxlY3Rpb24pICE9PSBleHRyYVNlbGVjdGlvbiB8fCAobGFzdEZldGNoTW9yZSA9PT0gbnVsbCB8fCBsYXN0RmV0Y2hNb3JlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsYXN0RmV0Y2hNb3JlLndoZXJlKSAhPT0gd2hlcmUgfHwgKGxhc3RGZXRjaE1vcmUgPT09IG51bGwgfHwgbGFzdEZldGNoTW9yZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbGFzdEZldGNoTW9yZS5saXN0KSAhPT0gbGlzdCB8fCAobGFzdEZldGNoTW9yZSA9PT0gbnVsbCB8fCBsYXN0RmV0Y2hNb3JlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsYXN0RmV0Y2hNb3JlLnNraXApICE9PSBza2lwKSkge1xuICAgICAgY29uc3QgUVVFUlkgPSBjbGllbnQuZ3FsYFxuICAgICAgICAgICAgICBxdWVyeSBSZWxhdGlvbnNoaXBTZWxlY3RNb3JlKCR3aGVyZTogJHtsaXN0LmdxbE5hbWVzLndoZXJlSW5wdXROYW1lfSEsICR0YWtlOiBJbnQhLCAkc2tpcDogSW50ISkge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiAke2xpc3QuZ3FsTmFtZXMubGlzdFF1ZXJ5TmFtZX0od2hlcmU6ICR3aGVyZSwgdGFrZTogJHRha2UsIHNraXA6ICRza2lwKSB7XG4gICAgICAgICAgICAgICAgICAke2xhYmVsRmllbGR9OiAke2xpc3QubGFiZWxGaWVsZH1cbiAgICAgICAgICAgICAgICAgICR7aWRGaWVsZH06IGlkXG4gICAgICAgICAgICAgICAgICAke2V4dHJhU2VsZWN0aW9ufVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHNldExhc3RGZXRjaE1vcmUoe1xuICAgICAgICBleHRyYVNlbGVjdGlvbixcbiAgICAgICAgbGlzdCxcbiAgICAgICAgc2tpcCxcbiAgICAgICAgd2hlcmVcbiAgICAgIH0pO1xuICAgICAgZmV0Y2hNb3JlKHtcbiAgICAgICAgcXVlcnk6IFFVRVJZLFxuICAgICAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgICB3aGVyZSxcbiAgICAgICAgICB0YWtlOiBzdWJzZXF1ZW50SXRlbXNUb0xvYWQsXG4gICAgICAgICAgc2tpcFxuICAgICAgICB9XG4gICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgc2V0TGFzdEZldGNoTW9yZShudWxsKTtcbiAgICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgc2V0TGFzdEZldGNoTW9yZShudWxsKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGN1cnJlbnQ6IGxvYWRpbmdJbmRpY2F0b3JFbGVtZW50XG4gIH0pOyAvLyBUT0RPOiBiZXR0ZXIgZXJyb3IgVUlcbiAgLy8gVE9ETzogSGFuZGxlIHBlcm1pc3Npb24gZXJyb3JzXG4gIC8vIChpZTsgdXNlciBoYXMgcGVybWlzc2lvbiB0byByZWFkIHRoaXMgcmVsYXRpb25zaGlwIGZpZWxkLCBidXRcbiAgLy8gbm90IHRoZSByZWxhdGVkIGxpc3QsIG9yIHNvbWUgaXRlbXMgb24gdGhlIGxpc3QpXG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIGNvcmUuanN4KFwic3BhblwiLCBudWxsLCBcIkVycm9yXCIpO1xuICB9XG5cbiAgaWYgKHN0YXRlLmtpbmQgPT09ICdvbmUnKSB7XG4gICAgcmV0dXJuIGNvcmUuanN4KExvYWRpbmdJbmRpY2F0b3JDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICB2YWx1ZTogbG9hZGluZ0luZGljYXRvckNvbnRleHRWYWxcbiAgICB9LCBjb3JlLmpzeChmaWVsZHMuU2VsZWN0IC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgcmVhY3Qtc2VsZWN0IHBhc3NlcyBhIHNlY29uZCBhcmd1bWVudCB0byBvbklucHV0Q2hhbmdlXG4gICAgLy8gYW5kIHVzZVN0YXRlIHNldHRlcnMgbG9nIGEgd2FybmluZyBpZiBhIHNlY29uZCBhcmd1bWVudCBpcyBwYXNzZWRcbiAgICAsIHtcbiAgICAgIG9uSW5wdXRDaGFuZ2U6IHZhbCA9PiBzZXRTZWFyY2godmFsKSxcbiAgICAgIGlzTG9hZGluZzogbG9hZGluZyB8fCBpc0xvYWRpbmcsXG4gICAgICBhdXRvRm9jdXM6IGF1dG9Gb2N1cyxcbiAgICAgIGNvbXBvbmVudHM6IHJlbGF0aW9uc2hpcFNlbGVjdENvbXBvbmVudHMsXG4gICAgICBwb3J0YWxNZW51OiBwb3J0YWxNZW51LFxuICAgICAgdmFsdWU6IHN0YXRlLnZhbHVlID8ge1xuICAgICAgICB2YWx1ZTogc3RhdGUudmFsdWUuaWQsXG4gICAgICAgIGxhYmVsOiBzdGF0ZS52YWx1ZS5sYWJlbCxcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBkYXRhOiBzdGF0ZS52YWx1ZS5kYXRhXG4gICAgICB9IDogbnVsbCxcbiAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICBvbkNoYW5nZTogdmFsdWUgPT4ge1xuICAgICAgICBzdGF0ZS5vbkNoYW5nZSh2YWx1ZSA/IHtcbiAgICAgICAgICBpZDogdmFsdWUudmFsdWUsXG4gICAgICAgICAgbGFiZWw6IHZhbHVlLmxhYmVsLFxuICAgICAgICAgIGRhdGE6IHZhbHVlLmRhdGFcbiAgICAgICAgfSA6IG51bGwpO1xuICAgICAgfSxcbiAgICAgIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlcixcbiAgICAgIGNvbnRyb2xTaG91bGRSZW5kZXJWYWx1ZTogY29udHJvbFNob3VsZFJlbmRlclZhbHVlLFxuICAgICAgaXNDbGVhcmFibGU6IGNvbnRyb2xTaG91bGRSZW5kZXJWYWx1ZSxcbiAgICAgIGlzRGlzYWJsZWQ6IGlzRGlzYWJsZWRcbiAgICB9KSk7XG4gIH1cblxuICByZXR1cm4gY29yZS5qc3goTG9hZGluZ0luZGljYXRvckNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogbG9hZGluZ0luZGljYXRvckNvbnRleHRWYWxcbiAgfSwgY29yZS5qc3goZmllbGRzLk11bHRpU2VsZWN0IC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgcmVhY3Qtc2VsZWN0IHBhc3NlcyBhIHNlY29uZCBhcmd1bWVudCB0byBvbklucHV0Q2hhbmdlXG4gIC8vIGFuZCB1c2VTdGF0ZSBzZXR0ZXJzIGxvZyBhIHdhcm5pbmcgaWYgYSBzZWNvbmQgYXJndW1lbnQgaXMgcGFzc2VkXG4gICwge1xuICAgIG9uSW5wdXRDaGFuZ2U6IHZhbCA9PiBzZXRTZWFyY2godmFsKSxcbiAgICBpc0xvYWRpbmc6IGxvYWRpbmcgfHwgaXNMb2FkaW5nLFxuICAgIGF1dG9Gb2N1czogYXV0b0ZvY3VzLFxuICAgIGNvbXBvbmVudHM6IHJlbGF0aW9uc2hpcFNlbGVjdENvbXBvbmVudHMsXG4gICAgcG9ydGFsTWVudTogcG9ydGFsTWVudSxcbiAgICB2YWx1ZTogc3RhdGUudmFsdWUubWFwKHZhbHVlID0+ICh7XG4gICAgICB2YWx1ZTogdmFsdWUuaWQsXG4gICAgICBsYWJlbDogdmFsdWUubGFiZWwsXG4gICAgICBkYXRhOiB2YWx1ZS5kYXRhXG4gICAgfSkpLFxuICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgb25DaGFuZ2U6IHZhbHVlID0+IHtcbiAgICAgIHN0YXRlLm9uQ2hhbmdlKHZhbHVlLm1hcCh4ID0+ICh7XG4gICAgICAgIGlkOiB4LnZhbHVlLFxuICAgICAgICBsYWJlbDogeC5sYWJlbCxcbiAgICAgICAgZGF0YTogeC5kYXRhXG4gICAgICB9KSkpO1xuICAgIH0sXG4gICAgcGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyLFxuICAgIGNvbnRyb2xTaG91bGRSZW5kZXJWYWx1ZTogY29udHJvbFNob3VsZFJlbmRlclZhbHVlLFxuICAgIGlzQ2xlYXJhYmxlOiBjb250cm9sU2hvdWxkUmVuZGVyVmFsdWUsXG4gICAgaXNEaXNhYmxlZDogaXNEaXNhYmxlZFxuICB9KSk7XG59O1xuY29uc3QgcmVsYXRpb25zaGlwU2VsZWN0Q29tcG9uZW50cyA9IHtcbiAgTWVudUxpc3Q6IF9yZWY1ID0+IHtcbiAgICBsZXQge1xuICAgICAgY2hpbGRyZW5cbiAgICB9ID0gX3JlZjUsXG4gICAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWY1LCBfZXhjbHVkZWQpO1xuXG4gICAgY29uc3Qge1xuICAgICAgY291bnQsXG4gICAgICByZWZcbiAgICB9ID0gUmVhY3QudXNlQ29udGV4dChMb2FkaW5nSW5kaWNhdG9yQ29udGV4dCk7XG4gICAgcmV0dXJuIGNvcmUuanN4KGZpZWxkcy5zZWxlY3RDb21wb25lbnRzLk1lbnVMaXN0LCBwcm9wcywgY2hpbGRyZW4sIGNvcmUuanN4KFwiZGl2XCIsIHtcbiAgICAgIGNzczoge1xuICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInXG4gICAgICB9LFxuICAgICAgcmVmOiByZWZcbiAgICB9LCBwcm9wcy5vcHRpb25zLmxlbmd0aCA8IGNvdW50ICYmIGNvcmUuanN4KFwic3BhblwiLCB7XG4gICAgICBjc3M6IHtcbiAgICAgICAgcGFkZGluZzogOFxuICAgICAgfVxuICAgIH0sIFwiTG9hZGluZy4uLlwiKSkpO1xuICB9XG59O1xuXG5leHBvcnRzLlJlbGF0aW9uc2hpcFNlbGVjdCA9IFJlbGF0aW9uc2hpcFNlbGVjdDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/fields/types/relationship/views/RelationshipSelect/dist/keystone-6-core-fields-types-relationship-views-RelationshipSelect.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/fields/types/relationship/views/dist/keystone-6-core-fields-types-relationship-views.cjs.dev.js":
/*!*******************************************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/fields/types/relationship/views/dist/keystone-6-core-fields-types-relationship-views.cjs.dev.js ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar _objectSpread = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"../../node_modules/@babel/runtime/helpers/objectSpread2.js\");\nvar _extends = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"../../node_modules/@babel/runtime/helpers/extends.js\");\nvar React = __webpack_require__(/*! react */ \"react\");\nvar button = __webpack_require__(/*! @keystone-ui/button */ \"@keystone-ui/button\");\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar fields = __webpack_require__(/*! @keystone-ui/fields */ \"@keystone-ui/fields\");\nvar modals = __webpack_require__(/*! @keystone-ui/modals */ \"@keystone-ui/modals\");\nvar adminUi_router_dist_keystone6CoreAdminUiRouter = __webpack_require__(/*! ../../../../../admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js */ \"../../node_modules/@keystone-6/core/admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js\");\nvar adminUi_context_dist_keystone6CoreAdminUiContext = __webpack_require__(/*! ../../../../../admin-ui/context/dist/keystone-6-core-admin-ui-context.cjs.dev.js */ \"../../node_modules/@keystone-6/core/admin-ui/context/dist/keystone-6-core-admin-ui-context.cjs.dev.js\");\nvar client = __webpack_require__(/*! @apollo/client */ \"@apollo/client\");\nvar CellContainer = __webpack_require__(/*! ../../../../../dist/CellContainer-453254b5.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/CellContainer-453254b5.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"../../node_modules/@babel/runtime/helpers/defineProperty.js\");\n__webpack_require__(/*! @keystone-ui/icons/icons/AlertTriangleIcon */ \"@keystone-ui/icons/icons/AlertTriangleIcon\");\n__webpack_require__(/*! next/link */ \"../../node_modules/next/link.js\");\nvar _objectWithoutProperties = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\n__webpack_require__(/*! next/router */ \"next/router\");\n__webpack_require__(/*! @keystone-ui/popover */ \"@keystone-ui/popover\");\n__webpack_require__(/*! @keystone-ui/icons/icons/MoreHorizontalIcon */ \"@keystone-ui/icons/icons/MoreHorizontalIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/ChevronRightIcon */ \"@keystone-ui/icons/icons/ChevronRightIcon\");\n__webpack_require__(/*! ../../../../../dist/SignoutButton-081410d6.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/SignoutButton-081410d6.cjs.dev.js\");\nvar CreateItemDrawer = __webpack_require__(/*! ../../../../../dist/CreateItemDrawer-8e0605de.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/CreateItemDrawer-8e0605de.cjs.dev.js\");\n__webpack_require__(/*! @keystone-ui/notice */ \"@keystone-ui/notice\");\nvar tooltip = __webpack_require__(/*! @keystone-ui/tooltip */ \"@keystone-ui/tooltip\");\nvar loading = __webpack_require__(/*! @keystone-ui/loading */ \"@keystone-ui/loading\");\nvar dataGetter = __webpack_require__(/*! ../../../../../dist/dataGetter-9fbe2f8e.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/dataGetter-9fbe2f8e.cjs.dev.js\");\nvar getRootGraphQLFieldsFromFieldController = __webpack_require__(/*! ../../../../../dist/getRootGraphQLFieldsFromFieldController-47699a0d.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/getRootGraphQLFieldsFromFieldController-47699a0d.cjs.dev.js\");\nvar isDeepEqual = __webpack_require__(/*! fast-deep-equal */ \"fast-deep-equal\");\nvar fields_types_relationship_views_RelationshipSelect_dist_keystone6CoreFieldsTypesRelationshipViewsRelationshipSelect = __webpack_require__(/*! ../RelationshipSelect/dist/keystone-6-core-fields-types-relationship-views-RelationshipSelect.cjs.dev.js */ \"../../node_modules/@keystone-6/core/fields/types/relationship/views/RelationshipSelect/dist/keystone-6-core-fields-types-relationship-views-RelationshipSelect.cjs.dev.js\");\nvar toast = __webpack_require__(/*! @keystone-ui/toast */ \"@keystone-ui/toast\");\nvar Fields = __webpack_require__(/*! ../../../../../dist/Fields-6e862a67.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/Fields-6e862a67.cjs.dev.js\");\nvar useInvalidFields = __webpack_require__(/*! ../../../../../dist/useInvalidFields-162d1b9c.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/useInvalidFields-162d1b9c.cjs.dev.js\");\n__webpack_require__(/*! apollo-upload-client */ \"apollo-upload-client\");\n__webpack_require__(/*! @emotion/hash */ \"@emotion/hash\");\n__webpack_require__(/*! ../../../../../dist/sqlite-a2385a81.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/sqlite-a2385a81.cjs.dev.js\");\n__webpack_require__(/*! ../../../../../dist/graphql-ts-schema-2a220120.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/graphql-ts-schema-2a220120.cjs.dev.js\");\n__webpack_require__(/*! ../../../../../dist/admin-meta-graphql-9f9a9c11.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/admin-meta-graphql-9f9a9c11.cjs.dev.js\");\nvar GraphQLErrorNotice = __webpack_require__(/*! ../../../../../dist/GraphQLErrorNotice-6a857a3a.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/GraphQLErrorNotice-6a857a3a.cjs.dev.js\");\n__webpack_require__(/*! ../../../../../dist/core-11c9ffea.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/core-11c9ffea.cjs.dev.js\");\n__webpack_require__(/*! decimal.js */ \"decimal.js\");\n__webpack_require__(/*! @graphql-tools/schema */ \"@graphql-tools/schema\");\n__webpack_require__(/*! @graphql-ts/schema/api-without-context */ \"@graphql-ts/schema/api-without-context\");\n__webpack_require__(/*! @graphql-ts/schema */ \"@graphql-ts/schema\");\n__webpack_require__(/*! graphql-type-json */ \"graphql-type-json\");\n__webpack_require__(/*! graphql-upload/public/GraphQLUpload.js */ \"graphql-upload/public/GraphQLUpload.js\");\n__webpack_require__(/*! graphql */ \"graphql\");\n__webpack_require__(/*! @graphql-ts/extend */ \"@graphql-ts/extend\");\n__webpack_require__(/*! @graphql-ts/schema/api-with-context */ \"@graphql-ts/schema/api-with-context\");\n__webpack_require__(/*! @emotion/weak-memoize */ \"@emotion/weak-memoize\");\n__webpack_require__(/*! @babel/runtime/helpers/toPropertyKey */ \"../../node_modules/@babel/runtime/helpers/toPropertyKey.js\");\n__webpack_require__(/*! intersection-observer */ \"intersection-observer\");\n__webpack_require__(/*! uuid */ \"uuid\");\n\nfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\nvar isDeepEqual__default = /*#__PURE__*/_interopDefault(isDeepEqual);\n\nfunction useItemState(_ref) {\n  let {\n    selectedFields,\n    localList,\n    id,\n    field\n  } = _ref;\n  const {\n    data,\n    error,\n    loading\n  } = client.useQuery(client.gql`query($id: ID!) {\n  item: ${localList.gqlNames.itemQueryName}(where: {id: $id}) {\n    id\n    relationship: ${field.path} {\n      ${selectedFields}\n    }\n  }\n}`, {\n    variables: {\n      id\n    },\n    errorPolicy: 'all',\n    skip: id === null\n  });\n  const {\n    itemsArrFromData,\n    relationshipGetter\n  } = React.useMemo(() => {\n    const dataGetter$1 = dataGetter.makeDataGetter(data, error === null || error === void 0 ? void 0 : error.graphQLErrors);\n    const relationshipGetter = dataGetter$1.get('item').get('relationship');\n    const isMany = Array.isArray(relationshipGetter.data);\n    const itemsArrFromData = (isMany ? relationshipGetter.data.map((_, i) => relationshipGetter.get(i)) : [relationshipGetter]).filter(x => {\n      var _x$data;\n\n      return ((_x$data = x.data) === null || _x$data === void 0 ? void 0 : _x$data.id) != null;\n    });\n    return {\n      relationshipGetter,\n      itemsArrFromData\n    };\n  }, [data, error]);\n  let [{\n    items,\n    itemsArrFromData: itemsArrFromDataState\n  }, setItemsState] = React.useState({\n    itemsArrFromData: [],\n    items: {}\n  });\n\n  if (itemsArrFromDataState !== itemsArrFromData) {\n    let newItems = {};\n    itemsArrFromData.forEach(item => {\n      var _items$item$data$id, _item$errors, _initialItemInState$e;\n\n      const initialItemInState = (_items$item$data$id = items[item.data.id]) === null || _items$item$data$id === void 0 ? void 0 : _items$item$data$id.fromInitialQuery;\n\n      if ((items[item.data.id] && initialItemInState || !items[item.data.id]) && (!initialItemInState || item.data !== initialItemInState.data || ((_item$errors = item.errors) === null || _item$errors === void 0 ? void 0 : _item$errors.length) !== ((_initialItemInState$e = initialItemInState.errors) === null || _initialItemInState$e === void 0 ? void 0 : _initialItemInState$e.length) || (item.errors || []).some((err, i) => {\n        var _initialItemInState$e2;\n\n        return err !== ((_initialItemInState$e2 = initialItemInState.errors) === null || _initialItemInState$e2 === void 0 ? void 0 : _initialItemInState$e2[i]);\n      }))) {\n        newItems[item.data.id] = {\n          current: item,\n          fromInitialQuery: item\n        };\n      } else {\n        newItems[item.data.id] = items[item.data.id];\n      }\n    });\n    items = newItems;\n    setItemsState({\n      items: newItems,\n      itemsArrFromData\n    });\n  }\n\n  return {\n    items: React.useMemo(() => {\n      const itemsToReturn = {};\n      Object.keys(items).forEach(id => {\n        itemsToReturn[id] = items[id].current;\n      });\n      return itemsToReturn;\n    }, [items]),\n    setItems: React.useCallback(items => {\n      setItemsState(state => {\n        let itemsForState = {};\n        Object.keys(items).forEach(id => {\n          var _state$items$id;\n\n          if (items[id] === ((_state$items$id = state.items[id]) === null || _state$items$id === void 0 ? void 0 : _state$items$id.current)) {\n            itemsForState[id] = state.items[id];\n          } else {\n            var _state$items$id2;\n\n            itemsForState[id] = {\n              current: items[id],\n              fromInitialQuery: (_state$items$id2 = state.items[id]) === null || _state$items$id2 === void 0 ? void 0 : _state$items$id2.fromInitialQuery\n            };\n          }\n        });\n        return {\n          itemsArrFromData: state.itemsArrFromData,\n          items: itemsForState\n        };\n      });\n    }, [setItemsState]),\n    state: (() => {\n      if (loading) {\n        return {\n          kind: 'loading'\n        };\n      }\n\n      if (error !== null && error !== void 0 && error.networkError) {\n        return {\n          kind: 'error',\n          message: error.networkError.message\n        };\n      }\n\n      if (field.many && !relationshipGetter.data) {\n        var _relationshipGetter$e;\n\n        return {\n          kind: 'error',\n          message: ((_relationshipGetter$e = relationshipGetter.errors) === null || _relationshipGetter$e === void 0 ? void 0 : _relationshipGetter$e[0].message) || ''\n        };\n      }\n\n      return {\n        kind: 'loaded'\n      };\n    })()\n  };\n}\nfunction useFieldsObj(list, fields) {\n  return React.useMemo(() => {\n    const editFields = {};\n    fields === null || fields === void 0 ? void 0 : fields.forEach(fieldPath => {\n      editFields[fieldPath] = list.fields[fieldPath];\n    });\n    return editFields;\n  }, [fields, list.fields]);\n}\n\nfunction InlineEdit(_ref) {\n  var _itemGetter$errors;\n\n  let {\n    fields,\n    list,\n    selectedFields,\n    itemGetter,\n    onCancel,\n    onSave\n  } = _ref;\n  const fieldsObj = useFieldsObj(list, fields);\n  const [update, {\n    loading,\n    error\n  }] = client.useMutation(client.gql`mutation ($data: ${list.gqlNames.updateInputName}!, $id: ID!) {\n          item: ${list.gqlNames.updateMutationName}(where: { id: $id }, data: $data) {\n            ${selectedFields}\n          }\n        }`, {\n    errorPolicy: 'all'\n  });\n  const [state, setValue] = React.useState(() => {\n    const value = useInvalidFields.deserializeValue(fieldsObj, itemGetter);\n    return {\n      value,\n      item: itemGetter.data\n    };\n  });\n\n  if (state.item !== itemGetter.data && (_itemGetter$errors = itemGetter.errors) !== null && _itemGetter$errors !== void 0 && _itemGetter$errors.every(x => {\n    var _x$path;\n\n    return ((_x$path = x.path) === null || _x$path === void 0 ? void 0 : _x$path.length) !== 1;\n  })) {\n    const value = useInvalidFields.deserializeValue(fieldsObj, itemGetter);\n    setValue({\n      value,\n      item: itemGetter.data\n    });\n  }\n\n  const {\n    changedFields,\n    dataForUpdate\n  } = useInvalidFields.useChangedFieldsAndDataForUpdate(fieldsObj, itemGetter, state.value);\n  const invalidFields = useInvalidFields.useInvalidFields(fieldsObj, state.value);\n  const [forceValidation, setForceValidation] = React.useState(false);\n  const toasts = toast.useToasts();\n  const saveButtonProps = {\n    isLoading: loading,\n    weight: 'bold',\n    size: 'small',\n    tone: 'active',\n    onClick: () => {\n      const newForceValidation = invalidFields.size !== 0;\n      setForceValidation(newForceValidation);\n      if (newForceValidation) return;\n      update({\n        variables: {\n          data: dataForUpdate,\n          id: itemGetter.get('id').data\n        }\n      }).then(_ref2 => {\n        let {\n          data,\n          errors\n        } = _ref2;\n        // we're checking for path.length === 1 because errors with a path larger than 1 will be field level errors\n        // which are handled seperately and do not indicate a failure to update the item\n        const error = errors === null || errors === void 0 ? void 0 : errors.find(x => {\n          var _x$path2;\n\n          return ((_x$path2 = x.path) === null || _x$path2 === void 0 ? void 0 : _x$path2.length) === 1;\n        });\n\n        if (error) {\n          toasts.addToast({\n            title: 'Failed to update item',\n            tone: 'negative',\n            message: error.message\n          });\n        } else {\n          toasts.addToast({\n            title: data.item[list.labelField] || data.item.id,\n            tone: 'positive',\n            message: 'Saved successfully'\n          });\n          onSave(dataGetter.makeDataGetter(data, errors).get('item'));\n        }\n      }).catch(err => {\n        toasts.addToast({\n          title: 'Failed to update item',\n          tone: 'negative',\n          message: err.message\n        });\n      });\n    },\n    children: 'Save'\n  };\n  return core.jsx(core.Stack, {\n    gap: \"xlarge\"\n  }, error && core.jsx(GraphQLErrorNotice.GraphQLErrorNotice, {\n    networkError: error === null || error === void 0 ? void 0 : error.networkError // we're checking for path.length === 1 because errors with a path larger than 1 will be field level errors\n    // which are handled seperately and do not indicate a failure to update the item\n    ,\n    errors: error === null || error === void 0 ? void 0 : error.graphQLErrors.filter(x => {\n      var _x$path3;\n\n      return ((_x$path3 = x.path) === null || _x$path3 === void 0 ? void 0 : _x$path3.length) === 1;\n    })\n  }), core.jsx(Fields.Fields, {\n    fieldModes: null,\n    fields: fieldsObj,\n    forceValidation: forceValidation,\n    invalidFields: invalidFields,\n    onChange: React.useCallback(value => {\n      setValue(state => ({\n        item: state.item,\n        value: value(state.value)\n      }));\n    }, [setValue]),\n    value: state.value\n  }), core.jsx(core.Stack, {\n    across: true,\n    gap: \"small\"\n  }, changedFields.size ? core.jsx(button.Button, saveButtonProps) : core.jsx(tooltip.Tooltip, {\n    content: \"No fields have been modified so you cannot save changes\"\n  }, props => core.jsx(button.Button, _extends({}, props, saveButtonProps, {\n    // making onClick undefined instead of making the button disabled so the button can be focussed so keyboard users can see the tooltip\n    onClick: undefined\n  }))), core.jsx(button.Button, {\n    size: \"small\",\n    weight: \"none\",\n    onClick: onCancel\n  }, \"Cancel\")));\n}\n\n/** @jsxRuntime classic */\nfunction InlineCreate(_ref) {\n  let {\n    list,\n    onCancel,\n    onCreate,\n    fields: fieldPaths,\n    selectedFields\n  } = _ref;\n  const toasts = toast.useToasts();\n  const fields = useFieldsObj(list, fieldPaths);\n  const [createItem, {\n    loading,\n    error\n  }] = client.useMutation(client.gql`mutation($data: ${list.gqlNames.createInputName}!) {\n      item: ${list.gqlNames.createMutationName}(data: $data) {\n        ${selectedFields}\n    }\n  }`);\n  const [value, setValue] = React.useState(() => {\n    const value = {};\n    Object.keys(fields).forEach(fieldPath => {\n      value[fieldPath] = {\n        kind: 'value',\n        value: fields[fieldPath].controller.defaultValue\n      };\n    });\n    return value;\n  });\n  const invalidFields = useInvalidFields.useInvalidFields(fields, value);\n  const [forceValidation, setForceValidation] = React.useState(false);\n\n  const onCreateClick = () => {\n    const newForceValidation = invalidFields.size !== 0;\n    setForceValidation(newForceValidation);\n    if (newForceValidation) return;\n    const data = {};\n    const allSerializedValues = useInvalidFields.serializeValueToObjByFieldKey(fields, value);\n    Object.keys(allSerializedValues).forEach(fieldPath => {\n      const {\n        controller\n      } = fields[fieldPath];\n      const serialized = allSerializedValues[fieldPath];\n\n      if (!isDeepEqual__default[\"default\"](serialized, controller.serialize(controller.defaultValue))) {\n        Object.assign(data, serialized);\n      }\n    });\n    createItem({\n      variables: {\n        data\n      }\n    }).then(_ref2 => {\n      let {\n        data,\n        errors\n      } = _ref2;\n      // we're checking for path.length === 1 because errors with a path larger than 1 will be field level errors\n      // which are handled seperately and do not indicate a failure to update the item\n      const error = errors === null || errors === void 0 ? void 0 : errors.find(x => {\n        var _x$path;\n\n        return ((_x$path = x.path) === null || _x$path === void 0 ? void 0 : _x$path.length) === 1;\n      });\n\n      if (error) {\n        toasts.addToast({\n          title: 'Failed to create item',\n          tone: 'negative',\n          message: error.message\n        });\n      } else {\n        toasts.addToast({\n          title: data.item[list.labelField] || data.item.id,\n          tone: 'positive',\n          message: 'Saved successfully'\n        });\n        onCreate(dataGetter.makeDataGetter(data, errors).get('item'));\n      }\n    }).catch(err => {\n      toasts.addToast({\n        title: 'Failed to update item',\n        tone: 'negative',\n        message: err.message\n      });\n    });\n  };\n\n  return core.jsx(core.Stack, {\n    gap: \"xlarge\"\n  }, error && core.jsx(GraphQLErrorNotice.GraphQLErrorNotice, {\n    networkError: error === null || error === void 0 ? void 0 : error.networkError,\n    errors: error === null || error === void 0 ? void 0 : error.graphQLErrors\n  }), core.jsx(Fields.Fields, {\n    fieldModes: null,\n    fields: fields,\n    forceValidation: forceValidation,\n    invalidFields: invalidFields,\n    onChange: setValue,\n    value: value\n  }), core.jsx(core.Stack, {\n    gap: \"small\",\n    across: true\n  }, core.jsx(button.Button, {\n    isLoading: loading,\n    size: \"small\",\n    tone: \"positive\",\n    weight: \"bold\",\n    onClick: onCreateClick\n  }, \"Create \", list.singular), core.jsx(button.Button, {\n    size: \"small\",\n    weight: \"none\",\n    onClick: onCancel\n  }, \"Cancel\")));\n}\n\nconst _excluded = [\"mode\"];\nconst CardContainer = core.forwardRefWithAs((_ref, ref) => {\n  let {\n    mode = 'view'\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  const {\n    tones\n  } = core.useTheme();\n  const tone = tones[mode === 'edit' ? 'active' : mode === 'create' ? 'positive' : 'passive'];\n  return core.jsx(core.Box, _extends({\n    ref: ref,\n    paddingLeft: \"xlarge\",\n    css: {\n      position: 'relative',\n      ':before': {\n        content: '\" \"',\n        backgroundColor: tone.border,\n        borderRadius: 4,\n        width: 4,\n        position: 'absolute',\n        left: 0,\n        top: 0,\n        bottom: 0,\n        zIndex: 1\n      }\n    }\n  }, props));\n});\nfunction Cards(_ref2) {\n  var _displayOptions$inlin;\n\n  let {\n    localList,\n    field,\n    foreignList,\n    id,\n    value,\n    onChange,\n    forceValidation\n  } = _ref2;\n  const {\n    displayOptions\n  } = value;\n  let selectedFields = [...new Set([...displayOptions.cardFields, ...(((_displayOptions$inlin = displayOptions.inlineEdit) === null || _displayOptions$inlin === void 0 ? void 0 : _displayOptions$inlin.fields) || [])])].map(fieldPath => {\n    return foreignList.fields[fieldPath].controller.graphqlSelection;\n  }).join('\\n');\n\n  if (!displayOptions.cardFields.includes('id')) {\n    selectedFields += '\\nid';\n  }\n\n  if (!displayOptions.cardFields.includes(foreignList.labelField) && foreignList.labelField !== 'id') {\n    selectedFields += `\\n${foreignList.labelField}`;\n  }\n\n  const {\n    items,\n    setItems,\n    state: itemsState\n  } = useItemState({\n    selectedFields,\n    localList,\n    id,\n    field\n  });\n  const client$1 = client.useApolloClient();\n  const [isLoadingLazyItems, setIsLoadingLazyItems] = React.useState(false);\n  const [showConnectItems, setShowConnectItems] = React.useState(false);\n  const [hideConnectItemsLabel, setHideConnectItemsLabel] = React.useState('Cancel');\n  const editRef = React.useRef(null);\n  const isMountedRef = React.useRef(false);\n  React.useEffect(() => {\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n    };\n  });\n  React.useEffect(() => {\n    if (value.itemsBeingEdited) {\n      var _editRef$current;\n\n      editRef === null || editRef === void 0 ? void 0 : (_editRef$current = editRef.current) === null || _editRef$current === void 0 ? void 0 : _editRef$current.focus();\n    }\n  }, [value]);\n\n  if (itemsState.kind === 'loading') {\n    return core.jsx(\"div\", null, core.jsx(loading.LoadingDots, {\n      label: `Loading items for ${field.label} field`\n    }));\n  }\n\n  if (itemsState.kind === 'error') {\n    return core.jsx(\"span\", {\n      css: {\n        color: 'red'\n      }\n    }, itemsState.message);\n  }\n\n  return core.jsx(core.Stack, {\n    gap: \"xlarge\"\n  }, core.jsx(core.Stack, {\n    as: \"ul\",\n    gap: \"xlarge\",\n    css: {\n      padding: 0,\n      marginBottom: 0,\n      li: {\n        listStyle: 'none'\n      }\n    }\n  }, [...value.currentIds].map((id, index) => {\n    const itemGetter = items[id];\n    const isEditMode = !!(onChange !== undefined) && value.itemsBeingEdited.has(id);\n    return core.jsx(CardContainer, {\n      role: \"status\",\n      mode: isEditMode ? 'edit' : 'view',\n      key: id\n    }, core.jsx(core.VisuallyHidden, {\n      as: \"h2\"\n    }, `${field.label} ${index + 1} ${isEditMode ? 'edit' : 'view'} mode`), isEditMode ? core.jsx(InlineEdit, {\n      list: foreignList,\n      fields: displayOptions.inlineEdit.fields,\n      onSave: newItemGetter => {\n        setItems(_objectSpread(_objectSpread({}, items), {}, {\n          [id]: newItemGetter\n        }));\n        const itemsBeingEdited = new Set(value.itemsBeingEdited);\n        itemsBeingEdited.delete(id);\n        onChange(_objectSpread(_objectSpread({}, value), {}, {\n          itemsBeingEdited\n        }));\n      },\n      selectedFields: selectedFields,\n      itemGetter: itemGetter,\n      onCancel: () => {\n        const itemsBeingEdited = new Set(value.itemsBeingEdited);\n        itemsBeingEdited.delete(id);\n        onChange(_objectSpread(_objectSpread({}, value), {}, {\n          itemsBeingEdited\n        }));\n      }\n    }) : core.jsx(React.Fragment, null, core.jsx(core.Stack, {\n      gap: \"xlarge\"\n    }, displayOptions.cardFields.map(fieldPath => {\n      const field = foreignList.fields[fieldPath];\n      const itemForField = {};\n\n      for (const graphqlField of getRootGraphQLFieldsFromFieldController.getRootGraphQLFieldsFromFieldController(field.controller)) {\n        const fieldGetter = itemGetter.get(graphqlField);\n\n        if (fieldGetter.errors) {\n          const errorMessage = fieldGetter.errors[0].message;\n          return core.jsx(fields.FieldContainer, null, core.jsx(fields.FieldLabel, null, field.label), errorMessage);\n        }\n\n        itemForField[graphqlField] = fieldGetter.data;\n      }\n\n      return core.jsx(field.views.CardValue, {\n        key: fieldPath,\n        field: field.controller,\n        item: itemForField\n      });\n    })), core.jsx(core.Stack, {\n      across: true,\n      gap: \"small\",\n      marginTop: \"xlarge\"\n    }, displayOptions.inlineEdit && onChange !== undefined && core.jsx(button.Button, {\n      size: \"small\",\n      disabled: onChange === undefined,\n      onClick: () => {\n        onChange(_objectSpread(_objectSpread({}, value), {}, {\n          itemsBeingEdited: new Set([...value.itemsBeingEdited, id])\n        }));\n      },\n      tone: \"active\"\n    }, \"Edit\"), displayOptions.removeMode === 'disconnect' && onChange !== undefined && core.jsx(tooltip.Tooltip, {\n      content: \"This item will not be deleted. It will only be removed from this field.\"\n    }, props => core.jsx(button.Button, _extends({\n      size: \"small\",\n      disabled: onChange === undefined,\n      onClick: () => {\n        const currentIds = new Set(value.currentIds);\n        currentIds.delete(id);\n        onChange(_objectSpread(_objectSpread({}, value), {}, {\n          currentIds\n        }));\n      }\n    }, props, {\n      tone: \"negative\"\n    }), \"Remove\")), displayOptions.linkToItem && core.jsx(button.Button, {\n      size: \"small\",\n      weight: \"link\",\n      tone: \"active\",\n      css: {\n        textDecoration: 'none'\n      },\n      as: adminUi_router_dist_keystone6CoreAdminUiRouter.Link,\n      href: `/${foreignList.path}/${id}`\n    }, \"View \", foreignList.singular, \" details\"))));\n  })), onChange === undefined ? null : displayOptions.inlineConnect && showConnectItems ? core.jsx(CardContainer, {\n    mode: \"edit\"\n  }, core.jsx(core.Stack, {\n    gap: \"small\",\n    marginY: \"medium\",\n    across: true,\n    css: {\n      width: '100%',\n      justifyContent: 'space-between',\n      'div:first-of-type': {\n        flex: '2'\n      }\n    }\n  }, core.jsx(fields_types_relationship_views_RelationshipSelect_dist_keystone6CoreFieldsTypesRelationshipViewsRelationshipSelect.RelationshipSelect, {\n    autoFocus: true,\n    controlShouldRenderValue: isLoadingLazyItems,\n    isDisabled: onChange === undefined,\n    list: foreignList,\n    isLoading: isLoadingLazyItems,\n    placeholder: `Select a ${foreignList.singular}`,\n    portalMenu: true,\n    state: {\n      kind: 'many',\n\n      async onChange(options) {\n        // TODO: maybe use the extraSelection prop on RelationshipSelect here\n        const itemsToFetchAndConnect = [];\n        options.forEach(item => {\n          if (!value.currentIds.has(item.id)) {\n            itemsToFetchAndConnect.push(item.id);\n          }\n        });\n\n        if (itemsToFetchAndConnect.length) {\n          try {\n            const {\n              data,\n              errors\n            } = await client$1.query({\n              query: client.gql`query ($ids: [ID!]!) {\n                      items: ${foreignList.gqlNames.listQueryName}(where: { id: { in: $ids }}) {\n                        ${selectedFields}\n                      }\n                    }`,\n              variables: {\n                ids: itemsToFetchAndConnect\n              }\n            });\n\n            if (isMountedRef.current) {\n              const dataGetters = dataGetter.makeDataGetter(data, errors);\n              const itemsDataGetter = dataGetters.get('items');\n\n              let newItems = _objectSpread({}, items);\n\n              let newCurrentIds = field.many ? new Set(value.currentIds) : new Set();\n\n              if (Array.isArray(itemsDataGetter.data)) {\n                itemsDataGetter.data.forEach((item, i) => {\n                  if ((item === null || item === void 0 ? void 0 : item.id) != null) {\n                    newCurrentIds.add(item.id);\n                    newItems[item.id] = itemsDataGetter.get(i);\n                  }\n                });\n              }\n\n              if (newCurrentIds.size) {\n                setItems(newItems);\n                onChange(_objectSpread(_objectSpread({}, value), {}, {\n                  currentIds: newCurrentIds\n                }));\n                setHideConnectItemsLabel('Done');\n              }\n            }\n          } finally {\n            if (isMountedRef.current) {\n              setIsLoadingLazyItems(false);\n            }\n          }\n        }\n      },\n\n      value: (() => {\n        let options = [];\n        Object.keys(items).forEach(id => {\n          if (value.currentIds.has(id)) {\n            options.push({\n              id,\n              label: id\n            });\n          }\n        });\n        return options;\n      })()\n    }\n  }), core.jsx(button.Button, {\n    onClick: () => setShowConnectItems(false)\n  }, hideConnectItemsLabel))) : value.itemBeingCreated ? core.jsx(CardContainer, {\n    mode: \"create\"\n  }, core.jsx(InlineCreate, {\n    selectedFields: selectedFields,\n    fields: displayOptions.inlineCreate.fields,\n    list: foreignList,\n    onCancel: () => {\n      onChange(_objectSpread(_objectSpread({}, value), {}, {\n        itemBeingCreated: false\n      }));\n    },\n    onCreate: itemGetter => {\n      const id = itemGetter.data.id;\n      setItems(_objectSpread(_objectSpread({}, items), {}, {\n        [id]: itemGetter\n      }));\n      onChange(_objectSpread(_objectSpread({}, value), {}, {\n        itemBeingCreated: false,\n        currentIds: field.many ? new Set([...value.currentIds, id]) : new Set([id])\n      }));\n    }\n  })) : displayOptions.inlineCreate || displayOptions.inlineConnect ? core.jsx(CardContainer, {\n    mode: \"create\"\n  }, core.jsx(core.Stack, {\n    gap: \"small\",\n    marginTop: \"medium\",\n    across: true\n  }, displayOptions.inlineCreate && core.jsx(button.Button, {\n    size: \"small\",\n    disabled: onChange === undefined,\n    tone: \"positive\",\n    onClick: () => {\n      onChange(_objectSpread(_objectSpread({}, value), {}, {\n        itemBeingCreated: true\n      }));\n    }\n  }, \"Create \", foreignList.singular), displayOptions.inlineConnect && core.jsx(button.Button, {\n    size: \"small\",\n    weight: \"none\",\n    tone: \"passive\",\n    onClick: () => {\n      setShowConnectItems(true);\n      setHideConnectItemsLabel('Cancel');\n    }\n  }, \"Link existing \", foreignList.singular))) : null, forceValidation && core.jsx(core.Text, {\n    color: \"red600\",\n    size: \"small\"\n  }, \"You must finish creating and editing any related \", foreignList.label.toLowerCase(), \" before saving the \", localList.singular.toLowerCase()));\n}\n\nfunction LinkToRelatedItems(_ref) {\n  var _value$value;\n\n  let {\n    itemId,\n    value,\n    list,\n    refFieldKey\n  } = _ref;\n\n  function constructQuery(_ref2) {\n    let {\n      refFieldKey,\n      itemId,\n      value\n    } = _ref2;\n\n    if (!!refFieldKey && itemId) {\n      return `!${refFieldKey}_matches=\"${itemId}\"`;\n    }\n\n    return `!id_in=\"${(value === null || value === void 0 ? void 0 : value.value).slice(0, 100).map(_ref3 => {\n      let {\n        id\n      } = _ref3;\n      return id;\n    }).join(',')}\"`;\n  }\n\n  const commonProps = {\n    size: 'small',\n    tone: 'active',\n    weight: 'link'\n  };\n\n  if (value.kind === 'many') {\n    const query = constructQuery({\n      refFieldKey,\n      value,\n      itemId\n    });\n    return core.jsx(button.Button, _extends({}, commonProps, {\n      as: adminUi_router_dist_keystone6CoreAdminUiRouter.Link,\n      href: `/${list.path}?${query}`\n    }), \"View related \", list.plural);\n  }\n\n  return core.jsx(button.Button, _extends({}, commonProps, {\n    as: adminUi_router_dist_keystone6CoreAdminUiRouter.Link,\n    href: `/${list.path}/${(_value$value = value.value) === null || _value$value === void 0 ? void 0 : _value$value.id}`\n  }), \"View \", list.singular, \" details\");\n}\n\nconst RelationshipLinkButton = _ref4 => {\n  let {\n    href,\n    children\n  } = _ref4;\n  return core.jsx(button.Button, {\n    css: {\n      padding: 0,\n      height: 'auto'\n    },\n    weight: \"link\",\n    tone: \"active\",\n    as: adminUi_router_dist_keystone6CoreAdminUiRouter.Link,\n    href: href\n  }, children);\n};\n\nconst RelationshipDisplay = _ref5 => {\n  let {\n    list,\n    value\n  } = _ref5;\n\n  if (value.kind === 'many') {\n    if (value.value.length) {\n      return core.jsx(core.Inline, {\n        gap: \"small\"\n      }, value.value.map(i => core.jsx(RelationshipLinkButton, {\n        href: `/${list.path}/${i.id}`\n      }, i.label)));\n    } else {\n      return core.jsx(\"div\", null, \"(No \", list.plural, \")\");\n    }\n  } else {\n    if (value.value) {\n      return core.jsx(RelationshipLinkButton, {\n        href: `/${list.path}/${value.value.id}`\n      }, value.value.label);\n    } else {\n      return core.jsx(\"div\", null, \"(No \", list.singular, \")\");\n    }\n  }\n};\n\nconst Field = _ref6 => {\n  var _value$value2;\n\n  let {\n    field,\n    autoFocus,\n    value,\n    onChange,\n    forceValidation\n  } = _ref6;\n  const keystone = adminUi_context_dist_keystone6CoreAdminUiContext.useKeystone();\n  const foreignList = adminUi_context_dist_keystone6CoreAdminUiContext.useList(field.refListKey);\n  const localList = adminUi_context_dist_keystone6CoreAdminUiContext.useList(field.listKey);\n  const [isDrawerOpen, setIsDrawerOpen] = React.useState(false);\n\n  if (value.kind === 'cards-view') {\n    return core.jsx(fields.FieldContainer, {\n      as: \"fieldset\"\n    }, core.jsx(fields.FieldLegend, null, field.label), core.jsx(Cards, {\n      forceValidation: forceValidation,\n      field: field,\n      id: value.id,\n      value: value,\n      onChange: onChange,\n      foreignList: foreignList,\n      localList: localList\n    }));\n  }\n\n  if (value.kind === 'count') {\n    return core.jsx(core.Stack, {\n      as: \"fieldset\",\n      gap: \"medium\"\n    }, core.jsx(fields.FieldLegend, null, field.label), core.jsx(\"div\", null, value.count === 1 ? `There is 1 ${foreignList.singular} ` : `There are ${value.count} ${foreignList.plural} `, \"linked to this \", localList.singular));\n  }\n\n  const authenticatedItem = keystone.authenticatedItem;\n  return core.jsx(fields.FieldContainer, {\n    as: \"fieldset\"\n  }, core.jsx(fields.FieldLabel, {\n    as: \"legend\"\n  }, field.label), onChange ? core.jsx(React.Fragment, null, core.jsx(core.Stack, {\n    gap: \"medium\"\n  }, core.jsx(fields_types_relationship_views_RelationshipSelect_dist_keystone6CoreFieldsTypesRelationshipViewsRelationshipSelect.RelationshipSelect, {\n    controlShouldRenderValue: true,\n    autoFocus: autoFocus,\n    isDisabled: onChange === undefined,\n    list: foreignList,\n    portalMenu: true,\n    state: value.kind === 'many' ? {\n      kind: 'many',\n      value: value.value,\n\n      onChange(newItems) {\n        onChange(_objectSpread(_objectSpread({}, value), {}, {\n          value: newItems\n        }));\n      }\n\n    } : {\n      kind: 'one',\n      value: value.value,\n\n      onChange(newVal) {\n        if (value.kind === 'one') {\n          onChange(_objectSpread(_objectSpread({}, value), {}, {\n            value: newVal\n          }));\n        }\n      }\n\n    }\n  }), core.jsx(core.Stack, {\n    across: true,\n    gap: \"small\"\n  }, !field.hideCreate && core.jsx(button.Button, {\n    size: \"small\",\n    disabled: isDrawerOpen,\n    onClick: () => {\n      setIsDrawerOpen(true);\n    }\n  }, \"Create related \", foreignList.singular), authenticatedItem.state === 'authenticated' && authenticatedItem.listKey === field.refListKey && (value.kind === 'many' ? value.value.find(x => x.id === authenticatedItem.id) === undefined : ((_value$value2 = value.value) === null || _value$value2 === void 0 ? void 0 : _value$value2.id) !== authenticatedItem.id) && core.jsx(button.Button, {\n    size: \"small\",\n    isDisabled: onChange === undefined,\n    onClick: () => {\n      const val = {\n        label: authenticatedItem.label,\n        id: authenticatedItem.id\n      };\n\n      if (value.kind === 'many') {\n        onChange(_objectSpread(_objectSpread({}, value), {}, {\n          value: [...value.value, val]\n        }));\n      } else {\n        onChange(_objectSpread(_objectSpread({}, value), {}, {\n          value: val\n        }));\n      }\n    }\n  }, value.kind === 'many' ? 'Add ' : 'Set as ', authenticatedItem.label), !!(value.kind === 'many' ? value.value.length : value.kind === 'one' && value.value) && core.jsx(LinkToRelatedItems, {\n    itemId: value.id,\n    refFieldKey: field.refFieldKey,\n    list: foreignList,\n    value: value\n  }))), core.jsx(modals.DrawerController, {\n    isOpen: isDrawerOpen\n  }, core.jsx(CreateItemDrawer.CreateItemDrawer, {\n    listKey: foreignList.key,\n    onClose: () => {\n      setIsDrawerOpen(false);\n    },\n    onCreate: val => {\n      setIsDrawerOpen(false);\n\n      if (value.kind === 'many') {\n        onChange(_objectSpread(_objectSpread({}, value), {}, {\n          value: [...value.value, val]\n        }));\n      } else if (value.kind === 'one') {\n        onChange(_objectSpread(_objectSpread({}, value), {}, {\n          value: val\n        }));\n      }\n    }\n  }))) : core.jsx(RelationshipDisplay, {\n    value: value,\n    list: foreignList\n  }));\n};\nconst Cell = _ref7 => {\n  let {\n    field,\n    item\n  } = _ref7;\n  const list = adminUi_context_dist_keystone6CoreAdminUiContext.useList(field.refListKey);\n  const {\n    colors\n  } = core.useTheme();\n\n  if (field.display === 'count') {\n    var _item$;\n\n    const count = (_item$ = item[`${field.path}Count`]) !== null && _item$ !== void 0 ? _item$ : 0;\n    return core.jsx(CellContainer.CellContainer, null, count, \" \", count === 1 ? list.singular : list.plural);\n  }\n\n  const data = item[field.path];\n  const items = (Array.isArray(data) ? data : [data]).filter(item => item);\n  const displayItems = items.length < 5 ? items : items.slice(0, 3);\n  const overflow = items.length < 5 ? 0 : items.length - 3;\n  const styles = {\n    color: colors.foreground,\n    textDecoration: 'none',\n    ':hover': {\n      textDecoration: 'underline'\n    }\n  };\n  return core.jsx(CellContainer.CellContainer, null, displayItems.map((item, index) => core.jsx(React.Fragment, {\n    key: item.id\n  }, !!index ? ', ' : '', core.jsx(adminUi_router_dist_keystone6CoreAdminUiRouter.Link, {\n    href: `/${list.path}/[id]`,\n    as: `/${list.path}/${item.id}`,\n    css: styles\n  }, item.label || item.id))), overflow ? `, and ${overflow} more` : null);\n};\nconst CardValue = _ref8 => {\n  let {\n    field,\n    item\n  } = _ref8;\n  const list = adminUi_context_dist_keystone6CoreAdminUiContext.useList(field.refListKey);\n  const data = item[field.path];\n  return core.jsx(fields.FieldContainer, null, core.jsx(fields.FieldLabel, null, field.label), (Array.isArray(data) ? data : [data]).filter(item => item).map((item, index) => core.jsx(React.Fragment, {\n    key: item.id\n  }, !!index ? ', ' : '', core.jsx(adminUi_router_dist_keystone6CoreAdminUiRouter.Link, {\n    href: `/${list.path}/[id]`,\n    as: `/${list.path}/${item.id}`\n  }, item.label || item.id))));\n};\nconst controller = config => {\n  const cardsDisplayOptions = config.fieldMeta.displayMode === 'cards' ? {\n    cardFields: config.fieldMeta.cardFields,\n    inlineCreate: config.fieldMeta.inlineCreate,\n    inlineEdit: config.fieldMeta.inlineEdit,\n    linkToItem: config.fieldMeta.linkToItem,\n    removeMode: config.fieldMeta.removeMode,\n    inlineConnect: config.fieldMeta.inlineConnect\n  } : undefined;\n  return {\n    refFieldKey: config.fieldMeta.refFieldKey,\n    many: config.fieldMeta.many,\n    listKey: config.listKey,\n    path: config.path,\n    label: config.label,\n    display: config.fieldMeta.displayMode === 'count' ? 'count' : 'cards-or-select',\n    refListKey: config.fieldMeta.refListKey,\n    graphqlSelection: config.fieldMeta.displayMode === 'count' ? `${config.path}Count` : `${config.path} {\n              id\n              label: ${config.fieldMeta.refLabelField}\n            }`,\n    hideCreate: config.fieldMeta.hideCreate,\n    // note we're not making the state kind: 'count' when ui.displayMode is set to 'count'.\n    // that ui.displayMode: 'count' is really just a way to have reasonable performance\n    // because our other UIs don't handle relationships with a large number of items well\n    // but that's not a problem here since we're creating a new item so we might as well them a better UI\n    defaultValue: cardsDisplayOptions !== undefined ? {\n      kind: 'cards-view',\n      currentIds: new Set(),\n      id: null,\n      initialIds: new Set(),\n      itemBeingCreated: false,\n      itemsBeingEdited: new Set(),\n      displayOptions: cardsDisplayOptions\n    } : config.fieldMeta.many ? {\n      id: null,\n      kind: 'many',\n      initialValue: [],\n      value: []\n    } : {\n      id: null,\n      kind: 'one',\n      value: null,\n      initialValue: null\n    },\n    deserialize: data => {\n      if (config.fieldMeta.displayMode === 'count') {\n        var _data$;\n\n        return {\n          id: data.id,\n          kind: 'count',\n          count: (_data$ = data[`${config.path}Count`]) !== null && _data$ !== void 0 ? _data$ : 0\n        };\n      }\n\n      if (cardsDisplayOptions !== undefined) {\n        const initialIds = new Set((Array.isArray(data[config.path]) ? data[config.path] : data[config.path] ? [data[config.path]] : []).map(x => x.id));\n        return {\n          kind: 'cards-view',\n          id: data.id,\n          itemsBeingEdited: new Set(),\n          itemBeingCreated: false,\n          initialIds,\n          currentIds: initialIds,\n          displayOptions: cardsDisplayOptions\n        };\n      }\n\n      if (config.fieldMeta.many) {\n        let value = (data[config.path] || []).map(x => ({\n          id: x.id,\n          label: x.label || x.id\n        }));\n        return {\n          kind: 'many',\n          id: data.id,\n          initialValue: value,\n          value\n        };\n      }\n\n      let value = data[config.path];\n\n      if (value) {\n        value = {\n          id: value.id,\n          label: value.label || value.id\n        };\n      }\n\n      return {\n        kind: 'one',\n        id: data.id,\n        value,\n        initialValue: value\n      };\n    },\n    filter: {\n      Filter: _ref9 => {\n        let {\n          onChange,\n          value\n        } = _ref9;\n        const foreignList = adminUi_context_dist_keystone6CoreAdminUiContext.useList(config.fieldMeta.refListKey);\n        const {\n          filterValues,\n          loading\n        } = useRelationshipFilterValues({\n          value,\n          list: foreignList\n        });\n        const state = {\n          kind: 'many',\n          value: filterValues,\n\n          onChange(newItems) {\n            onChange(newItems.map(item => item.id).join(','));\n          }\n\n        };\n        return core.jsx(fields_types_relationship_views_RelationshipSelect_dist_keystone6CoreFieldsTypesRelationshipViewsRelationshipSelect.RelationshipSelect, {\n          controlShouldRenderValue: true,\n          list: foreignList,\n          isLoading: loading,\n          isDisabled: onChange === undefined,\n          state: state\n        });\n      },\n      graphql: _ref10 => {\n        let {\n          value\n        } = _ref10;\n        const foreignIds = getForeignIds(value);\n\n        if (config.fieldMeta.many) {\n          return {\n            [config.path]: {\n              some: {\n                id: {\n                  in: foreignIds\n                }\n              }\n            }\n          };\n        }\n\n        return {\n          [config.path]: {\n            id: {\n              in: foreignIds\n            }\n          }\n        };\n      },\n\n      Label(_ref11) {\n        let {\n          value\n        } = _ref11;\n        const foreignList = adminUi_context_dist_keystone6CoreAdminUiContext.useList(config.fieldMeta.refListKey);\n        const {\n          filterValues\n        } = useRelationshipFilterValues({\n          value,\n          list: foreignList\n        });\n\n        if (!filterValues.length) {\n          return `has no value`;\n        }\n\n        if (filterValues.length > 1) {\n          const values = filterValues.map(i => i.label).join(', ');\n          return `is in [${values}]`;\n        }\n\n        const optionLabel = filterValues[0].label;\n        return `is ${optionLabel}`;\n      },\n\n      types: {\n        matches: {\n          label: 'Matches',\n          initialValue: ''\n        }\n      }\n    },\n\n    validate(value) {\n      return value.kind !== 'cards-view' || value.itemsBeingEdited.size === 0 && !value.itemBeingCreated;\n    },\n\n    serialize: state => {\n      if (state.kind === 'many') {\n        const newAllIds = new Set(state.value.map(x => x.id));\n        const initialIds = new Set(state.initialValue.map(x => x.id));\n        let disconnect = state.initialValue.filter(x => !newAllIds.has(x.id)).map(x => ({\n          id: x.id\n        }));\n        let connect = state.value.filter(x => !initialIds.has(x.id)).map(x => ({\n          id: x.id\n        }));\n\n        if (disconnect.length || connect.length) {\n          let output = {};\n\n          if (disconnect.length) {\n            output.disconnect = disconnect;\n          }\n\n          if (connect.length) {\n            output.connect = connect;\n          }\n\n          return {\n            [config.path]: output\n          };\n        }\n      } else if (state.kind === 'one') {\n        var _state$initialValue;\n\n        if (state.initialValue && !state.value) {\n          return {\n            [config.path]: {\n              disconnect: true\n            }\n          };\n        } else if (state.value && state.value.id !== ((_state$initialValue = state.initialValue) === null || _state$initialValue === void 0 ? void 0 : _state$initialValue.id)) {\n          return {\n            [config.path]: {\n              connect: {\n                id: state.value.id\n              }\n            }\n          };\n        }\n      } else if (state.kind === 'cards-view') {\n        let disconnect = [...state.initialIds].filter(id => !state.currentIds.has(id)).map(id => ({\n          id\n        }));\n        let connect = [...state.currentIds].filter(id => !state.initialIds.has(id)).map(id => ({\n          id\n        }));\n\n        if (config.fieldMeta.many) {\n          if (disconnect.length || connect.length) {\n            return {\n              [config.path]: {\n                connect: connect.length ? connect : undefined,\n                disconnect: disconnect.length ? disconnect : undefined\n              }\n            };\n          }\n        } else if (connect.length) {\n          return {\n            [config.path]: {\n              connect: connect[0]\n            }\n          };\n        } else if (disconnect.length) {\n          return {\n            [config.path]: {\n              disconnect: true\n            }\n          };\n        }\n      }\n\n      return {};\n    }\n  };\n};\n\nfunction useRelationshipFilterValues(_ref12) {\n  var _data$items;\n\n  let {\n    value,\n    list\n  } = _ref12;\n  const foreignIds = getForeignIds(value);\n  const where = {\n    id: {\n      in: foreignIds\n    }\n  };\n  const query = client.gql`\n    query FOREIGNLIST_QUERY($where: ${list.gqlNames.whereInputName}!) {\n      items: ${list.gqlNames.listQueryName}(where: $where) {\n        id \n        ${list.labelField}\n      }\n    }\n  `;\n  const {\n    data,\n    loading\n  } = client.useQuery(query, {\n    variables: {\n      where\n    }\n  });\n  return {\n    filterValues: (data === null || data === void 0 ? void 0 : (_data$items = data.items) === null || _data$items === void 0 ? void 0 : _data$items.map(item => {\n      return {\n        id: item.id,\n        label: item[list.labelField] || item.id\n      };\n    })) || foreignIds.map(f => ({\n      label: f,\n      id: f\n    })),\n    loading: loading\n  };\n}\n\nfunction getForeignIds(value) {\n  if (typeof value === 'string' && value.length > 0) {\n    return value.split(',');\n  }\n\n  return [];\n}\n\nexports.CardValue = CardValue;\nexports.Cell = Cell;\nexports.Field = Field;\nexports.controller = controller;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3JlbGF0aW9uc2hpcC92aWV3cy9kaXN0L2tleXN0b25lLTYtY29yZS1maWVsZHMtdHlwZXMtcmVsYXRpb25zaGlwLXZpZXdzLmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDLEVBQUUsYUFBYSxFQUFDOztBQUU3RCxvQkFBb0IsbUJBQU8sQ0FBQyx3R0FBc0M7QUFDbEUsZUFBZSxtQkFBTyxDQUFDLDRGQUFnQztBQUN2RCxZQUFZLG1CQUFPLENBQUMsb0JBQU87QUFDM0IsYUFBYSxtQkFBTyxDQUFDLGdEQUFxQjtBQUMxQyxXQUFXLG1CQUFPLENBQUMsNENBQW1CO0FBQ3RDLGFBQWEsbUJBQU8sQ0FBQyxnREFBcUI7QUFDMUMsYUFBYSxtQkFBTyxDQUFDLGdEQUFxQjtBQUMxQyxxREFBcUQsbUJBQU8sQ0FBQywyTEFBZ0Y7QUFDN0ksdURBQXVELG1CQUFPLENBQUMsK0xBQWtGO0FBQ2pKLGFBQWEsbUJBQU8sQ0FBQyxzQ0FBZ0I7QUFDckMsb0JBQW9CLG1CQUFPLENBQUMseUlBQXVEO0FBQ25GLG1CQUFPLENBQUMsMEdBQXVDO0FBQy9DLG1CQUFPLENBQUMsOEZBQTRDO0FBQ3BELG1CQUFPLENBQUMsa0RBQVc7QUFDbkIsK0JBQStCLG1CQUFPLENBQUMsNEhBQWdEO0FBQ3ZGLG1CQUFPLENBQUMsZ0NBQWE7QUFDckIsbUJBQU8sQ0FBQyxrREFBc0I7QUFDOUIsbUJBQU8sQ0FBQyxnR0FBNkM7QUFDckQsbUJBQU8sQ0FBQyw0RkFBMkM7QUFDbkQsbUJBQU8sQ0FBQyx5SUFBdUQ7QUFDL0QsdUJBQXVCLG1CQUFPLENBQUMsK0lBQTBEO0FBQ3pGLG1CQUFPLENBQUMsZ0RBQXFCO0FBQzdCLGNBQWMsbUJBQU8sQ0FBQyxrREFBc0I7QUFDNUMsY0FBYyxtQkFBTyxDQUFDLGtEQUFzQjtBQUM1QyxpQkFBaUIsbUJBQU8sQ0FBQyxtSUFBb0Q7QUFDN0Us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QSxpQkFBaUI7QUFDakIsWUFBWTtBQUNaLGFBQWE7QUFDYixrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3JlbGF0aW9uc2hpcC92aWV3cy9kaXN0L2tleXN0b25lLTYtY29yZS1maWVsZHMtdHlwZXMtcmVsYXRpb25zaGlwLXZpZXdzLmNqcy5kZXYuanM/ZDE2NiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciBfb2JqZWN0U3ByZWFkID0gcmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWQyJyk7XG52YXIgX2V4dGVuZHMgPSByZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHMnKTtcbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgYnV0dG9uID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2J1dHRvbicpO1xudmFyIGNvcmUgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvY29yZScpO1xudmFyIGZpZWxkcyA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9maWVsZHMnKTtcbnZhciBtb2RhbHMgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvbW9kYWxzJyk7XG52YXIgYWRtaW5VaV9yb3V0ZXJfZGlzdF9rZXlzdG9uZTZDb3JlQWRtaW5VaVJvdXRlciA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2FkbWluLXVpL3JvdXRlci9kaXN0L2tleXN0b25lLTYtY29yZS1hZG1pbi11aS1yb3V0ZXIuY2pzLmRldi5qcycpO1xudmFyIGFkbWluVWlfY29udGV4dF9kaXN0X2tleXN0b25lNkNvcmVBZG1pblVpQ29udGV4dCA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2FkbWluLXVpL2NvbnRleHQvZGlzdC9rZXlzdG9uZS02LWNvcmUtYWRtaW4tdWktY29udGV4dC5janMuZGV2LmpzJyk7XG52YXIgY2xpZW50ID0gcmVxdWlyZSgnQGFwb2xsby9jbGllbnQnKTtcbnZhciBDZWxsQ29udGFpbmVyID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9DZWxsQ29udGFpbmVyLTQ1MzI1NGI1LmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHknKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9BbGVydFRyaWFuZ2xlSWNvbicpO1xucmVxdWlyZSgnbmV4dC9saW5rJyk7XG52YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzID0gcmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xucmVxdWlyZSgnbmV4dC9yb3V0ZXInKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9wb3BvdmVyJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvTW9yZUhvcml6b250YWxJY29uJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvQ2hldnJvblJpZ2h0SWNvbicpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9TaWdub3V0QnV0dG9uLTA4MTQxMGQ2LmNqcy5kZXYuanMnKTtcbnZhciBDcmVhdGVJdGVtRHJhd2VyID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9DcmVhdGVJdGVtRHJhd2VyLThlMDYwNWRlLmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9ub3RpY2UnKTtcbnZhciB0b29sdGlwID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL3Rvb2x0aXAnKTtcbnZhciBsb2FkaW5nID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2xvYWRpbmcnKTtcbnZhciBkYXRhR2V0dGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9kYXRhR2V0dGVyLTlmYmUyZjhlLmNqcy5kZXYuanMnKTtcbnZhciBnZXRSb290R3JhcGhRTEZpZWxkc0Zyb21GaWVsZENvbnRyb2xsZXIgPSByZXF1aXJlKCcuLi8uLi8uLi8uLi8uLi9kaXN0L2dldFJvb3RHcmFwaFFMRmllbGRzRnJvbUZpZWxkQ29udHJvbGxlci00NzY5OWEwZC5janMuZGV2LmpzJyk7XG52YXIgaXNEZWVwRXF1YWwgPSByZXF1aXJlKCdmYXN0LWRlZXAtZXF1YWwnKTtcbnZhciBmaWVsZHNfdHlwZXNfcmVsYXRpb25zaGlwX3ZpZXdzX1JlbGF0aW9uc2hpcFNlbGVjdF9kaXN0X2tleXN0b25lNkNvcmVGaWVsZHNUeXBlc1JlbGF0aW9uc2hpcFZpZXdzUmVsYXRpb25zaGlwU2VsZWN0ID0gcmVxdWlyZSgnLi4vUmVsYXRpb25zaGlwU2VsZWN0L2Rpc3Qva2V5c3RvbmUtNi1jb3JlLWZpZWxkcy10eXBlcy1yZWxhdGlvbnNoaXAtdmlld3MtUmVsYXRpb25zaGlwU2VsZWN0LmNqcy5kZXYuanMnKTtcbnZhciB0b2FzdCA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS90b2FzdCcpO1xudmFyIEZpZWxkcyA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2Rpc3QvRmllbGRzLTZlODYyYTY3LmNqcy5kZXYuanMnKTtcbnZhciB1c2VJbnZhbGlkRmllbGRzID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC91c2VJbnZhbGlkRmllbGRzLTE2MmQxYjljLmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ2Fwb2xsby11cGxvYWQtY2xpZW50Jyk7XG5yZXF1aXJlKCdAZW1vdGlvbi9oYXNoJyk7XG5yZXF1aXJlKCcuLi8uLi8uLi8uLi8uLi9kaXN0L3NxbGl0ZS1hMjM4NWE4MS5janMuZGV2LmpzJyk7XG5yZXF1aXJlKCcuLi8uLi8uLi8uLi8uLi9kaXN0L2dyYXBocWwtdHMtc2NoZW1hLTJhMjIwMTIwLmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2Rpc3QvYWRtaW4tbWV0YS1ncmFwaHFsLTlmOWE5YzExLmNqcy5kZXYuanMnKTtcbnZhciBHcmFwaFFMRXJyb3JOb3RpY2UgPSByZXF1aXJlKCcuLi8uLi8uLi8uLi8uLi9kaXN0L0dyYXBoUUxFcnJvck5vdGljZS02YTg1N2EzYS5janMuZGV2LmpzJyk7XG5yZXF1aXJlKCcuLi8uLi8uLi8uLi8uLi9kaXN0L2NvcmUtMTFjOWZmZWEuY2pzLmRldi5qcycpO1xucmVxdWlyZSgnZGVjaW1hbC5qcycpO1xucmVxdWlyZSgnQGdyYXBocWwtdG9vbHMvc2NoZW1hJyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10cy9zY2hlbWEvYXBpLXdpdGhvdXQtY29udGV4dCcpO1xucmVxdWlyZSgnQGdyYXBocWwtdHMvc2NoZW1hJyk7XG5yZXF1aXJlKCdncmFwaHFsLXR5cGUtanNvbicpO1xucmVxdWlyZSgnZ3JhcGhxbC11cGxvYWQvcHVibGljL0dyYXBoUUxVcGxvYWQuanMnKTtcbnJlcXVpcmUoJ2dyYXBocWwnKTtcbnJlcXVpcmUoJ0BncmFwaHFsLXRzL2V4dGVuZCcpO1xucmVxdWlyZSgnQGdyYXBocWwtdHMvc2NoZW1hL2FwaS13aXRoLWNvbnRleHQnKTtcbnJlcXVpcmUoJ0BlbW90aW9uL3dlYWstbWVtb2l6ZScpO1xucmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy90b1Byb3BlcnR5S2V5Jyk7XG5yZXF1aXJlKCdpbnRlcnNlY3Rpb24tb2JzZXJ2ZXInKTtcbnJlcXVpcmUoJ3V1aWQnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BEZWZhdWx0IChlKSB7IHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7ICdkZWZhdWx0JzogZSB9OyB9XG5cbnZhciBpc0RlZXBFcXVhbF9fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9faW50ZXJvcERlZmF1bHQoaXNEZWVwRXF1YWwpO1xuXG5mdW5jdGlvbiB1c2VJdGVtU3RhdGUoX3JlZikge1xuICBsZXQge1xuICAgIHNlbGVjdGVkRmllbGRzLFxuICAgIGxvY2FsTGlzdCxcbiAgICBpZCxcbiAgICBmaWVsZFxuICB9ID0gX3JlZjtcbiAgY29uc3Qge1xuICAgIGRhdGEsXG4gICAgZXJyb3IsXG4gICAgbG9hZGluZ1xuICB9ID0gY2xpZW50LnVzZVF1ZXJ5KGNsaWVudC5ncWxgcXVlcnkoJGlkOiBJRCEpIHtcbiAgaXRlbTogJHtsb2NhbExpc3QuZ3FsTmFtZXMuaXRlbVF1ZXJ5TmFtZX0od2hlcmU6IHtpZDogJGlkfSkge1xuICAgIGlkXG4gICAgcmVsYXRpb25zaGlwOiAke2ZpZWxkLnBhdGh9IHtcbiAgICAgICR7c2VsZWN0ZWRGaWVsZHN9XG4gICAgfVxuICB9XG59YCwge1xuICAgIHZhcmlhYmxlczoge1xuICAgICAgaWRcbiAgICB9LFxuICAgIGVycm9yUG9saWN5OiAnYWxsJyxcbiAgICBza2lwOiBpZCA9PT0gbnVsbFxuICB9KTtcbiAgY29uc3Qge1xuICAgIGl0ZW1zQXJyRnJvbURhdGEsXG4gICAgcmVsYXRpb25zaGlwR2V0dGVyXG4gIH0gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBkYXRhR2V0dGVyJDEgPSBkYXRhR2V0dGVyLm1ha2VEYXRhR2V0dGVyKGRhdGEsIGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5ncmFwaFFMRXJyb3JzKTtcbiAgICBjb25zdCByZWxhdGlvbnNoaXBHZXR0ZXIgPSBkYXRhR2V0dGVyJDEuZ2V0KCdpdGVtJykuZ2V0KCdyZWxhdGlvbnNoaXAnKTtcbiAgICBjb25zdCBpc01hbnkgPSBBcnJheS5pc0FycmF5KHJlbGF0aW9uc2hpcEdldHRlci5kYXRhKTtcbiAgICBjb25zdCBpdGVtc0FyckZyb21EYXRhID0gKGlzTWFueSA/IHJlbGF0aW9uc2hpcEdldHRlci5kYXRhLm1hcCgoXywgaSkgPT4gcmVsYXRpb25zaGlwR2V0dGVyLmdldChpKSkgOiBbcmVsYXRpb25zaGlwR2V0dGVyXSkuZmlsdGVyKHggPT4ge1xuICAgICAgdmFyIF94JGRhdGE7XG5cbiAgICAgIHJldHVybiAoKF94JGRhdGEgPSB4LmRhdGEpID09PSBudWxsIHx8IF94JGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF94JGRhdGEuaWQpICE9IG51bGw7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlbGF0aW9uc2hpcEdldHRlcixcbiAgICAgIGl0ZW1zQXJyRnJvbURhdGFcbiAgICB9O1xuICB9LCBbZGF0YSwgZXJyb3JdKTtcbiAgbGV0IFt7XG4gICAgaXRlbXMsXG4gICAgaXRlbXNBcnJGcm9tRGF0YTogaXRlbXNBcnJGcm9tRGF0YVN0YXRlXG4gIH0sIHNldEl0ZW1zU3RhdGVdID0gUmVhY3QudXNlU3RhdGUoe1xuICAgIGl0ZW1zQXJyRnJvbURhdGE6IFtdLFxuICAgIGl0ZW1zOiB7fVxuICB9KTtcblxuICBpZiAoaXRlbXNBcnJGcm9tRGF0YVN0YXRlICE9PSBpdGVtc0FyckZyb21EYXRhKSB7XG4gICAgbGV0IG5ld0l0ZW1zID0ge307XG4gICAgaXRlbXNBcnJGcm9tRGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgdmFyIF9pdGVtcyRpdGVtJGRhdGEkaWQsIF9pdGVtJGVycm9ycywgX2luaXRpYWxJdGVtSW5TdGF0ZSRlO1xuXG4gICAgICBjb25zdCBpbml0aWFsSXRlbUluU3RhdGUgPSAoX2l0ZW1zJGl0ZW0kZGF0YSRpZCA9IGl0ZW1zW2l0ZW0uZGF0YS5pZF0pID09PSBudWxsIHx8IF9pdGVtcyRpdGVtJGRhdGEkaWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtcyRpdGVtJGRhdGEkaWQuZnJvbUluaXRpYWxRdWVyeTtcblxuICAgICAgaWYgKChpdGVtc1tpdGVtLmRhdGEuaWRdICYmIGluaXRpYWxJdGVtSW5TdGF0ZSB8fCAhaXRlbXNbaXRlbS5kYXRhLmlkXSkgJiYgKCFpbml0aWFsSXRlbUluU3RhdGUgfHwgaXRlbS5kYXRhICE9PSBpbml0aWFsSXRlbUluU3RhdGUuZGF0YSB8fCAoKF9pdGVtJGVycm9ycyA9IGl0ZW0uZXJyb3JzKSA9PT0gbnVsbCB8fCBfaXRlbSRlcnJvcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJGVycm9ycy5sZW5ndGgpICE9PSAoKF9pbml0aWFsSXRlbUluU3RhdGUkZSA9IGluaXRpYWxJdGVtSW5TdGF0ZS5lcnJvcnMpID09PSBudWxsIHx8IF9pbml0aWFsSXRlbUluU3RhdGUkZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2luaXRpYWxJdGVtSW5TdGF0ZSRlLmxlbmd0aCkgfHwgKGl0ZW0uZXJyb3JzIHx8IFtdKS5zb21lKChlcnIsIGkpID0+IHtcbiAgICAgICAgdmFyIF9pbml0aWFsSXRlbUluU3RhdGUkZTI7XG5cbiAgICAgICAgcmV0dXJuIGVyciAhPT0gKChfaW5pdGlhbEl0ZW1JblN0YXRlJGUyID0gaW5pdGlhbEl0ZW1JblN0YXRlLmVycm9ycykgPT09IG51bGwgfHwgX2luaXRpYWxJdGVtSW5TdGF0ZSRlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2luaXRpYWxJdGVtSW5TdGF0ZSRlMltpXSk7XG4gICAgICB9KSkpIHtcbiAgICAgICAgbmV3SXRlbXNbaXRlbS5kYXRhLmlkXSA9IHtcbiAgICAgICAgICBjdXJyZW50OiBpdGVtLFxuICAgICAgICAgIGZyb21Jbml0aWFsUXVlcnk6IGl0ZW1cbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld0l0ZW1zW2l0ZW0uZGF0YS5pZF0gPSBpdGVtc1tpdGVtLmRhdGEuaWRdO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGl0ZW1zID0gbmV3SXRlbXM7XG4gICAgc2V0SXRlbXNTdGF0ZSh7XG4gICAgICBpdGVtczogbmV3SXRlbXMsXG4gICAgICBpdGVtc0FyckZyb21EYXRhXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGl0ZW1zOiBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAgIGNvbnN0IGl0ZW1zVG9SZXR1cm4gPSB7fTtcbiAgICAgIE9iamVjdC5rZXlzKGl0ZW1zKS5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgaXRlbXNUb1JldHVybltpZF0gPSBpdGVtc1tpZF0uY3VycmVudDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGl0ZW1zVG9SZXR1cm47XG4gICAgfSwgW2l0ZW1zXSksXG4gICAgc2V0SXRlbXM6IFJlYWN0LnVzZUNhbGxiYWNrKGl0ZW1zID0+IHtcbiAgICAgIHNldEl0ZW1zU3RhdGUoc3RhdGUgPT4ge1xuICAgICAgICBsZXQgaXRlbXNGb3JTdGF0ZSA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhpdGVtcykuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgICAgdmFyIF9zdGF0ZSRpdGVtcyRpZDtcblxuICAgICAgICAgIGlmIChpdGVtc1tpZF0gPT09ICgoX3N0YXRlJGl0ZW1zJGlkID0gc3RhdGUuaXRlbXNbaWRdKSA9PT0gbnVsbCB8fCBfc3RhdGUkaXRlbXMkaWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdGF0ZSRpdGVtcyRpZC5jdXJyZW50KSkge1xuICAgICAgICAgICAgaXRlbXNGb3JTdGF0ZVtpZF0gPSBzdGF0ZS5pdGVtc1tpZF07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBfc3RhdGUkaXRlbXMkaWQyO1xuXG4gICAgICAgICAgICBpdGVtc0ZvclN0YXRlW2lkXSA9IHtcbiAgICAgICAgICAgICAgY3VycmVudDogaXRlbXNbaWRdLFxuICAgICAgICAgICAgICBmcm9tSW5pdGlhbFF1ZXJ5OiAoX3N0YXRlJGl0ZW1zJGlkMiA9IHN0YXRlLml0ZW1zW2lkXSkgPT09IG51bGwgfHwgX3N0YXRlJGl0ZW1zJGlkMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N0YXRlJGl0ZW1zJGlkMi5mcm9tSW5pdGlhbFF1ZXJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXRlbXNBcnJGcm9tRGF0YTogc3RhdGUuaXRlbXNBcnJGcm9tRGF0YSxcbiAgICAgICAgICBpdGVtczogaXRlbXNGb3JTdGF0ZVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSwgW3NldEl0ZW1zU3RhdGVdKSxcbiAgICBzdGF0ZTogKCgpID0+IHtcbiAgICAgIGlmIChsb2FkaW5nKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAga2luZDogJ2xvYWRpbmcnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChlcnJvciAhPT0gbnVsbCAmJiBlcnJvciAhPT0gdm9pZCAwICYmIGVycm9yLm5ldHdvcmtFcnJvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGtpbmQ6ICdlcnJvcicsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubmV0d29ya0Vycm9yLm1lc3NhZ2VcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZpZWxkLm1hbnkgJiYgIXJlbGF0aW9uc2hpcEdldHRlci5kYXRhKSB7XG4gICAgICAgIHZhciBfcmVsYXRpb25zaGlwR2V0dGVyJGU7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBraW5kOiAnZXJyb3InLFxuICAgICAgICAgIG1lc3NhZ2U6ICgoX3JlbGF0aW9uc2hpcEdldHRlciRlID0gcmVsYXRpb25zaGlwR2V0dGVyLmVycm9ycykgPT09IG51bGwgfHwgX3JlbGF0aW9uc2hpcEdldHRlciRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVsYXRpb25zaGlwR2V0dGVyJGVbMF0ubWVzc2FnZSkgfHwgJydcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2luZDogJ2xvYWRlZCdcbiAgICAgIH07XG4gICAgfSkoKVxuICB9O1xufVxuZnVuY3Rpb24gdXNlRmllbGRzT2JqKGxpc3QsIGZpZWxkcykge1xuICByZXR1cm4gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgZWRpdEZpZWxkcyA9IHt9O1xuICAgIGZpZWxkcyA9PT0gbnVsbCB8fCBmaWVsZHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpZWxkcy5mb3JFYWNoKGZpZWxkUGF0aCA9PiB7XG4gICAgICBlZGl0RmllbGRzW2ZpZWxkUGF0aF0gPSBsaXN0LmZpZWxkc1tmaWVsZFBhdGhdO1xuICAgIH0pO1xuICAgIHJldHVybiBlZGl0RmllbGRzO1xuICB9LCBbZmllbGRzLCBsaXN0LmZpZWxkc10pO1xufVxuXG5mdW5jdGlvbiBJbmxpbmVFZGl0KF9yZWYpIHtcbiAgdmFyIF9pdGVtR2V0dGVyJGVycm9ycztcblxuICBsZXQge1xuICAgIGZpZWxkcyxcbiAgICBsaXN0LFxuICAgIHNlbGVjdGVkRmllbGRzLFxuICAgIGl0ZW1HZXR0ZXIsXG4gICAgb25DYW5jZWwsXG4gICAgb25TYXZlXG4gIH0gPSBfcmVmO1xuICBjb25zdCBmaWVsZHNPYmogPSB1c2VGaWVsZHNPYmoobGlzdCwgZmllbGRzKTtcbiAgY29uc3QgW3VwZGF0ZSwge1xuICAgIGxvYWRpbmcsXG4gICAgZXJyb3JcbiAgfV0gPSBjbGllbnQudXNlTXV0YXRpb24oY2xpZW50LmdxbGBtdXRhdGlvbiAoJGRhdGE6ICR7bGlzdC5ncWxOYW1lcy51cGRhdGVJbnB1dE5hbWV9ISwgJGlkOiBJRCEpIHtcbiAgICAgICAgICBpdGVtOiAke2xpc3QuZ3FsTmFtZXMudXBkYXRlTXV0YXRpb25OYW1lfSh3aGVyZTogeyBpZDogJGlkIH0sIGRhdGE6ICRkYXRhKSB7XG4gICAgICAgICAgICAke3NlbGVjdGVkRmllbGRzfVxuICAgICAgICAgIH1cbiAgICAgICAgfWAsIHtcbiAgICBlcnJvclBvbGljeTogJ2FsbCdcbiAgfSk7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0VmFsdWVdID0gUmVhY3QudXNlU3RhdGUoKCkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gdXNlSW52YWxpZEZpZWxkcy5kZXNlcmlhbGl6ZVZhbHVlKGZpZWxkc09iaiwgaXRlbUdldHRlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlLFxuICAgICAgaXRlbTogaXRlbUdldHRlci5kYXRhXG4gICAgfTtcbiAgfSk7XG5cbiAgaWYgKHN0YXRlLml0ZW0gIT09IGl0ZW1HZXR0ZXIuZGF0YSAmJiAoX2l0ZW1HZXR0ZXIkZXJyb3JzID0gaXRlbUdldHRlci5lcnJvcnMpICE9PSBudWxsICYmIF9pdGVtR2V0dGVyJGVycm9ycyAhPT0gdm9pZCAwICYmIF9pdGVtR2V0dGVyJGVycm9ycy5ldmVyeSh4ID0+IHtcbiAgICB2YXIgX3gkcGF0aDtcblxuICAgIHJldHVybiAoKF94JHBhdGggPSB4LnBhdGgpID09PSBudWxsIHx8IF94JHBhdGggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF94JHBhdGgubGVuZ3RoKSAhPT0gMTtcbiAgfSkpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHVzZUludmFsaWRGaWVsZHMuZGVzZXJpYWxpemVWYWx1ZShmaWVsZHNPYmosIGl0ZW1HZXR0ZXIpO1xuICAgIHNldFZhbHVlKHtcbiAgICAgIHZhbHVlLFxuICAgICAgaXRlbTogaXRlbUdldHRlci5kYXRhXG4gICAgfSk7XG4gIH1cblxuICBjb25zdCB7XG4gICAgY2hhbmdlZEZpZWxkcyxcbiAgICBkYXRhRm9yVXBkYXRlXG4gIH0gPSB1c2VJbnZhbGlkRmllbGRzLnVzZUNoYW5nZWRGaWVsZHNBbmREYXRhRm9yVXBkYXRlKGZpZWxkc09iaiwgaXRlbUdldHRlciwgc3RhdGUudmFsdWUpO1xuICBjb25zdCBpbnZhbGlkRmllbGRzID0gdXNlSW52YWxpZEZpZWxkcy51c2VJbnZhbGlkRmllbGRzKGZpZWxkc09iaiwgc3RhdGUudmFsdWUpO1xuICBjb25zdCBbZm9yY2VWYWxpZGF0aW9uLCBzZXRGb3JjZVZhbGlkYXRpb25dID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCB0b2FzdHMgPSB0b2FzdC51c2VUb2FzdHMoKTtcbiAgY29uc3Qgc2F2ZUJ1dHRvblByb3BzID0ge1xuICAgIGlzTG9hZGluZzogbG9hZGluZyxcbiAgICB3ZWlnaHQ6ICdib2xkJyxcbiAgICBzaXplOiAnc21hbGwnLFxuICAgIHRvbmU6ICdhY3RpdmUnLFxuICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld0ZvcmNlVmFsaWRhdGlvbiA9IGludmFsaWRGaWVsZHMuc2l6ZSAhPT0gMDtcbiAgICAgIHNldEZvcmNlVmFsaWRhdGlvbihuZXdGb3JjZVZhbGlkYXRpb24pO1xuICAgICAgaWYgKG5ld0ZvcmNlVmFsaWRhdGlvbikgcmV0dXJuO1xuICAgICAgdXBkYXRlKHtcbiAgICAgICAgdmFyaWFibGVzOiB7XG4gICAgICAgICAgZGF0YTogZGF0YUZvclVwZGF0ZSxcbiAgICAgICAgICBpZDogaXRlbUdldHRlci5nZXQoJ2lkJykuZGF0YVxuICAgICAgICB9XG4gICAgICB9KS50aGVuKF9yZWYyID0+IHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIGVycm9yc1xuICAgICAgICB9ID0gX3JlZjI7XG4gICAgICAgIC8vIHdlJ3JlIGNoZWNraW5nIGZvciBwYXRoLmxlbmd0aCA9PT0gMSBiZWNhdXNlIGVycm9ycyB3aXRoIGEgcGF0aCBsYXJnZXIgdGhhbiAxIHdpbGwgYmUgZmllbGQgbGV2ZWwgZXJyb3JzXG4gICAgICAgIC8vIHdoaWNoIGFyZSBoYW5kbGVkIHNlcGVyYXRlbHkgYW5kIGRvIG5vdCBpbmRpY2F0ZSBhIGZhaWx1cmUgdG8gdXBkYXRlIHRoZSBpdGVtXG4gICAgICAgIGNvbnN0IGVycm9yID0gZXJyb3JzID09PSBudWxsIHx8IGVycm9ycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3JzLmZpbmQoeCA9PiB7XG4gICAgICAgICAgdmFyIF94JHBhdGgyO1xuXG4gICAgICAgICAgcmV0dXJuICgoX3gkcGF0aDIgPSB4LnBhdGgpID09PSBudWxsIHx8IF94JHBhdGgyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfeCRwYXRoMi5sZW5ndGgpID09PSAxO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICB0b2FzdHMuYWRkVG9hc3Qoe1xuICAgICAgICAgICAgdGl0bGU6ICdGYWlsZWQgdG8gdXBkYXRlIGl0ZW0nLFxuICAgICAgICAgICAgdG9uZTogJ25lZ2F0aXZlJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2FzdHMuYWRkVG9hc3Qoe1xuICAgICAgICAgICAgdGl0bGU6IGRhdGEuaXRlbVtsaXN0LmxhYmVsRmllbGRdIHx8IGRhdGEuaXRlbS5pZCxcbiAgICAgICAgICAgIHRvbmU6ICdwb3NpdGl2ZScsXG4gICAgICAgICAgICBtZXNzYWdlOiAnU2F2ZWQgc3VjY2Vzc2Z1bGx5J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG9uU2F2ZShkYXRhR2V0dGVyLm1ha2VEYXRhR2V0dGVyKGRhdGEsIGVycm9ycykuZ2V0KCdpdGVtJykpO1xuICAgICAgICB9XG4gICAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICB0b2FzdHMuYWRkVG9hc3Qoe1xuICAgICAgICAgIHRpdGxlOiAnRmFpbGVkIHRvIHVwZGF0ZSBpdGVtJyxcbiAgICAgICAgICB0b25lOiAnbmVnYXRpdmUnLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBjaGlsZHJlbjogJ1NhdmUnXG4gIH07XG4gIHJldHVybiBjb3JlLmpzeChjb3JlLlN0YWNrLCB7XG4gICAgZ2FwOiBcInhsYXJnZVwiXG4gIH0sIGVycm9yICYmIGNvcmUuanN4KEdyYXBoUUxFcnJvck5vdGljZS5HcmFwaFFMRXJyb3JOb3RpY2UsIHtcbiAgICBuZXR3b3JrRXJyb3I6IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5uZXR3b3JrRXJyb3IgLy8gd2UncmUgY2hlY2tpbmcgZm9yIHBhdGgubGVuZ3RoID09PSAxIGJlY2F1c2UgZXJyb3JzIHdpdGggYSBwYXRoIGxhcmdlciB0aGFuIDEgd2lsbCBiZSBmaWVsZCBsZXZlbCBlcnJvcnNcbiAgICAvLyB3aGljaCBhcmUgaGFuZGxlZCBzZXBlcmF0ZWx5IGFuZCBkbyBub3QgaW5kaWNhdGUgYSBmYWlsdXJlIHRvIHVwZGF0ZSB0aGUgaXRlbVxuICAgICxcbiAgICBlcnJvcnM6IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5ncmFwaFFMRXJyb3JzLmZpbHRlcih4ID0+IHtcbiAgICAgIHZhciBfeCRwYXRoMztcblxuICAgICAgcmV0dXJuICgoX3gkcGF0aDMgPSB4LnBhdGgpID09PSBudWxsIHx8IF94JHBhdGgzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfeCRwYXRoMy5sZW5ndGgpID09PSAxO1xuICAgIH0pXG4gIH0pLCBjb3JlLmpzeChGaWVsZHMuRmllbGRzLCB7XG4gICAgZmllbGRNb2RlczogbnVsbCxcbiAgICBmaWVsZHM6IGZpZWxkc09iaixcbiAgICBmb3JjZVZhbGlkYXRpb246IGZvcmNlVmFsaWRhdGlvbixcbiAgICBpbnZhbGlkRmllbGRzOiBpbnZhbGlkRmllbGRzLFxuICAgIG9uQ2hhbmdlOiBSZWFjdC51c2VDYWxsYmFjayh2YWx1ZSA9PiB7XG4gICAgICBzZXRWYWx1ZShzdGF0ZSA9PiAoe1xuICAgICAgICBpdGVtOiBzdGF0ZS5pdGVtLFxuICAgICAgICB2YWx1ZTogdmFsdWUoc3RhdGUudmFsdWUpXG4gICAgICB9KSk7XG4gICAgfSwgW3NldFZhbHVlXSksXG4gICAgdmFsdWU6IHN0YXRlLnZhbHVlXG4gIH0pLCBjb3JlLmpzeChjb3JlLlN0YWNrLCB7XG4gICAgYWNyb3NzOiB0cnVlLFxuICAgIGdhcDogXCJzbWFsbFwiXG4gIH0sIGNoYW5nZWRGaWVsZHMuc2l6ZSA/IGNvcmUuanN4KGJ1dHRvbi5CdXR0b24sIHNhdmVCdXR0b25Qcm9wcykgOiBjb3JlLmpzeCh0b29sdGlwLlRvb2x0aXAsIHtcbiAgICBjb250ZW50OiBcIk5vIGZpZWxkcyBoYXZlIGJlZW4gbW9kaWZpZWQgc28geW91IGNhbm5vdCBzYXZlIGNoYW5nZXNcIlxuICB9LCBwcm9wcyA9PiBjb3JlLmpzeChidXR0b24uQnV0dG9uLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHNhdmVCdXR0b25Qcm9wcywge1xuICAgIC8vIG1ha2luZyBvbkNsaWNrIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIG1ha2luZyB0aGUgYnV0dG9uIGRpc2FibGVkIHNvIHRoZSBidXR0b24gY2FuIGJlIGZvY3Vzc2VkIHNvIGtleWJvYXJkIHVzZXJzIGNhbiBzZWUgdGhlIHRvb2x0aXBcbiAgICBvbkNsaWNrOiB1bmRlZmluZWRcbiAgfSkpKSwgY29yZS5qc3goYnV0dG9uLkJ1dHRvbiwge1xuICAgIHNpemU6IFwic21hbGxcIixcbiAgICB3ZWlnaHQ6IFwibm9uZVwiLFxuICAgIG9uQ2xpY2s6IG9uQ2FuY2VsXG4gIH0sIFwiQ2FuY2VsXCIpKSk7XG59XG5cbi8qKiBAanN4UnVudGltZSBjbGFzc2ljICovXG5mdW5jdGlvbiBJbmxpbmVDcmVhdGUoX3JlZikge1xuICBsZXQge1xuICAgIGxpc3QsXG4gICAgb25DYW5jZWwsXG4gICAgb25DcmVhdGUsXG4gICAgZmllbGRzOiBmaWVsZFBhdGhzLFxuICAgIHNlbGVjdGVkRmllbGRzXG4gIH0gPSBfcmVmO1xuICBjb25zdCB0b2FzdHMgPSB0b2FzdC51c2VUb2FzdHMoKTtcbiAgY29uc3QgZmllbGRzID0gdXNlRmllbGRzT2JqKGxpc3QsIGZpZWxkUGF0aHMpO1xuICBjb25zdCBbY3JlYXRlSXRlbSwge1xuICAgIGxvYWRpbmcsXG4gICAgZXJyb3JcbiAgfV0gPSBjbGllbnQudXNlTXV0YXRpb24oY2xpZW50LmdxbGBtdXRhdGlvbigkZGF0YTogJHtsaXN0LmdxbE5hbWVzLmNyZWF0ZUlucHV0TmFtZX0hKSB7XG4gICAgICBpdGVtOiAke2xpc3QuZ3FsTmFtZXMuY3JlYXRlTXV0YXRpb25OYW1lfShkYXRhOiAkZGF0YSkge1xuICAgICAgICAke3NlbGVjdGVkRmllbGRzfVxuICAgIH1cbiAgfWApO1xuICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHt9O1xuICAgIE9iamVjdC5rZXlzKGZpZWxkcykuZm9yRWFjaChmaWVsZFBhdGggPT4ge1xuICAgICAgdmFsdWVbZmllbGRQYXRoXSA9IHtcbiAgICAgICAga2luZDogJ3ZhbHVlJyxcbiAgICAgICAgdmFsdWU6IGZpZWxkc1tmaWVsZFBhdGhdLmNvbnRyb2xsZXIuZGVmYXVsdFZhbHVlXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSk7XG4gIGNvbnN0IGludmFsaWRGaWVsZHMgPSB1c2VJbnZhbGlkRmllbGRzLnVzZUludmFsaWRGaWVsZHMoZmllbGRzLCB2YWx1ZSk7XG4gIGNvbnN0IFtmb3JjZVZhbGlkYXRpb24sIHNldEZvcmNlVmFsaWRhdGlvbl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3Qgb25DcmVhdGVDbGljayA9ICgpID0+IHtcbiAgICBjb25zdCBuZXdGb3JjZVZhbGlkYXRpb24gPSBpbnZhbGlkRmllbGRzLnNpemUgIT09IDA7XG4gICAgc2V0Rm9yY2VWYWxpZGF0aW9uKG5ld0ZvcmNlVmFsaWRhdGlvbik7XG4gICAgaWYgKG5ld0ZvcmNlVmFsaWRhdGlvbikgcmV0dXJuO1xuICAgIGNvbnN0IGRhdGEgPSB7fTtcbiAgICBjb25zdCBhbGxTZXJpYWxpemVkVmFsdWVzID0gdXNlSW52YWxpZEZpZWxkcy5zZXJpYWxpemVWYWx1ZVRvT2JqQnlGaWVsZEtleShmaWVsZHMsIHZhbHVlKTtcbiAgICBPYmplY3Qua2V5cyhhbGxTZXJpYWxpemVkVmFsdWVzKS5mb3JFYWNoKGZpZWxkUGF0aCA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGNvbnRyb2xsZXJcbiAgICAgIH0gPSBmaWVsZHNbZmllbGRQYXRoXTtcbiAgICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBhbGxTZXJpYWxpemVkVmFsdWVzW2ZpZWxkUGF0aF07XG5cbiAgICAgIGlmICghaXNEZWVwRXF1YWxfX2RlZmF1bHRbXCJkZWZhdWx0XCJdKHNlcmlhbGl6ZWQsIGNvbnRyb2xsZXIuc2VyaWFsaXplKGNvbnRyb2xsZXIuZGVmYXVsdFZhbHVlKSkpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihkYXRhLCBzZXJpYWxpemVkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjcmVhdGVJdGVtKHtcbiAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICBkYXRhXG4gICAgICB9XG4gICAgfSkudGhlbihfcmVmMiA9PiB7XG4gICAgICBsZXQge1xuICAgICAgICBkYXRhLFxuICAgICAgICBlcnJvcnNcbiAgICAgIH0gPSBfcmVmMjtcbiAgICAgIC8vIHdlJ3JlIGNoZWNraW5nIGZvciBwYXRoLmxlbmd0aCA9PT0gMSBiZWNhdXNlIGVycm9ycyB3aXRoIGEgcGF0aCBsYXJnZXIgdGhhbiAxIHdpbGwgYmUgZmllbGQgbGV2ZWwgZXJyb3JzXG4gICAgICAvLyB3aGljaCBhcmUgaGFuZGxlZCBzZXBlcmF0ZWx5IGFuZCBkbyBub3QgaW5kaWNhdGUgYSBmYWlsdXJlIHRvIHVwZGF0ZSB0aGUgaXRlbVxuICAgICAgY29uc3QgZXJyb3IgPSBlcnJvcnMgPT09IG51bGwgfHwgZXJyb3JzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvcnMuZmluZCh4ID0+IHtcbiAgICAgICAgdmFyIF94JHBhdGg7XG5cbiAgICAgICAgcmV0dXJuICgoX3gkcGF0aCA9IHgucGF0aCkgPT09IG51bGwgfHwgX3gkcGF0aCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3gkcGF0aC5sZW5ndGgpID09PSAxO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0b2FzdHMuYWRkVG9hc3Qoe1xuICAgICAgICAgIHRpdGxlOiAnRmFpbGVkIHRvIGNyZWF0ZSBpdGVtJyxcbiAgICAgICAgICB0b25lOiAnbmVnYXRpdmUnLFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b2FzdHMuYWRkVG9hc3Qoe1xuICAgICAgICAgIHRpdGxlOiBkYXRhLml0ZW1bbGlzdC5sYWJlbEZpZWxkXSB8fCBkYXRhLml0ZW0uaWQsXG4gICAgICAgICAgdG9uZTogJ3Bvc2l0aXZlJyxcbiAgICAgICAgICBtZXNzYWdlOiAnU2F2ZWQgc3VjY2Vzc2Z1bGx5J1xuICAgICAgICB9KTtcbiAgICAgICAgb25DcmVhdGUoZGF0YUdldHRlci5tYWtlRGF0YUdldHRlcihkYXRhLCBlcnJvcnMpLmdldCgnaXRlbScpKTtcbiAgICAgIH1cbiAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgdG9hc3RzLmFkZFRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICdGYWlsZWQgdG8gdXBkYXRlIGl0ZW0nLFxuICAgICAgICB0b25lOiAnbmVnYXRpdmUnLFxuICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIGNvcmUuanN4KGNvcmUuU3RhY2ssIHtcbiAgICBnYXA6IFwieGxhcmdlXCJcbiAgfSwgZXJyb3IgJiYgY29yZS5qc3goR3JhcGhRTEVycm9yTm90aWNlLkdyYXBoUUxFcnJvck5vdGljZSwge1xuICAgIG5ldHdvcmtFcnJvcjogZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLm5ldHdvcmtFcnJvcixcbiAgICBlcnJvcnM6IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5ncmFwaFFMRXJyb3JzXG4gIH0pLCBjb3JlLmpzeChGaWVsZHMuRmllbGRzLCB7XG4gICAgZmllbGRNb2RlczogbnVsbCxcbiAgICBmaWVsZHM6IGZpZWxkcyxcbiAgICBmb3JjZVZhbGlkYXRpb246IGZvcmNlVmFsaWRhdGlvbixcbiAgICBpbnZhbGlkRmllbGRzOiBpbnZhbGlkRmllbGRzLFxuICAgIG9uQ2hhbmdlOiBzZXRWYWx1ZSxcbiAgICB2YWx1ZTogdmFsdWVcbiAgfSksIGNvcmUuanN4KGNvcmUuU3RhY2ssIHtcbiAgICBnYXA6IFwic21hbGxcIixcbiAgICBhY3Jvc3M6IHRydWVcbiAgfSwgY29yZS5qc3goYnV0dG9uLkJ1dHRvbiwge1xuICAgIGlzTG9hZGluZzogbG9hZGluZyxcbiAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgdG9uZTogXCJwb3NpdGl2ZVwiLFxuICAgIHdlaWdodDogXCJib2xkXCIsXG4gICAgb25DbGljazogb25DcmVhdGVDbGlja1xuICB9LCBcIkNyZWF0ZSBcIiwgbGlzdC5zaW5ndWxhciksIGNvcmUuanN4KGJ1dHRvbi5CdXR0b24sIHtcbiAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgd2VpZ2h0OiBcIm5vbmVcIixcbiAgICBvbkNsaWNrOiBvbkNhbmNlbFxuICB9LCBcIkNhbmNlbFwiKSkpO1xufVxuXG5jb25zdCBfZXhjbHVkZWQgPSBbXCJtb2RlXCJdO1xuY29uc3QgQ2FyZENvbnRhaW5lciA9IGNvcmUuZm9yd2FyZFJlZldpdGhBcygoX3JlZiwgcmVmKSA9PiB7XG4gIGxldCB7XG4gICAgbW9kZSA9ICd2aWV3J1xuICB9ID0gX3JlZixcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIF9leGNsdWRlZCk7XG5cbiAgY29uc3Qge1xuICAgIHRvbmVzXG4gIH0gPSBjb3JlLnVzZVRoZW1lKCk7XG4gIGNvbnN0IHRvbmUgPSB0b25lc1ttb2RlID09PSAnZWRpdCcgPyAnYWN0aXZlJyA6IG1vZGUgPT09ICdjcmVhdGUnID8gJ3Bvc2l0aXZlJyA6ICdwYXNzaXZlJ107XG4gIHJldHVybiBjb3JlLmpzeChjb3JlLkJveCwgX2V4dGVuZHMoe1xuICAgIHJlZjogcmVmLFxuICAgIHBhZGRpbmdMZWZ0OiBcInhsYXJnZVwiLFxuICAgIGNzczoge1xuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAnOmJlZm9yZSc6IHtcbiAgICAgICAgY29udGVudDogJ1wiIFwiJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0b25lLmJvcmRlcixcbiAgICAgICAgYm9yZGVyUmFkaXVzOiA0LFxuICAgICAgICB3aWR0aDogNCxcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICB6SW5kZXg6IDFcbiAgICAgIH1cbiAgICB9XG4gIH0sIHByb3BzKSk7XG59KTtcbmZ1bmN0aW9uIENhcmRzKF9yZWYyKSB7XG4gIHZhciBfZGlzcGxheU9wdGlvbnMkaW5saW47XG5cbiAgbGV0IHtcbiAgICBsb2NhbExpc3QsXG4gICAgZmllbGQsXG4gICAgZm9yZWlnbkxpc3QsXG4gICAgaWQsXG4gICAgdmFsdWUsXG4gICAgb25DaGFuZ2UsXG4gICAgZm9yY2VWYWxpZGF0aW9uXG4gIH0gPSBfcmVmMjtcbiAgY29uc3Qge1xuICAgIGRpc3BsYXlPcHRpb25zXG4gIH0gPSB2YWx1ZTtcbiAgbGV0IHNlbGVjdGVkRmllbGRzID0gWy4uLm5ldyBTZXQoWy4uLmRpc3BsYXlPcHRpb25zLmNhcmRGaWVsZHMsIC4uLigoKF9kaXNwbGF5T3B0aW9ucyRpbmxpbiA9IGRpc3BsYXlPcHRpb25zLmlubGluZUVkaXQpID09PSBudWxsIHx8IF9kaXNwbGF5T3B0aW9ucyRpbmxpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Rpc3BsYXlPcHRpb25zJGlubGluLmZpZWxkcykgfHwgW10pXSldLm1hcChmaWVsZFBhdGggPT4ge1xuICAgIHJldHVybiBmb3JlaWduTGlzdC5maWVsZHNbZmllbGRQYXRoXS5jb250cm9sbGVyLmdyYXBocWxTZWxlY3Rpb247XG4gIH0pLmpvaW4oJ1xcbicpO1xuXG4gIGlmICghZGlzcGxheU9wdGlvbnMuY2FyZEZpZWxkcy5pbmNsdWRlcygnaWQnKSkge1xuICAgIHNlbGVjdGVkRmllbGRzICs9ICdcXG5pZCc7XG4gIH1cblxuICBpZiAoIWRpc3BsYXlPcHRpb25zLmNhcmRGaWVsZHMuaW5jbHVkZXMoZm9yZWlnbkxpc3QubGFiZWxGaWVsZCkgJiYgZm9yZWlnbkxpc3QubGFiZWxGaWVsZCAhPT0gJ2lkJykge1xuICAgIHNlbGVjdGVkRmllbGRzICs9IGBcXG4ke2ZvcmVpZ25MaXN0LmxhYmVsRmllbGR9YDtcbiAgfVxuXG4gIGNvbnN0IHtcbiAgICBpdGVtcyxcbiAgICBzZXRJdGVtcyxcbiAgICBzdGF0ZTogaXRlbXNTdGF0ZVxuICB9ID0gdXNlSXRlbVN0YXRlKHtcbiAgICBzZWxlY3RlZEZpZWxkcyxcbiAgICBsb2NhbExpc3QsXG4gICAgaWQsXG4gICAgZmllbGRcbiAgfSk7XG4gIGNvbnN0IGNsaWVudCQxID0gY2xpZW50LnVzZUFwb2xsb0NsaWVudCgpO1xuICBjb25zdCBbaXNMb2FkaW5nTGF6eUl0ZW1zLCBzZXRJc0xvYWRpbmdMYXp5SXRlbXNdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0Nvbm5lY3RJdGVtcywgc2V0U2hvd0Nvbm5lY3RJdGVtc10gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtoaWRlQ29ubmVjdEl0ZW1zTGFiZWwsIHNldEhpZGVDb25uZWN0SXRlbXNMYWJlbF0gPSBSZWFjdC51c2VTdGF0ZSgnQ2FuY2VsJyk7XG4gIGNvbnN0IGVkaXRSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gIGNvbnN0IGlzTW91bnRlZFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaXNNb3VudGVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgIH07XG4gIH0pO1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh2YWx1ZS5pdGVtc0JlaW5nRWRpdGVkKSB7XG4gICAgICB2YXIgX2VkaXRSZWYkY3VycmVudDtcblxuICAgICAgZWRpdFJlZiA9PT0gbnVsbCB8fCBlZGl0UmVmID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2VkaXRSZWYkY3VycmVudCA9IGVkaXRSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX2VkaXRSZWYkY3VycmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2VkaXRSZWYkY3VycmVudC5mb2N1cygpO1xuICAgIH1cbiAgfSwgW3ZhbHVlXSk7XG5cbiAgaWYgKGl0ZW1zU3RhdGUua2luZCA9PT0gJ2xvYWRpbmcnKSB7XG4gICAgcmV0dXJuIGNvcmUuanN4KFwiZGl2XCIsIG51bGwsIGNvcmUuanN4KGxvYWRpbmcuTG9hZGluZ0RvdHMsIHtcbiAgICAgIGxhYmVsOiBgTG9hZGluZyBpdGVtcyBmb3IgJHtmaWVsZC5sYWJlbH0gZmllbGRgXG4gICAgfSkpO1xuICB9XG5cbiAgaWYgKGl0ZW1zU3RhdGUua2luZCA9PT0gJ2Vycm9yJykge1xuICAgIHJldHVybiBjb3JlLmpzeChcInNwYW5cIiwge1xuICAgICAgY3NzOiB7XG4gICAgICAgIGNvbG9yOiAncmVkJ1xuICAgICAgfVxuICAgIH0sIGl0ZW1zU3RhdGUubWVzc2FnZSk7XG4gIH1cblxuICByZXR1cm4gY29yZS5qc3goY29yZS5TdGFjaywge1xuICAgIGdhcDogXCJ4bGFyZ2VcIlxuICB9LCBjb3JlLmpzeChjb3JlLlN0YWNrLCB7XG4gICAgYXM6IFwidWxcIixcbiAgICBnYXA6IFwieGxhcmdlXCIsXG4gICAgY3NzOiB7XG4gICAgICBwYWRkaW5nOiAwLFxuICAgICAgbWFyZ2luQm90dG9tOiAwLFxuICAgICAgbGk6IHtcbiAgICAgICAgbGlzdFN0eWxlOiAnbm9uZSdcbiAgICAgIH1cbiAgICB9XG4gIH0sIFsuLi52YWx1ZS5jdXJyZW50SWRzXS5tYXAoKGlkLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGl0ZW1HZXR0ZXIgPSBpdGVtc1tpZF07XG4gICAgY29uc3QgaXNFZGl0TW9kZSA9ICEhKG9uQ2hhbmdlICE9PSB1bmRlZmluZWQpICYmIHZhbHVlLml0ZW1zQmVpbmdFZGl0ZWQuaGFzKGlkKTtcbiAgICByZXR1cm4gY29yZS5qc3goQ2FyZENvbnRhaW5lciwge1xuICAgICAgcm9sZTogXCJzdGF0dXNcIixcbiAgICAgIG1vZGU6IGlzRWRpdE1vZGUgPyAnZWRpdCcgOiAndmlldycsXG4gICAgICBrZXk6IGlkXG4gICAgfSwgY29yZS5qc3goY29yZS5WaXN1YWxseUhpZGRlbiwge1xuICAgICAgYXM6IFwiaDJcIlxuICAgIH0sIGAke2ZpZWxkLmxhYmVsfSAke2luZGV4ICsgMX0gJHtpc0VkaXRNb2RlID8gJ2VkaXQnIDogJ3ZpZXcnfSBtb2RlYCksIGlzRWRpdE1vZGUgPyBjb3JlLmpzeChJbmxpbmVFZGl0LCB7XG4gICAgICBsaXN0OiBmb3JlaWduTGlzdCxcbiAgICAgIGZpZWxkczogZGlzcGxheU9wdGlvbnMuaW5saW5lRWRpdC5maWVsZHMsXG4gICAgICBvblNhdmU6IG5ld0l0ZW1HZXR0ZXIgPT4ge1xuICAgICAgICBzZXRJdGVtcyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0ZW1zKSwge30sIHtcbiAgICAgICAgICBbaWRdOiBuZXdJdGVtR2V0dGVyXG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgaXRlbXNCZWluZ0VkaXRlZCA9IG5ldyBTZXQodmFsdWUuaXRlbXNCZWluZ0VkaXRlZCk7XG4gICAgICAgIGl0ZW1zQmVpbmdFZGl0ZWQuZGVsZXRlKGlkKTtcbiAgICAgICAgb25DaGFuZ2UoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZSksIHt9LCB7XG4gICAgICAgICAgaXRlbXNCZWluZ0VkaXRlZFxuICAgICAgICB9KSk7XG4gICAgICB9LFxuICAgICAgc2VsZWN0ZWRGaWVsZHM6IHNlbGVjdGVkRmllbGRzLFxuICAgICAgaXRlbUdldHRlcjogaXRlbUdldHRlcixcbiAgICAgIG9uQ2FuY2VsOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1zQmVpbmdFZGl0ZWQgPSBuZXcgU2V0KHZhbHVlLml0ZW1zQmVpbmdFZGl0ZWQpO1xuICAgICAgICBpdGVtc0JlaW5nRWRpdGVkLmRlbGV0ZShpZCk7XG4gICAgICAgIG9uQ2hhbmdlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFsdWUpLCB7fSwge1xuICAgICAgICAgIGl0ZW1zQmVpbmdFZGl0ZWRcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pIDogY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIG51bGwsIGNvcmUuanN4KGNvcmUuU3RhY2ssIHtcbiAgICAgIGdhcDogXCJ4bGFyZ2VcIlxuICAgIH0sIGRpc3BsYXlPcHRpb25zLmNhcmRGaWVsZHMubWFwKGZpZWxkUGF0aCA9PiB7XG4gICAgICBjb25zdCBmaWVsZCA9IGZvcmVpZ25MaXN0LmZpZWxkc1tmaWVsZFBhdGhdO1xuICAgICAgY29uc3QgaXRlbUZvckZpZWxkID0ge307XG5cbiAgICAgIGZvciAoY29uc3QgZ3JhcGhxbEZpZWxkIG9mIGdldFJvb3RHcmFwaFFMRmllbGRzRnJvbUZpZWxkQ29udHJvbGxlci5nZXRSb290R3JhcGhRTEZpZWxkc0Zyb21GaWVsZENvbnRyb2xsZXIoZmllbGQuY29udHJvbGxlcikpIHtcbiAgICAgICAgY29uc3QgZmllbGRHZXR0ZXIgPSBpdGVtR2V0dGVyLmdldChncmFwaHFsRmllbGQpO1xuXG4gICAgICAgIGlmIChmaWVsZEdldHRlci5lcnJvcnMpIHtcbiAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBmaWVsZEdldHRlci5lcnJvcnNbMF0ubWVzc2FnZTtcbiAgICAgICAgICByZXR1cm4gY29yZS5qc3goZmllbGRzLkZpZWxkQ29udGFpbmVyLCBudWxsLCBjb3JlLmpzeChmaWVsZHMuRmllbGRMYWJlbCwgbnVsbCwgZmllbGQubGFiZWwpLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaXRlbUZvckZpZWxkW2dyYXBocWxGaWVsZF0gPSBmaWVsZEdldHRlci5kYXRhO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29yZS5qc3goZmllbGQudmlld3MuQ2FyZFZhbHVlLCB7XG4gICAgICAgIGtleTogZmllbGRQYXRoLFxuICAgICAgICBmaWVsZDogZmllbGQuY29udHJvbGxlcixcbiAgICAgICAgaXRlbTogaXRlbUZvckZpZWxkXG4gICAgICB9KTtcbiAgICB9KSksIGNvcmUuanN4KGNvcmUuU3RhY2ssIHtcbiAgICAgIGFjcm9zczogdHJ1ZSxcbiAgICAgIGdhcDogXCJzbWFsbFwiLFxuICAgICAgbWFyZ2luVG9wOiBcInhsYXJnZVwiXG4gICAgfSwgZGlzcGxheU9wdGlvbnMuaW5saW5lRWRpdCAmJiBvbkNoYW5nZSAhPT0gdW5kZWZpbmVkICYmIGNvcmUuanN4KGJ1dHRvbi5CdXR0b24sIHtcbiAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgIGRpc2FibGVkOiBvbkNoYW5nZSA9PT0gdW5kZWZpbmVkLFxuICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICBvbkNoYW5nZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlKSwge30sIHtcbiAgICAgICAgICBpdGVtc0JlaW5nRWRpdGVkOiBuZXcgU2V0KFsuLi52YWx1ZS5pdGVtc0JlaW5nRWRpdGVkLCBpZF0pXG4gICAgICAgIH0pKTtcbiAgICAgIH0sXG4gICAgICB0b25lOiBcImFjdGl2ZVwiXG4gICAgfSwgXCJFZGl0XCIpLCBkaXNwbGF5T3B0aW9ucy5yZW1vdmVNb2RlID09PSAnZGlzY29ubmVjdCcgJiYgb25DaGFuZ2UgIT09IHVuZGVmaW5lZCAmJiBjb3JlLmpzeCh0b29sdGlwLlRvb2x0aXAsIHtcbiAgICAgIGNvbnRlbnQ6IFwiVGhpcyBpdGVtIHdpbGwgbm90IGJlIGRlbGV0ZWQuIEl0IHdpbGwgb25seSBiZSByZW1vdmVkIGZyb20gdGhpcyBmaWVsZC5cIlxuICAgIH0sIHByb3BzID0+IGNvcmUuanN4KGJ1dHRvbi5CdXR0b24sIF9leHRlbmRzKHtcbiAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgIGRpc2FibGVkOiBvbkNoYW5nZSA9PT0gdW5kZWZpbmVkLFxuICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50SWRzID0gbmV3IFNldCh2YWx1ZS5jdXJyZW50SWRzKTtcbiAgICAgICAgY3VycmVudElkcy5kZWxldGUoaWQpO1xuICAgICAgICBvbkNoYW5nZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlKSwge30sIHtcbiAgICAgICAgICBjdXJyZW50SWRzXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9LCBwcm9wcywge1xuICAgICAgdG9uZTogXCJuZWdhdGl2ZVwiXG4gICAgfSksIFwiUmVtb3ZlXCIpKSwgZGlzcGxheU9wdGlvbnMubGlua1RvSXRlbSAmJiBjb3JlLmpzeChidXR0b24uQnV0dG9uLCB7XG4gICAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgICB3ZWlnaHQ6IFwibGlua1wiLFxuICAgICAgdG9uZTogXCJhY3RpdmVcIixcbiAgICAgIGNzczoge1xuICAgICAgICB0ZXh0RGVjb3JhdGlvbjogJ25vbmUnXG4gICAgICB9LFxuICAgICAgYXM6IGFkbWluVWlfcm91dGVyX2Rpc3Rfa2V5c3RvbmU2Q29yZUFkbWluVWlSb3V0ZXIuTGluayxcbiAgICAgIGhyZWY6IGAvJHtmb3JlaWduTGlzdC5wYXRofS8ke2lkfWBcbiAgICB9LCBcIlZpZXcgXCIsIGZvcmVpZ25MaXN0LnNpbmd1bGFyLCBcIiBkZXRhaWxzXCIpKSkpO1xuICB9KSksIG9uQ2hhbmdlID09PSB1bmRlZmluZWQgPyBudWxsIDogZGlzcGxheU9wdGlvbnMuaW5saW5lQ29ubmVjdCAmJiBzaG93Q29ubmVjdEl0ZW1zID8gY29yZS5qc3goQ2FyZENvbnRhaW5lciwge1xuICAgIG1vZGU6IFwiZWRpdFwiXG4gIH0sIGNvcmUuanN4KGNvcmUuU3RhY2ssIHtcbiAgICBnYXA6IFwic21hbGxcIixcbiAgICBtYXJnaW5ZOiBcIm1lZGl1bVwiLFxuICAgIGFjcm9zczogdHJ1ZSxcbiAgICBjc3M6IHtcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLFxuICAgICAgJ2RpdjpmaXJzdC1vZi10eXBlJzoge1xuICAgICAgICBmbGV4OiAnMidcbiAgICAgIH1cbiAgICB9XG4gIH0sIGNvcmUuanN4KGZpZWxkc190eXBlc19yZWxhdGlvbnNoaXBfdmlld3NfUmVsYXRpb25zaGlwU2VsZWN0X2Rpc3Rfa2V5c3RvbmU2Q29yZUZpZWxkc1R5cGVzUmVsYXRpb25zaGlwVmlld3NSZWxhdGlvbnNoaXBTZWxlY3QuUmVsYXRpb25zaGlwU2VsZWN0LCB7XG4gICAgYXV0b0ZvY3VzOiB0cnVlLFxuICAgIGNvbnRyb2xTaG91bGRSZW5kZXJWYWx1ZTogaXNMb2FkaW5nTGF6eUl0ZW1zLFxuICAgIGlzRGlzYWJsZWQ6IG9uQ2hhbmdlID09PSB1bmRlZmluZWQsXG4gICAgbGlzdDogZm9yZWlnbkxpc3QsXG4gICAgaXNMb2FkaW5nOiBpc0xvYWRpbmdMYXp5SXRlbXMsXG4gICAgcGxhY2Vob2xkZXI6IGBTZWxlY3QgYSAke2ZvcmVpZ25MaXN0LnNpbmd1bGFyfWAsXG4gICAgcG9ydGFsTWVudTogdHJ1ZSxcbiAgICBzdGF0ZToge1xuICAgICAga2luZDogJ21hbnknLFxuXG4gICAgICBhc3luYyBvbkNoYW5nZShvcHRpb25zKSB7XG4gICAgICAgIC8vIFRPRE86IG1heWJlIHVzZSB0aGUgZXh0cmFTZWxlY3Rpb24gcHJvcCBvbiBSZWxhdGlvbnNoaXBTZWxlY3QgaGVyZVxuICAgICAgICBjb25zdCBpdGVtc1RvRmV0Y2hBbmRDb25uZWN0ID0gW107XG4gICAgICAgIG9wdGlvbnMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICBpZiAoIXZhbHVlLmN1cnJlbnRJZHMuaGFzKGl0ZW0uaWQpKSB7XG4gICAgICAgICAgICBpdGVtc1RvRmV0Y2hBbmRDb25uZWN0LnB1c2goaXRlbS5pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoaXRlbXNUb0ZldGNoQW5kQ29ubmVjdC5sZW5ndGgpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICBlcnJvcnNcbiAgICAgICAgICAgIH0gPSBhd2FpdCBjbGllbnQkMS5xdWVyeSh7XG4gICAgICAgICAgICAgIHF1ZXJ5OiBjbGllbnQuZ3FsYHF1ZXJ5ICgkaWRzOiBbSUQhXSEpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpdGVtczogJHtmb3JlaWduTGlzdC5ncWxOYW1lcy5saXN0UXVlcnlOYW1lfSh3aGVyZTogeyBpZDogeyBpbjogJGlkcyB9fSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHtzZWxlY3RlZEZpZWxkc31cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1gLFxuICAgICAgICAgICAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgICAgICAgICBpZHM6IGl0ZW1zVG9GZXRjaEFuZENvbm5lY3RcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChpc01vdW50ZWRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICBjb25zdCBkYXRhR2V0dGVycyA9IGRhdGFHZXR0ZXIubWFrZURhdGFHZXR0ZXIoZGF0YSwgZXJyb3JzKTtcbiAgICAgICAgICAgICAgY29uc3QgaXRlbXNEYXRhR2V0dGVyID0gZGF0YUdldHRlcnMuZ2V0KCdpdGVtcycpO1xuXG4gICAgICAgICAgICAgIGxldCBuZXdJdGVtcyA9IF9vYmplY3RTcHJlYWQoe30sIGl0ZW1zKTtcblxuICAgICAgICAgICAgICBsZXQgbmV3Q3VycmVudElkcyA9IGZpZWxkLm1hbnkgPyBuZXcgU2V0KHZhbHVlLmN1cnJlbnRJZHMpIDogbmV3IFNldCgpO1xuXG4gICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW1zRGF0YUdldHRlci5kYXRhKSkge1xuICAgICAgICAgICAgICAgIGl0ZW1zRGF0YUdldHRlci5kYXRhLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICgoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLmlkKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0N1cnJlbnRJZHMuYWRkKGl0ZW0uaWQpO1xuICAgICAgICAgICAgICAgICAgICBuZXdJdGVtc1tpdGVtLmlkXSA9IGl0ZW1zRGF0YUdldHRlci5nZXQoaSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAobmV3Q3VycmVudElkcy5zaXplKSB7XG4gICAgICAgICAgICAgICAgc2V0SXRlbXMobmV3SXRlbXMpO1xuICAgICAgICAgICAgICAgIG9uQ2hhbmdlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFsdWUpLCB7fSwge1xuICAgICAgICAgICAgICAgICAgY3VycmVudElkczogbmV3Q3VycmVudElkc1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBzZXRIaWRlQ29ubmVjdEl0ZW1zTGFiZWwoJ0RvbmUnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoaXNNb3VudGVkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgc2V0SXNMb2FkaW5nTGF6eUl0ZW1zKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHZhbHVlOiAoKCkgPT4ge1xuICAgICAgICBsZXQgb3B0aW9ucyA9IFtdO1xuICAgICAgICBPYmplY3Qua2V5cyhpdGVtcykuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgICAgaWYgKHZhbHVlLmN1cnJlbnRJZHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgIGxhYmVsOiBpZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgICB9KSgpXG4gICAgfVxuICB9KSwgY29yZS5qc3goYnV0dG9uLkJ1dHRvbiwge1xuICAgIG9uQ2xpY2s6ICgpID0+IHNldFNob3dDb25uZWN0SXRlbXMoZmFsc2UpXG4gIH0sIGhpZGVDb25uZWN0SXRlbXNMYWJlbCkpKSA6IHZhbHVlLml0ZW1CZWluZ0NyZWF0ZWQgPyBjb3JlLmpzeChDYXJkQ29udGFpbmVyLCB7XG4gICAgbW9kZTogXCJjcmVhdGVcIlxuICB9LCBjb3JlLmpzeChJbmxpbmVDcmVhdGUsIHtcbiAgICBzZWxlY3RlZEZpZWxkczogc2VsZWN0ZWRGaWVsZHMsXG4gICAgZmllbGRzOiBkaXNwbGF5T3B0aW9ucy5pbmxpbmVDcmVhdGUuZmllbGRzLFxuICAgIGxpc3Q6IGZvcmVpZ25MaXN0LFxuICAgIG9uQ2FuY2VsOiAoKSA9PiB7XG4gICAgICBvbkNoYW5nZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlKSwge30sIHtcbiAgICAgICAgaXRlbUJlaW5nQ3JlYXRlZDogZmFsc2VcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIG9uQ3JlYXRlOiBpdGVtR2V0dGVyID0+IHtcbiAgICAgIGNvbnN0IGlkID0gaXRlbUdldHRlci5kYXRhLmlkO1xuICAgICAgc2V0SXRlbXMoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtcyksIHt9LCB7XG4gICAgICAgIFtpZF06IGl0ZW1HZXR0ZXJcbiAgICAgIH0pKTtcbiAgICAgIG9uQ2hhbmdlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFsdWUpLCB7fSwge1xuICAgICAgICBpdGVtQmVpbmdDcmVhdGVkOiBmYWxzZSxcbiAgICAgICAgY3VycmVudElkczogZmllbGQubWFueSA/IG5ldyBTZXQoWy4uLnZhbHVlLmN1cnJlbnRJZHMsIGlkXSkgOiBuZXcgU2V0KFtpZF0pXG4gICAgICB9KSk7XG4gICAgfVxuICB9KSkgOiBkaXNwbGF5T3B0aW9ucy5pbmxpbmVDcmVhdGUgfHwgZGlzcGxheU9wdGlvbnMuaW5saW5lQ29ubmVjdCA/IGNvcmUuanN4KENhcmRDb250YWluZXIsIHtcbiAgICBtb2RlOiBcImNyZWF0ZVwiXG4gIH0sIGNvcmUuanN4KGNvcmUuU3RhY2ssIHtcbiAgICBnYXA6IFwic21hbGxcIixcbiAgICBtYXJnaW5Ub3A6IFwibWVkaXVtXCIsXG4gICAgYWNyb3NzOiB0cnVlXG4gIH0sIGRpc3BsYXlPcHRpb25zLmlubGluZUNyZWF0ZSAmJiBjb3JlLmpzeChidXR0b24uQnV0dG9uLCB7XG4gICAgc2l6ZTogXCJzbWFsbFwiLFxuICAgIGRpc2FibGVkOiBvbkNoYW5nZSA9PT0gdW5kZWZpbmVkLFxuICAgIHRvbmU6IFwicG9zaXRpdmVcIixcbiAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICBvbkNoYW5nZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlKSwge30sIHtcbiAgICAgICAgaXRlbUJlaW5nQ3JlYXRlZDogdHJ1ZVxuICAgICAgfSkpO1xuICAgIH1cbiAgfSwgXCJDcmVhdGUgXCIsIGZvcmVpZ25MaXN0LnNpbmd1bGFyKSwgZGlzcGxheU9wdGlvbnMuaW5saW5lQ29ubmVjdCAmJiBjb3JlLmpzeChidXR0b24uQnV0dG9uLCB7XG4gICAgc2l6ZTogXCJzbWFsbFwiLFxuICAgIHdlaWdodDogXCJub25lXCIsXG4gICAgdG9uZTogXCJwYXNzaXZlXCIsXG4gICAgb25DbGljazogKCkgPT4ge1xuICAgICAgc2V0U2hvd0Nvbm5lY3RJdGVtcyh0cnVlKTtcbiAgICAgIHNldEhpZGVDb25uZWN0SXRlbXNMYWJlbCgnQ2FuY2VsJyk7XG4gICAgfVxuICB9LCBcIkxpbmsgZXhpc3RpbmcgXCIsIGZvcmVpZ25MaXN0LnNpbmd1bGFyKSkpIDogbnVsbCwgZm9yY2VWYWxpZGF0aW9uICYmIGNvcmUuanN4KGNvcmUuVGV4dCwge1xuICAgIGNvbG9yOiBcInJlZDYwMFwiLFxuICAgIHNpemU6IFwic21hbGxcIlxuICB9LCBcIllvdSBtdXN0IGZpbmlzaCBjcmVhdGluZyBhbmQgZWRpdGluZyBhbnkgcmVsYXRlZCBcIiwgZm9yZWlnbkxpc3QubGFiZWwudG9Mb3dlckNhc2UoKSwgXCIgYmVmb3JlIHNhdmluZyB0aGUgXCIsIGxvY2FsTGlzdC5zaW5ndWxhci50b0xvd2VyQ2FzZSgpKSk7XG59XG5cbmZ1bmN0aW9uIExpbmtUb1JlbGF0ZWRJdGVtcyhfcmVmKSB7XG4gIHZhciBfdmFsdWUkdmFsdWU7XG5cbiAgbGV0IHtcbiAgICBpdGVtSWQsXG4gICAgdmFsdWUsXG4gICAgbGlzdCxcbiAgICByZWZGaWVsZEtleVxuICB9ID0gX3JlZjtcblxuICBmdW5jdGlvbiBjb25zdHJ1Y3RRdWVyeShfcmVmMikge1xuICAgIGxldCB7XG4gICAgICByZWZGaWVsZEtleSxcbiAgICAgIGl0ZW1JZCxcbiAgICAgIHZhbHVlXG4gICAgfSA9IF9yZWYyO1xuXG4gICAgaWYgKCEhcmVmRmllbGRLZXkgJiYgaXRlbUlkKSB7XG4gICAgICByZXR1cm4gYCEke3JlZkZpZWxkS2V5fV9tYXRjaGVzPVwiJHtpdGVtSWR9XCJgO1xuICAgIH1cblxuICAgIHJldHVybiBgIWlkX2luPVwiJHsodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbHVlLnZhbHVlKS5zbGljZSgwLCAxMDApLm1hcChfcmVmMyA9PiB7XG4gICAgICBsZXQge1xuICAgICAgICBpZFxuICAgICAgfSA9IF9yZWYzO1xuICAgICAgcmV0dXJuIGlkO1xuICAgIH0pLmpvaW4oJywnKX1cImA7XG4gIH1cblxuICBjb25zdCBjb21tb25Qcm9wcyA9IHtcbiAgICBzaXplOiAnc21hbGwnLFxuICAgIHRvbmU6ICdhY3RpdmUnLFxuICAgIHdlaWdodDogJ2xpbmsnXG4gIH07XG5cbiAgaWYgKHZhbHVlLmtpbmQgPT09ICdtYW55Jykge1xuICAgIGNvbnN0IHF1ZXJ5ID0gY29uc3RydWN0UXVlcnkoe1xuICAgICAgcmVmRmllbGRLZXksXG4gICAgICB2YWx1ZSxcbiAgICAgIGl0ZW1JZFxuICAgIH0pO1xuICAgIHJldHVybiBjb3JlLmpzeChidXR0b24uQnV0dG9uLCBfZXh0ZW5kcyh7fSwgY29tbW9uUHJvcHMsIHtcbiAgICAgIGFzOiBhZG1pblVpX3JvdXRlcl9kaXN0X2tleXN0b25lNkNvcmVBZG1pblVpUm91dGVyLkxpbmssXG4gICAgICBocmVmOiBgLyR7bGlzdC5wYXRofT8ke3F1ZXJ5fWBcbiAgICB9KSwgXCJWaWV3IHJlbGF0ZWQgXCIsIGxpc3QucGx1cmFsKTtcbiAgfVxuXG4gIHJldHVybiBjb3JlLmpzeChidXR0b24uQnV0dG9uLCBfZXh0ZW5kcyh7fSwgY29tbW9uUHJvcHMsIHtcbiAgICBhczogYWRtaW5VaV9yb3V0ZXJfZGlzdF9rZXlzdG9uZTZDb3JlQWRtaW5VaVJvdXRlci5MaW5rLFxuICAgIGhyZWY6IGAvJHtsaXN0LnBhdGh9LyR7KF92YWx1ZSR2YWx1ZSA9IHZhbHVlLnZhbHVlKSA9PT0gbnVsbCB8fCBfdmFsdWUkdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZSR2YWx1ZS5pZH1gXG4gIH0pLCBcIlZpZXcgXCIsIGxpc3Quc2luZ3VsYXIsIFwiIGRldGFpbHNcIik7XG59XG5cbmNvbnN0IFJlbGF0aW9uc2hpcExpbmtCdXR0b24gPSBfcmVmNCA9PiB7XG4gIGxldCB7XG4gICAgaHJlZixcbiAgICBjaGlsZHJlblxuICB9ID0gX3JlZjQ7XG4gIHJldHVybiBjb3JlLmpzeChidXR0b24uQnV0dG9uLCB7XG4gICAgY3NzOiB7XG4gICAgICBwYWRkaW5nOiAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICB9LFxuICAgIHdlaWdodDogXCJsaW5rXCIsXG4gICAgdG9uZTogXCJhY3RpdmVcIixcbiAgICBhczogYWRtaW5VaV9yb3V0ZXJfZGlzdF9rZXlzdG9uZTZDb3JlQWRtaW5VaVJvdXRlci5MaW5rLFxuICAgIGhyZWY6IGhyZWZcbiAgfSwgY2hpbGRyZW4pO1xufTtcblxuY29uc3QgUmVsYXRpb25zaGlwRGlzcGxheSA9IF9yZWY1ID0+IHtcbiAgbGV0IHtcbiAgICBsaXN0LFxuICAgIHZhbHVlXG4gIH0gPSBfcmVmNTtcblxuICBpZiAodmFsdWUua2luZCA9PT0gJ21hbnknKSB7XG4gICAgaWYgKHZhbHVlLnZhbHVlLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGNvcmUuanN4KGNvcmUuSW5saW5lLCB7XG4gICAgICAgIGdhcDogXCJzbWFsbFwiXG4gICAgICB9LCB2YWx1ZS52YWx1ZS5tYXAoaSA9PiBjb3JlLmpzeChSZWxhdGlvbnNoaXBMaW5rQnV0dG9uLCB7XG4gICAgICAgIGhyZWY6IGAvJHtsaXN0LnBhdGh9LyR7aS5pZH1gXG4gICAgICB9LCBpLmxhYmVsKSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY29yZS5qc3goXCJkaXZcIiwgbnVsbCwgXCIoTm8gXCIsIGxpc3QucGx1cmFsLCBcIilcIik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZS52YWx1ZSkge1xuICAgICAgcmV0dXJuIGNvcmUuanN4KFJlbGF0aW9uc2hpcExpbmtCdXR0b24sIHtcbiAgICAgICAgaHJlZjogYC8ke2xpc3QucGF0aH0vJHt2YWx1ZS52YWx1ZS5pZH1gXG4gICAgICB9LCB2YWx1ZS52YWx1ZS5sYWJlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjb3JlLmpzeChcImRpdlwiLCBudWxsLCBcIihObyBcIiwgbGlzdC5zaW5ndWxhciwgXCIpXCIpO1xuICAgIH1cbiAgfVxufTtcblxuY29uc3QgRmllbGQgPSBfcmVmNiA9PiB7XG4gIHZhciBfdmFsdWUkdmFsdWUyO1xuXG4gIGxldCB7XG4gICAgZmllbGQsXG4gICAgYXV0b0ZvY3VzLFxuICAgIHZhbHVlLFxuICAgIG9uQ2hhbmdlLFxuICAgIGZvcmNlVmFsaWRhdGlvblxuICB9ID0gX3JlZjY7XG4gIGNvbnN0IGtleXN0b25lID0gYWRtaW5VaV9jb250ZXh0X2Rpc3Rfa2V5c3RvbmU2Q29yZUFkbWluVWlDb250ZXh0LnVzZUtleXN0b25lKCk7XG4gIGNvbnN0IGZvcmVpZ25MaXN0ID0gYWRtaW5VaV9jb250ZXh0X2Rpc3Rfa2V5c3RvbmU2Q29yZUFkbWluVWlDb250ZXh0LnVzZUxpc3QoZmllbGQucmVmTGlzdEtleSk7XG4gIGNvbnN0IGxvY2FsTGlzdCA9IGFkbWluVWlfY29udGV4dF9kaXN0X2tleXN0b25lNkNvcmVBZG1pblVpQ29udGV4dC51c2VMaXN0KGZpZWxkLmxpc3RLZXkpO1xuICBjb25zdCBbaXNEcmF3ZXJPcGVuLCBzZXRJc0RyYXdlck9wZW5dID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuXG4gIGlmICh2YWx1ZS5raW5kID09PSAnY2FyZHMtdmlldycpIHtcbiAgICByZXR1cm4gY29yZS5qc3goZmllbGRzLkZpZWxkQ29udGFpbmVyLCB7XG4gICAgICBhczogXCJmaWVsZHNldFwiXG4gICAgfSwgY29yZS5qc3goZmllbGRzLkZpZWxkTGVnZW5kLCBudWxsLCBmaWVsZC5sYWJlbCksIGNvcmUuanN4KENhcmRzLCB7XG4gICAgICBmb3JjZVZhbGlkYXRpb246IGZvcmNlVmFsaWRhdGlvbixcbiAgICAgIGZpZWxkOiBmaWVsZCxcbiAgICAgIGlkOiB2YWx1ZS5pZCxcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIG9uQ2hhbmdlOiBvbkNoYW5nZSxcbiAgICAgIGZvcmVpZ25MaXN0OiBmb3JlaWduTGlzdCxcbiAgICAgIGxvY2FsTGlzdDogbG9jYWxMaXN0XG4gICAgfSkpO1xuICB9XG5cbiAgaWYgKHZhbHVlLmtpbmQgPT09ICdjb3VudCcpIHtcbiAgICByZXR1cm4gY29yZS5qc3goY29yZS5TdGFjaywge1xuICAgICAgYXM6IFwiZmllbGRzZXRcIixcbiAgICAgIGdhcDogXCJtZWRpdW1cIlxuICAgIH0sIGNvcmUuanN4KGZpZWxkcy5GaWVsZExlZ2VuZCwgbnVsbCwgZmllbGQubGFiZWwpLCBjb3JlLmpzeChcImRpdlwiLCBudWxsLCB2YWx1ZS5jb3VudCA9PT0gMSA/IGBUaGVyZSBpcyAxICR7Zm9yZWlnbkxpc3Quc2luZ3VsYXJ9IGAgOiBgVGhlcmUgYXJlICR7dmFsdWUuY291bnR9ICR7Zm9yZWlnbkxpc3QucGx1cmFsfSBgLCBcImxpbmtlZCB0byB0aGlzIFwiLCBsb2NhbExpc3Quc2luZ3VsYXIpKTtcbiAgfVxuXG4gIGNvbnN0IGF1dGhlbnRpY2F0ZWRJdGVtID0ga2V5c3RvbmUuYXV0aGVudGljYXRlZEl0ZW07XG4gIHJldHVybiBjb3JlLmpzeChmaWVsZHMuRmllbGRDb250YWluZXIsIHtcbiAgICBhczogXCJmaWVsZHNldFwiXG4gIH0sIGNvcmUuanN4KGZpZWxkcy5GaWVsZExhYmVsLCB7XG4gICAgYXM6IFwibGVnZW5kXCJcbiAgfSwgZmllbGQubGFiZWwpLCBvbkNoYW5nZSA/IGNvcmUuanN4KFJlYWN0LkZyYWdtZW50LCBudWxsLCBjb3JlLmpzeChjb3JlLlN0YWNrLCB7XG4gICAgZ2FwOiBcIm1lZGl1bVwiXG4gIH0sIGNvcmUuanN4KGZpZWxkc190eXBlc19yZWxhdGlvbnNoaXBfdmlld3NfUmVsYXRpb25zaGlwU2VsZWN0X2Rpc3Rfa2V5c3RvbmU2Q29yZUZpZWxkc1R5cGVzUmVsYXRpb25zaGlwVmlld3NSZWxhdGlvbnNoaXBTZWxlY3QuUmVsYXRpb25zaGlwU2VsZWN0LCB7XG4gICAgY29udHJvbFNob3VsZFJlbmRlclZhbHVlOiB0cnVlLFxuICAgIGF1dG9Gb2N1czogYXV0b0ZvY3VzLFxuICAgIGlzRGlzYWJsZWQ6IG9uQ2hhbmdlID09PSB1bmRlZmluZWQsXG4gICAgbGlzdDogZm9yZWlnbkxpc3QsXG4gICAgcG9ydGFsTWVudTogdHJ1ZSxcbiAgICBzdGF0ZTogdmFsdWUua2luZCA9PT0gJ21hbnknID8ge1xuICAgICAga2luZDogJ21hbnknLFxuICAgICAgdmFsdWU6IHZhbHVlLnZhbHVlLFxuXG4gICAgICBvbkNoYW5nZShuZXdJdGVtcykge1xuICAgICAgICBvbkNoYW5nZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlKSwge30sIHtcbiAgICAgICAgICB2YWx1ZTogbmV3SXRlbXNcbiAgICAgICAgfSkpO1xuICAgICAgfVxuXG4gICAgfSA6IHtcbiAgICAgIGtpbmQ6ICdvbmUnLFxuICAgICAgdmFsdWU6IHZhbHVlLnZhbHVlLFxuXG4gICAgICBvbkNoYW5nZShuZXdWYWwpIHtcbiAgICAgICAgaWYgKHZhbHVlLmtpbmQgPT09ICdvbmUnKSB7XG4gICAgICAgICAgb25DaGFuZ2UoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZSksIHt9LCB7XG4gICAgICAgICAgICB2YWx1ZTogbmV3VmFsXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9XG4gIH0pLCBjb3JlLmpzeChjb3JlLlN0YWNrLCB7XG4gICAgYWNyb3NzOiB0cnVlLFxuICAgIGdhcDogXCJzbWFsbFwiXG4gIH0sICFmaWVsZC5oaWRlQ3JlYXRlICYmIGNvcmUuanN4KGJ1dHRvbi5CdXR0b24sIHtcbiAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgZGlzYWJsZWQ6IGlzRHJhd2VyT3BlbixcbiAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICBzZXRJc0RyYXdlck9wZW4odHJ1ZSk7XG4gICAgfVxuICB9LCBcIkNyZWF0ZSByZWxhdGVkIFwiLCBmb3JlaWduTGlzdC5zaW5ndWxhciksIGF1dGhlbnRpY2F0ZWRJdGVtLnN0YXRlID09PSAnYXV0aGVudGljYXRlZCcgJiYgYXV0aGVudGljYXRlZEl0ZW0ubGlzdEtleSA9PT0gZmllbGQucmVmTGlzdEtleSAmJiAodmFsdWUua2luZCA9PT0gJ21hbnknID8gdmFsdWUudmFsdWUuZmluZCh4ID0+IHguaWQgPT09IGF1dGhlbnRpY2F0ZWRJdGVtLmlkKSA9PT0gdW5kZWZpbmVkIDogKChfdmFsdWUkdmFsdWUyID0gdmFsdWUudmFsdWUpID09PSBudWxsIHx8IF92YWx1ZSR2YWx1ZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZSR2YWx1ZTIuaWQpICE9PSBhdXRoZW50aWNhdGVkSXRlbS5pZCkgJiYgY29yZS5qc3goYnV0dG9uLkJ1dHRvbiwge1xuICAgIHNpemU6IFwic21hbGxcIixcbiAgICBpc0Rpc2FibGVkOiBvbkNoYW5nZSA9PT0gdW5kZWZpbmVkLFxuICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbCA9IHtcbiAgICAgICAgbGFiZWw6IGF1dGhlbnRpY2F0ZWRJdGVtLmxhYmVsLFxuICAgICAgICBpZDogYXV0aGVudGljYXRlZEl0ZW0uaWRcbiAgICAgIH07XG5cbiAgICAgIGlmICh2YWx1ZS5raW5kID09PSAnbWFueScpIHtcbiAgICAgICAgb25DaGFuZ2UoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZSksIHt9LCB7XG4gICAgICAgICAgdmFsdWU6IFsuLi52YWx1ZS52YWx1ZSwgdmFsXVxuICAgICAgICB9KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvbkNoYW5nZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlKSwge30sIHtcbiAgICAgICAgICB2YWx1ZTogdmFsXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHZhbHVlLmtpbmQgPT09ICdtYW55JyA/ICdBZGQgJyA6ICdTZXQgYXMgJywgYXV0aGVudGljYXRlZEl0ZW0ubGFiZWwpLCAhISh2YWx1ZS5raW5kID09PSAnbWFueScgPyB2YWx1ZS52YWx1ZS5sZW5ndGggOiB2YWx1ZS5raW5kID09PSAnb25lJyAmJiB2YWx1ZS52YWx1ZSkgJiYgY29yZS5qc3goTGlua1RvUmVsYXRlZEl0ZW1zLCB7XG4gICAgaXRlbUlkOiB2YWx1ZS5pZCxcbiAgICByZWZGaWVsZEtleTogZmllbGQucmVmRmllbGRLZXksXG4gICAgbGlzdDogZm9yZWlnbkxpc3QsXG4gICAgdmFsdWU6IHZhbHVlXG4gIH0pKSksIGNvcmUuanN4KG1vZGFscy5EcmF3ZXJDb250cm9sbGVyLCB7XG4gICAgaXNPcGVuOiBpc0RyYXdlck9wZW5cbiAgfSwgY29yZS5qc3goQ3JlYXRlSXRlbURyYXdlci5DcmVhdGVJdGVtRHJhd2VyLCB7XG4gICAgbGlzdEtleTogZm9yZWlnbkxpc3Qua2V5LFxuICAgIG9uQ2xvc2U6ICgpID0+IHtcbiAgICAgIHNldElzRHJhd2VyT3BlbihmYWxzZSk7XG4gICAgfSxcbiAgICBvbkNyZWF0ZTogdmFsID0+IHtcbiAgICAgIHNldElzRHJhd2VyT3BlbihmYWxzZSk7XG5cbiAgICAgIGlmICh2YWx1ZS5raW5kID09PSAnbWFueScpIHtcbiAgICAgICAgb25DaGFuZ2UoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZSksIHt9LCB7XG4gICAgICAgICAgdmFsdWU6IFsuLi52YWx1ZS52YWx1ZSwgdmFsXVxuICAgICAgICB9KSk7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlLmtpbmQgPT09ICdvbmUnKSB7XG4gICAgICAgIG9uQ2hhbmdlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFsdWUpLCB7fSwge1xuICAgICAgICAgIHZhbHVlOiB2YWxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cbiAgfSkpKSA6IGNvcmUuanN4KFJlbGF0aW9uc2hpcERpc3BsYXksIHtcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgbGlzdDogZm9yZWlnbkxpc3RcbiAgfSkpO1xufTtcbmNvbnN0IENlbGwgPSBfcmVmNyA9PiB7XG4gIGxldCB7XG4gICAgZmllbGQsXG4gICAgaXRlbVxuICB9ID0gX3JlZjc7XG4gIGNvbnN0IGxpc3QgPSBhZG1pblVpX2NvbnRleHRfZGlzdF9rZXlzdG9uZTZDb3JlQWRtaW5VaUNvbnRleHQudXNlTGlzdChmaWVsZC5yZWZMaXN0S2V5KTtcbiAgY29uc3Qge1xuICAgIGNvbG9yc1xuICB9ID0gY29yZS51c2VUaGVtZSgpO1xuXG4gIGlmIChmaWVsZC5kaXNwbGF5ID09PSAnY291bnQnKSB7XG4gICAgdmFyIF9pdGVtJDtcblxuICAgIGNvbnN0IGNvdW50ID0gKF9pdGVtJCA9IGl0ZW1bYCR7ZmllbGQucGF0aH1Db3VudGBdKSAhPT0gbnVsbCAmJiBfaXRlbSQgIT09IHZvaWQgMCA/IF9pdGVtJCA6IDA7XG4gICAgcmV0dXJuIGNvcmUuanN4KENlbGxDb250YWluZXIuQ2VsbENvbnRhaW5lciwgbnVsbCwgY291bnQsIFwiIFwiLCBjb3VudCA9PT0gMSA/IGxpc3Quc2luZ3VsYXIgOiBsaXN0LnBsdXJhbCk7XG4gIH1cblxuICBjb25zdCBkYXRhID0gaXRlbVtmaWVsZC5wYXRoXTtcbiAgY29uc3QgaXRlbXMgPSAoQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbZGF0YV0pLmZpbHRlcihpdGVtID0+IGl0ZW0pO1xuICBjb25zdCBkaXNwbGF5SXRlbXMgPSBpdGVtcy5sZW5ndGggPCA1ID8gaXRlbXMgOiBpdGVtcy5zbGljZSgwLCAzKTtcbiAgY29uc3Qgb3ZlcmZsb3cgPSBpdGVtcy5sZW5ndGggPCA1ID8gMCA6IGl0ZW1zLmxlbmd0aCAtIDM7XG4gIGNvbnN0IHN0eWxlcyA9IHtcbiAgICBjb2xvcjogY29sb3JzLmZvcmVncm91bmQsXG4gICAgdGV4dERlY29yYXRpb246ICdub25lJyxcbiAgICAnOmhvdmVyJzoge1xuICAgICAgdGV4dERlY29yYXRpb246ICd1bmRlcmxpbmUnXG4gICAgfVxuICB9O1xuICByZXR1cm4gY29yZS5qc3goQ2VsbENvbnRhaW5lci5DZWxsQ29udGFpbmVyLCBudWxsLCBkaXNwbGF5SXRlbXMubWFwKChpdGVtLCBpbmRleCkgPT4gY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIHtcbiAgICBrZXk6IGl0ZW0uaWRcbiAgfSwgISFpbmRleCA/ICcsICcgOiAnJywgY29yZS5qc3goYWRtaW5VaV9yb3V0ZXJfZGlzdF9rZXlzdG9uZTZDb3JlQWRtaW5VaVJvdXRlci5MaW5rLCB7XG4gICAgaHJlZjogYC8ke2xpc3QucGF0aH0vW2lkXWAsXG4gICAgYXM6IGAvJHtsaXN0LnBhdGh9LyR7aXRlbS5pZH1gLFxuICAgIGNzczogc3R5bGVzXG4gIH0sIGl0ZW0ubGFiZWwgfHwgaXRlbS5pZCkpKSwgb3ZlcmZsb3cgPyBgLCBhbmQgJHtvdmVyZmxvd30gbW9yZWAgOiBudWxsKTtcbn07XG5jb25zdCBDYXJkVmFsdWUgPSBfcmVmOCA9PiB7XG4gIGxldCB7XG4gICAgZmllbGQsXG4gICAgaXRlbVxuICB9ID0gX3JlZjg7XG4gIGNvbnN0IGxpc3QgPSBhZG1pblVpX2NvbnRleHRfZGlzdF9rZXlzdG9uZTZDb3JlQWRtaW5VaUNvbnRleHQudXNlTGlzdChmaWVsZC5yZWZMaXN0S2V5KTtcbiAgY29uc3QgZGF0YSA9IGl0ZW1bZmllbGQucGF0aF07XG4gIHJldHVybiBjb3JlLmpzeChmaWVsZHMuRmllbGRDb250YWluZXIsIG51bGwsIGNvcmUuanN4KGZpZWxkcy5GaWVsZExhYmVsLCBudWxsLCBmaWVsZC5sYWJlbCksIChBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXSkuZmlsdGVyKGl0ZW0gPT4gaXRlbSkubWFwKChpdGVtLCBpbmRleCkgPT4gY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIHtcbiAgICBrZXk6IGl0ZW0uaWRcbiAgfSwgISFpbmRleCA/ICcsICcgOiAnJywgY29yZS5qc3goYWRtaW5VaV9yb3V0ZXJfZGlzdF9rZXlzdG9uZTZDb3JlQWRtaW5VaVJvdXRlci5MaW5rLCB7XG4gICAgaHJlZjogYC8ke2xpc3QucGF0aH0vW2lkXWAsXG4gICAgYXM6IGAvJHtsaXN0LnBhdGh9LyR7aXRlbS5pZH1gXG4gIH0sIGl0ZW0ubGFiZWwgfHwgaXRlbS5pZCkpKSk7XG59O1xuY29uc3QgY29udHJvbGxlciA9IGNvbmZpZyA9PiB7XG4gIGNvbnN0IGNhcmRzRGlzcGxheU9wdGlvbnMgPSBjb25maWcuZmllbGRNZXRhLmRpc3BsYXlNb2RlID09PSAnY2FyZHMnID8ge1xuICAgIGNhcmRGaWVsZHM6IGNvbmZpZy5maWVsZE1ldGEuY2FyZEZpZWxkcyxcbiAgICBpbmxpbmVDcmVhdGU6IGNvbmZpZy5maWVsZE1ldGEuaW5saW5lQ3JlYXRlLFxuICAgIGlubGluZUVkaXQ6IGNvbmZpZy5maWVsZE1ldGEuaW5saW5lRWRpdCxcbiAgICBsaW5rVG9JdGVtOiBjb25maWcuZmllbGRNZXRhLmxpbmtUb0l0ZW0sXG4gICAgcmVtb3ZlTW9kZTogY29uZmlnLmZpZWxkTWV0YS5yZW1vdmVNb2RlLFxuICAgIGlubGluZUNvbm5lY3Q6IGNvbmZpZy5maWVsZE1ldGEuaW5saW5lQ29ubmVjdFxuICB9IDogdW5kZWZpbmVkO1xuICByZXR1cm4ge1xuICAgIHJlZkZpZWxkS2V5OiBjb25maWcuZmllbGRNZXRhLnJlZkZpZWxkS2V5LFxuICAgIG1hbnk6IGNvbmZpZy5maWVsZE1ldGEubWFueSxcbiAgICBsaXN0S2V5OiBjb25maWcubGlzdEtleSxcbiAgICBwYXRoOiBjb25maWcucGF0aCxcbiAgICBsYWJlbDogY29uZmlnLmxhYmVsLFxuICAgIGRpc3BsYXk6IGNvbmZpZy5maWVsZE1ldGEuZGlzcGxheU1vZGUgPT09ICdjb3VudCcgPyAnY291bnQnIDogJ2NhcmRzLW9yLXNlbGVjdCcsXG4gICAgcmVmTGlzdEtleTogY29uZmlnLmZpZWxkTWV0YS5yZWZMaXN0S2V5LFxuICAgIGdyYXBocWxTZWxlY3Rpb246IGNvbmZpZy5maWVsZE1ldGEuZGlzcGxheU1vZGUgPT09ICdjb3VudCcgPyBgJHtjb25maWcucGF0aH1Db3VudGAgOiBgJHtjb25maWcucGF0aH0ge1xuICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICBsYWJlbDogJHtjb25maWcuZmllbGRNZXRhLnJlZkxhYmVsRmllbGR9XG4gICAgICAgICAgICB9YCxcbiAgICBoaWRlQ3JlYXRlOiBjb25maWcuZmllbGRNZXRhLmhpZGVDcmVhdGUsXG4gICAgLy8gbm90ZSB3ZSdyZSBub3QgbWFraW5nIHRoZSBzdGF0ZSBraW5kOiAnY291bnQnIHdoZW4gdWkuZGlzcGxheU1vZGUgaXMgc2V0IHRvICdjb3VudCcuXG4gICAgLy8gdGhhdCB1aS5kaXNwbGF5TW9kZTogJ2NvdW50JyBpcyByZWFsbHkganVzdCBhIHdheSB0byBoYXZlIHJlYXNvbmFibGUgcGVyZm9ybWFuY2VcbiAgICAvLyBiZWNhdXNlIG91ciBvdGhlciBVSXMgZG9uJ3QgaGFuZGxlIHJlbGF0aW9uc2hpcHMgd2l0aCBhIGxhcmdlIG51bWJlciBvZiBpdGVtcyB3ZWxsXG4gICAgLy8gYnV0IHRoYXQncyBub3QgYSBwcm9ibGVtIGhlcmUgc2luY2Ugd2UncmUgY3JlYXRpbmcgYSBuZXcgaXRlbSBzbyB3ZSBtaWdodCBhcyB3ZWxsIHRoZW0gYSBiZXR0ZXIgVUlcbiAgICBkZWZhdWx0VmFsdWU6IGNhcmRzRGlzcGxheU9wdGlvbnMgIT09IHVuZGVmaW5lZCA/IHtcbiAgICAgIGtpbmQ6ICdjYXJkcy12aWV3JyxcbiAgICAgIGN1cnJlbnRJZHM6IG5ldyBTZXQoKSxcbiAgICAgIGlkOiBudWxsLFxuICAgICAgaW5pdGlhbElkczogbmV3IFNldCgpLFxuICAgICAgaXRlbUJlaW5nQ3JlYXRlZDogZmFsc2UsXG4gICAgICBpdGVtc0JlaW5nRWRpdGVkOiBuZXcgU2V0KCksXG4gICAgICBkaXNwbGF5T3B0aW9uczogY2FyZHNEaXNwbGF5T3B0aW9uc1xuICAgIH0gOiBjb25maWcuZmllbGRNZXRhLm1hbnkgPyB7XG4gICAgICBpZDogbnVsbCxcbiAgICAgIGtpbmQ6ICdtYW55JyxcbiAgICAgIGluaXRpYWxWYWx1ZTogW10sXG4gICAgICB2YWx1ZTogW11cbiAgICB9IDoge1xuICAgICAgaWQ6IG51bGwsXG4gICAgICBraW5kOiAnb25lJyxcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgaW5pdGlhbFZhbHVlOiBudWxsXG4gICAgfSxcbiAgICBkZXNlcmlhbGl6ZTogZGF0YSA9PiB7XG4gICAgICBpZiAoY29uZmlnLmZpZWxkTWV0YS5kaXNwbGF5TW9kZSA9PT0gJ2NvdW50Jykge1xuICAgICAgICB2YXIgX2RhdGEkO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICAgICAga2luZDogJ2NvdW50JyxcbiAgICAgICAgICBjb3VudDogKF9kYXRhJCA9IGRhdGFbYCR7Y29uZmlnLnBhdGh9Q291bnRgXSkgIT09IG51bGwgJiYgX2RhdGEkICE9PSB2b2lkIDAgPyBfZGF0YSQgOiAwXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChjYXJkc0Rpc3BsYXlPcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgaW5pdGlhbElkcyA9IG5ldyBTZXQoKEFycmF5LmlzQXJyYXkoZGF0YVtjb25maWcucGF0aF0pID8gZGF0YVtjb25maWcucGF0aF0gOiBkYXRhW2NvbmZpZy5wYXRoXSA/IFtkYXRhW2NvbmZpZy5wYXRoXV0gOiBbXSkubWFwKHggPT4geC5pZCkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGtpbmQ6ICdjYXJkcy12aWV3JyxcbiAgICAgICAgICBpZDogZGF0YS5pZCxcbiAgICAgICAgICBpdGVtc0JlaW5nRWRpdGVkOiBuZXcgU2V0KCksXG4gICAgICAgICAgaXRlbUJlaW5nQ3JlYXRlZDogZmFsc2UsXG4gICAgICAgICAgaW5pdGlhbElkcyxcbiAgICAgICAgICBjdXJyZW50SWRzOiBpbml0aWFsSWRzLFxuICAgICAgICAgIGRpc3BsYXlPcHRpb25zOiBjYXJkc0Rpc3BsYXlPcHRpb25zXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChjb25maWcuZmllbGRNZXRhLm1hbnkpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gKGRhdGFbY29uZmlnLnBhdGhdIHx8IFtdKS5tYXAoeCA9PiAoe1xuICAgICAgICAgIGlkOiB4LmlkLFxuICAgICAgICAgIGxhYmVsOiB4LmxhYmVsIHx8IHguaWRcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGtpbmQ6ICdtYW55JyxcbiAgICAgICAgICBpZDogZGF0YS5pZCxcbiAgICAgICAgICBpbml0aWFsVmFsdWU6IHZhbHVlLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGxldCB2YWx1ZSA9IGRhdGFbY29uZmlnLnBhdGhdO1xuXG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgdmFsdWUgPSB7XG4gICAgICAgICAgaWQ6IHZhbHVlLmlkLFxuICAgICAgICAgIGxhYmVsOiB2YWx1ZS5sYWJlbCB8fCB2YWx1ZS5pZFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBraW5kOiAnb25lJyxcbiAgICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBpbml0aWFsVmFsdWU6IHZhbHVlXG4gICAgICB9O1xuICAgIH0sXG4gICAgZmlsdGVyOiB7XG4gICAgICBGaWx0ZXI6IF9yZWY5ID0+IHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICBvbkNoYW5nZSxcbiAgICAgICAgICB2YWx1ZVxuICAgICAgICB9ID0gX3JlZjk7XG4gICAgICAgIGNvbnN0IGZvcmVpZ25MaXN0ID0gYWRtaW5VaV9jb250ZXh0X2Rpc3Rfa2V5c3RvbmU2Q29yZUFkbWluVWlDb250ZXh0LnVzZUxpc3QoY29uZmlnLmZpZWxkTWV0YS5yZWZMaXN0S2V5KTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGZpbHRlclZhbHVlcyxcbiAgICAgICAgICBsb2FkaW5nXG4gICAgICAgIH0gPSB1c2VSZWxhdGlvbnNoaXBGaWx0ZXJWYWx1ZXMoe1xuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIGxpc3Q6IGZvcmVpZ25MaXN0XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgICAgICBraW5kOiAnbWFueScsXG4gICAgICAgICAgdmFsdWU6IGZpbHRlclZhbHVlcyxcblxuICAgICAgICAgIG9uQ2hhbmdlKG5ld0l0ZW1zKSB7XG4gICAgICAgICAgICBvbkNoYW5nZShuZXdJdGVtcy5tYXAoaXRlbSA9PiBpdGVtLmlkKS5qb2luKCcsJykpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gY29yZS5qc3goZmllbGRzX3R5cGVzX3JlbGF0aW9uc2hpcF92aWV3c19SZWxhdGlvbnNoaXBTZWxlY3RfZGlzdF9rZXlzdG9uZTZDb3JlRmllbGRzVHlwZXNSZWxhdGlvbnNoaXBWaWV3c1JlbGF0aW9uc2hpcFNlbGVjdC5SZWxhdGlvbnNoaXBTZWxlY3QsIHtcbiAgICAgICAgICBjb250cm9sU2hvdWxkUmVuZGVyVmFsdWU6IHRydWUsXG4gICAgICAgICAgbGlzdDogZm9yZWlnbkxpc3QsXG4gICAgICAgICAgaXNMb2FkaW5nOiBsb2FkaW5nLFxuICAgICAgICAgIGlzRGlzYWJsZWQ6IG9uQ2hhbmdlID09PSB1bmRlZmluZWQsXG4gICAgICAgICAgc3RhdGU6IHN0YXRlXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGdyYXBocWw6IF9yZWYxMCA9PiB7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgdmFsdWVcbiAgICAgICAgfSA9IF9yZWYxMDtcbiAgICAgICAgY29uc3QgZm9yZWlnbklkcyA9IGdldEZvcmVpZ25JZHModmFsdWUpO1xuXG4gICAgICAgIGlmIChjb25maWcuZmllbGRNZXRhLm1hbnkpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgW2NvbmZpZy5wYXRoXToge1xuICAgICAgICAgICAgICBzb21lOiB7XG4gICAgICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgICAgIGluOiBmb3JlaWduSWRzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgW2NvbmZpZy5wYXRoXToge1xuICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgaW46IGZvcmVpZ25JZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9LFxuXG4gICAgICBMYWJlbChfcmVmMTEpIHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICB2YWx1ZVxuICAgICAgICB9ID0gX3JlZjExO1xuICAgICAgICBjb25zdCBmb3JlaWduTGlzdCA9IGFkbWluVWlfY29udGV4dF9kaXN0X2tleXN0b25lNkNvcmVBZG1pblVpQ29udGV4dC51c2VMaXN0KGNvbmZpZy5maWVsZE1ldGEucmVmTGlzdEtleSk7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBmaWx0ZXJWYWx1ZXNcbiAgICAgICAgfSA9IHVzZVJlbGF0aW9uc2hpcEZpbHRlclZhbHVlcyh7XG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgbGlzdDogZm9yZWlnbkxpc3RcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFmaWx0ZXJWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIGBoYXMgbm8gdmFsdWVgO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbHRlclZhbHVlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgY29uc3QgdmFsdWVzID0gZmlsdGVyVmFsdWVzLm1hcChpID0+IGkubGFiZWwpLmpvaW4oJywgJyk7XG4gICAgICAgICAgcmV0dXJuIGBpcyBpbiBbJHt2YWx1ZXN9XWA7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvcHRpb25MYWJlbCA9IGZpbHRlclZhbHVlc1swXS5sYWJlbDtcbiAgICAgICAgcmV0dXJuIGBpcyAke29wdGlvbkxhYmVsfWA7XG4gICAgICB9LFxuXG4gICAgICB0eXBlczoge1xuICAgICAgICBtYXRjaGVzOiB7XG4gICAgICAgICAgbGFiZWw6ICdNYXRjaGVzJyxcbiAgICAgICAgICBpbml0aWFsVmFsdWU6ICcnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZS5raW5kICE9PSAnY2FyZHMtdmlldycgfHwgdmFsdWUuaXRlbXNCZWluZ0VkaXRlZC5zaXplID09PSAwICYmICF2YWx1ZS5pdGVtQmVpbmdDcmVhdGVkO1xuICAgIH0sXG5cbiAgICBzZXJpYWxpemU6IHN0YXRlID0+IHtcbiAgICAgIGlmIChzdGF0ZS5raW5kID09PSAnbWFueScpIHtcbiAgICAgICAgY29uc3QgbmV3QWxsSWRzID0gbmV3IFNldChzdGF0ZS52YWx1ZS5tYXAoeCA9PiB4LmlkKSk7XG4gICAgICAgIGNvbnN0IGluaXRpYWxJZHMgPSBuZXcgU2V0KHN0YXRlLmluaXRpYWxWYWx1ZS5tYXAoeCA9PiB4LmlkKSk7XG4gICAgICAgIGxldCBkaXNjb25uZWN0ID0gc3RhdGUuaW5pdGlhbFZhbHVlLmZpbHRlcih4ID0+ICFuZXdBbGxJZHMuaGFzKHguaWQpKS5tYXAoeCA9PiAoe1xuICAgICAgICAgIGlkOiB4LmlkXG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IGNvbm5lY3QgPSBzdGF0ZS52YWx1ZS5maWx0ZXIoeCA9PiAhaW5pdGlhbElkcy5oYXMoeC5pZCkpLm1hcCh4ID0+ICh7XG4gICAgICAgICAgaWQ6IHguaWRcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGlmIChkaXNjb25uZWN0Lmxlbmd0aCB8fCBjb25uZWN0Lmxlbmd0aCkge1xuICAgICAgICAgIGxldCBvdXRwdXQgPSB7fTtcblxuICAgICAgICAgIGlmIChkaXNjb25uZWN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgb3V0cHV0LmRpc2Nvbm5lY3QgPSBkaXNjb25uZWN0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChjb25uZWN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgb3V0cHV0LmNvbm5lY3QgPSBjb25uZWN0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBbY29uZmlnLnBhdGhdOiBvdXRwdXRcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmtpbmQgPT09ICdvbmUnKSB7XG4gICAgICAgIHZhciBfc3RhdGUkaW5pdGlhbFZhbHVlO1xuXG4gICAgICAgIGlmIChzdGF0ZS5pbml0aWFsVmFsdWUgJiYgIXN0YXRlLnZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFtjb25maWcucGF0aF06IHtcbiAgICAgICAgICAgICAgZGlzY29ubmVjdDogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGUudmFsdWUgJiYgc3RhdGUudmFsdWUuaWQgIT09ICgoX3N0YXRlJGluaXRpYWxWYWx1ZSA9IHN0YXRlLmluaXRpYWxWYWx1ZSkgPT09IG51bGwgfHwgX3N0YXRlJGluaXRpYWxWYWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N0YXRlJGluaXRpYWxWYWx1ZS5pZCkpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgW2NvbmZpZy5wYXRoXToge1xuICAgICAgICAgICAgICBjb25uZWN0OiB7XG4gICAgICAgICAgICAgICAgaWQ6IHN0YXRlLnZhbHVlLmlkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmtpbmQgPT09ICdjYXJkcy12aWV3Jykge1xuICAgICAgICBsZXQgZGlzY29ubmVjdCA9IFsuLi5zdGF0ZS5pbml0aWFsSWRzXS5maWx0ZXIoaWQgPT4gIXN0YXRlLmN1cnJlbnRJZHMuaGFzKGlkKSkubWFwKGlkID0+ICh7XG4gICAgICAgICAgaWRcbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgY29ubmVjdCA9IFsuLi5zdGF0ZS5jdXJyZW50SWRzXS5maWx0ZXIoaWQgPT4gIXN0YXRlLmluaXRpYWxJZHMuaGFzKGlkKSkubWFwKGlkID0+ICh7XG4gICAgICAgICAgaWRcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGlmIChjb25maWcuZmllbGRNZXRhLm1hbnkpIHtcbiAgICAgICAgICBpZiAoZGlzY29ubmVjdC5sZW5ndGggfHwgY29ubmVjdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIFtjb25maWcucGF0aF06IHtcbiAgICAgICAgICAgICAgICBjb25uZWN0OiBjb25uZWN0Lmxlbmd0aCA/IGNvbm5lY3QgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgZGlzY29ubmVjdDogZGlzY29ubmVjdC5sZW5ndGggPyBkaXNjb25uZWN0IDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGNvbm5lY3QubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFtjb25maWcucGF0aF06IHtcbiAgICAgICAgICAgICAgY29ubmVjdDogY29ubmVjdFswXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAoZGlzY29ubmVjdC5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgW2NvbmZpZy5wYXRoXToge1xuICAgICAgICAgICAgICBkaXNjb25uZWN0OiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICB9O1xufTtcblxuZnVuY3Rpb24gdXNlUmVsYXRpb25zaGlwRmlsdGVyVmFsdWVzKF9yZWYxMikge1xuICB2YXIgX2RhdGEkaXRlbXM7XG5cbiAgbGV0IHtcbiAgICB2YWx1ZSxcbiAgICBsaXN0XG4gIH0gPSBfcmVmMTI7XG4gIGNvbnN0IGZvcmVpZ25JZHMgPSBnZXRGb3JlaWduSWRzKHZhbHVlKTtcbiAgY29uc3Qgd2hlcmUgPSB7XG4gICAgaWQ6IHtcbiAgICAgIGluOiBmb3JlaWduSWRzXG4gICAgfVxuICB9O1xuICBjb25zdCBxdWVyeSA9IGNsaWVudC5ncWxgXG4gICAgcXVlcnkgRk9SRUlHTkxJU1RfUVVFUlkoJHdoZXJlOiAke2xpc3QuZ3FsTmFtZXMud2hlcmVJbnB1dE5hbWV9ISkge1xuICAgICAgaXRlbXM6ICR7bGlzdC5ncWxOYW1lcy5saXN0UXVlcnlOYW1lfSh3aGVyZTogJHdoZXJlKSB7XG4gICAgICAgIGlkIFxuICAgICAgICAke2xpc3QubGFiZWxGaWVsZH1cbiAgICAgIH1cbiAgICB9XG4gIGA7XG4gIGNvbnN0IHtcbiAgICBkYXRhLFxuICAgIGxvYWRpbmdcbiAgfSA9IGNsaWVudC51c2VRdWVyeShxdWVyeSwge1xuICAgIHZhcmlhYmxlczoge1xuICAgICAgd2hlcmVcbiAgICB9XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIGZpbHRlclZhbHVlczogKGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXRhJGl0ZW1zID0gZGF0YS5pdGVtcykgPT09IG51bGwgfHwgX2RhdGEkaXRlbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXRhJGl0ZW1zLm1hcChpdGVtID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICBsYWJlbDogaXRlbVtsaXN0LmxhYmVsRmllbGRdIHx8IGl0ZW0uaWRcbiAgICAgIH07XG4gICAgfSkpIHx8IGZvcmVpZ25JZHMubWFwKGYgPT4gKHtcbiAgICAgIGxhYmVsOiBmLFxuICAgICAgaWQ6IGZcbiAgICB9KSksXG4gICAgbG9hZGluZzogbG9hZGluZ1xuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRGb3JlaWduSWRzKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gdmFsdWUuc3BsaXQoJywnKTtcbiAgfVxuXG4gIHJldHVybiBbXTtcbn1cblxuZXhwb3J0cy5DYXJkVmFsdWUgPSBDYXJkVmFsdWU7XG5leHBvcnRzLkNlbGwgPSBDZWxsO1xuZXhwb3J0cy5GaWVsZCA9IEZpZWxkO1xuZXhwb3J0cy5jb250cm9sbGVyID0gY29udHJvbGxlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/fields/types/relationship/views/dist/keystone-6-core-fields-types-relationship-views.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/fields/types/relationship/views/dist/keystone-6-core-fields-types-relationship-views.cjs.js":
/*!***************************************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/fields/types/relationship/views/dist/keystone-6-core-fields-types-relationship-views.cjs.js ***!
  \***************************************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./keystone-6-core-fields-types-relationship-views.cjs.dev.js */ \"../../node_modules/@keystone-6/core/fields/types/relationship/views/dist/keystone-6-core-fields-types-relationship-views.cjs.dev.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3JlbGF0aW9uc2hpcC92aWV3cy9kaXN0L2tleXN0b25lLTYtY29yZS1maWVsZHMtdHlwZXMtcmVsYXRpb25zaGlwLXZpZXdzLmNqcy5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixJQUFJLEtBQXFDLEVBQUUsRUFFMUMsQ0FBQztBQUNGLEVBQUUsK09BQXdGO0FBQzFGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2ZpZWxkcy90eXBlcy9yZWxhdGlvbnNoaXAvdmlld3MvZGlzdC9rZXlzdG9uZS02LWNvcmUtZmllbGRzLXR5cGVzLXJlbGF0aW9uc2hpcC12aWV3cy5janMuanM/NjM3NiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9rZXlzdG9uZS02LWNvcmUtZmllbGRzLXR5cGVzLXJlbGF0aW9uc2hpcC12aWV3cy5janMucHJvZC5qc1wiKTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4va2V5c3RvbmUtNi1jb3JlLWZpZWxkcy10eXBlcy1yZWxhdGlvbnNoaXAtdmlld3MuY2pzLmRldi5qc1wiKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/fields/types/relationship/views/dist/keystone-6-core-fields-types-relationship-views.cjs.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/fields/types/select/views/dist/keystone-6-core-fields-types-select-views.cjs.dev.js":
/*!*******************************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/fields/types/select/views/dist/keystone-6-core-fields-types-select-views.cjs.dev.js ***!
  \*******************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar _objectSpread = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"../../node_modules/@babel/runtime/helpers/objectSpread2.js\");\nvar React = __webpack_require__(/*! react */ \"react\");\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar fields = __webpack_require__(/*! @keystone-ui/fields */ \"@keystone-ui/fields\");\nvar segmentedControl = __webpack_require__(/*! @keystone-ui/segmented-control */ \"@keystone-ui/segmented-control\");\nvar button = __webpack_require__(/*! @keystone-ui/button */ \"@keystone-ui/button\");\nvar CellContainer = __webpack_require__(/*! ../../../../../dist/CellContainer-453254b5.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/CellContainer-453254b5.cjs.dev.js\");\nvar CellLink = __webpack_require__(/*! ../../../../../dist/CellLink-5308c32b.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/CellLink-5308c32b.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"../../node_modules/@babel/runtime/helpers/defineProperty.js\");\n__webpack_require__(/*! @keystone-ui/icons/icons/AlertTriangleIcon */ \"@keystone-ui/icons/icons/AlertTriangleIcon\");\n__webpack_require__(/*! next/link */ \"../../node_modules/next/link.js\");\n__webpack_require__(/*! @keystone-ui/toast */ \"@keystone-ui/toast\");\n__webpack_require__(/*! @keystone-ui/loading */ \"@keystone-ui/loading\");\n__webpack_require__(/*! @keystone-ui/modals */ \"@keystone-ui/modals\");\n__webpack_require__(/*! apollo-upload-client */ \"apollo-upload-client\");\n__webpack_require__(/*! @emotion/hash */ \"@emotion/hash\");\n__webpack_require__(/*! ../../../../../dist/sqlite-a2385a81.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/sqlite-a2385a81.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\n__webpack_require__(/*! ../../../../../dist/graphql-ts-schema-2a220120.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/graphql-ts-schema-2a220120.cjs.dev.js\");\n__webpack_require__(/*! @apollo/client */ \"@apollo/client\");\n__webpack_require__(/*! ../../../../../dist/admin-meta-graphql-9f9a9c11.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/admin-meta-graphql-9f9a9c11.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/extends */ \"../../node_modules/@babel/runtime/helpers/extends.js\");\n__webpack_require__(/*! next/router */ \"next/router\");\n__webpack_require__(/*! @keystone-ui/popover */ \"@keystone-ui/popover\");\n__webpack_require__(/*! @keystone-ui/icons/icons/MoreHorizontalIcon */ \"@keystone-ui/icons/icons/MoreHorizontalIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/ChevronRightIcon */ \"@keystone-ui/icons/icons/ChevronRightIcon\");\n__webpack_require__(/*! ../../../../../dist/SignoutButton-081410d6.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/SignoutButton-081410d6.cjs.dev.js\");\n__webpack_require__(/*! fast-deep-equal */ \"fast-deep-equal\");\n__webpack_require__(/*! @keystone-ui/notice */ \"@keystone-ui/notice\");\n__webpack_require__(/*! ../../../../../admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js */ \"../../node_modules/@keystone-6/core/admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js\");\n__webpack_require__(/*! decimal.js */ \"decimal.js\");\n__webpack_require__(/*! @graphql-tools/schema */ \"@graphql-tools/schema\");\n__webpack_require__(/*! @graphql-ts/schema/api-without-context */ \"@graphql-ts/schema/api-without-context\");\n__webpack_require__(/*! @graphql-ts/schema */ \"@graphql-ts/schema\");\n__webpack_require__(/*! graphql-type-json */ \"graphql-type-json\");\n__webpack_require__(/*! graphql-upload/public/GraphQLUpload.js */ \"graphql-upload/public/GraphQLUpload.js\");\n__webpack_require__(/*! graphql */ \"graphql\");\n__webpack_require__(/*! @graphql-ts/extend */ \"@graphql-ts/extend\");\n__webpack_require__(/*! @graphql-ts/schema/api-with-context */ \"@graphql-ts/schema/api-with-context\");\n\nconst Field = _ref => {\n  let {\n    field,\n    value,\n    onChange,\n    autoFocus,\n    forceValidation\n  } = _ref;\n  const [hasChanged, setHasChanged] = React.useState(false);\n  const validationMessage = (hasChanged || forceValidation) && !validate(value, field.isRequired) ? core.jsx(core.Text, {\n    color: \"red600\",\n    size: \"small\"\n  }, field.label, \" is required\") : null;\n  return core.jsx(fields.FieldContainer, {\n    as: field.displayMode === 'select' ? 'div' : 'fieldset'\n  }, field.displayMode === 'select' ? core.jsx(React.Fragment, null, core.jsx(fields.FieldLabel, {\n    htmlFor: field.path\n  }, field.label), core.jsx(fields.Select, {\n    id: field.path,\n    isClearable: true,\n    autoFocus: autoFocus,\n    options: field.options,\n    isDisabled: onChange === undefined,\n    onChange: newVal => {\n      onChange === null || onChange === void 0 ? void 0 : onChange(_objectSpread(_objectSpread({}, value), {}, {\n        value: newVal\n      }));\n      setHasChanged(true);\n    },\n    value: value.value,\n    portalMenu: true\n  }), validationMessage) : core.jsx(React.Fragment, null, core.jsx(fields.FieldLabel, {\n    as: \"legend\"\n  }, field.label), core.jsx(core.Stack, {\n    across: true,\n    gap: \"small\",\n    align: \"center\"\n  }, core.jsx(segmentedControl.SegmentedControl, {\n    segments: field.options.map(x => x.label),\n    selectedIndex: value.value ? field.options.findIndex(x => x.value === value.value.value) : undefined,\n    onChange: index => {\n      onChange === null || onChange === void 0 ? void 0 : onChange(_objectSpread(_objectSpread({}, value), {}, {\n        value: field.options[index]\n      }));\n      setHasChanged(true);\n    }\n  }), value.value !== null && onChange !== undefined && core.jsx(button.Button, {\n    onClick: () => {\n      onChange(_objectSpread(_objectSpread({}, value), {}, {\n        value: null\n      }));\n      setHasChanged(true);\n    }\n  }, \"Clear\")), validationMessage));\n};\nconst Cell = _ref2 => {\n  var _field$options$find;\n\n  let {\n    item,\n    field,\n    linkTo\n  } = _ref2;\n  let value = item[field.path] + '';\n  const label = (_field$options$find = field.options.find(x => x.value === value)) === null || _field$options$find === void 0 ? void 0 : _field$options$find.label;\n  return linkTo ? core.jsx(CellLink.CellLink, linkTo, label) : core.jsx(CellContainer.CellContainer, null, label);\n};\nCell.supportsLinkTo = true;\nconst CardValue = _ref3 => {\n  var _field$options$find2;\n\n  let {\n    item,\n    field\n  } = _ref3;\n  let value = item[field.path] + '';\n  const label = (_field$options$find2 = field.options.find(x => x.value === value)) === null || _field$options$find2 === void 0 ? void 0 : _field$options$find2.label;\n  return core.jsx(fields.FieldContainer, null, core.jsx(fields.FieldLabel, null, field.label), label);\n};\n\nfunction validate(value, isRequired) {\n  if (isRequired) {\n    // if you got null initially on the update screen, we want to allow saving\n    // since the user probably doesn't have read access control\n    if (value.kind === 'update' && value.initial === null) {\n      return true;\n    }\n\n    return value.value !== null;\n  }\n\n  return true;\n}\n\nconst controller = config => {\n  var _config$fieldMeta$def, _optionsWithStringVal;\n\n  const optionsWithStringValues = config.fieldMeta.options.map(x => ({\n    label: x.label,\n    value: x.value.toString()\n  })); // Transform from string value to type appropriate value\n\n  const t = v => v === null ? null : config.fieldMeta.type === 'integer' ? parseInt(v) : v;\n\n  const stringifiedDefault = (_config$fieldMeta$def = config.fieldMeta.defaultValue) === null || _config$fieldMeta$def === void 0 ? void 0 : _config$fieldMeta$def.toString();\n  return {\n    path: config.path,\n    label: config.label,\n    graphqlSelection: config.path,\n    defaultValue: {\n      kind: 'create',\n      value: (_optionsWithStringVal = optionsWithStringValues.find(x => x.value === stringifiedDefault)) !== null && _optionsWithStringVal !== void 0 ? _optionsWithStringVal : null\n    },\n    type: config.fieldMeta.type,\n    displayMode: config.fieldMeta.displayMode,\n    isRequired: config.fieldMeta.isRequired,\n    options: optionsWithStringValues,\n    deserialize: data => {\n      for (const option of config.fieldMeta.options) {\n        if (option.value === data[config.path]) {\n          const stringifiedOption = {\n            label: option.label,\n            value: option.value.toString()\n          };\n          return {\n            kind: 'update',\n            initial: stringifiedOption,\n            value: stringifiedOption\n          };\n        }\n      }\n\n      return {\n        kind: 'update',\n        initial: null,\n        value: null\n      };\n    },\n    serialize: value => {\n      var _value$value$value, _value$value;\n\n      return {\n        [config.path]: t((_value$value$value = (_value$value = value.value) === null || _value$value === void 0 ? void 0 : _value$value.value) !== null && _value$value$value !== void 0 ? _value$value$value : null)\n      };\n    },\n    validate: value => validate(value, config.fieldMeta.isRequired),\n    filter: {\n      Filter(props) {\n        return core.jsx(fields.MultiSelect, {\n          onChange: props.onChange,\n          options: optionsWithStringValues,\n          value: props.value,\n          autoFocus: true\n        });\n      },\n\n      graphql: _ref4 => {\n        let {\n          type,\n          value: options\n        } = _ref4;\n        return {\n          [config.path]: {\n            [type === 'not_matches' ? 'notIn' : 'in']: options.map(x => t(x.value))\n          }\n        };\n      },\n\n      Label(_ref5) {\n        let {\n          type,\n          value\n        } = _ref5;\n\n        if (!value.length) {\n          return type === 'not_matches' ? `is set` : `has no value`;\n        }\n\n        if (value.length > 1) {\n          const values = value.map(i => i.label).join(', ');\n          return type === 'not_matches' ? `is not in [${values}]` : `is in [${values}]`;\n        }\n\n        const optionLabel = value[0].label;\n        return type === 'not_matches' ? `is not ${optionLabel}` : `is ${optionLabel}`;\n      },\n\n      types: {\n        matches: {\n          label: 'Matches',\n          initialValue: []\n        },\n        not_matches: {\n          label: 'Does not match',\n          initialValue: []\n        }\n      }\n    }\n  };\n};\n\nexports.CardValue = CardValue;\nexports.Cell = Cell;\nexports.Field = Field;\nexports.controller = controller;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3NlbGVjdC92aWV3cy9kaXN0L2tleXN0b25lLTYtY29yZS1maWVsZHMtdHlwZXMtc2VsZWN0LXZpZXdzLmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDLEVBQUUsYUFBYSxFQUFDOztBQUU3RCxvQkFBb0IsbUJBQU8sQ0FBQyx3R0FBc0M7QUFDbEUsWUFBWSxtQkFBTyxDQUFDLG9CQUFPO0FBQzNCLFdBQVcsbUJBQU8sQ0FBQyw0Q0FBbUI7QUFDdEMsYUFBYSxtQkFBTyxDQUFDLGdEQUFxQjtBQUMxQyx1QkFBdUIsbUJBQU8sQ0FBQyxzRUFBZ0M7QUFDL0QsYUFBYSxtQkFBTyxDQUFDLGdEQUFxQjtBQUMxQyxvQkFBb0IsbUJBQU8sQ0FBQyx5SUFBdUQ7QUFDbkYsZUFBZSxtQkFBTyxDQUFDLCtIQUFrRDtBQUN6RSxtQkFBTyxDQUFDLDBHQUF1QztBQUMvQyxtQkFBTyxDQUFDLDhGQUE0QztBQUNwRCxtQkFBTyxDQUFDLGtEQUFXO0FBQ25CLG1CQUFPLENBQUMsOENBQW9CO0FBQzVCLG1CQUFPLENBQUMsa0RBQXNCO0FBQzlCLG1CQUFPLENBQUMsZ0RBQXFCO0FBQzdCLG1CQUFPLENBQUMsa0RBQXNCO0FBQzlCLG1CQUFPLENBQUMsb0NBQWU7QUFDdkIsbUJBQU8sQ0FBQywySEFBZ0Q7QUFDeEQsbUJBQU8sQ0FBQyw0SEFBZ0Q7QUFDeEQsbUJBQU8sQ0FBQyxpSkFBMkQ7QUFDbkUsbUJBQU8sQ0FBQyxzQ0FBZ0I7QUFDeEIsbUJBQU8sQ0FBQyxtSkFBNEQ7QUFDcEUsbUJBQU8sQ0FBQyw0RkFBZ0M7QUFDeEMsbUJBQU8sQ0FBQyxnQ0FBYTtBQUNyQixtQkFBTyxDQUFDLGtEQUFzQjtBQUM5QixtQkFBTyxDQUFDLGdHQUE2QztBQUNyRCxtQkFBTyxDQUFDLDRGQUEyQztBQUNuRCxtQkFBTyxDQUFDLHlJQUF1RDtBQUMvRCxtQkFBTyxDQUFDLHdDQUFpQjtBQUN6QixtQkFBTyxDQUFDLGdEQUFxQjtBQUM3QixtQkFBTyxDQUFDLDJMQUFnRjtBQUN4RixtQkFBTyxDQUFDLDhCQUFZO0FBQ3BCLG1CQUFPLENBQUMsb0RBQXVCO0FBQy9CLG1CQUFPLENBQUMsc0ZBQXdDO0FBQ2hELG1CQUFPLENBQUMsOENBQW9CO0FBQzVCLG1CQUFPLENBQUMsNENBQW1CO0FBQzNCLG1CQUFPLENBQUMsc0ZBQXdDO0FBQ2hELG1CQUFPLENBQUMsd0JBQVM7QUFDakIsbUJBQU8sQ0FBQyw4Q0FBb0I7QUFDNUIsbUJBQU8sQ0FBQyxnRkFBcUM7O0FBRTdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUdBQWlHLFlBQVk7QUFDN0c7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaUdBQWlHLFlBQVk7QUFDN0c7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDZDQUE2QyxZQUFZO0FBQ3pEO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLElBQUk7O0FBRVA7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVOztBQUVWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0RBQXdELE9BQU8sZUFBZSxPQUFPO0FBQ3JGOztBQUVBO0FBQ0Esa0RBQWtELFlBQVksVUFBVSxZQUFZO0FBQ3BGLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUI7QUFDakIsWUFBWTtBQUNaLGFBQWE7QUFDYixrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3NlbGVjdC92aWV3cy9kaXN0L2tleXN0b25lLTYtY29yZS1maWVsZHMtdHlwZXMtc2VsZWN0LXZpZXdzLmNqcy5kZXYuanM/OWJjYiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciBfb2JqZWN0U3ByZWFkID0gcmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWQyJyk7XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGNvcmUgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvY29yZScpO1xudmFyIGZpZWxkcyA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9maWVsZHMnKTtcbnZhciBzZWdtZW50ZWRDb250cm9sID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL3NlZ21lbnRlZC1jb250cm9sJyk7XG52YXIgYnV0dG9uID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2J1dHRvbicpO1xudmFyIENlbGxDb250YWluZXIgPSByZXF1aXJlKCcuLi8uLi8uLi8uLi8uLi9kaXN0L0NlbGxDb250YWluZXItNDUzMjU0YjUuY2pzLmRldi5qcycpO1xudmFyIENlbGxMaW5rID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9DZWxsTGluay01MzA4YzMyYi5janMuZGV2LmpzJyk7XG5yZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5Jyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvQWxlcnRUcmlhbmdsZUljb24nKTtcbnJlcXVpcmUoJ25leHQvbGluaycpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL3RvYXN0Jyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvbG9hZGluZycpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL21vZGFscycpO1xucmVxdWlyZSgnYXBvbGxvLXVwbG9hZC1jbGllbnQnKTtcbnJlcXVpcmUoJ0BlbW90aW9uL2hhc2gnKTtcbnJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2Rpc3Qvc3FsaXRlLWEyMzg1YTgxLmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXMnKTtcbnJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2Rpc3QvZ3JhcGhxbC10cy1zY2hlbWEtMmEyMjAxMjAuY2pzLmRldi5qcycpO1xucmVxdWlyZSgnQGFwb2xsby9jbGllbnQnKTtcbnJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2Rpc3QvYWRtaW4tbWV0YS1ncmFwaHFsLTlmOWE5YzExLmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xucmVxdWlyZSgnbmV4dC9yb3V0ZXInKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9wb3BvdmVyJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvTW9yZUhvcml6b250YWxJY29uJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvQ2hldnJvblJpZ2h0SWNvbicpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9TaWdub3V0QnV0dG9uLTA4MTQxMGQ2LmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ2Zhc3QtZGVlcC1lcXVhbCcpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL25vdGljZScpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vYWRtaW4tdWkvcm91dGVyL2Rpc3Qva2V5c3RvbmUtNi1jb3JlLWFkbWluLXVpLXJvdXRlci5janMuZGV2LmpzJyk7XG5yZXF1aXJlKCdkZWNpbWFsLmpzJyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10b29scy9zY2hlbWEnKTtcbnJlcXVpcmUoJ0BncmFwaHFsLXRzL3NjaGVtYS9hcGktd2l0aG91dC1jb250ZXh0Jyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10cy9zY2hlbWEnKTtcbnJlcXVpcmUoJ2dyYXBocWwtdHlwZS1qc29uJyk7XG5yZXF1aXJlKCdncmFwaHFsLXVwbG9hZC9wdWJsaWMvR3JhcGhRTFVwbG9hZC5qcycpO1xucmVxdWlyZSgnZ3JhcGhxbCcpO1xucmVxdWlyZSgnQGdyYXBocWwtdHMvZXh0ZW5kJyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10cy9zY2hlbWEvYXBpLXdpdGgtY29udGV4dCcpO1xuXG5jb25zdCBGaWVsZCA9IF9yZWYgPT4ge1xuICBsZXQge1xuICAgIGZpZWxkLFxuICAgIHZhbHVlLFxuICAgIG9uQ2hhbmdlLFxuICAgIGF1dG9Gb2N1cyxcbiAgICBmb3JjZVZhbGlkYXRpb25cbiAgfSA9IF9yZWY7XG4gIGNvbnN0IFtoYXNDaGFuZ2VkLCBzZXRIYXNDaGFuZ2VkXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgdmFsaWRhdGlvbk1lc3NhZ2UgPSAoaGFzQ2hhbmdlZCB8fCBmb3JjZVZhbGlkYXRpb24pICYmICF2YWxpZGF0ZSh2YWx1ZSwgZmllbGQuaXNSZXF1aXJlZCkgPyBjb3JlLmpzeChjb3JlLlRleHQsIHtcbiAgICBjb2xvcjogXCJyZWQ2MDBcIixcbiAgICBzaXplOiBcInNtYWxsXCJcbiAgfSwgZmllbGQubGFiZWwsIFwiIGlzIHJlcXVpcmVkXCIpIDogbnVsbDtcbiAgcmV0dXJuIGNvcmUuanN4KGZpZWxkcy5GaWVsZENvbnRhaW5lciwge1xuICAgIGFzOiBmaWVsZC5kaXNwbGF5TW9kZSA9PT0gJ3NlbGVjdCcgPyAnZGl2JyA6ICdmaWVsZHNldCdcbiAgfSwgZmllbGQuZGlzcGxheU1vZGUgPT09ICdzZWxlY3QnID8gY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIG51bGwsIGNvcmUuanN4KGZpZWxkcy5GaWVsZExhYmVsLCB7XG4gICAgaHRtbEZvcjogZmllbGQucGF0aFxuICB9LCBmaWVsZC5sYWJlbCksIGNvcmUuanN4KGZpZWxkcy5TZWxlY3QsIHtcbiAgICBpZDogZmllbGQucGF0aCxcbiAgICBpc0NsZWFyYWJsZTogdHJ1ZSxcbiAgICBhdXRvRm9jdXM6IGF1dG9Gb2N1cyxcbiAgICBvcHRpb25zOiBmaWVsZC5vcHRpb25zLFxuICAgIGlzRGlzYWJsZWQ6IG9uQ2hhbmdlID09PSB1bmRlZmluZWQsXG4gICAgb25DaGFuZ2U6IG5ld1ZhbCA9PiB7XG4gICAgICBvbkNoYW5nZSA9PT0gbnVsbCB8fCBvbkNoYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25DaGFuZ2UoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZSksIHt9LCB7XG4gICAgICAgIHZhbHVlOiBuZXdWYWxcbiAgICAgIH0pKTtcbiAgICAgIHNldEhhc0NoYW5nZWQodHJ1ZSk7XG4gICAgfSxcbiAgICB2YWx1ZTogdmFsdWUudmFsdWUsXG4gICAgcG9ydGFsTWVudTogdHJ1ZVxuICB9KSwgdmFsaWRhdGlvbk1lc3NhZ2UpIDogY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIG51bGwsIGNvcmUuanN4KGZpZWxkcy5GaWVsZExhYmVsLCB7XG4gICAgYXM6IFwibGVnZW5kXCJcbiAgfSwgZmllbGQubGFiZWwpLCBjb3JlLmpzeChjb3JlLlN0YWNrLCB7XG4gICAgYWNyb3NzOiB0cnVlLFxuICAgIGdhcDogXCJzbWFsbFwiLFxuICAgIGFsaWduOiBcImNlbnRlclwiXG4gIH0sIGNvcmUuanN4KHNlZ21lbnRlZENvbnRyb2wuU2VnbWVudGVkQ29udHJvbCwge1xuICAgIHNlZ21lbnRzOiBmaWVsZC5vcHRpb25zLm1hcCh4ID0+IHgubGFiZWwpLFxuICAgIHNlbGVjdGVkSW5kZXg6IHZhbHVlLnZhbHVlID8gZmllbGQub3B0aW9ucy5maW5kSW5kZXgoeCA9PiB4LnZhbHVlID09PSB2YWx1ZS52YWx1ZS52YWx1ZSkgOiB1bmRlZmluZWQsXG4gICAgb25DaGFuZ2U6IGluZGV4ID0+IHtcbiAgICAgIG9uQ2hhbmdlID09PSBudWxsIHx8IG9uQ2hhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkNoYW5nZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlKSwge30sIHtcbiAgICAgICAgdmFsdWU6IGZpZWxkLm9wdGlvbnNbaW5kZXhdXG4gICAgICB9KSk7XG4gICAgICBzZXRIYXNDaGFuZ2VkKHRydWUpO1xuICAgIH1cbiAgfSksIHZhbHVlLnZhbHVlICE9PSBudWxsICYmIG9uQ2hhbmdlICE9PSB1bmRlZmluZWQgJiYgY29yZS5qc3goYnV0dG9uLkJ1dHRvbiwge1xuICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgIG9uQ2hhbmdlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFsdWUpLCB7fSwge1xuICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgfSkpO1xuICAgICAgc2V0SGFzQ2hhbmdlZCh0cnVlKTtcbiAgICB9XG4gIH0sIFwiQ2xlYXJcIikpLCB2YWxpZGF0aW9uTWVzc2FnZSkpO1xufTtcbmNvbnN0IENlbGwgPSBfcmVmMiA9PiB7XG4gIHZhciBfZmllbGQkb3B0aW9ucyRmaW5kO1xuXG4gIGxldCB7XG4gICAgaXRlbSxcbiAgICBmaWVsZCxcbiAgICBsaW5rVG9cbiAgfSA9IF9yZWYyO1xuICBsZXQgdmFsdWUgPSBpdGVtW2ZpZWxkLnBhdGhdICsgJyc7XG4gIGNvbnN0IGxhYmVsID0gKF9maWVsZCRvcHRpb25zJGZpbmQgPSBmaWVsZC5vcHRpb25zLmZpbmQoeCA9PiB4LnZhbHVlID09PSB2YWx1ZSkpID09PSBudWxsIHx8IF9maWVsZCRvcHRpb25zJGZpbmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9maWVsZCRvcHRpb25zJGZpbmQubGFiZWw7XG4gIHJldHVybiBsaW5rVG8gPyBjb3JlLmpzeChDZWxsTGluay5DZWxsTGluaywgbGlua1RvLCBsYWJlbCkgOiBjb3JlLmpzeChDZWxsQ29udGFpbmVyLkNlbGxDb250YWluZXIsIG51bGwsIGxhYmVsKTtcbn07XG5DZWxsLnN1cHBvcnRzTGlua1RvID0gdHJ1ZTtcbmNvbnN0IENhcmRWYWx1ZSA9IF9yZWYzID0+IHtcbiAgdmFyIF9maWVsZCRvcHRpb25zJGZpbmQyO1xuXG4gIGxldCB7XG4gICAgaXRlbSxcbiAgICBmaWVsZFxuICB9ID0gX3JlZjM7XG4gIGxldCB2YWx1ZSA9IGl0ZW1bZmllbGQucGF0aF0gKyAnJztcbiAgY29uc3QgbGFiZWwgPSAoX2ZpZWxkJG9wdGlvbnMkZmluZDIgPSBmaWVsZC5vcHRpb25zLmZpbmQoeCA9PiB4LnZhbHVlID09PSB2YWx1ZSkpID09PSBudWxsIHx8IF9maWVsZCRvcHRpb25zJGZpbmQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZmllbGQkb3B0aW9ucyRmaW5kMi5sYWJlbDtcbiAgcmV0dXJuIGNvcmUuanN4KGZpZWxkcy5GaWVsZENvbnRhaW5lciwgbnVsbCwgY29yZS5qc3goZmllbGRzLkZpZWxkTGFiZWwsIG51bGwsIGZpZWxkLmxhYmVsKSwgbGFiZWwpO1xufTtcblxuZnVuY3Rpb24gdmFsaWRhdGUodmFsdWUsIGlzUmVxdWlyZWQpIHtcbiAgaWYgKGlzUmVxdWlyZWQpIHtcbiAgICAvLyBpZiB5b3UgZ290IG51bGwgaW5pdGlhbGx5IG9uIHRoZSB1cGRhdGUgc2NyZWVuLCB3ZSB3YW50IHRvIGFsbG93IHNhdmluZ1xuICAgIC8vIHNpbmNlIHRoZSB1c2VyIHByb2JhYmx5IGRvZXNuJ3QgaGF2ZSByZWFkIGFjY2VzcyBjb250cm9sXG4gICAgaWYgKHZhbHVlLmtpbmQgPT09ICd1cGRhdGUnICYmIHZhbHVlLmluaXRpYWwgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZS52YWx1ZSAhPT0gbnVsbDtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5jb25zdCBjb250cm9sbGVyID0gY29uZmlnID0+IHtcbiAgdmFyIF9jb25maWckZmllbGRNZXRhJGRlZiwgX29wdGlvbnNXaXRoU3RyaW5nVmFsO1xuXG4gIGNvbnN0IG9wdGlvbnNXaXRoU3RyaW5nVmFsdWVzID0gY29uZmlnLmZpZWxkTWV0YS5vcHRpb25zLm1hcCh4ID0+ICh7XG4gICAgbGFiZWw6IHgubGFiZWwsXG4gICAgdmFsdWU6IHgudmFsdWUudG9TdHJpbmcoKVxuICB9KSk7IC8vIFRyYW5zZm9ybSBmcm9tIHN0cmluZyB2YWx1ZSB0byB0eXBlIGFwcHJvcHJpYXRlIHZhbHVlXG5cbiAgY29uc3QgdCA9IHYgPT4gdiA9PT0gbnVsbCA/IG51bGwgOiBjb25maWcuZmllbGRNZXRhLnR5cGUgPT09ICdpbnRlZ2VyJyA/IHBhcnNlSW50KHYpIDogdjtcblxuICBjb25zdCBzdHJpbmdpZmllZERlZmF1bHQgPSAoX2NvbmZpZyRmaWVsZE1ldGEkZGVmID0gY29uZmlnLmZpZWxkTWV0YS5kZWZhdWx0VmFsdWUpID09PSBudWxsIHx8IF9jb25maWckZmllbGRNZXRhJGRlZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NvbmZpZyRmaWVsZE1ldGEkZGVmLnRvU3RyaW5nKCk7XG4gIHJldHVybiB7XG4gICAgcGF0aDogY29uZmlnLnBhdGgsXG4gICAgbGFiZWw6IGNvbmZpZy5sYWJlbCxcbiAgICBncmFwaHFsU2VsZWN0aW9uOiBjb25maWcucGF0aCxcbiAgICBkZWZhdWx0VmFsdWU6IHtcbiAgICAgIGtpbmQ6ICdjcmVhdGUnLFxuICAgICAgdmFsdWU6IChfb3B0aW9uc1dpdGhTdHJpbmdWYWwgPSBvcHRpb25zV2l0aFN0cmluZ1ZhbHVlcy5maW5kKHggPT4geC52YWx1ZSA9PT0gc3RyaW5naWZpZWREZWZhdWx0KSkgIT09IG51bGwgJiYgX29wdGlvbnNXaXRoU3RyaW5nVmFsICE9PSB2b2lkIDAgPyBfb3B0aW9uc1dpdGhTdHJpbmdWYWwgOiBudWxsXG4gICAgfSxcbiAgICB0eXBlOiBjb25maWcuZmllbGRNZXRhLnR5cGUsXG4gICAgZGlzcGxheU1vZGU6IGNvbmZpZy5maWVsZE1ldGEuZGlzcGxheU1vZGUsXG4gICAgaXNSZXF1aXJlZDogY29uZmlnLmZpZWxkTWV0YS5pc1JlcXVpcmVkLFxuICAgIG9wdGlvbnM6IG9wdGlvbnNXaXRoU3RyaW5nVmFsdWVzLFxuICAgIGRlc2VyaWFsaXplOiBkYXRhID0+IHtcbiAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIGNvbmZpZy5maWVsZE1ldGEub3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9uLnZhbHVlID09PSBkYXRhW2NvbmZpZy5wYXRoXSkge1xuICAgICAgICAgIGNvbnN0IHN0cmluZ2lmaWVkT3B0aW9uID0ge1xuICAgICAgICAgICAgbGFiZWw6IG9wdGlvbi5sYWJlbCxcbiAgICAgICAgICAgIHZhbHVlOiBvcHRpb24udmFsdWUudG9TdHJpbmcoKVxuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6ICd1cGRhdGUnLFxuICAgICAgICAgICAgaW5pdGlhbDogc3RyaW5naWZpZWRPcHRpb24sXG4gICAgICAgICAgICB2YWx1ZTogc3RyaW5naWZpZWRPcHRpb25cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtpbmQ6ICd1cGRhdGUnLFxuICAgICAgICBpbml0aWFsOiBudWxsLFxuICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgfTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZTogdmFsdWUgPT4ge1xuICAgICAgdmFyIF92YWx1ZSR2YWx1ZSR2YWx1ZSwgX3ZhbHVlJHZhbHVlO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBbY29uZmlnLnBhdGhdOiB0KChfdmFsdWUkdmFsdWUkdmFsdWUgPSAoX3ZhbHVlJHZhbHVlID0gdmFsdWUudmFsdWUpID09PSBudWxsIHx8IF92YWx1ZSR2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlJHZhbHVlLnZhbHVlKSAhPT0gbnVsbCAmJiBfdmFsdWUkdmFsdWUkdmFsdWUgIT09IHZvaWQgMCA/IF92YWx1ZSR2YWx1ZSR2YWx1ZSA6IG51bGwpXG4gICAgICB9O1xuICAgIH0sXG4gICAgdmFsaWRhdGU6IHZhbHVlID0+IHZhbGlkYXRlKHZhbHVlLCBjb25maWcuZmllbGRNZXRhLmlzUmVxdWlyZWQpLFxuICAgIGZpbHRlcjoge1xuICAgICAgRmlsdGVyKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBjb3JlLmpzeChmaWVsZHMuTXVsdGlTZWxlY3QsIHtcbiAgICAgICAgICBvbkNoYW5nZTogcHJvcHMub25DaGFuZ2UsXG4gICAgICAgICAgb3B0aW9uczogb3B0aW9uc1dpdGhTdHJpbmdWYWx1ZXMsXG4gICAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlLFxuICAgICAgICAgIGF1dG9Gb2N1czogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIGdyYXBocWw6IF9yZWY0ID0+IHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIHZhbHVlOiBvcHRpb25zXG4gICAgICAgIH0gPSBfcmVmNDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBbY29uZmlnLnBhdGhdOiB7XG4gICAgICAgICAgICBbdHlwZSA9PT0gJ25vdF9tYXRjaGVzJyA/ICdub3RJbicgOiAnaW4nXTogb3B0aW9ucy5tYXAoeCA9PiB0KHgudmFsdWUpKVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0sXG5cbiAgICAgIExhYmVsKF9yZWY1KSB7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICB2YWx1ZVxuICAgICAgICB9ID0gX3JlZjU7XG5cbiAgICAgICAgaWYgKCF2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gdHlwZSA9PT0gJ25vdF9tYXRjaGVzJyA/IGBpcyBzZXRgIDogYGhhcyBubyB2YWx1ZWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gMSkge1xuICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHZhbHVlLm1hcChpID0+IGkubGFiZWwpLmpvaW4oJywgJyk7XG4gICAgICAgICAgcmV0dXJuIHR5cGUgPT09ICdub3RfbWF0Y2hlcycgPyBgaXMgbm90IGluIFske3ZhbHVlc31dYCA6IGBpcyBpbiBbJHt2YWx1ZXN9XWA7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvcHRpb25MYWJlbCA9IHZhbHVlWzBdLmxhYmVsO1xuICAgICAgICByZXR1cm4gdHlwZSA9PT0gJ25vdF9tYXRjaGVzJyA/IGBpcyBub3QgJHtvcHRpb25MYWJlbH1gIDogYGlzICR7b3B0aW9uTGFiZWx9YDtcbiAgICAgIH0sXG5cbiAgICAgIHR5cGVzOiB7XG4gICAgICAgIG1hdGNoZXM6IHtcbiAgICAgICAgICBsYWJlbDogJ01hdGNoZXMnLFxuICAgICAgICAgIGluaXRpYWxWYWx1ZTogW11cbiAgICAgICAgfSxcbiAgICAgICAgbm90X21hdGNoZXM6IHtcbiAgICAgICAgICBsYWJlbDogJ0RvZXMgbm90IG1hdGNoJyxcbiAgICAgICAgICBpbml0aWFsVmFsdWU6IFtdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG5leHBvcnRzLkNhcmRWYWx1ZSA9IENhcmRWYWx1ZTtcbmV4cG9ydHMuQ2VsbCA9IENlbGw7XG5leHBvcnRzLkZpZWxkID0gRmllbGQ7XG5leHBvcnRzLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/fields/types/select/views/dist/keystone-6-core-fields-types-select-views.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/fields/types/select/views/dist/keystone-6-core-fields-types-select-views.cjs.js":
/*!***************************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/fields/types/select/views/dist/keystone-6-core-fields-types-select-views.cjs.js ***!
  \***************************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./keystone-6-core-fields-types-select-views.cjs.dev.js */ \"../../node_modules/@keystone-6/core/fields/types/select/views/dist/keystone-6-core-fields-types-select-views.cjs.dev.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3NlbGVjdC92aWV3cy9kaXN0L2tleXN0b25lLTYtY29yZS1maWVsZHMtdHlwZXMtc2VsZWN0LXZpZXdzLmNqcy5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixJQUFJLEtBQXFDLEVBQUUsRUFFMUMsQ0FBQztBQUNGLEVBQUUsNk5BQWtGO0FBQ3BGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2ZpZWxkcy90eXBlcy9zZWxlY3Qvdmlld3MvZGlzdC9rZXlzdG9uZS02LWNvcmUtZmllbGRzLXR5cGVzLXNlbGVjdC12aWV3cy5janMuanM/OWE2NSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9rZXlzdG9uZS02LWNvcmUtZmllbGRzLXR5cGVzLXNlbGVjdC12aWV3cy5janMucHJvZC5qc1wiKTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4va2V5c3RvbmUtNi1jb3JlLWZpZWxkcy10eXBlcy1zZWxlY3Qtdmlld3MuY2pzLmRldi5qc1wiKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/fields/types/select/views/dist/keystone-6-core-fields-types-select-views.cjs.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/fields/types/text/views/dist/keystone-6-core-fields-types-text-views.cjs.dev.js":
/*!***************************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/fields/types/text/views/dist/keystone-6-core-fields-types-text-views.cjs.dev.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar _objectSpread = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"../../node_modules/@babel/runtime/helpers/objectSpread2.js\");\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar fields = __webpack_require__(/*! @keystone-ui/fields */ \"@keystone-ui/fields\");\nvar React = __webpack_require__(/*! react */ \"react\");\nvar CellContainer = __webpack_require__(/*! ../../../../../dist/CellContainer-453254b5.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/CellContainer-453254b5.cjs.dev.js\");\nvar CellLink = __webpack_require__(/*! ../../../../../dist/CellLink-5308c32b.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/CellLink-5308c32b.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"../../node_modules/@babel/runtime/helpers/defineProperty.js\");\n__webpack_require__(/*! @keystone-ui/button */ \"@keystone-ui/button\");\n__webpack_require__(/*! @keystone-ui/icons/icons/AlertTriangleIcon */ \"@keystone-ui/icons/icons/AlertTriangleIcon\");\n__webpack_require__(/*! next/link */ \"../../node_modules/next/link.js\");\n__webpack_require__(/*! @keystone-ui/toast */ \"@keystone-ui/toast\");\n__webpack_require__(/*! @keystone-ui/loading */ \"@keystone-ui/loading\");\n__webpack_require__(/*! @keystone-ui/modals */ \"@keystone-ui/modals\");\n__webpack_require__(/*! apollo-upload-client */ \"apollo-upload-client\");\n__webpack_require__(/*! @emotion/hash */ \"@emotion/hash\");\n__webpack_require__(/*! ../../../../../dist/sqlite-a2385a81.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/sqlite-a2385a81.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\n__webpack_require__(/*! ../../../../../dist/graphql-ts-schema-2a220120.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/graphql-ts-schema-2a220120.cjs.dev.js\");\n__webpack_require__(/*! @apollo/client */ \"@apollo/client\");\n__webpack_require__(/*! ../../../../../dist/admin-meta-graphql-9f9a9c11.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/admin-meta-graphql-9f9a9c11.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/extends */ \"../../node_modules/@babel/runtime/helpers/extends.js\");\n__webpack_require__(/*! next/router */ \"next/router\");\n__webpack_require__(/*! @keystone-ui/popover */ \"@keystone-ui/popover\");\n__webpack_require__(/*! @keystone-ui/icons/icons/MoreHorizontalIcon */ \"@keystone-ui/icons/icons/MoreHorizontalIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/ChevronRightIcon */ \"@keystone-ui/icons/icons/ChevronRightIcon\");\n__webpack_require__(/*! ../../../../../dist/SignoutButton-081410d6.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/SignoutButton-081410d6.cjs.dev.js\");\n__webpack_require__(/*! fast-deep-equal */ \"fast-deep-equal\");\n__webpack_require__(/*! @keystone-ui/notice */ \"@keystone-ui/notice\");\n__webpack_require__(/*! ../../../../../admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js */ \"../../node_modules/@keystone-6/core/admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js\");\n__webpack_require__(/*! decimal.js */ \"decimal.js\");\n__webpack_require__(/*! @graphql-tools/schema */ \"@graphql-tools/schema\");\n__webpack_require__(/*! @graphql-ts/schema/api-without-context */ \"@graphql-ts/schema/api-without-context\");\n__webpack_require__(/*! @graphql-ts/schema */ \"@graphql-ts/schema\");\n__webpack_require__(/*! graphql-type-json */ \"graphql-type-json\");\n__webpack_require__(/*! graphql-upload/public/GraphQLUpload.js */ \"graphql-upload/public/GraphQLUpload.js\");\n__webpack_require__(/*! graphql */ \"graphql\");\n__webpack_require__(/*! @graphql-ts/extend */ \"@graphql-ts/extend\");\n__webpack_require__(/*! @graphql-ts/schema/api-with-context */ \"@graphql-ts/schema/api-with-context\");\n\nconst Field = _ref => {\n  let {\n    field,\n    value,\n    onChange,\n    autoFocus,\n    forceValidation\n  } = _ref;\n  const {\n    typography,\n    fields: fields$1\n  } = core.useTheme();\n  const [shouldShowErrors, setShouldShowErrors] = React.useState(false);\n  const validationMessages = validate(value, field.validation, field.label);\n  return core.jsx(fields.FieldContainer, null, core.jsx(fields.FieldLabel, null, field.label), onChange ? core.jsx(core.Stack, {\n    gap: \"small\"\n  }, field.displayMode === 'textarea' ? core.jsx(fields.TextArea, {\n    id: field.path,\n    autoFocus: autoFocus,\n    onChange: event => onChange(_objectSpread(_objectSpread({}, value), {}, {\n      inner: {\n        kind: 'value',\n        value: event.target.value\n      }\n    })),\n    value: value.inner.kind === 'null' ? '' : value.inner.value,\n    disabled: value.inner.kind === 'null',\n    onBlur: () => {\n      setShouldShowErrors(true);\n    }\n  }) : core.jsx(fields.TextInput, {\n    id: field.path,\n    autoFocus: autoFocus,\n    onChange: event => onChange(_objectSpread(_objectSpread({}, value), {}, {\n      inner: {\n        kind: 'value',\n        value: event.target.value\n      }\n    })),\n    value: value.inner.kind === 'null' ? '' : value.inner.value,\n    disabled: value.inner.kind === 'null',\n    onBlur: () => {\n      setShouldShowErrors(true);\n    }\n  }), field.isNullable && core.jsx(fields.Checkbox, {\n    autoFocus: autoFocus,\n    disabled: onChange === undefined,\n    onChange: () => {\n      if (value.inner.kind === 'value') {\n        onChange(_objectSpread(_objectSpread({}, value), {}, {\n          inner: {\n            kind: 'null',\n            prev: value.inner.value\n          }\n        }));\n      } else {\n        onChange(_objectSpread(_objectSpread({}, value), {}, {\n          inner: {\n            kind: 'value',\n            value: value.inner.prev\n          }\n        }));\n      }\n    },\n    checked: value.inner.kind === 'null'\n  }, core.jsx(\"span\", {\n    css: {\n      fontWeight: typography.fontWeight.semibold,\n      color: fields$1.labelColor\n    }\n  }, \"Set field as null\")), !!validationMessages.length && (shouldShowErrors || forceValidation) && validationMessages.map((message, i) => core.jsx(\"span\", {\n    key: i,\n    css: {\n      color: 'red'\n    }\n  }, message))) : value.inner.kind === 'null' ? null : value.inner.value);\n};\nconst Cell = _ref2 => {\n  let {\n    item,\n    field,\n    linkTo\n  } = _ref2;\n  let value = item[field.path] + '';\n  return linkTo ? core.jsx(CellLink.CellLink, linkTo, value) : core.jsx(CellContainer.CellContainer, null, value);\n};\nCell.supportsLinkTo = true;\nconst CardValue = _ref3 => {\n  let {\n    item,\n    field\n  } = _ref3;\n  return core.jsx(fields.FieldContainer, null, core.jsx(fields.FieldLabel, null, field.label), item[field.path]);\n};\n\nfunction validate(value, validation, fieldLabel) {\n  // if the value is the same as the initial for an update, we don't want to block saving\n  // since we're not gonna send it anyway if it's the same\n  // and going \"fix this thing that is unrelated to the thing you're doing\" is bad\n  // and also bc it could be null bc of read access control\n  if (value.kind === 'update' && (value.initial.kind === 'null' && value.inner.kind === 'null' || value.initial.kind === 'value' && value.inner.kind === 'value' && value.inner.value === value.initial.value)) {\n    return [];\n  }\n\n  if (value.inner.kind === 'null') {\n    if (validation.isRequired) {\n      return [`${fieldLabel} is required`];\n    }\n\n    return [];\n  }\n\n  const val = value.inner.value;\n  let messages = [];\n\n  if (validation.length.min !== null && val.length < validation.length.min) {\n    if (validation.length.min === 1) {\n      messages.push(`${fieldLabel} must not be empty`);\n    } else {\n      messages.push(`${fieldLabel} must be at least ${validation.length.min} characters long`);\n    }\n  }\n\n  if (validation.length.max !== null && val.length > validation.length.max) {\n    messages.push(`${fieldLabel} must be no longer than ${validation.length.min} characters`);\n  }\n\n  if (validation.match && !validation.match.regex.test(val)) {\n    messages.push(validation.match.explanation || `${fieldLabel} must match ${validation.match.regex}`);\n  }\n\n  return messages;\n}\n\nfunction deserializeTextValue(value) {\n  if (value === null) {\n    return {\n      kind: 'null',\n      prev: ''\n    };\n  }\n\n  return {\n    kind: 'value',\n    value\n  };\n}\n\nconst controller = config => {\n  const validation = {\n    isRequired: config.fieldMeta.validation.isRequired,\n    length: config.fieldMeta.validation.length,\n    match: config.fieldMeta.validation.match ? {\n      regex: new RegExp(config.fieldMeta.validation.match.regex.source, config.fieldMeta.validation.match.regex.flags),\n      explanation: config.fieldMeta.validation.match.explanation\n    } : null\n  };\n  return {\n    path: config.path,\n    label: config.label,\n    graphqlSelection: config.path,\n    defaultValue: {\n      kind: 'create',\n      inner: deserializeTextValue(config.fieldMeta.defaultValue)\n    },\n    displayMode: config.fieldMeta.displayMode,\n    isNullable: config.fieldMeta.isNullable,\n    deserialize: data => {\n      const inner = deserializeTextValue(data[config.path]);\n      return {\n        kind: 'update',\n        inner,\n        initial: inner\n      };\n    },\n    serialize: value => ({\n      [config.path]: value.inner.kind === 'null' ? null : value.inner.value\n    }),\n    validation,\n    validate: val => validate(val, validation, config.label).length === 0,\n    filter: {\n      Filter(props) {\n        return core.jsx(fields.TextInput, {\n          onChange: event => {\n            props.onChange(event.target.value);\n          },\n          value: props.value,\n          autoFocus: props.autoFocus\n        });\n      },\n\n      graphql: _ref4 => {\n        let {\n          type,\n          value\n        } = _ref4;\n        const isNot = type.startsWith('not_');\n        const key = type === 'is_i' || type === 'not_i' ? 'equals' : type.replace(/_i$/, '').replace('not_', '').replace(/_([a-z])/g, (_, char) => char.toUpperCase());\n        const filter = {\n          [key]: value\n        };\n        return {\n          [config.path]: _objectSpread(_objectSpread({}, isNot ? {\n            not: filter\n          } : filter), {}, {\n            mode: config.fieldMeta.shouldUseModeInsensitive ? 'insensitive' : undefined\n          })\n        };\n      },\n\n      Label(_ref5) {\n        let {\n          label,\n          value\n        } = _ref5;\n        return `${label.toLowerCase()}: \"${value}\"`;\n      },\n\n      types: {\n        contains_i: {\n          label: 'Contains',\n          initialValue: ''\n        },\n        not_contains_i: {\n          label: 'Does not contain',\n          initialValue: ''\n        },\n        is_i: {\n          label: 'Is exactly',\n          initialValue: ''\n        },\n        not_i: {\n          label: 'Is not exactly',\n          initialValue: ''\n        },\n        starts_with_i: {\n          label: 'Starts with',\n          initialValue: ''\n        },\n        not_starts_with_i: {\n          label: 'Does not start with',\n          initialValue: ''\n        },\n        ends_with_i: {\n          label: 'Ends with',\n          initialValue: ''\n        },\n        not_ends_with_i: {\n          label: 'Does not end with',\n          initialValue: ''\n        }\n      }\n    }\n  };\n};\n\nexports.CardValue = CardValue;\nexports.Cell = Cell;\nexports.Field = Field;\nexports.controller = controller;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3RleHQvdmlld3MvZGlzdC9rZXlzdG9uZS02LWNvcmUtZmllbGRzLXR5cGVzLXRleHQtdmlld3MuY2pzLmRldi5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7O0FBRTdELG9CQUFvQixtQkFBTyxDQUFDLHdHQUFzQztBQUNsRSxXQUFXLG1CQUFPLENBQUMsNENBQW1CO0FBQ3RDLGFBQWEsbUJBQU8sQ0FBQyxnREFBcUI7QUFDMUMsWUFBWSxtQkFBTyxDQUFDLG9CQUFPO0FBQzNCLG9CQUFvQixtQkFBTyxDQUFDLHlJQUF1RDtBQUNuRixlQUFlLG1CQUFPLENBQUMsK0hBQWtEO0FBQ3pFLG1CQUFPLENBQUMsMEdBQXVDO0FBQy9DLG1CQUFPLENBQUMsZ0RBQXFCO0FBQzdCLG1CQUFPLENBQUMsOEZBQTRDO0FBQ3BELG1CQUFPLENBQUMsa0RBQVc7QUFDbkIsbUJBQU8sQ0FBQyw4Q0FBb0I7QUFDNUIsbUJBQU8sQ0FBQyxrREFBc0I7QUFDOUIsbUJBQU8sQ0FBQyxnREFBcUI7QUFDN0IsbUJBQU8sQ0FBQyxrREFBc0I7QUFDOUIsbUJBQU8sQ0FBQyxvQ0FBZTtBQUN2QixtQkFBTyxDQUFDLDJIQUFnRDtBQUN4RCxtQkFBTyxDQUFDLDRIQUFnRDtBQUN4RCxtQkFBTyxDQUFDLGlKQUEyRDtBQUNuRSxtQkFBTyxDQUFDLHNDQUFnQjtBQUN4QixtQkFBTyxDQUFDLG1KQUE0RDtBQUNwRSxtQkFBTyxDQUFDLDRGQUFnQztBQUN4QyxtQkFBTyxDQUFDLGdDQUFhO0FBQ3JCLG1CQUFPLENBQUMsa0RBQXNCO0FBQzlCLG1CQUFPLENBQUMsZ0dBQTZDO0FBQ3JELG1CQUFPLENBQUMsNEZBQTJDO0FBQ25ELG1CQUFPLENBQUMseUlBQXVEO0FBQy9ELG1CQUFPLENBQUMsd0NBQWlCO0FBQ3pCLG1CQUFPLENBQUMsZ0RBQXFCO0FBQzdCLG1CQUFP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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUI7QUFDakIsWUFBWTtBQUNaLGFBQWE7QUFDYixrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3RleHQvdmlld3MvZGlzdC9rZXlzdG9uZS02LWNvcmUtZmllbGRzLXR5cGVzLXRleHQtdmlld3MuY2pzLmRldi5qcz9kMTg2Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIF9vYmplY3RTcHJlYWQgPSByZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZDInKTtcbnZhciBjb3JlID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2NvcmUnKTtcbnZhciBmaWVsZHMgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvZmllbGRzJyk7XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIENlbGxDb250YWluZXIgPSByZXF1aXJlKCcuLi8uLi8uLi8uLi8uLi9kaXN0L0NlbGxDb250YWluZXItNDUzMjU0YjUuY2pzLmRldi5qcycpO1xudmFyIENlbGxMaW5rID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9DZWxsTGluay01MzA4YzMyYi5janMuZGV2LmpzJyk7XG5yZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5Jyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvYnV0dG9uJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvQWxlcnRUcmlhbmdsZUljb24nKTtcbnJlcXVpcmUoJ25leHQvbGluaycpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL3RvYXN0Jyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvbG9hZGluZycpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL21vZGFscycpO1xucmVxdWlyZSgnYXBvbGxvLXVwbG9hZC1jbGllbnQnKTtcbnJlcXVpcmUoJ0BlbW90aW9uL2hhc2gnKTtcbnJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2Rpc3Qvc3FsaXRlLWEyMzg1YTgxLmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXMnKTtcbnJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2Rpc3QvZ3JhcGhxbC10cy1zY2hlbWEtMmEyMjAxMjAuY2pzLmRldi5qcycpO1xucmVxdWlyZSgnQGFwb2xsby9jbGllbnQnKTtcbnJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2Rpc3QvYWRtaW4tbWV0YS1ncmFwaHFsLTlmOWE5YzExLmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xucmVxdWlyZSgnbmV4dC9yb3V0ZXInKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9wb3BvdmVyJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvTW9yZUhvcml6b250YWxJY29uJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvQ2hldnJvblJpZ2h0SWNvbicpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9TaWdub3V0QnV0dG9uLTA4MTQxMGQ2LmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ2Zhc3QtZGVlcC1lcXVhbCcpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL25vdGljZScpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vYWRtaW4tdWkvcm91dGVyL2Rpc3Qva2V5c3RvbmUtNi1jb3JlLWFkbWluLXVpLXJvdXRlci5janMuZGV2LmpzJyk7XG5yZXF1aXJlKCdkZWNpbWFsLmpzJyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10b29scy9zY2hlbWEnKTtcbnJlcXVpcmUoJ0BncmFwaHFsLXRzL3NjaGVtYS9hcGktd2l0aG91dC1jb250ZXh0Jyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10cy9zY2hlbWEnKTtcbnJlcXVpcmUoJ2dyYXBocWwtdHlwZS1qc29uJyk7XG5yZXF1aXJlKCdncmFwaHFsLXVwbG9hZC9wdWJsaWMvR3JhcGhRTFVwbG9hZC5qcycpO1xucmVxdWlyZSgnZ3JhcGhxbCcpO1xucmVxdWlyZSgnQGdyYXBocWwtdHMvZXh0ZW5kJyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10cy9zY2hlbWEvYXBpLXdpdGgtY29udGV4dCcpO1xuXG5jb25zdCBGaWVsZCA9IF9yZWYgPT4ge1xuICBsZXQge1xuICAgIGZpZWxkLFxuICAgIHZhbHVlLFxuICAgIG9uQ2hhbmdlLFxuICAgIGF1dG9Gb2N1cyxcbiAgICBmb3JjZVZhbGlkYXRpb25cbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHtcbiAgICB0eXBvZ3JhcGh5LFxuICAgIGZpZWxkczogZmllbGRzJDFcbiAgfSA9IGNvcmUudXNlVGhlbWUoKTtcbiAgY29uc3QgW3Nob3VsZFNob3dFcnJvcnMsIHNldFNob3VsZFNob3dFcnJvcnNdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCB2YWxpZGF0aW9uTWVzc2FnZXMgPSB2YWxpZGF0ZSh2YWx1ZSwgZmllbGQudmFsaWRhdGlvbiwgZmllbGQubGFiZWwpO1xuICByZXR1cm4gY29yZS5qc3goZmllbGRzLkZpZWxkQ29udGFpbmVyLCBudWxsLCBjb3JlLmpzeChmaWVsZHMuRmllbGRMYWJlbCwgbnVsbCwgZmllbGQubGFiZWwpLCBvbkNoYW5nZSA/IGNvcmUuanN4KGNvcmUuU3RhY2ssIHtcbiAgICBnYXA6IFwic21hbGxcIlxuICB9LCBmaWVsZC5kaXNwbGF5TW9kZSA9PT0gJ3RleHRhcmVhJyA/IGNvcmUuanN4KGZpZWxkcy5UZXh0QXJlYSwge1xuICAgIGlkOiBmaWVsZC5wYXRoLFxuICAgIGF1dG9Gb2N1czogYXV0b0ZvY3VzLFxuICAgIG9uQ2hhbmdlOiBldmVudCA9PiBvbkNoYW5nZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlKSwge30sIHtcbiAgICAgIGlubmVyOiB7XG4gICAgICAgIGtpbmQ6ICd2YWx1ZScsXG4gICAgICAgIHZhbHVlOiBldmVudC50YXJnZXQudmFsdWVcbiAgICAgIH1cbiAgICB9KSksXG4gICAgdmFsdWU6IHZhbHVlLmlubmVyLmtpbmQgPT09ICdudWxsJyA/ICcnIDogdmFsdWUuaW5uZXIudmFsdWUsXG4gICAgZGlzYWJsZWQ6IHZhbHVlLmlubmVyLmtpbmQgPT09ICdudWxsJyxcbiAgICBvbkJsdXI6ICgpID0+IHtcbiAgICAgIHNldFNob3VsZFNob3dFcnJvcnModHJ1ZSk7XG4gICAgfVxuICB9KSA6IGNvcmUuanN4KGZpZWxkcy5UZXh0SW5wdXQsIHtcbiAgICBpZDogZmllbGQucGF0aCxcbiAgICBhdXRvRm9jdXM6IGF1dG9Gb2N1cyxcbiAgICBvbkNoYW5nZTogZXZlbnQgPT4gb25DaGFuZ2UoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZSksIHt9LCB7XG4gICAgICBpbm5lcjoge1xuICAgICAgICBraW5kOiAndmFsdWUnLFxuICAgICAgICB2YWx1ZTogZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgICB9XG4gICAgfSkpLFxuICAgIHZhbHVlOiB2YWx1ZS5pbm5lci5raW5kID09PSAnbnVsbCcgPyAnJyA6IHZhbHVlLmlubmVyLnZhbHVlLFxuICAgIGRpc2FibGVkOiB2YWx1ZS5pbm5lci5raW5kID09PSAnbnVsbCcsXG4gICAgb25CbHVyOiAoKSA9PiB7XG4gICAgICBzZXRTaG91bGRTaG93RXJyb3JzKHRydWUpO1xuICAgIH1cbiAgfSksIGZpZWxkLmlzTnVsbGFibGUgJiYgY29yZS5qc3goZmllbGRzLkNoZWNrYm94LCB7XG4gICAgYXV0b0ZvY3VzOiBhdXRvRm9jdXMsXG4gICAgZGlzYWJsZWQ6IG9uQ2hhbmdlID09PSB1bmRlZmluZWQsXG4gICAgb25DaGFuZ2U6ICgpID0+IHtcbiAgICAgIGlmICh2YWx1ZS5pbm5lci5raW5kID09PSAndmFsdWUnKSB7XG4gICAgICAgIG9uQ2hhbmdlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFsdWUpLCB7fSwge1xuICAgICAgICAgIGlubmVyOiB7XG4gICAgICAgICAgICBraW5kOiAnbnVsbCcsXG4gICAgICAgICAgICBwcmV2OiB2YWx1ZS5pbm5lci52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb25DaGFuZ2UoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZSksIHt9LCB7XG4gICAgICAgICAgaW5uZXI6IHtcbiAgICAgICAgICAgIGtpbmQ6ICd2YWx1ZScsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUuaW5uZXIucHJldlxuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgY2hlY2tlZDogdmFsdWUuaW5uZXIua2luZCA9PT0gJ251bGwnXG4gIH0sIGNvcmUuanN4KFwic3BhblwiLCB7XG4gICAgY3NzOiB7XG4gICAgICBmb250V2VpZ2h0OiB0eXBvZ3JhcGh5LmZvbnRXZWlnaHQuc2VtaWJvbGQsXG4gICAgICBjb2xvcjogZmllbGRzJDEubGFiZWxDb2xvclxuICAgIH1cbiAgfSwgXCJTZXQgZmllbGQgYXMgbnVsbFwiKSksICEhdmFsaWRhdGlvbk1lc3NhZ2VzLmxlbmd0aCAmJiAoc2hvdWxkU2hvd0Vycm9ycyB8fCBmb3JjZVZhbGlkYXRpb24pICYmIHZhbGlkYXRpb25NZXNzYWdlcy5tYXAoKG1lc3NhZ2UsIGkpID0+IGNvcmUuanN4KFwic3BhblwiLCB7XG4gICAga2V5OiBpLFxuICAgIGNzczoge1xuICAgICAgY29sb3I6ICdyZWQnXG4gICAgfVxuICB9LCBtZXNzYWdlKSkpIDogdmFsdWUuaW5uZXIua2luZCA9PT0gJ251bGwnID8gbnVsbCA6IHZhbHVlLmlubmVyLnZhbHVlKTtcbn07XG5jb25zdCBDZWxsID0gX3JlZjIgPT4ge1xuICBsZXQge1xuICAgIGl0ZW0sXG4gICAgZmllbGQsXG4gICAgbGlua1RvXG4gIH0gPSBfcmVmMjtcbiAgbGV0IHZhbHVlID0gaXRlbVtmaWVsZC5wYXRoXSArICcnO1xuICByZXR1cm4gbGlua1RvID8gY29yZS5qc3goQ2VsbExpbmsuQ2VsbExpbmssIGxpbmtUbywgdmFsdWUpIDogY29yZS5qc3goQ2VsbENvbnRhaW5lci5DZWxsQ29udGFpbmVyLCBudWxsLCB2YWx1ZSk7XG59O1xuQ2VsbC5zdXBwb3J0c0xpbmtUbyA9IHRydWU7XG5jb25zdCBDYXJkVmFsdWUgPSBfcmVmMyA9PiB7XG4gIGxldCB7XG4gICAgaXRlbSxcbiAgICBmaWVsZFxuICB9ID0gX3JlZjM7XG4gIHJldHVybiBjb3JlLmpzeChmaWVsZHMuRmllbGRDb250YWluZXIsIG51bGwsIGNvcmUuanN4KGZpZWxkcy5GaWVsZExhYmVsLCBudWxsLCBmaWVsZC5sYWJlbCksIGl0ZW1bZmllbGQucGF0aF0pO1xufTtcblxuZnVuY3Rpb24gdmFsaWRhdGUodmFsdWUsIHZhbGlkYXRpb24sIGZpZWxkTGFiZWwpIHtcbiAgLy8gaWYgdGhlIHZhbHVlIGlzIHRoZSBzYW1lIGFzIHRoZSBpbml0aWFsIGZvciBhbiB1cGRhdGUsIHdlIGRvbid0IHdhbnQgdG8gYmxvY2sgc2F2aW5nXG4gIC8vIHNpbmNlIHdlJ3JlIG5vdCBnb25uYSBzZW5kIGl0IGFueXdheSBpZiBpdCdzIHRoZSBzYW1lXG4gIC8vIGFuZCBnb2luZyBcImZpeCB0aGlzIHRoaW5nIHRoYXQgaXMgdW5yZWxhdGVkIHRvIHRoZSB0aGluZyB5b3UncmUgZG9pbmdcIiBpcyBiYWRcbiAgLy8gYW5kIGFsc28gYmMgaXQgY291bGQgYmUgbnVsbCBiYyBvZiByZWFkIGFjY2VzcyBjb250cm9sXG4gIGlmICh2YWx1ZS5raW5kID09PSAndXBkYXRlJyAmJiAodmFsdWUuaW5pdGlhbC5raW5kID09PSAnbnVsbCcgJiYgdmFsdWUuaW5uZXIua2luZCA9PT0gJ251bGwnIHx8IHZhbHVlLmluaXRpYWwua2luZCA9PT0gJ3ZhbHVlJyAmJiB2YWx1ZS5pbm5lci5raW5kID09PSAndmFsdWUnICYmIHZhbHVlLmlubmVyLnZhbHVlID09PSB2YWx1ZS5pbml0aWFsLnZhbHVlKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGlmICh2YWx1ZS5pbm5lci5raW5kID09PSAnbnVsbCcpIHtcbiAgICBpZiAodmFsaWRhdGlvbi5pc1JlcXVpcmVkKSB7XG4gICAgICByZXR1cm4gW2Ake2ZpZWxkTGFiZWx9IGlzIHJlcXVpcmVkYF07XG4gICAgfVxuXG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY29uc3QgdmFsID0gdmFsdWUuaW5uZXIudmFsdWU7XG4gIGxldCBtZXNzYWdlcyA9IFtdO1xuXG4gIGlmICh2YWxpZGF0aW9uLmxlbmd0aC5taW4gIT09IG51bGwgJiYgdmFsLmxlbmd0aCA8IHZhbGlkYXRpb24ubGVuZ3RoLm1pbikge1xuICAgIGlmICh2YWxpZGF0aW9uLmxlbmd0aC5taW4gPT09IDEpIHtcbiAgICAgIG1lc3NhZ2VzLnB1c2goYCR7ZmllbGRMYWJlbH0gbXVzdCBub3QgYmUgZW1wdHlgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZXMucHVzaChgJHtmaWVsZExhYmVsfSBtdXN0IGJlIGF0IGxlYXN0ICR7dmFsaWRhdGlvbi5sZW5ndGgubWlufSBjaGFyYWN0ZXJzIGxvbmdgKTtcbiAgICB9XG4gIH1cblxuICBpZiAodmFsaWRhdGlvbi5sZW5ndGgubWF4ICE9PSBudWxsICYmIHZhbC5sZW5ndGggPiB2YWxpZGF0aW9uLmxlbmd0aC5tYXgpIHtcbiAgICBtZXNzYWdlcy5wdXNoKGAke2ZpZWxkTGFiZWx9IG11c3QgYmUgbm8gbG9uZ2VyIHRoYW4gJHt2YWxpZGF0aW9uLmxlbmd0aC5taW59IGNoYXJhY3RlcnNgKTtcbiAgfVxuXG4gIGlmICh2YWxpZGF0aW9uLm1hdGNoICYmICF2YWxpZGF0aW9uLm1hdGNoLnJlZ2V4LnRlc3QodmFsKSkge1xuICAgIG1lc3NhZ2VzLnB1c2godmFsaWRhdGlvbi5tYXRjaC5leHBsYW5hdGlvbiB8fCBgJHtmaWVsZExhYmVsfSBtdXN0IG1hdGNoICR7dmFsaWRhdGlvbi5tYXRjaC5yZWdleH1gKTtcbiAgfVxuXG4gIHJldHVybiBtZXNzYWdlcztcbn1cblxuZnVuY3Rpb24gZGVzZXJpYWxpemVUZXh0VmFsdWUodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6ICdudWxsJyxcbiAgICAgIHByZXY6ICcnXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAga2luZDogJ3ZhbHVlJyxcbiAgICB2YWx1ZVxuICB9O1xufVxuXG5jb25zdCBjb250cm9sbGVyID0gY29uZmlnID0+IHtcbiAgY29uc3QgdmFsaWRhdGlvbiA9IHtcbiAgICBpc1JlcXVpcmVkOiBjb25maWcuZmllbGRNZXRhLnZhbGlkYXRpb24uaXNSZXF1aXJlZCxcbiAgICBsZW5ndGg6IGNvbmZpZy5maWVsZE1ldGEudmFsaWRhdGlvbi5sZW5ndGgsXG4gICAgbWF0Y2g6IGNvbmZpZy5maWVsZE1ldGEudmFsaWRhdGlvbi5tYXRjaCA/IHtcbiAgICAgIHJlZ2V4OiBuZXcgUmVnRXhwKGNvbmZpZy5maWVsZE1ldGEudmFsaWRhdGlvbi5tYXRjaC5yZWdleC5zb3VyY2UsIGNvbmZpZy5maWVsZE1ldGEudmFsaWRhdGlvbi5tYXRjaC5yZWdleC5mbGFncyksXG4gICAgICBleHBsYW5hdGlvbjogY29uZmlnLmZpZWxkTWV0YS52YWxpZGF0aW9uLm1hdGNoLmV4cGxhbmF0aW9uXG4gICAgfSA6IG51bGxcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBwYXRoOiBjb25maWcucGF0aCxcbiAgICBsYWJlbDogY29uZmlnLmxhYmVsLFxuICAgIGdyYXBocWxTZWxlY3Rpb246IGNvbmZpZy5wYXRoLFxuICAgIGRlZmF1bHRWYWx1ZToge1xuICAgICAga2luZDogJ2NyZWF0ZScsXG4gICAgICBpbm5lcjogZGVzZXJpYWxpemVUZXh0VmFsdWUoY29uZmlnLmZpZWxkTWV0YS5kZWZhdWx0VmFsdWUpXG4gICAgfSxcbiAgICBkaXNwbGF5TW9kZTogY29uZmlnLmZpZWxkTWV0YS5kaXNwbGF5TW9kZSxcbiAgICBpc051bGxhYmxlOiBjb25maWcuZmllbGRNZXRhLmlzTnVsbGFibGUsXG4gICAgZGVzZXJpYWxpemU6IGRhdGEgPT4ge1xuICAgICAgY29uc3QgaW5uZXIgPSBkZXNlcmlhbGl6ZVRleHRWYWx1ZShkYXRhW2NvbmZpZy5wYXRoXSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBraW5kOiAndXBkYXRlJyxcbiAgICAgICAgaW5uZXIsXG4gICAgICAgIGluaXRpYWw6IGlubmVyXG4gICAgICB9O1xuICAgIH0sXG4gICAgc2VyaWFsaXplOiB2YWx1ZSA9PiAoe1xuICAgICAgW2NvbmZpZy5wYXRoXTogdmFsdWUuaW5uZXIua2luZCA9PT0gJ251bGwnID8gbnVsbCA6IHZhbHVlLmlubmVyLnZhbHVlXG4gICAgfSksXG4gICAgdmFsaWRhdGlvbixcbiAgICB2YWxpZGF0ZTogdmFsID0+IHZhbGlkYXRlKHZhbCwgdmFsaWRhdGlvbiwgY29uZmlnLmxhYmVsKS5sZW5ndGggPT09IDAsXG4gICAgZmlsdGVyOiB7XG4gICAgICBGaWx0ZXIocHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIGNvcmUuanN4KGZpZWxkcy5UZXh0SW5wdXQsIHtcbiAgICAgICAgICBvbkNoYW5nZTogZXZlbnQgPT4ge1xuICAgICAgICAgICAgcHJvcHMub25DaGFuZ2UoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHZhbHVlOiBwcm9wcy52YWx1ZSxcbiAgICAgICAgICBhdXRvRm9jdXM6IHByb3BzLmF1dG9Gb2N1c1xuICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIGdyYXBocWw6IF9yZWY0ID0+IHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0gPSBfcmVmNDtcbiAgICAgICAgY29uc3QgaXNOb3QgPSB0eXBlLnN0YXJ0c1dpdGgoJ25vdF8nKTtcbiAgICAgICAgY29uc3Qga2V5ID0gdHlwZSA9PT0gJ2lzX2knIHx8IHR5cGUgPT09ICdub3RfaScgPyAnZXF1YWxzJyA6IHR5cGUucmVwbGFjZSgvX2kkLywgJycpLnJlcGxhY2UoJ25vdF8nLCAnJykucmVwbGFjZSgvXyhbYS16XSkvZywgKF8sIGNoYXIpID0+IGNoYXIudG9VcHBlckNhc2UoKSk7XG4gICAgICAgIGNvbnN0IGZpbHRlciA9IHtcbiAgICAgICAgICBba2V5XTogdmFsdWVcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBbY29uZmlnLnBhdGhdOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGlzTm90ID8ge1xuICAgICAgICAgICAgbm90OiBmaWx0ZXJcbiAgICAgICAgICB9IDogZmlsdGVyKSwge30sIHtcbiAgICAgICAgICAgIG1vZGU6IGNvbmZpZy5maWVsZE1ldGEuc2hvdWxkVXNlTW9kZUluc2Vuc2l0aXZlID8gJ2luc2Vuc2l0aXZlJyA6IHVuZGVmaW5lZFxuICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICB9LFxuXG4gICAgICBMYWJlbChfcmVmNSkge1xuICAgICAgICBsZXQge1xuICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0gPSBfcmVmNTtcbiAgICAgICAgcmV0dXJuIGAke2xhYmVsLnRvTG93ZXJDYXNlKCl9OiBcIiR7dmFsdWV9XCJgO1xuICAgICAgfSxcblxuICAgICAgdHlwZXM6IHtcbiAgICAgICAgY29udGFpbnNfaToge1xuICAgICAgICAgIGxhYmVsOiAnQ29udGFpbnMnLFxuICAgICAgICAgIGluaXRpYWxWYWx1ZTogJydcbiAgICAgICAgfSxcbiAgICAgICAgbm90X2NvbnRhaW5zX2k6IHtcbiAgICAgICAgICBsYWJlbDogJ0RvZXMgbm90IGNvbnRhaW4nLFxuICAgICAgICAgIGluaXRpYWxWYWx1ZTogJydcbiAgICAgICAgfSxcbiAgICAgICAgaXNfaToge1xuICAgICAgICAgIGxhYmVsOiAnSXMgZXhhY3RseScsXG4gICAgICAgICAgaW5pdGlhbFZhbHVlOiAnJ1xuICAgICAgICB9LFxuICAgICAgICBub3RfaToge1xuICAgICAgICAgIGxhYmVsOiAnSXMgbm90IGV4YWN0bHknLFxuICAgICAgICAgIGluaXRpYWxWYWx1ZTogJydcbiAgICAgICAgfSxcbiAgICAgICAgc3RhcnRzX3dpdGhfaToge1xuICAgICAgICAgIGxhYmVsOiAnU3RhcnRzIHdpdGgnLFxuICAgICAgICAgIGluaXRpYWxWYWx1ZTogJydcbiAgICAgICAgfSxcbiAgICAgICAgbm90X3N0YXJ0c193aXRoX2k6IHtcbiAgICAgICAgICBsYWJlbDogJ0RvZXMgbm90IHN0YXJ0IHdpdGgnLFxuICAgICAgICAgIGluaXRpYWxWYWx1ZTogJydcbiAgICAgICAgfSxcbiAgICAgICAgZW5kc193aXRoX2k6IHtcbiAgICAgICAgICBsYWJlbDogJ0VuZHMgd2l0aCcsXG4gICAgICAgICAgaW5pdGlhbFZhbHVlOiAnJ1xuICAgICAgICB9LFxuICAgICAgICBub3RfZW5kc193aXRoX2k6IHtcbiAgICAgICAgICBsYWJlbDogJ0RvZXMgbm90IGVuZCB3aXRoJyxcbiAgICAgICAgICBpbml0aWFsVmFsdWU6ICcnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG5leHBvcnRzLkNhcmRWYWx1ZSA9IENhcmRWYWx1ZTtcbmV4cG9ydHMuQ2VsbCA9IENlbGw7XG5leHBvcnRzLkZpZWxkID0gRmllbGQ7XG5leHBvcnRzLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/fields/types/text/views/dist/keystone-6-core-fields-types-text-views.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/fields/types/text/views/dist/keystone-6-core-fields-types-text-views.cjs.js":
/*!***********************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/fields/types/text/views/dist/keystone-6-core-fields-types-text-views.cjs.js ***!
  \***********************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./keystone-6-core-fields-types-text-views.cjs.dev.js */ \"../../node_modules/@keystone-6/core/fields/types/text/views/dist/keystone-6-core-fields-types-text-views.cjs.dev.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3RleHQvdmlld3MvZGlzdC9rZXlzdG9uZS02LWNvcmUtZmllbGRzLXR5cGVzLXRleHQtdmlld3MuY2pzLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQUksS0FBcUMsRUFBRSxFQUUxQyxDQUFDO0FBQ0YsRUFBRSx1TkFBZ0Y7QUFDbEYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3RleHQvdmlld3MvZGlzdC9rZXlzdG9uZS02LWNvcmUtZmllbGRzLXR5cGVzLXRleHQtdmlld3MuY2pzLmpzP2YwMTkiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4va2V5c3RvbmUtNi1jb3JlLWZpZWxkcy10eXBlcy10ZXh0LXZpZXdzLmNqcy5wcm9kLmpzXCIpO1xufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9rZXlzdG9uZS02LWNvcmUtZmllbGRzLXR5cGVzLXRleHQtdmlld3MuY2pzLmRldi5qc1wiKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/fields/types/text/views/dist/keystone-6-core-fields-types-text-views.cjs.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/fields/types/timestamp/views/dist/keystone-6-core-fields-types-timestamp-views.cjs.dev.js":
/*!*************************************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/fields/types/timestamp/views/dist/keystone-6-core-fields-types-timestamp-views.cjs.dev.js ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar _extends = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"../../node_modules/@babel/runtime/helpers/extends.js\");\nvar _objectSpread = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"../../node_modules/@babel/runtime/helpers/objectSpread2.js\");\nvar React = __webpack_require__(/*! react */ \"react\");\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar fields = __webpack_require__(/*! @keystone-ui/fields */ \"@keystone-ui/fields\");\nvar CellContainer = __webpack_require__(/*! ../../../../../dist/CellContainer-453254b5.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/CellContainer-453254b5.cjs.dev.js\");\nvar CellLink = __webpack_require__(/*! ../../../../../dist/CellLink-5308c32b.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/CellLink-5308c32b.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"../../node_modules/@babel/runtime/helpers/defineProperty.js\");\n__webpack_require__(/*! @keystone-ui/button */ \"@keystone-ui/button\");\n__webpack_require__(/*! @keystone-ui/icons/icons/AlertTriangleIcon */ \"@keystone-ui/icons/icons/AlertTriangleIcon\");\n__webpack_require__(/*! next/link */ \"../../node_modules/next/link.js\");\n__webpack_require__(/*! @keystone-ui/toast */ \"@keystone-ui/toast\");\n__webpack_require__(/*! @keystone-ui/loading */ \"@keystone-ui/loading\");\n__webpack_require__(/*! @keystone-ui/modals */ \"@keystone-ui/modals\");\n__webpack_require__(/*! apollo-upload-client */ \"apollo-upload-client\");\n__webpack_require__(/*! @emotion/hash */ \"@emotion/hash\");\n__webpack_require__(/*! ../../../../../dist/sqlite-a2385a81.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/sqlite-a2385a81.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\n__webpack_require__(/*! ../../../../../dist/graphql-ts-schema-2a220120.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/graphql-ts-schema-2a220120.cjs.dev.js\");\n__webpack_require__(/*! @apollo/client */ \"@apollo/client\");\n__webpack_require__(/*! ../../../../../dist/admin-meta-graphql-9f9a9c11.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/admin-meta-graphql-9f9a9c11.cjs.dev.js\");\n__webpack_require__(/*! next/router */ \"next/router\");\n__webpack_require__(/*! @keystone-ui/popover */ \"@keystone-ui/popover\");\n__webpack_require__(/*! @keystone-ui/icons/icons/MoreHorizontalIcon */ \"@keystone-ui/icons/icons/MoreHorizontalIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/ChevronRightIcon */ \"@keystone-ui/icons/icons/ChevronRightIcon\");\n__webpack_require__(/*! ../../../../../dist/SignoutButton-081410d6.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/SignoutButton-081410d6.cjs.dev.js\");\n__webpack_require__(/*! fast-deep-equal */ \"fast-deep-equal\");\n__webpack_require__(/*! @keystone-ui/notice */ \"@keystone-ui/notice\");\nvar utils = __webpack_require__(/*! ../../../../../dist/utils-1eb8e360.cjs.dev.js */ \"../../node_modules/@keystone-6/core/dist/utils-1eb8e360.cjs.dev.js\");\nvar dateFns = __webpack_require__(/*! date-fns */ \"date-fns\");\n__webpack_require__(/*! ../../../../../admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js */ \"../../node_modules/@keystone-6/core/admin-ui/router/dist/keystone-6-core-admin-ui-router.cjs.dev.js\");\n__webpack_require__(/*! decimal.js */ \"decimal.js\");\n__webpack_require__(/*! @graphql-tools/schema */ \"@graphql-tools/schema\");\n__webpack_require__(/*! @graphql-ts/schema/api-without-context */ \"@graphql-ts/schema/api-without-context\");\n__webpack_require__(/*! @graphql-ts/schema */ \"@graphql-ts/schema\");\n__webpack_require__(/*! graphql-type-json */ \"graphql-type-json\");\n__webpack_require__(/*! graphql-upload/public/GraphQLUpload.js */ \"graphql-upload/public/GraphQLUpload.js\");\n__webpack_require__(/*! graphql */ \"graphql\");\n__webpack_require__(/*! @graphql-ts/extend */ \"@graphql-ts/extend\");\n__webpack_require__(/*! @graphql-ts/schema/api-with-context */ \"@graphql-ts/schema/api-with-context\");\n\nconst FULL_TIME_PATTERN = 'HH:mm:ss.SSS';\n\nfunction formatFullTime(date) {\n  return dateFns.format(date, FULL_TIME_PATTERN);\n}\n\nfunction formatTime(time) {\n  const date = dateFns.parse(time, FULL_TIME_PATTERN, new Date());\n\n  if (date.getMilliseconds() !== 0) {\n    return dateFns.format(date, FULL_TIME_PATTERN);\n  }\n\n  if (date.getSeconds() !== 0) {\n    return dateFns.format(date, 'HH:mm:ss');\n  }\n\n  return dateFns.format(date, 'HH:mm');\n}\nfunction parseTime(time) {\n  for (const pattern of ['H:m:s.SSS', 'H:m:s', 'H:m', 'H']) {\n    const parsed = dateFns.parse(time, pattern, new Date());\n\n    if (dateFns.isValid(parsed)) {\n      return dateFns.format(parsed, FULL_TIME_PATTERN);\n    }\n  }\n\n  return undefined;\n}\nfunction constructTimestamp(_ref) {\n  let {\n    dateValue,\n    timeValue\n  } = _ref;\n  return new Date(`${dateValue}T${timeValue}`).toISOString();\n}\nfunction deconstructTimestamp(value) {\n  return {\n    dateValue: dateFns.formatISO(new Date(value), {\n      representation: 'date'\n    }),\n    timeValue: {\n      kind: 'parsed',\n      value: formatFullTime(new Date(value))\n    }\n  };\n}\nfunction formatOutput(value) {\n  if (!value) return '';\n  const date = new Date(value);\n  return date.toLocaleString();\n}\n\nconst Field = _ref => {\n  var _value$value$dateValu, _field$fieldMeta$defa;\n\n  let {\n    field,\n    value,\n    onChange,\n    forceValidation\n  } = _ref;\n  const [touchedFirstInput, setTouchedFirstInput] = React.useState(false);\n  const [touchedSecondInput, setTouchedSecondInput] = React.useState(false);\n  const showValidation = touchedFirstInput && touchedSecondInput || forceValidation;\n  const validationMessages = showValidation ? validate(value, field.fieldMeta, field.label) : undefined;\n  const timeInputProps = utils.useFormattedInput({\n    format(_ref2) {\n      let {\n        value\n      } = _ref2;\n\n      if (value === null) {\n        return '';\n      }\n\n      return formatTime(value);\n    },\n\n    parse(value) {\n      value = value.trim();\n\n      if (value === '') {\n        return {\n          kind: 'parsed',\n          value: null\n        };\n      }\n\n      const parsed = parseTime(value);\n\n      if (parsed !== undefined) {\n        return {\n          kind: 'parsed',\n          value: parsed\n        };\n      }\n\n      return value;\n    }\n\n  }, {\n    value: value.value.timeValue,\n\n    onChange(timeValue) {\n      onChange === null || onChange === void 0 ? void 0 : onChange(_objectSpread(_objectSpread({}, value), {}, {\n        value: _objectSpread(_objectSpread({}, value.value), {}, {\n          timeValue\n        })\n      }));\n    },\n\n    onBlur() {\n      setTouchedSecondInput(true);\n    }\n\n  });\n  return core.jsx(fields.FieldContainer, {\n    as: \"fieldset\"\n  }, core.jsx(core.Stack, null, core.jsx(fields.FieldLabel, {\n    as: \"legend\"\n  }, field.label), onChange ? core.jsx(core.Inline, {\n    gap: \"small\"\n  }, core.jsx(core.Stack, null, core.jsx(fields.DatePicker, {\n    onUpdate: date => {\n      onChange(_objectSpread(_objectSpread({}, value), {}, {\n        value: {\n          dateValue: date,\n          timeValue: typeof value.value.timeValue === 'object' && value.value.timeValue.value === null ? {\n            kind: 'parsed',\n            value: '00:00:00.000'\n          } : value.value.timeValue\n        }\n      }));\n    },\n    onClear: () => {\n      onChange(_objectSpread(_objectSpread({}, value), {}, {\n        value: _objectSpread(_objectSpread({}, value.value), {}, {\n          dateValue: null\n        })\n      }));\n    },\n    onBlur: () => setTouchedFirstInput(true),\n    value: (_value$value$dateValu = value.value.dateValue) !== null && _value$value$dateValu !== void 0 ? _value$value$dateValu : ''\n  }), (validationMessages === null || validationMessages === void 0 ? void 0 : validationMessages.date) && core.jsx(core.Text, {\n    color: \"red600\",\n    size: \"small\"\n  }, validationMessages.date)), core.jsx(core.Stack, null, core.jsx(core.VisuallyHidden, {\n    as: \"label\",\n    htmlFor: `${field.path}--time-input`\n  }, `${field.label} time field`), core.jsx(fields.TextInput, _extends({\n    id: `${field.path}--time-input`\n  }, timeInputProps, {\n    disabled: onChange === undefined,\n    placeholder: \"00:00\"\n  })), (validationMessages === null || validationMessages === void 0 ? void 0 : validationMessages.time) && core.jsx(core.Text, {\n    color: \"red600\",\n    size: \"small\"\n  }, validationMessages.time))) : value.value.dateValue !== null && typeof value.value.timeValue === 'object' && value.value.timeValue.value !== null && core.jsx(core.Text, null, formatOutput(constructTimestamp({\n    dateValue: value.value.dateValue,\n    timeValue: value.value.timeValue.value\n  }))), (value.kind === 'create' && typeof field.fieldMeta.defaultValue !== 'string' && ((_field$fieldMeta$defa = field.fieldMeta.defaultValue) === null || _field$fieldMeta$defa === void 0 ? void 0 : _field$fieldMeta$defa.kind) === 'now' || field.fieldMeta.updatedAt) && core.jsx(core.Text, null, \"When this item is saved, this field will be set to the current date and time\")));\n};\n\nfunction validate(value, fieldMeta, label) {\n  var _fieldMeta$defaultVal;\n\n  const val = value.value;\n  const hasDateValue = val.dateValue !== null;\n  const hasTimeValue = typeof val.timeValue === 'string' || typeof val.timeValue.value === 'string';\n  const isValueEmpty = !hasDateValue && !hasTimeValue; // if we recieve null initially on the item view and the current value is null,\n  // we should always allow saving it because:\n  // - the value might be null in the database and we don't want to prevent saving the whole item because of that\n  // - we might have null because of an access control error\n\n  if (value.kind === 'update' && value.initial === null && isValueEmpty) {\n    return undefined;\n  }\n\n  if (value.kind === 'create' && isValueEmpty && (typeof fieldMeta.defaultValue === 'object' && ((_fieldMeta$defaultVal = fieldMeta.defaultValue) === null || _fieldMeta$defaultVal === void 0 ? void 0 : _fieldMeta$defaultVal.kind) === 'now' || fieldMeta.updatedAt)) {\n    return undefined;\n  }\n\n  if (fieldMeta.isRequired && isValueEmpty) {\n    return {\n      date: `${label} is required`\n    };\n  }\n\n  if (hasDateValue && !hasTimeValue) {\n    return {\n      time: `${label} requires a time to be provided`\n    };\n  }\n\n  const timeError = typeof val.timeValue === 'string' ? `${label} requires a valid time in the format hh:mm` : undefined;\n\n  if (hasTimeValue && !hasDateValue) {\n    return {\n      date: `${label} requires a date to be selected`,\n      time: timeError\n    };\n  }\n\n  if (timeError) {\n    return {\n      time: timeError\n    };\n  }\n\n  return undefined;\n}\n\nconst Cell = _ref3 => {\n  let {\n    item,\n    field,\n    linkTo\n  } = _ref3;\n  let value = item[field.path];\n  return linkTo ? core.jsx(CellLink.CellLink, linkTo, formatOutput(value)) : core.jsx(CellContainer.CellContainer, null, formatOutput(value));\n};\nCell.supportsLinkTo = true;\nconst CardValue = _ref4 => {\n  let {\n    item,\n    field\n  } = _ref4;\n  return core.jsx(fields.FieldContainer, null, core.jsx(fields.FieldLabel, null, field.label), formatOutput(item[field.path]));\n};\nconst controller = config => {\n  return {\n    path: config.path,\n    label: config.label,\n    graphqlSelection: config.path,\n    fieldMeta: config.fieldMeta,\n    defaultValue: {\n      kind: 'create',\n      value: typeof config.fieldMeta.defaultValue === 'string' ? deconstructTimestamp(config.fieldMeta.defaultValue) : {\n        dateValue: null,\n        timeValue: {\n          kind: 'parsed',\n          value: null\n        }\n      }\n    },\n    deserialize: data => {\n      const value = data[config.path];\n      return {\n        kind: 'update',\n        initial: data[config.path],\n        value: value ? deconstructTimestamp(value) : {\n          dateValue: null,\n          timeValue: {\n            kind: 'parsed',\n            value: null\n          }\n        }\n      };\n    },\n    serialize: _ref5 => {\n      let {\n        value: {\n          dateValue,\n          timeValue\n        }\n      } = _ref5;\n\n      if (dateValue && typeof timeValue === 'object' && timeValue.value !== null) {\n        let formattedDate = constructTimestamp({\n          dateValue,\n          timeValue: timeValue.value\n        });\n        return {\n          [config.path]: formattedDate\n        };\n      }\n\n      return {\n        [config.path]: null\n      };\n    },\n    validate: value => validate(value, config.fieldMeta, config.label) === undefined\n  };\n};\n\nexports.CardValue = CardValue;\nexports.Cell = Cell;\nexports.Field = Field;\nexports.controller = controller;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3RpbWVzdGFtcC92aWV3cy9kaXN0L2tleXN0b25lLTYtY29yZS1maWVsZHMtdHlwZXMtdGltZXN0YW1wLXZpZXdzLmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDLEVBQUUsYUFBYSxFQUFDOztBQUU3RCxlQUFlLG1CQUFPLENBQUMsNEZBQWdDO0FBQ3ZELG9CQUFvQixtQkFBTyxDQUFDLHdHQUFzQztBQUNsRSxZQUFZLG1CQUFPLENBQUMsb0JBQU87QUFDM0IsV0FBVyxtQkFBTyxDQUFDLDRDQUFtQjtBQUN0QyxhQUFhLG1CQUFPLENBQUMsZ0RBQXFCO0FBQzFDLG9CQUFvQixtQkFBTyxDQUFDLHlJQUF1RDtBQUNuRixlQUFlLG1CQUFPLENBQUMsK0hBQWtEO0FBQ3pFLG1CQUFPLENBQUMsMEdBQXVDO0FBQy9DLG1CQUFPLENBQUMsZ0RBQXFCO0FBQzdCLG1CQUFPLENBQUMsOEZBQTRDO0FBQ3BELG1CQUFPLENBQUMsa0RBQVc7QUFDbkIsbUJBQU8sQ0FBQyw4Q0FBb0I7QUFDNUIsbUJBQU8sQ0FBQyxrREFBc0I7QUFDOUIsbUJBQU8sQ0FBQyxnREFBcUI7QUFDN0IsbUJBQU8sQ0FBQyxrREFBc0I7QUFDOUIsbUJBQU8sQ0FBQyxvQ0FBZTtBQUN2QixtQkFBTyxDQUFDLDJIQUFnRDtBQUN4RCxtQkFBTyxDQUFDLDRIQUFnRDtBQUN4RCxtQkFBTyxDQUFDLGlKQUEyRDtBQUNuRSxtQkFBTyxDQUFDLHNDQUFnQjtBQUN4QixtQkFBTyxDQUFDLG1KQUE0RDtBQUNwRSxtQkFBTyxDQUFDLGdDQUFhO0FBQ3JCLG1CQUFPLENBQUMsa0RBQXNCO0FBQzlCLG1CQUFPLENBQUMsZ0dBQTZDO0FBQ3JELG1CQUFPLENBQUMsNEZBQTJDO0FBQ25ELG1CQUFPLENBQUMseUlBQXVEO0FBQy9ELG1CQUFPLENBQUMsd0NBQWlCO0FBQ3pCLG1CQUFPLENBQUMsZ0RB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Q0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTs7QUFFUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBLGlCQUFpQjtBQUNqQixZQUFZO0FBQ1osYUFBYTtBQUNiLGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvQGtleXN0b25lLTYvY29yZS9maWVsZHMvdHlwZXMvdGltZXN0YW1wL3ZpZXdzL2Rpc3Qva2V5c3RvbmUtNi1jb3JlLWZpZWxkcy10eXBlcy10aW1lc3RhbXAtdmlld3MuY2pzLmRldi5qcz84NTk1Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIF9leHRlbmRzID0gcmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzJyk7XG52YXIgX29iamVjdFNwcmVhZCA9IHJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0U3ByZWFkMicpO1xudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBjb3JlID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2NvcmUnKTtcbnZhciBmaWVsZHMgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvZmllbGRzJyk7XG52YXIgQ2VsbENvbnRhaW5lciA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2Rpc3QvQ2VsbENvbnRhaW5lci00NTMyNTRiNS5janMuZGV2LmpzJyk7XG52YXIgQ2VsbExpbmsgPSByZXF1aXJlKCcuLi8uLi8uLi8uLi8uLi9kaXN0L0NlbGxMaW5rLTUzMDhjMzJiLmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHknKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9idXR0b24nKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9BbGVydFRyaWFuZ2xlSWNvbicpO1xucmVxdWlyZSgnbmV4dC9saW5rJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvdG9hc3QnKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9sb2FkaW5nJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvbW9kYWxzJyk7XG5yZXF1aXJlKCdhcG9sbG8tdXBsb2FkLWNsaWVudCcpO1xucmVxdWlyZSgnQGVtb3Rpb24vaGFzaCcpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9zcWxpdGUtYTIzODVhODEuY2pzLmRldi5qcycpO1xucmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9ncmFwaHFsLXRzLXNjaGVtYS0yYTIyMDEyMC5janMuZGV2LmpzJyk7XG5yZXF1aXJlKCdAYXBvbGxvL2NsaWVudCcpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9hZG1pbi1tZXRhLWdyYXBocWwtOWY5YTljMTEuY2pzLmRldi5qcycpO1xucmVxdWlyZSgnbmV4dC9yb3V0ZXInKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9wb3BvdmVyJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvTW9yZUhvcml6b250YWxJY29uJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvQ2hldnJvblJpZ2h0SWNvbicpO1xucmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC9TaWdub3V0QnV0dG9uLTA4MTQxMGQ2LmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ2Zhc3QtZGVlcC1lcXVhbCcpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL25vdGljZScpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vZGlzdC91dGlscy0xZWI4ZTM2MC5janMuZGV2LmpzJyk7XG52YXIgZGF0ZUZucyA9IHJlcXVpcmUoJ2RhdGUtZm5zJyk7XG5yZXF1aXJlKCcuLi8uLi8uLi8uLi8uLi9hZG1pbi11aS9yb3V0ZXIvZGlzdC9rZXlzdG9uZS02LWNvcmUtYWRtaW4tdWktcm91dGVyLmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ2RlY2ltYWwuanMnKTtcbnJlcXVpcmUoJ0BncmFwaHFsLXRvb2xzL3NjaGVtYScpO1xucmVxdWlyZSgnQGdyYXBocWwtdHMvc2NoZW1hL2FwaS13aXRob3V0LWNvbnRleHQnKTtcbnJlcXVpcmUoJ0BncmFwaHFsLXRzL3NjaGVtYScpO1xucmVxdWlyZSgnZ3JhcGhxbC10eXBlLWpzb24nKTtcbnJlcXVpcmUoJ2dyYXBocWwtdXBsb2FkL3B1YmxpYy9HcmFwaFFMVXBsb2FkLmpzJyk7XG5yZXF1aXJlKCdncmFwaHFsJyk7XG5yZXF1aXJlKCdAZ3JhcGhxbC10cy9leHRlbmQnKTtcbnJlcXVpcmUoJ0BncmFwaHFsLXRzL3NjaGVtYS9hcGktd2l0aC1jb250ZXh0Jyk7XG5cbmNvbnN0IEZVTExfVElNRV9QQVRURVJOID0gJ0hIOm1tOnNzLlNTUyc7XG5cbmZ1bmN0aW9uIGZvcm1hdEZ1bGxUaW1lKGRhdGUpIHtcbiAgcmV0dXJuIGRhdGVGbnMuZm9ybWF0KGRhdGUsIEZVTExfVElNRV9QQVRURVJOKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VGltZSh0aW1lKSB7XG4gIGNvbnN0IGRhdGUgPSBkYXRlRm5zLnBhcnNlKHRpbWUsIEZVTExfVElNRV9QQVRURVJOLCBuZXcgRGF0ZSgpKTtcblxuICBpZiAoZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSAhPT0gMCkge1xuICAgIHJldHVybiBkYXRlRm5zLmZvcm1hdChkYXRlLCBGVUxMX1RJTUVfUEFUVEVSTik7XG4gIH1cblxuICBpZiAoZGF0ZS5nZXRTZWNvbmRzKCkgIT09IDApIHtcbiAgICByZXR1cm4gZGF0ZUZucy5mb3JtYXQoZGF0ZSwgJ0hIOm1tOnNzJyk7XG4gIH1cblxuICByZXR1cm4gZGF0ZUZucy5mb3JtYXQoZGF0ZSwgJ0hIOm1tJyk7XG59XG5mdW5jdGlvbiBwYXJzZVRpbWUodGltZSkge1xuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgWydIOm06cy5TU1MnLCAnSDptOnMnLCAnSDptJywgJ0gnXSkge1xuICAgIGNvbnN0IHBhcnNlZCA9IGRhdGVGbnMucGFyc2UodGltZSwgcGF0dGVybiwgbmV3IERhdGUoKSk7XG5cbiAgICBpZiAoZGF0ZUZucy5pc1ZhbGlkKHBhcnNlZCkpIHtcbiAgICAgIHJldHVybiBkYXRlRm5zLmZvcm1hdChwYXJzZWQsIEZVTExfVElNRV9QQVRURVJOKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gY29uc3RydWN0VGltZXN0YW1wKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBkYXRlVmFsdWUsXG4gICAgdGltZVZhbHVlXG4gIH0gPSBfcmVmO1xuICByZXR1cm4gbmV3IERhdGUoYCR7ZGF0ZVZhbHVlfVQke3RpbWVWYWx1ZX1gKS50b0lTT1N0cmluZygpO1xufVxuZnVuY3Rpb24gZGVjb25zdHJ1Y3RUaW1lc3RhbXAodmFsdWUpIHtcbiAgcmV0dXJuIHtcbiAgICBkYXRlVmFsdWU6IGRhdGVGbnMuZm9ybWF0SVNPKG5ldyBEYXRlKHZhbHVlKSwge1xuICAgICAgcmVwcmVzZW50YXRpb246ICdkYXRlJ1xuICAgIH0pLFxuICAgIHRpbWVWYWx1ZToge1xuICAgICAga2luZDogJ3BhcnNlZCcsXG4gICAgICB2YWx1ZTogZm9ybWF0RnVsbFRpbWUobmV3IERhdGUodmFsdWUpKVxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGZvcm1hdE91dHB1dCh2YWx1ZSkge1xuICBpZiAoIXZhbHVlKSByZXR1cm4gJyc7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gIHJldHVybiBkYXRlLnRvTG9jYWxlU3RyaW5nKCk7XG59XG5cbmNvbnN0IEZpZWxkID0gX3JlZiA9PiB7XG4gIHZhciBfdmFsdWUkdmFsdWUkZGF0ZVZhbHUsIF9maWVsZCRmaWVsZE1ldGEkZGVmYTtcblxuICBsZXQge1xuICAgIGZpZWxkLFxuICAgIHZhbHVlLFxuICAgIG9uQ2hhbmdlLFxuICAgIGZvcmNlVmFsaWRhdGlvblxuICB9ID0gX3JlZjtcbiAgY29uc3QgW3RvdWNoZWRGaXJzdElucHV0LCBzZXRUb3VjaGVkRmlyc3RJbnB1dF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt0b3VjaGVkU2Vjb25kSW5wdXQsIHNldFRvdWNoZWRTZWNvbmRJbnB1dF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHNob3dWYWxpZGF0aW9uID0gdG91Y2hlZEZpcnN0SW5wdXQgJiYgdG91Y2hlZFNlY29uZElucHV0IHx8IGZvcmNlVmFsaWRhdGlvbjtcbiAgY29uc3QgdmFsaWRhdGlvbk1lc3NhZ2VzID0gc2hvd1ZhbGlkYXRpb24gPyB2YWxpZGF0ZSh2YWx1ZSwgZmllbGQuZmllbGRNZXRhLCBmaWVsZC5sYWJlbCkgOiB1bmRlZmluZWQ7XG4gIGNvbnN0IHRpbWVJbnB1dFByb3BzID0gdXRpbHMudXNlRm9ybWF0dGVkSW5wdXQoe1xuICAgIGZvcm1hdChfcmVmMikge1xuICAgICAgbGV0IHtcbiAgICAgICAgdmFsdWVcbiAgICAgIH0gPSBfcmVmMjtcblxuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZvcm1hdFRpbWUodmFsdWUpO1xuICAgIH0sXG5cbiAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG5cbiAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBraW5kOiAncGFyc2VkJyxcbiAgICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZVRpbWUodmFsdWUpO1xuXG4gICAgICBpZiAocGFyc2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBraW5kOiAncGFyc2VkJyxcbiAgICAgICAgICB2YWx1ZTogcGFyc2VkXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgfSwge1xuICAgIHZhbHVlOiB2YWx1ZS52YWx1ZS50aW1lVmFsdWUsXG5cbiAgICBvbkNoYW5nZSh0aW1lVmFsdWUpIHtcbiAgICAgIG9uQ2hhbmdlID09PSBudWxsIHx8IG9uQ2hhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkNoYW5nZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhbHVlKSwge30sIHtcbiAgICAgICAgdmFsdWU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFsdWUudmFsdWUpLCB7fSwge1xuICAgICAgICAgIHRpbWVWYWx1ZVxuICAgICAgICB9KVxuICAgICAgfSkpO1xuICAgIH0sXG5cbiAgICBvbkJsdXIoKSB7XG4gICAgICBzZXRUb3VjaGVkU2Vjb25kSW5wdXQodHJ1ZSk7XG4gICAgfVxuXG4gIH0pO1xuICByZXR1cm4gY29yZS5qc3goZmllbGRzLkZpZWxkQ29udGFpbmVyLCB7XG4gICAgYXM6IFwiZmllbGRzZXRcIlxuICB9LCBjb3JlLmpzeChjb3JlLlN0YWNrLCBudWxsLCBjb3JlLmpzeChmaWVsZHMuRmllbGRMYWJlbCwge1xuICAgIGFzOiBcImxlZ2VuZFwiXG4gIH0sIGZpZWxkLmxhYmVsKSwgb25DaGFuZ2UgPyBjb3JlLmpzeChjb3JlLklubGluZSwge1xuICAgIGdhcDogXCJzbWFsbFwiXG4gIH0sIGNvcmUuanN4KGNvcmUuU3RhY2ssIG51bGwsIGNvcmUuanN4KGZpZWxkcy5EYXRlUGlja2VyLCB7XG4gICAgb25VcGRhdGU6IGRhdGUgPT4ge1xuICAgICAgb25DaGFuZ2UoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZSksIHt9LCB7XG4gICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgZGF0ZVZhbHVlOiBkYXRlLFxuICAgICAgICAgIHRpbWVWYWx1ZTogdHlwZW9mIHZhbHVlLnZhbHVlLnRpbWVWYWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUudmFsdWUudGltZVZhbHVlLnZhbHVlID09PSBudWxsID8ge1xuICAgICAgICAgICAga2luZDogJ3BhcnNlZCcsXG4gICAgICAgICAgICB2YWx1ZTogJzAwOjAwOjAwLjAwMCdcbiAgICAgICAgICB9IDogdmFsdWUudmFsdWUudGltZVZhbHVlXG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIG9uQ2xlYXI6ICgpID0+IHtcbiAgICAgIG9uQ2hhbmdlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFsdWUpLCB7fSwge1xuICAgICAgICB2YWx1ZTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZS52YWx1ZSksIHt9LCB7XG4gICAgICAgICAgZGF0ZVZhbHVlOiBudWxsXG4gICAgICAgIH0pXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBvbkJsdXI6ICgpID0+IHNldFRvdWNoZWRGaXJzdElucHV0KHRydWUpLFxuICAgIHZhbHVlOiAoX3ZhbHVlJHZhbHVlJGRhdGVWYWx1ID0gdmFsdWUudmFsdWUuZGF0ZVZhbHVlKSAhPT0gbnVsbCAmJiBfdmFsdWUkdmFsdWUkZGF0ZVZhbHUgIT09IHZvaWQgMCA/IF92YWx1ZSR2YWx1ZSRkYXRlVmFsdSA6ICcnXG4gIH0pLCAodmFsaWRhdGlvbk1lc3NhZ2VzID09PSBudWxsIHx8IHZhbGlkYXRpb25NZXNzYWdlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsaWRhdGlvbk1lc3NhZ2VzLmRhdGUpICYmIGNvcmUuanN4KGNvcmUuVGV4dCwge1xuICAgIGNvbG9yOiBcInJlZDYwMFwiLFxuICAgIHNpemU6IFwic21hbGxcIlxuICB9LCB2YWxpZGF0aW9uTWVzc2FnZXMuZGF0ZSkpLCBjb3JlLmpzeChjb3JlLlN0YWNrLCBudWxsLCBjb3JlLmpzeChjb3JlLlZpc3VhbGx5SGlkZGVuLCB7XG4gICAgYXM6IFwibGFiZWxcIixcbiAgICBodG1sRm9yOiBgJHtmaWVsZC5wYXRofS0tdGltZS1pbnB1dGBcbiAgfSwgYCR7ZmllbGQubGFiZWx9IHRpbWUgZmllbGRgKSwgY29yZS5qc3goZmllbGRzLlRleHRJbnB1dCwgX2V4dGVuZHMoe1xuICAgIGlkOiBgJHtmaWVsZC5wYXRofS0tdGltZS1pbnB1dGBcbiAgfSwgdGltZUlucHV0UHJvcHMsIHtcbiAgICBkaXNhYmxlZDogb25DaGFuZ2UgPT09IHVuZGVmaW5lZCxcbiAgICBwbGFjZWhvbGRlcjogXCIwMDowMFwiXG4gIH0pKSwgKHZhbGlkYXRpb25NZXNzYWdlcyA9PT0gbnVsbCB8fCB2YWxpZGF0aW9uTWVzc2FnZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb25NZXNzYWdlcy50aW1lKSAmJiBjb3JlLmpzeChjb3JlLlRleHQsIHtcbiAgICBjb2xvcjogXCJyZWQ2MDBcIixcbiAgICBzaXplOiBcInNtYWxsXCJcbiAgfSwgdmFsaWRhdGlvbk1lc3NhZ2VzLnRpbWUpKSkgOiB2YWx1ZS52YWx1ZS5kYXRlVmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlLnZhbHVlLnRpbWVWYWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUudmFsdWUudGltZVZhbHVlLnZhbHVlICE9PSBudWxsICYmIGNvcmUuanN4KGNvcmUuVGV4dCwgbnVsbCwgZm9ybWF0T3V0cHV0KGNvbnN0cnVjdFRpbWVzdGFtcCh7XG4gICAgZGF0ZVZhbHVlOiB2YWx1ZS52YWx1ZS5kYXRlVmFsdWUsXG4gICAgdGltZVZhbHVlOiB2YWx1ZS52YWx1ZS50aW1lVmFsdWUudmFsdWVcbiAgfSkpKSwgKHZhbHVlLmtpbmQgPT09ICdjcmVhdGUnICYmIHR5cGVvZiBmaWVsZC5maWVsZE1ldGEuZGVmYXVsdFZhbHVlICE9PSAnc3RyaW5nJyAmJiAoKF9maWVsZCRmaWVsZE1ldGEkZGVmYSA9IGZpZWxkLmZpZWxkTWV0YS5kZWZhdWx0VmFsdWUpID09PSBudWxsIHx8IF9maWVsZCRmaWVsZE1ldGEkZGVmYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ZpZWxkJGZpZWxkTWV0YSRkZWZhLmtpbmQpID09PSAnbm93JyB8fCBmaWVsZC5maWVsZE1ldGEudXBkYXRlZEF0KSAmJiBjb3JlLmpzeChjb3JlLlRleHQsIG51bGwsIFwiV2hlbiB0aGlzIGl0ZW0gaXMgc2F2ZWQsIHRoaXMgZmllbGQgd2lsbCBiZSBzZXQgdG8gdGhlIGN1cnJlbnQgZGF0ZSBhbmQgdGltZVwiKSkpO1xufTtcblxuZnVuY3Rpb24gdmFsaWRhdGUodmFsdWUsIGZpZWxkTWV0YSwgbGFiZWwpIHtcbiAgdmFyIF9maWVsZE1ldGEkZGVmYXVsdFZhbDtcblxuICBjb25zdCB2YWwgPSB2YWx1ZS52YWx1ZTtcbiAgY29uc3QgaGFzRGF0ZVZhbHVlID0gdmFsLmRhdGVWYWx1ZSAhPT0gbnVsbDtcbiAgY29uc3QgaGFzVGltZVZhbHVlID0gdHlwZW9mIHZhbC50aW1lVmFsdWUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2YWwudGltZVZhbHVlLnZhbHVlID09PSAnc3RyaW5nJztcbiAgY29uc3QgaXNWYWx1ZUVtcHR5ID0gIWhhc0RhdGVWYWx1ZSAmJiAhaGFzVGltZVZhbHVlOyAvLyBpZiB3ZSByZWNpZXZlIG51bGwgaW5pdGlhbGx5IG9uIHRoZSBpdGVtIHZpZXcgYW5kIHRoZSBjdXJyZW50IHZhbHVlIGlzIG51bGwsXG4gIC8vIHdlIHNob3VsZCBhbHdheXMgYWxsb3cgc2F2aW5nIGl0IGJlY2F1c2U6XG4gIC8vIC0gdGhlIHZhbHVlIG1pZ2h0IGJlIG51bGwgaW4gdGhlIGRhdGFiYXNlIGFuZCB3ZSBkb24ndCB3YW50IHRvIHByZXZlbnQgc2F2aW5nIHRoZSB3aG9sZSBpdGVtIGJlY2F1c2Ugb2YgdGhhdFxuICAvLyAtIHdlIG1pZ2h0IGhhdmUgbnVsbCBiZWNhdXNlIG9mIGFuIGFjY2VzcyBjb250cm9sIGVycm9yXG5cbiAgaWYgKHZhbHVlLmtpbmQgPT09ICd1cGRhdGUnICYmIHZhbHVlLmluaXRpYWwgPT09IG51bGwgJiYgaXNWYWx1ZUVtcHR5KSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmICh2YWx1ZS5raW5kID09PSAnY3JlYXRlJyAmJiBpc1ZhbHVlRW1wdHkgJiYgKHR5cGVvZiBmaWVsZE1ldGEuZGVmYXVsdFZhbHVlID09PSAnb2JqZWN0JyAmJiAoKF9maWVsZE1ldGEkZGVmYXVsdFZhbCA9IGZpZWxkTWV0YS5kZWZhdWx0VmFsdWUpID09PSBudWxsIHx8IF9maWVsZE1ldGEkZGVmYXVsdFZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ZpZWxkTWV0YSRkZWZhdWx0VmFsLmtpbmQpID09PSAnbm93JyB8fCBmaWVsZE1ldGEudXBkYXRlZEF0KSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAoZmllbGRNZXRhLmlzUmVxdWlyZWQgJiYgaXNWYWx1ZUVtcHR5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGU6IGAke2xhYmVsfSBpcyByZXF1aXJlZGBcbiAgICB9O1xuICB9XG5cbiAgaWYgKGhhc0RhdGVWYWx1ZSAmJiAhaGFzVGltZVZhbHVlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpbWU6IGAke2xhYmVsfSByZXF1aXJlcyBhIHRpbWUgdG8gYmUgcHJvdmlkZWRgXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHRpbWVFcnJvciA9IHR5cGVvZiB2YWwudGltZVZhbHVlID09PSAnc3RyaW5nJyA/IGAke2xhYmVsfSByZXF1aXJlcyBhIHZhbGlkIHRpbWUgaW4gdGhlIGZvcm1hdCBoaDptbWAgOiB1bmRlZmluZWQ7XG5cbiAgaWYgKGhhc1RpbWVWYWx1ZSAmJiAhaGFzRGF0ZVZhbHVlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGU6IGAke2xhYmVsfSByZXF1aXJlcyBhIGRhdGUgdG8gYmUgc2VsZWN0ZWRgLFxuICAgICAgdGltZTogdGltZUVycm9yXG4gICAgfTtcbiAgfVxuXG4gIGlmICh0aW1lRXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGltZTogdGltZUVycm9yXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmNvbnN0IENlbGwgPSBfcmVmMyA9PiB7XG4gIGxldCB7XG4gICAgaXRlbSxcbiAgICBmaWVsZCxcbiAgICBsaW5rVG9cbiAgfSA9IF9yZWYzO1xuICBsZXQgdmFsdWUgPSBpdGVtW2ZpZWxkLnBhdGhdO1xuICByZXR1cm4gbGlua1RvID8gY29yZS5qc3goQ2VsbExpbmsuQ2VsbExpbmssIGxpbmtUbywgZm9ybWF0T3V0cHV0KHZhbHVlKSkgOiBjb3JlLmpzeChDZWxsQ29udGFpbmVyLkNlbGxDb250YWluZXIsIG51bGwsIGZvcm1hdE91dHB1dCh2YWx1ZSkpO1xufTtcbkNlbGwuc3VwcG9ydHNMaW5rVG8gPSB0cnVlO1xuY29uc3QgQ2FyZFZhbHVlID0gX3JlZjQgPT4ge1xuICBsZXQge1xuICAgIGl0ZW0sXG4gICAgZmllbGRcbiAgfSA9IF9yZWY0O1xuICByZXR1cm4gY29yZS5qc3goZmllbGRzLkZpZWxkQ29udGFpbmVyLCBudWxsLCBjb3JlLmpzeChmaWVsZHMuRmllbGRMYWJlbCwgbnVsbCwgZmllbGQubGFiZWwpLCBmb3JtYXRPdXRwdXQoaXRlbVtmaWVsZC5wYXRoXSkpO1xufTtcbmNvbnN0IGNvbnRyb2xsZXIgPSBjb25maWcgPT4ge1xuICByZXR1cm4ge1xuICAgIHBhdGg6IGNvbmZpZy5wYXRoLFxuICAgIGxhYmVsOiBjb25maWcubGFiZWwsXG4gICAgZ3JhcGhxbFNlbGVjdGlvbjogY29uZmlnLnBhdGgsXG4gICAgZmllbGRNZXRhOiBjb25maWcuZmllbGRNZXRhLFxuICAgIGRlZmF1bHRWYWx1ZToge1xuICAgICAga2luZDogJ2NyZWF0ZScsXG4gICAgICB2YWx1ZTogdHlwZW9mIGNvbmZpZy5maWVsZE1ldGEuZGVmYXVsdFZhbHVlID09PSAnc3RyaW5nJyA/IGRlY29uc3RydWN0VGltZXN0YW1wKGNvbmZpZy5maWVsZE1ldGEuZGVmYXVsdFZhbHVlKSA6IHtcbiAgICAgICAgZGF0ZVZhbHVlOiBudWxsLFxuICAgICAgICB0aW1lVmFsdWU6IHtcbiAgICAgICAgICBraW5kOiAncGFyc2VkJyxcbiAgICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBkZXNlcmlhbGl6ZTogZGF0YSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGRhdGFbY29uZmlnLnBhdGhdO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2luZDogJ3VwZGF0ZScsXG4gICAgICAgIGluaXRpYWw6IGRhdGFbY29uZmlnLnBhdGhdLFxuICAgICAgICB2YWx1ZTogdmFsdWUgPyBkZWNvbnN0cnVjdFRpbWVzdGFtcCh2YWx1ZSkgOiB7XG4gICAgICAgICAgZGF0ZVZhbHVlOiBudWxsLFxuICAgICAgICAgIHRpbWVWYWx1ZToge1xuICAgICAgICAgICAga2luZDogJ3BhcnNlZCcsXG4gICAgICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZTogX3JlZjUgPT4ge1xuICAgICAgbGV0IHtcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICBkYXRlVmFsdWUsXG4gICAgICAgICAgdGltZVZhbHVlXG4gICAgICAgIH1cbiAgICAgIH0gPSBfcmVmNTtcblxuICAgICAgaWYgKGRhdGVWYWx1ZSAmJiB0eXBlb2YgdGltZVZhbHVlID09PSAnb2JqZWN0JyAmJiB0aW1lVmFsdWUudmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgbGV0IGZvcm1hdHRlZERhdGUgPSBjb25zdHJ1Y3RUaW1lc3RhbXAoe1xuICAgICAgICAgIGRhdGVWYWx1ZSxcbiAgICAgICAgICB0aW1lVmFsdWU6IHRpbWVWYWx1ZS52YWx1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBbY29uZmlnLnBhdGhdOiBmb3JtYXR0ZWREYXRlXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIFtjb25maWcucGF0aF06IG51bGxcbiAgICAgIH07XG4gICAgfSxcbiAgICB2YWxpZGF0ZTogdmFsdWUgPT4gdmFsaWRhdGUodmFsdWUsIGNvbmZpZy5maWVsZE1ldGEsIGNvbmZpZy5sYWJlbCkgPT09IHVuZGVmaW5lZFxuICB9O1xufTtcblxuZXhwb3J0cy5DYXJkVmFsdWUgPSBDYXJkVmFsdWU7XG5leHBvcnRzLkNlbGwgPSBDZWxsO1xuZXhwb3J0cy5GaWVsZCA9IEZpZWxkO1xuZXhwb3J0cy5jb250cm9sbGVyID0gY29udHJvbGxlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/fields/types/timestamp/views/dist/keystone-6-core-fields-types-timestamp-views.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/core/fields/types/timestamp/views/dist/keystone-6-core-fields-types-timestamp-views.cjs.js":
/*!*********************************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/core/fields/types/timestamp/views/dist/keystone-6-core-fields-types-timestamp-views.cjs.js ***!
  \*********************************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./keystone-6-core-fields-types-timestamp-views.cjs.dev.js */ \"../../node_modules/@keystone-6/core/fields/types/timestamp/views/dist/keystone-6-core-fields-types-timestamp-views.cjs.dev.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvZmllbGRzL3R5cGVzL3RpbWVzdGFtcC92aWV3cy9kaXN0L2tleXN0b25lLTYtY29yZS1maWVsZHMtdHlwZXMtdGltZXN0YW1wLXZpZXdzLmNqcy5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixJQUFJLEtBQXFDLEVBQUUsRUFFMUMsQ0FBQztBQUNGLEVBQUUsc09BQXFGO0FBQ3ZGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2ZpZWxkcy90eXBlcy90aW1lc3RhbXAvdmlld3MvZGlzdC9rZXlzdG9uZS02LWNvcmUtZmllbGRzLXR5cGVzLXRpbWVzdGFtcC12aWV3cy5janMuanM/YzM0OSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9rZXlzdG9uZS02LWNvcmUtZmllbGRzLXR5cGVzLXRpbWVzdGFtcC12aWV3cy5janMucHJvZC5qc1wiKTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4va2V5c3RvbmUtNi1jb3JlLWZpZWxkcy10eXBlcy10aW1lc3RhbXAtdmlld3MuY2pzLmRldi5qc1wiKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/core/fields/types/timestamp/views/dist/keystone-6-core-fields-types-timestamp-views.cjs.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/fields-document/dist/api-fdd916d1.cjs.dev.js":
/*!***********************************************************************************!*\
  !*** ../../node_modules/@keystone-6/fields-document/dist/api-fdd916d1.cjs.dev.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar _extends = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"../../node_modules/@babel/runtime/helpers/extends.js\");\nvar _objectWithoutProperties = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar fields$1 = __webpack_require__(/*! @keystone-ui/fields */ \"@keystone-ui/fields\");\nvar React = __webpack_require__(/*! react */ \"react\");\nvar sanitizeUrl = __webpack_require__(/*! @braintree/sanitize-url */ \"@braintree/sanitize-url\");\n\nfunction isValidURL(url) {\n  return url === sanitizeUrl.sanitizeUrl(url);\n}\n\nconst _excluded = [\"children\"];\nconst fields = {\n  text(_ref) {\n    let {\n      label,\n      defaultValue = ''\n    } = _ref;\n    return {\n      kind: 'form',\n\n      Input(_ref2) {\n        let {\n          value,\n          onChange,\n          autoFocus\n        } = _ref2;\n        return core.jsx(fields$1.FieldContainer, null, core.jsx(fields$1.FieldLabel, null, label), core.jsx(fields$1.TextInput, {\n          autoFocus: autoFocus,\n          value: value,\n          onChange: event => {\n            onChange(event.target.value);\n          }\n        }));\n      },\n\n      options: undefined,\n      defaultValue,\n\n      validate(value) {\n        return typeof value === 'string';\n      }\n\n    };\n  },\n\n  url(_ref3) {\n    let {\n      label,\n      defaultValue = ''\n    } = _ref3;\n\n    const validate = value => {\n      return typeof value === 'string' && (value === '' || isValidURL(value));\n    };\n\n    return {\n      kind: 'form',\n\n      Input(_ref4) {\n        let {\n          value,\n          onChange,\n          autoFocus,\n          forceValidation\n        } = _ref4;\n        const [blurred, setBlurred] = React.useState(false);\n        const showValidation = forceValidation || blurred && !validate(value);\n        return core.jsx(fields$1.FieldContainer, null, core.jsx(fields$1.FieldLabel, null, label), core.jsx(fields$1.TextInput, {\n          onBlur: () => {\n            setBlurred(true);\n          },\n          autoFocus: autoFocus,\n          value: value,\n          onChange: event => {\n            onChange(event.target.value);\n          }\n        }), showValidation && core.jsx(\"span\", {\n          css: {\n            color: 'red'\n          }\n        }, \"Please provide a valid URL\"));\n      },\n\n      options: undefined,\n      defaultValue,\n      validate\n    };\n  },\n\n  select(_ref5) {\n    let {\n      label,\n      options,\n      defaultValue\n    } = _ref5;\n    const optionValuesSet = new Set(options.map(x => x.value));\n    return {\n      kind: 'form',\n\n      Input(_ref6) {\n        let {\n          value,\n          onChange,\n          autoFocus\n        } = _ref6;\n        return core.jsx(fields$1.FieldContainer, null, core.jsx(fields$1.FieldLabel, null, label), core.jsx(fields$1.Select, {\n          autoFocus: autoFocus,\n          value: options.find(option => option.value === value) || null,\n          onChange: option => {\n            if (option) {\n              onChange(option.value);\n            }\n          },\n          options: options\n        }));\n      },\n\n      options,\n      defaultValue,\n\n      validate(value) {\n        return typeof value === 'string' && optionValuesSet.has(value);\n      }\n\n    };\n  },\n\n  multiselect(_ref7) {\n    let {\n      label,\n      options,\n      defaultValue\n    } = _ref7;\n    const valuesToOption = new Map(options.map(x => [x.value, x]));\n    return {\n      kind: 'form',\n\n      Input(_ref8) {\n        let {\n          value,\n          onChange,\n          autoFocus\n        } = _ref8;\n        return core.jsx(fields$1.FieldContainer, null, core.jsx(fields$1.FieldLabel, null, label), core.jsx(fields$1.MultiSelect, {\n          autoFocus: autoFocus,\n          value: value.map(x => valuesToOption.get(x)),\n          options: options,\n          onChange: options => {\n            onChange(options.map(x => x.value));\n          }\n        }));\n      },\n\n      options,\n      defaultValue,\n\n      validate(value) {\n        return Array.isArray(value) && value.every(value => typeof value === 'string' && valuesToOption.has(value));\n      }\n\n    };\n  },\n\n  checkbox(_ref9) {\n    let {\n      label,\n      defaultValue = false\n    } = _ref9;\n    return {\n      kind: 'form',\n\n      Input(_ref10) {\n        let {\n          value,\n          onChange,\n          autoFocus\n        } = _ref10;\n        return core.jsx(fields$1.FieldContainer, null, core.jsx(fields$1.Checkbox, {\n          checked: value,\n          autoFocus: autoFocus,\n          onChange: event => {\n            onChange(event.target.checked);\n          }\n        }, label));\n      },\n\n      options: undefined,\n      defaultValue,\n\n      validate(value) {\n        return typeof value === 'boolean';\n      }\n\n    };\n  },\n\n  empty() {\n    return {\n      kind: 'form',\n\n      Input() {\n        return null;\n      },\n\n      options: undefined,\n      defaultValue: undefined,\n\n      validate(value) {\n        return value === undefined;\n      }\n\n    };\n  },\n\n  child(options) {\n    return {\n      kind: 'child',\n      options: options.kind === 'block' ? {\n        kind: 'block',\n        placeholder: options.placeholder,\n        dividers: options.dividers,\n        formatting: options.formatting === 'inherit' ? {\n          blockTypes: 'inherit',\n          headingLevels: 'inherit',\n          inlineMarks: 'inherit',\n          listTypes: 'inherit',\n          alignment: 'inherit',\n          softBreaks: 'inherit'\n        } : options.formatting,\n        links: options.links,\n        relationships: options.relationships\n      } : {\n        kind: 'inline',\n        placeholder: options.placeholder,\n        formatting: options.formatting === 'inherit' ? {\n          inlineMarks: 'inherit',\n          softBreaks: 'inherit'\n        } : options.formatting,\n        links: options.links,\n        relationships: options.relationships\n      }\n    };\n  },\n\n  object(value) {\n    return {\n      kind: 'object',\n      value\n    };\n  },\n\n  conditional(discriminant, values) {\n    return {\n      kind: 'conditional',\n      discriminant,\n      values: values\n    };\n  },\n\n  relationship(_ref11) {\n    let {\n      relationship,\n      label\n    } = _ref11;\n    return {\n      kind: 'relationship',\n      relationship,\n      label\n    };\n  }\n\n};\nfunction component(options) {\n  return options;\n}\nconst NotEditable = _ref12 => {\n  let {\n    children\n  } = _ref12,\n      props = _objectWithoutProperties(_ref12, _excluded);\n\n  return core.jsx(\"span\", _extends({\n    css: {\n      userSelect: 'none'\n    },\n    contentEditable: false\n  }, props), children);\n};\n\nexports.NotEditable = NotEditable;\nexports.component = component;\nexports.fields = fields;\nexports.isValidURL = isValidURL;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2ZpZWxkcy1kb2N1bWVudC9kaXN0L2FwaS1mZGQ5MTZkMS5janMuZGV2LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGVBQWUsbUJBQU8sQ0FBQyw0RkFBZ0M7QUFDdkQsK0JBQStCLG1CQUFPLENBQUMsNEhBQWdEO0FBQ3ZGLFdBQVcsbUJBQU8sQ0FBQyw0Q0FBbUI7QUFDdEMsZUFBZSxtQkFBTyxDQUFDLGdEQUFxQjtBQUM1QyxZQUFZLG1CQUFPLENBQUMsb0JBQU87QUFDM0Isa0JBQWtCLG1CQUFPLENBQUMsd0RBQXlCOztBQUVuRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTzs7QUFFUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxTQUFTO0FBQ1QsT0FBTzs7QUFFUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPOztBQUVQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87O0FBRVA7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDs7QUFFQSxtQkFBbUI7QUFDbkIsaUJBQWlCO0FBQ2pCLGNBQWM7QUFDZCxrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2ZpZWxkcy1kb2N1bWVudC9kaXN0L2FwaS1mZGQ5MTZkMS5janMuZGV2LmpzPzJjODEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2V4dGVuZHMgPSByZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHMnKTtcbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgPSByZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzJyk7XG52YXIgY29yZSA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9jb3JlJyk7XG52YXIgZmllbGRzJDEgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvZmllbGRzJyk7XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIHNhbml0aXplVXJsID0gcmVxdWlyZSgnQGJyYWludHJlZS9zYW5pdGl6ZS11cmwnKTtcblxuZnVuY3Rpb24gaXNWYWxpZFVSTCh1cmwpIHtcbiAgcmV0dXJuIHVybCA9PT0gc2FuaXRpemVVcmwuc2FuaXRpemVVcmwodXJsKTtcbn1cblxuY29uc3QgX2V4Y2x1ZGVkID0gW1wiY2hpbGRyZW5cIl07XG5jb25zdCBmaWVsZHMgPSB7XG4gIHRleHQoX3JlZikge1xuICAgIGxldCB7XG4gICAgICBsYWJlbCxcbiAgICAgIGRlZmF1bHRWYWx1ZSA9ICcnXG4gICAgfSA9IF9yZWY7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6ICdmb3JtJyxcblxuICAgICAgSW5wdXQoX3JlZjIpIHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICBvbkNoYW5nZSxcbiAgICAgICAgICBhdXRvRm9jdXNcbiAgICAgICAgfSA9IF9yZWYyO1xuICAgICAgICByZXR1cm4gY29yZS5qc3goZmllbGRzJDEuRmllbGRDb250YWluZXIsIG51bGwsIGNvcmUuanN4KGZpZWxkcyQxLkZpZWxkTGFiZWwsIG51bGwsIGxhYmVsKSwgY29yZS5qc3goZmllbGRzJDEuVGV4dElucHV0LCB7XG4gICAgICAgICAgYXV0b0ZvY3VzOiBhdXRvRm9jdXMsXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgIG9uQ2hhbmdlOiBldmVudCA9PiB7XG4gICAgICAgICAgICBvbkNoYW5nZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgfSxcblxuICAgICAgb3B0aW9uczogdW5kZWZpbmVkLFxuICAgICAgZGVmYXVsdFZhbHVlLFxuXG4gICAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJztcbiAgICAgIH1cblxuICAgIH07XG4gIH0sXG5cbiAgdXJsKF9yZWYzKSB7XG4gICAgbGV0IHtcbiAgICAgIGxhYmVsLFxuICAgICAgZGVmYXVsdFZhbHVlID0gJydcbiAgICB9ID0gX3JlZjM7XG5cbiAgICBjb25zdCB2YWxpZGF0ZSA9IHZhbHVlID0+IHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmICh2YWx1ZSA9PT0gJycgfHwgaXNWYWxpZFVSTCh2YWx1ZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAga2luZDogJ2Zvcm0nLFxuXG4gICAgICBJbnB1dChfcmVmNCkge1xuICAgICAgICBsZXQge1xuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIG9uQ2hhbmdlLFxuICAgICAgICAgIGF1dG9Gb2N1cyxcbiAgICAgICAgICBmb3JjZVZhbGlkYXRpb25cbiAgICAgICAgfSA9IF9yZWY0O1xuICAgICAgICBjb25zdCBbYmx1cnJlZCwgc2V0Qmx1cnJlZF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gICAgICAgIGNvbnN0IHNob3dWYWxpZGF0aW9uID0gZm9yY2VWYWxpZGF0aW9uIHx8IGJsdXJyZWQgJiYgIXZhbGlkYXRlKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGNvcmUuanN4KGZpZWxkcyQxLkZpZWxkQ29udGFpbmVyLCBudWxsLCBjb3JlLmpzeChmaWVsZHMkMS5GaWVsZExhYmVsLCBudWxsLCBsYWJlbCksIGNvcmUuanN4KGZpZWxkcyQxLlRleHRJbnB1dCwge1xuICAgICAgICAgIG9uQmx1cjogKCkgPT4ge1xuICAgICAgICAgICAgc2V0Qmx1cnJlZCh0cnVlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGF1dG9Gb2N1czogYXV0b0ZvY3VzLFxuICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICBvbkNoYW5nZTogZXZlbnQgPT4ge1xuICAgICAgICAgICAgb25DaGFuZ2UoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLCBzaG93VmFsaWRhdGlvbiAmJiBjb3JlLmpzeChcInNwYW5cIiwge1xuICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgY29sb3I6ICdyZWQnXG4gICAgICAgICAgfVxuICAgICAgICB9LCBcIlBsZWFzZSBwcm92aWRlIGEgdmFsaWQgVVJMXCIpKTtcbiAgICAgIH0sXG5cbiAgICAgIG9wdGlvbnM6IHVuZGVmaW5lZCxcbiAgICAgIGRlZmF1bHRWYWx1ZSxcbiAgICAgIHZhbGlkYXRlXG4gICAgfTtcbiAgfSxcblxuICBzZWxlY3QoX3JlZjUpIHtcbiAgICBsZXQge1xuICAgICAgbGFiZWwsXG4gICAgICBvcHRpb25zLFxuICAgICAgZGVmYXVsdFZhbHVlXG4gICAgfSA9IF9yZWY1O1xuICAgIGNvbnN0IG9wdGlvblZhbHVlc1NldCA9IG5ldyBTZXQob3B0aW9ucy5tYXAoeCA9PiB4LnZhbHVlKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6ICdmb3JtJyxcblxuICAgICAgSW5wdXQoX3JlZjYpIHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICBvbkNoYW5nZSxcbiAgICAgICAgICBhdXRvRm9jdXNcbiAgICAgICAgfSA9IF9yZWY2O1xuICAgICAgICByZXR1cm4gY29yZS5qc3goZmllbGRzJDEuRmllbGRDb250YWluZXIsIG51bGwsIGNvcmUuanN4KGZpZWxkcyQxLkZpZWxkTGFiZWwsIG51bGwsIGxhYmVsKSwgY29yZS5qc3goZmllbGRzJDEuU2VsZWN0LCB7XG4gICAgICAgICAgYXV0b0ZvY3VzOiBhdXRvRm9jdXMsXG4gICAgICAgICAgdmFsdWU6IG9wdGlvbnMuZmluZChvcHRpb24gPT4gb3B0aW9uLnZhbHVlID09PSB2YWx1ZSkgfHwgbnVsbCxcbiAgICAgICAgICBvbkNoYW5nZTogb3B0aW9uID0+IHtcbiAgICAgICAgICAgIGlmIChvcHRpb24pIHtcbiAgICAgICAgICAgICAgb25DaGFuZ2Uob3B0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgfSkpO1xuICAgICAgfSxcblxuICAgICAgb3B0aW9ucyxcbiAgICAgIGRlZmF1bHRWYWx1ZSxcblxuICAgICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgb3B0aW9uVmFsdWVzU2V0Lmhhcyh2YWx1ZSk7XG4gICAgICB9XG5cbiAgICB9O1xuICB9LFxuXG4gIG11bHRpc2VsZWN0KF9yZWY3KSB7XG4gICAgbGV0IHtcbiAgICAgIGxhYmVsLFxuICAgICAgb3B0aW9ucyxcbiAgICAgIGRlZmF1bHRWYWx1ZVxuICAgIH0gPSBfcmVmNztcbiAgICBjb25zdCB2YWx1ZXNUb09wdGlvbiA9IG5ldyBNYXAob3B0aW9ucy5tYXAoeCA9PiBbeC52YWx1ZSwgeF0pKTtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogJ2Zvcm0nLFxuXG4gICAgICBJbnB1dChfcmVmOCkge1xuICAgICAgICBsZXQge1xuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIG9uQ2hhbmdlLFxuICAgICAgICAgIGF1dG9Gb2N1c1xuICAgICAgICB9ID0gX3JlZjg7XG4gICAgICAgIHJldHVybiBjb3JlLmpzeChmaWVsZHMkMS5GaWVsZENvbnRhaW5lciwgbnVsbCwgY29yZS5qc3goZmllbGRzJDEuRmllbGRMYWJlbCwgbnVsbCwgbGFiZWwpLCBjb3JlLmpzeChmaWVsZHMkMS5NdWx0aVNlbGVjdCwge1xuICAgICAgICAgIGF1dG9Gb2N1czogYXV0b0ZvY3VzLFxuICAgICAgICAgIHZhbHVlOiB2YWx1ZS5tYXAoeCA9PiB2YWx1ZXNUb09wdGlvbi5nZXQoeCkpLFxuICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgICAgb25DaGFuZ2U6IG9wdGlvbnMgPT4ge1xuICAgICAgICAgICAgb25DaGFuZ2Uob3B0aW9ucy5tYXAoeCA9PiB4LnZhbHVlKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICB9LFxuXG4gICAgICBvcHRpb25zLFxuICAgICAgZGVmYXVsdFZhbHVlLFxuXG4gICAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUuZXZlcnkodmFsdWUgPT4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZXNUb09wdGlvbi5oYXModmFsdWUpKTtcbiAgICAgIH1cblxuICAgIH07XG4gIH0sXG5cbiAgY2hlY2tib3goX3JlZjkpIHtcbiAgICBsZXQge1xuICAgICAgbGFiZWwsXG4gICAgICBkZWZhdWx0VmFsdWUgPSBmYWxzZVxuICAgIH0gPSBfcmVmOTtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogJ2Zvcm0nLFxuXG4gICAgICBJbnB1dChfcmVmMTApIHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICBvbkNoYW5nZSxcbiAgICAgICAgICBhdXRvRm9jdXNcbiAgICAgICAgfSA9IF9yZWYxMDtcbiAgICAgICAgcmV0dXJuIGNvcmUuanN4KGZpZWxkcyQxLkZpZWxkQ29udGFpbmVyLCBudWxsLCBjb3JlLmpzeChmaWVsZHMkMS5DaGVja2JveCwge1xuICAgICAgICAgIGNoZWNrZWQ6IHZhbHVlLFxuICAgICAgICAgIGF1dG9Gb2N1czogYXV0b0ZvY3VzLFxuICAgICAgICAgIG9uQ2hhbmdlOiBldmVudCA9PiB7XG4gICAgICAgICAgICBvbkNoYW5nZShldmVudC50YXJnZXQuY2hlY2tlZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBsYWJlbCkpO1xuICAgICAgfSxcblxuICAgICAgb3B0aW9uczogdW5kZWZpbmVkLFxuICAgICAgZGVmYXVsdFZhbHVlLFxuXG4gICAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbic7XG4gICAgICB9XG5cbiAgICB9O1xuICB9LFxuXG4gIGVtcHR5KCkge1xuICAgIHJldHVybiB7XG4gICAgICBraW5kOiAnZm9ybScsXG5cbiAgICAgIElucHV0KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0sXG5cbiAgICAgIG9wdGlvbnM6IHVuZGVmaW5lZCxcbiAgICAgIGRlZmF1bHRWYWx1ZTogdW5kZWZpbmVkLFxuXG4gICAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgIH07XG4gIH0sXG5cbiAgY2hpbGQob3B0aW9ucykge1xuICAgIHJldHVybiB7XG4gICAgICBraW5kOiAnY2hpbGQnLFxuICAgICAgb3B0aW9uczogb3B0aW9ucy5raW5kID09PSAnYmxvY2snID8ge1xuICAgICAgICBraW5kOiAnYmxvY2snLFxuICAgICAgICBwbGFjZWhvbGRlcjogb3B0aW9ucy5wbGFjZWhvbGRlcixcbiAgICAgICAgZGl2aWRlcnM6IG9wdGlvbnMuZGl2aWRlcnMsXG4gICAgICAgIGZvcm1hdHRpbmc6IG9wdGlvbnMuZm9ybWF0dGluZyA9PT0gJ2luaGVyaXQnID8ge1xuICAgICAgICAgIGJsb2NrVHlwZXM6ICdpbmhlcml0JyxcbiAgICAgICAgICBoZWFkaW5nTGV2ZWxzOiAnaW5oZXJpdCcsXG4gICAgICAgICAgaW5saW5lTWFya3M6ICdpbmhlcml0JyxcbiAgICAgICAgICBsaXN0VHlwZXM6ICdpbmhlcml0JyxcbiAgICAgICAgICBhbGlnbm1lbnQ6ICdpbmhlcml0JyxcbiAgICAgICAgICBzb2Z0QnJlYWtzOiAnaW5oZXJpdCdcbiAgICAgICAgfSA6IG9wdGlvbnMuZm9ybWF0dGluZyxcbiAgICAgICAgbGlua3M6IG9wdGlvbnMubGlua3MsXG4gICAgICAgIHJlbGF0aW9uc2hpcHM6IG9wdGlvbnMucmVsYXRpb25zaGlwc1xuICAgICAgfSA6IHtcbiAgICAgICAga2luZDogJ2lubGluZScsXG4gICAgICAgIHBsYWNlaG9sZGVyOiBvcHRpb25zLnBsYWNlaG9sZGVyLFxuICAgICAgICBmb3JtYXR0aW5nOiBvcHRpb25zLmZvcm1hdHRpbmcgPT09ICdpbmhlcml0JyA/IHtcbiAgICAgICAgICBpbmxpbmVNYXJrczogJ2luaGVyaXQnLFxuICAgICAgICAgIHNvZnRCcmVha3M6ICdpbmhlcml0J1xuICAgICAgICB9IDogb3B0aW9ucy5mb3JtYXR0aW5nLFxuICAgICAgICBsaW5rczogb3B0aW9ucy5saW5rcyxcbiAgICAgICAgcmVsYXRpb25zaGlwczogb3B0aW9ucy5yZWxhdGlvbnNoaXBzXG4gICAgICB9XG4gICAgfTtcbiAgfSxcblxuICBvYmplY3QodmFsdWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogJ29iamVjdCcsXG4gICAgICB2YWx1ZVxuICAgIH07XG4gIH0sXG5cbiAgY29uZGl0aW9uYWwoZGlzY3JpbWluYW50LCB2YWx1ZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogJ2NvbmRpdGlvbmFsJyxcbiAgICAgIGRpc2NyaW1pbmFudCxcbiAgICAgIHZhbHVlczogdmFsdWVzXG4gICAgfTtcbiAgfSxcblxuICByZWxhdGlvbnNoaXAoX3JlZjExKSB7XG4gICAgbGV0IHtcbiAgICAgIHJlbGF0aW9uc2hpcCxcbiAgICAgIGxhYmVsXG4gICAgfSA9IF9yZWYxMTtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogJ3JlbGF0aW9uc2hpcCcsXG4gICAgICByZWxhdGlvbnNoaXAsXG4gICAgICBsYWJlbFxuICAgIH07XG4gIH1cblxufTtcbmZ1bmN0aW9uIGNvbXBvbmVudChvcHRpb25zKSB7XG4gIHJldHVybiBvcHRpb25zO1xufVxuY29uc3QgTm90RWRpdGFibGUgPSBfcmVmMTIgPT4ge1xuICBsZXQge1xuICAgIGNoaWxkcmVuXG4gIH0gPSBfcmVmMTIsXG4gICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmMTIsIF9leGNsdWRlZCk7XG5cbiAgcmV0dXJuIGNvcmUuanN4KFwic3BhblwiLCBfZXh0ZW5kcyh7XG4gICAgY3NzOiB7XG4gICAgICB1c2VyU2VsZWN0OiAnbm9uZSdcbiAgICB9LFxuICAgIGNvbnRlbnRFZGl0YWJsZTogZmFsc2VcbiAgfSwgcHJvcHMpLCBjaGlsZHJlbik7XG59O1xuXG5leHBvcnRzLk5vdEVkaXRhYmxlID0gTm90RWRpdGFibGU7XG5leHBvcnRzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcbmV4cG9ydHMuZmllbGRzID0gZmllbGRzO1xuZXhwb3J0cy5pc1ZhbGlkVVJMID0gaXNWYWxpZFVSTDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/fields-document/dist/api-fdd916d1.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/fields-document/dist/index-5c992a04.cjs.dev.js":
/*!*************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/fields-document/dist/index-5c992a04.cjs.dev.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar _extends = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"../../node_modules/@babel/runtime/helpers/extends.js\");\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar React = __webpack_require__(/*! react */ \"react\");\nvar isHotkey = __webpack_require__(/*! is-hotkey */ \"is-hotkey\");\nvar slate = __webpack_require__(/*! slate */ \"slate\");\nvar slateReact = __webpack_require__(/*! slate-react */ \"slate-react\");\nvar slateHistory = __webpack_require__(/*! slate-history */ \"slate-history\");\nvar popover = __webpack_require__(/*! @keystone-ui/popover */ \"@keystone-ui/popover\");\nvar tooltip = __webpack_require__(/*! @keystone-ui/tooltip */ \"@keystone-ui/tooltip\");\nvar LinkIcon = __webpack_require__(/*! @keystone-ui/icons/icons/LinkIcon */ \"@keystone-ui/icons/icons/LinkIcon\");\nvar Trash2Icon = __webpack_require__(/*! @keystone-ui/icons/icons/Trash2Icon */ \"@keystone-ui/icons/icons/Trash2Icon\");\nvar ExternalLinkIcon = __webpack_require__(/*! @keystone-ui/icons/icons/ExternalLinkIcon */ \"@keystone-ui/icons/icons/ExternalLinkIcon\");\nvar toolbar = __webpack_require__(/*! ./toolbar-7e0e994e.cjs.dev.js */ \"../../node_modules/@keystone-6/fields-document/dist/toolbar-7e0e994e.cjs.dev.js\");\nvar _objectSpread = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"../../node_modules/@babel/runtime/helpers/objectSpread2.js\");\nvar api = __webpack_require__(/*! ./api-fdd916d1.cjs.dev.js */ \"../../node_modules/@keystone-6/fields-document/dist/api-fdd916d1.cjs.dev.js\");\nvar context = __webpack_require__(/*! @keystone-6/core/admin-ui/context */ \"@keystone-6/core/admin-ui/context\");\nvar RelationshipSelect = __webpack_require__(/*! @keystone-6/core/fields/types/relationship/views/RelationshipSelect */ \"@keystone-6/core/fields/types/relationship/views/RelationshipSelect\");\nvar _objectWithoutProperties = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\nvar fields = __webpack_require__(/*! @keystone-ui/fields */ \"@keystone-ui/fields\");\nvar button = __webpack_require__(/*! @keystone-ui/button */ \"@keystone-ui/button\");\nvar weakMemoize = __webpack_require__(/*! @emotion/weak-memoize */ \"@emotion/weak-memoize\");\nvar ColumnsIcon = __webpack_require__(/*! @keystone-ui/icons/icons/ColumnsIcon */ \"@keystone-ui/icons/icons/ColumnsIcon\");\nvar applyRef = __webpack_require__(/*! apply-ref */ \"apply-ref\");\nvar BoldIcon = __webpack_require__(/*! @keystone-ui/icons/icons/BoldIcon */ \"@keystone-ui/icons/icons/BoldIcon\");\nvar ItalicIcon = __webpack_require__(/*! @keystone-ui/icons/icons/ItalicIcon */ \"@keystone-ui/icons/icons/ItalicIcon\");\nvar PlusIcon = __webpack_require__(/*! @keystone-ui/icons/icons/PlusIcon */ \"@keystone-ui/icons/icons/PlusIcon\");\nvar ChevronDownIcon = __webpack_require__(/*! @keystone-ui/icons/icons/ChevronDownIcon */ \"@keystone-ui/icons/icons/ChevronDownIcon\");\nvar Maximize2Icon = __webpack_require__(/*! @keystone-ui/icons/icons/Maximize2Icon */ \"@keystone-ui/icons/icons/Maximize2Icon\");\nvar Minimize2Icon = __webpack_require__(/*! @keystone-ui/icons/icons/Minimize2Icon */ \"@keystone-ui/icons/icons/Minimize2Icon\");\nvar MoreHorizontalIcon = __webpack_require__(/*! @keystone-ui/icons/icons/MoreHorizontalIcon */ \"@keystone-ui/icons/icons/MoreHorizontalIcon\");\nvar CodeIcon = __webpack_require__(/*! @keystone-ui/icons/icons/CodeIcon */ \"@keystone-ui/icons/icons/CodeIcon\");\nvar AlignLeftIcon = __webpack_require__(/*! @keystone-ui/icons/icons/AlignLeftIcon */ \"@keystone-ui/icons/icons/AlignLeftIcon\");\nvar AlignRightIcon = __webpack_require__(/*! @keystone-ui/icons/icons/AlignRightIcon */ \"@keystone-ui/icons/icons/AlignRightIcon\");\nvar AlignCenterIcon = __webpack_require__(/*! @keystone-ui/icons/icons/AlignCenterIcon */ \"@keystone-ui/icons/icons/AlignCenterIcon\");\nvar MinusIcon = __webpack_require__(/*! @keystone-ui/icons/icons/MinusIcon */ \"@keystone-ui/icons/icons/MinusIcon\");\nvar matchSorter = __webpack_require__(/*! match-sorter */ \"match-sorter\");\nvar scrollIntoView = __webpack_require__(/*! scroll-into-view-if-needed */ \"scroll-into-view-if-needed\");\nvar mdASTUtilFromMarkdown = __webpack_require__(/*! mdast-util-from-markdown */ \"mdast-util-from-markdown\");\nvar autoLinkLiteralFromMarkdownExtension = __webpack_require__(/*! mdast-util-gfm-autolink-literal/from-markdown */ \"mdast-util-gfm-autolink-literal/from-markdown\");\nvar autoLinkLiteralMarkdownSyntax = __webpack_require__(/*! micromark-extension-gfm-autolink-literal */ \"micromark-extension-gfm-autolink-literal\");\nvar gfmStrikethroughFromMarkdownExtension = __webpack_require__(/*! mdast-util-gfm-strikethrough/from-markdown */ \"mdast-util-gfm-strikethrough/from-markdown\");\nvar gfmStrikethroughMarkdownSyntax = __webpack_require__(/*! micromark-extension-gfm-strikethrough */ \"micromark-extension-gfm-strikethrough\");\nvar definitions = __webpack_require__(/*! mdast-util-definitions */ \"mdast-util-definitions\");\n\nfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefault(React);\nvar isHotkey__default = /*#__PURE__*/_interopDefault(isHotkey);\nvar weakMemoize__default = /*#__PURE__*/_interopDefault(weakMemoize);\nvar scrollIntoView__default = /*#__PURE__*/_interopDefault(scrollIntoView);\nvar mdASTUtilFromMarkdown__default = /*#__PURE__*/_interopDefault(mdASTUtilFromMarkdown);\nvar autoLinkLiteralFromMarkdownExtension__default = /*#__PURE__*/_interopDefault(autoLinkLiteralFromMarkdownExtension);\nvar autoLinkLiteralMarkdownSyntax__default = /*#__PURE__*/_interopDefault(autoLinkLiteralMarkdownSyntax);\nvar gfmStrikethroughFromMarkdownExtension__default = /*#__PURE__*/_interopDefault(gfmStrikethroughFromMarkdownExtension);\nvar gfmStrikethroughMarkdownSyntax__default = /*#__PURE__*/_interopDefault(gfmStrikethroughMarkdownSyntax);\nvar definitions__default = /*#__PURE__*/_interopDefault(definitions);\n\nconst paragraphElement = () => ({\n  type: 'paragraph',\n  children: [{\n    text: ''\n  }]\n});\nfunction withParagraphs(editor) {\n  const {\n    normalizeNode\n  } = editor;\n\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n\n    if (slate.Editor.isEditor(node)) {\n      let lastNode = node.children[node.children.length - 1];\n\n      if ((lastNode === null || lastNode === void 0 ? void 0 : lastNode.type) !== 'paragraph') {\n        slate.Transforms.insertNodes(editor, paragraphElement(), {\n          at: [...path, node.children.length]\n        });\n        return;\n      }\n    }\n\n    normalizeNode(entry);\n  };\n\n  return editor;\n}\n\nconst allMarks = ['bold', 'italic', 'underline', 'strikethrough', 'code', 'superscript', 'subscript', 'keyboard'];\nconst isElementActive = (editor, format) => {\n  const [match] = slate.Editor.nodes(editor, {\n    match: n => n.type === format\n  });\n  return !!match;\n};\nfunction clearFormatting(editor) {\n  slate.Transforms.unwrapNodes(editor, {\n    match: node => node.type === 'heading' || node.type === 'blockquote' || node.type === 'code'\n  });\n  slate.Transforms.unsetNodes(editor, allMarks, {\n    match: slate.Text.isText\n  });\n}\nfunction moveChildren(editor, parent, to) {\n  let shouldMoveNode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : () => true;\n  const parentPath = slate.Path.isPath(parent) ? parent : parent[1];\n  const parentNode = slate.Path.isPath(parent) ? slate.Node.get(editor, parentPath) : parent[0];\n  if (!slate.Editor.isBlock(editor, parentNode)) return;\n\n  for (let i = parentNode.children.length - 1; i >= 0; i--) {\n    if (shouldMoveNode(parentNode.children[i])) {\n      const childPath = [...parentPath, i];\n      slate.Transforms.moveNodes(editor, {\n        at: childPath,\n        to\n      });\n    }\n  }\n} // this ensures that when changes happen, they are immediately shown\n// this stops the problem of a cursor resetting to the end when a change is made\n// because the changes are applied asynchronously\n\nfunction useElementWithSetNodes(editor, element) {\n  const [state, setState] = React.useState({\n    element,\n    elementWithChanges: element\n  });\n\n  if (state.element !== element) {\n    setState({\n      element,\n      elementWithChanges: element\n    });\n  }\n\n  const setNodes = changes => {\n    slate.Transforms.setNodes(editor, changes, {\n      at: slateReact.ReactEditor.findPath(editor, element)\n    });\n    setState({\n      element,\n      elementWithChanges: _objectSpread(_objectSpread({}, element), changes)\n    });\n  };\n\n  return [state.elementWithChanges, setNodes];\n}\nfunction useEventCallback(callback) {\n  const callbackRef = React.useRef(callback);\n  const cb = React.useCallback(function () {\n    return callbackRef.current(...arguments);\n  }, []);\n  React.useEffect(() => {\n    callbackRef.current = callback;\n  });\n  return cb;\n}\nconst IS_MAC = typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\nconst modifierKeyText = IS_MAC ? '⌘' : 'Ctrl';\nconst ForceValidationContext = /*#__PURE__*/React__default[\"default\"].createContext(false);\nconst ForceValidationProvider = ForceValidationContext.Provider;\nfunction useForceValidation() {\n  return React.useContext(ForceValidationContext);\n}\nfunction insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, nodes) {\n  var _pathRefForEmptyNodeA;\n\n  let pathRefForEmptyNodeAtCursor;\n  const entry = slate.Editor.above(editor, {\n    match: node => node.type === 'heading' || node.type === 'paragraph'\n  });\n\n  if (entry && slate.Node.string(entry[0]) === '') {\n    pathRefForEmptyNodeAtCursor = slate.Editor.pathRef(editor, entry[1]);\n  }\n\n  slate.Transforms.insertNodes(editor, nodes);\n  let path = (_pathRefForEmptyNodeA = pathRefForEmptyNodeAtCursor) === null || _pathRefForEmptyNodeA === void 0 ? void 0 : _pathRefForEmptyNodeA.unref();\n\n  if (path) {\n    slate.Transforms.removeNodes(editor, {\n      at: path\n    }); // even though the selection is in the right place after the removeNodes\n    // for some reason the editor blurs so we need to focus it again\n\n    slateReact.ReactEditor.focus(editor);\n  }\n}\n/**\n * This is equivalent to Editor.after except that it ignores points that have no content\n * like the point in a void text node, an empty text node and the last point in a text node\n */\n// TODO: this would probably break if you were trying to get the last point in the editor?\n\nfunction EditorAfterButIgnoringingPointsWithNoContent(editor, at) {\n  let {\n    distance = 1\n  } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const anchor = slate.Editor.point(editor, at, {\n    edge: 'end'\n  });\n  const focus = slate.Editor.end(editor, []);\n  const range = {\n    anchor,\n    focus\n  };\n  let d = 0;\n  let target;\n\n  for (const p of slate.Editor.positions(editor, {\n    at: range\n  })) {\n    if (d > distance) {\n      break;\n    } // this is the important change\n\n\n    const node = slate.Node.get(editor, p.path);\n\n    if (node.text.length === p.offset) {\n      continue;\n    }\n\n    if (d !== 0) {\n      target = p;\n    }\n\n    d++;\n  }\n\n  return target;\n}\nfunction nodeTypeMatcher() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  if (args.length === 1) {\n    const type = args[0];\n    return node => node.type === type;\n  }\n\n  const set = new Set(args);\n  return node => typeof node.type === 'string' && set.has(node.type);\n}\nfunction assert(condition) {\n  if (!condition) {\n    throw new Error('failed assert');\n  }\n}\n\nconst DocumentFieldRelationshipsContext = /*#__PURE__*/React.createContext({});\nfunction useDocumentFieldRelationships() {\n  return React.useContext(DocumentFieldRelationshipsContext);\n}\nconst DocumentFieldRelationshipsProvider = DocumentFieldRelationshipsContext.Provider;\nfunction withRelationship(editor) {\n  const {\n    isVoid,\n    isInline\n  } = editor;\n\n  editor.isVoid = element => {\n    return element.type === 'relationship' || isVoid(element);\n  };\n\n  editor.isInline = element => {\n    return element.type === 'relationship' || isInline(element);\n  };\n\n  return editor;\n}\nfunction RelationshipButton(_ref) {\n  let {\n    onClose\n  } = _ref;\n  const {\n    editor,\n    relationships: {\n      isDisabled\n    }\n  } = useToolbarState();\n  const relationships = React.useContext(DocumentFieldRelationshipsContext);\n  return core.jsx(React.Fragment, null, Object.entries(relationships).map(_ref2 => {\n    let [key, relationship] = _ref2;\n    if (relationship.kind === 'prop') return null;\n    return core.jsx(toolbar.ToolbarButton, {\n      key: key,\n      isDisabled: isDisabled,\n      onMouseDown: event => {\n        event.preventDefault();\n        slate.Transforms.insertNodes(editor, {\n          type: 'relationship',\n          relationship: key,\n          data: null,\n          children: [{\n            text: ''\n          }]\n        });\n        onClose();\n      }\n    }, relationship.label);\n  }));\n}\nfunction RelationshipElement(_ref3) {\n  let {\n    attributes,\n    children,\n    element\n  } = _ref3;\n  const keystone = context.useKeystone();\n  const editor = slateReact.useSlateStatic();\n  const relationships = React.useContext(DocumentFieldRelationshipsContext);\n  const relationship = relationships[element.relationship];\n  return core.jsx(\"span\", _extends({}, attributes, {\n    css: {\n      display: 'inline-flex',\n      alignItems: 'center'\n    }\n  }), core.jsx(\"span\", {\n    contentEditable: false,\n    css: {\n      userSelect: 'none',\n      width: 200,\n      display: 'inline-block',\n      paddingLeft: 4,\n      paddingRight: 4,\n      flex: 1\n    }\n  }, relationship ? core.jsx(RelationshipSelect.RelationshipSelect, {\n    controlShouldRenderValue: true,\n    isDisabled: false,\n    list: keystone.adminMeta.lists[relationship.listKey],\n    portalMenu: true,\n    state: {\n      kind: 'one',\n      value: element.data === null ? null : {\n        id: element.data.id,\n        label: element.data.label || element.data.id\n      },\n\n      onChange(value) {\n        const at = slateReact.ReactEditor.findPath(editor, element);\n\n        if (value === null) {\n          slate.Transforms.removeNodes(editor, {\n            at\n          });\n        } else {\n          slate.Transforms.setNodes(editor, {\n            data: value\n          }, {\n            at\n          });\n        }\n      }\n\n    }\n  }) : 'Invalid relationship'), core.jsx(\"span\", {\n    css: {\n      flex: 0\n    }\n  }, children));\n}\n\nfunction getInitialValue(type, componentBlock, relationships) {\n  const props = getInitialPropsValue({\n    kind: 'object',\n    value: componentBlock.props\n  }, relationships);\n  return {\n    type: 'component-block',\n    component: type,\n    props,\n    children: findChildPropPaths(props, componentBlock.props).map(x => ({\n      type: `component-${x.options.kind}-prop`,\n      propPath: x.path,\n      children: [x.options.kind === 'block' ? {\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      } : {\n        text: ''\n      }]\n    }))\n  };\n}\nfunction getInitialPropsValue(prop, relationships) {\n  switch (prop.kind) {\n    case 'form':\n      return prop.defaultValue;\n\n    case 'child':\n      return undefined;\n\n    case 'relationship':\n      return relationships[prop.relationship].many ? [] : null;\n\n    case 'conditional':\n      {\n        const defaultValue = prop.discriminant.defaultValue;\n        return {\n          discriminant: defaultValue,\n          value: getInitialPropsValue(prop.values[defaultValue], relationships)\n        };\n      }\n\n    case 'object':\n      {\n        let obj = {};\n        Object.keys(prop.value).forEach(key => {\n          obj[key] = getInitialPropsValue(prop.value[key], relationships);\n        });\n        return obj;\n      }\n  }\n\n  assertNever(prop);\n}\n\nfunction _findChildPropPaths(value, prop, path) {\n  switch (prop.kind) {\n    case 'form':\n    case 'relationship':\n      return [];\n\n    case 'child':\n      return [{\n        path: path,\n        options: prop.options\n      }];\n\n    case 'conditional':\n      return _findChildPropPaths(value.value, prop.values[value.discriminant], path.concat('value'));\n\n    case 'object':\n      {\n        let paths = [];\n        Object.keys(prop.value).forEach(key => {\n          paths.push(..._findChildPropPaths(value[key], prop.value[key], path.concat(key)));\n        });\n        return paths;\n      }\n  }\n}\n\nfunction findChildPropPaths(value, props) {\n  let propPaths = _findChildPropPaths(value, {\n    kind: 'object',\n    value: props\n  }, []);\n\n  if (!propPaths.length) {\n    return [{\n      path: undefined,\n      options: {\n        kind: 'inline',\n        placeholder: ''\n      }\n    }];\n  }\n\n  return propPaths;\n}\nfunction assertNever(arg) {\n  throw new Error('expected to never be called but received: ' + JSON.stringify(arg));\n}\nfunction getPropsForConditionalChange(newValue, oldValue, prop, relationships) {\n  if (newValue.discriminant !== oldValue.discriminant) {\n    return {\n      discriminant: newValue.discriminant,\n      value: getInitialPropsValue(prop.values[newValue.discriminant], relationships)\n    };\n  } else {\n    return newValue;\n  }\n}\nfunction getDocumentFeaturesForChildField(editorDocumentFeatures, options) {\n  var _options$formatting, _options$formatting3, _options$formatting4, _options$formatting5, _options$formatting6, _options$formatting7, _options$formatting8;\n\n  // an important note for this: normalization based on document features\n  // is done based on the document features returned here\n  // and the editor document features\n  // so the result for any given child prop will be the things that are\n  // allowed by both these document features\n  // AND the editor document features\n  const inlineMarksFromOptions = (_options$formatting = options.formatting) === null || _options$formatting === void 0 ? void 0 : _options$formatting.inlineMarks;\n  const inlineMarks = inlineMarksFromOptions === 'inherit' ? 'inherit' : Object.fromEntries(Object.keys(editorDocumentFeatures.formatting.inlineMarks).map(mark => {\n    return [mark, !!(inlineMarksFromOptions || {})[mark]];\n  }));\n\n  if (options.kind === 'inline') {\n    var _options$formatting2;\n\n    return {\n      kind: 'inline',\n      inlineMarks,\n      documentFeatures: {\n        links: options.links === 'inherit',\n        relationships: options.relationships === 'inherit'\n      },\n      softBreaks: ((_options$formatting2 = options.formatting) === null || _options$formatting2 === void 0 ? void 0 : _options$formatting2.softBreaks) === 'inherit'\n    };\n  }\n\n  return {\n    kind: 'block',\n    inlineMarks,\n    softBreaks: ((_options$formatting3 = options.formatting) === null || _options$formatting3 === void 0 ? void 0 : _options$formatting3.softBreaks) === 'inherit',\n    documentFeatures: {\n      layouts: [],\n      dividers: options.dividers === 'inherit' ? editorDocumentFeatures.dividers : false,\n      formatting: {\n        alignment: ((_options$formatting4 = options.formatting) === null || _options$formatting4 === void 0 ? void 0 : _options$formatting4.alignment) === 'inherit' ? editorDocumentFeatures.formatting.alignment : {\n          center: false,\n          end: false\n        },\n        blockTypes: ((_options$formatting5 = options.formatting) === null || _options$formatting5 === void 0 ? void 0 : _options$formatting5.blockTypes) === 'inherit' ? editorDocumentFeatures.formatting.blockTypes : {\n          blockquote: false,\n          code: false\n        },\n        headingLevels: ((_options$formatting6 = options.formatting) === null || _options$formatting6 === void 0 ? void 0 : _options$formatting6.headingLevels) === 'inherit' ? editorDocumentFeatures.formatting.headingLevels : ((_options$formatting7 = options.formatting) === null || _options$formatting7 === void 0 ? void 0 : _options$formatting7.headingLevels) || [],\n        listTypes: ((_options$formatting8 = options.formatting) === null || _options$formatting8 === void 0 ? void 0 : _options$formatting8.listTypes) === 'inherit' ? editorDocumentFeatures.formatting.listTypes : {\n          ordered: false,\n          unordered: false\n        }\n      },\n      links: options.links === 'inherit',\n      relationships: options.relationships === 'inherit'\n    }\n  };\n}\nfunction getChildFieldAtPropPath(_ref, values, props) {\n  let [key, ...restOfPath] = _ref;\n  let prop = props[key];\n\n  if (!prop || prop.kind === 'form' || prop.kind === 'relationship') {\n    return;\n  }\n\n  if (prop.kind === 'conditional') {\n    const propVal = prop.values[values[key].discriminant];\n    return getChildFieldAtPropPath(restOfPath, values, {\n      value: propVal\n    });\n  }\n\n  if (prop.kind === 'object') {\n    return getChildFieldAtPropPath(restOfPath, values[key], prop.value);\n  }\n\n  return prop;\n}\nfunction clientSideValidateProp(prop, value) {\n  switch (prop.kind) {\n    case 'child':\n    case 'relationship':\n      {\n        return true;\n      }\n\n    case 'form':\n      {\n        return prop.validate(value);\n      }\n\n    case 'conditional':\n      {\n        if (!prop.discriminant.validate(value.discriminant)) {\n          return false;\n        }\n\n        return clientSideValidateProp(prop.values[value.discriminant], value.value);\n      }\n\n    case 'object':\n      {\n        for (const [key, childProp] of Object.entries(prop.value)) {\n          if (!clientSideValidateProp(childProp, value[key])) {\n            return false;\n          }\n        }\n\n        return true;\n      }\n  }\n}\n\nfunction _getPreviewProps(prop, value, childrenByPath, path, relationships, onFormPropsChange) {\n  switch (prop.kind) {\n    case 'form':\n      return {\n        value,\n\n        onChange(newValue) {\n          onFormPropsChange(newValue);\n        },\n\n        options: prop.options\n      };\n\n    case 'child':\n      return childrenByPath[JSON.stringify(path)];\n\n    case 'object':\n      {\n        const previewProps = {};\n        Object.keys(prop.value).forEach(key => {\n          previewProps[key] = _getPreviewProps(prop.value[key], value[key], childrenByPath, path.concat(key), relationships, newVal => {\n            onFormPropsChange(_objectSpread(_objectSpread({}, value), {}, {\n              [key]: newVal\n            }));\n          });\n        });\n        return previewProps;\n      }\n\n    case 'relationship':\n      {\n        return {\n          value,\n\n          onChange(newValue) {\n            onFormPropsChange(newValue);\n          }\n\n        };\n      }\n\n    case 'conditional':\n      {\n        return {\n          discriminant: value.discriminant,\n\n          onChange(newDiscriminant) {\n            onFormPropsChange(getPropsForConditionalChange({\n              discriminant: newDiscriminant,\n              value: value.value\n            }, value, prop, relationships));\n          },\n\n          options: prop.discriminant.options,\n          value: _getPreviewProps(prop.values[value.discriminant], value.value, childrenByPath, path.concat('value'), relationships, val => {\n            onFormPropsChange({\n              discriminant: value.discriminant,\n              value: val\n            });\n          })\n        };\n      }\n  }\n}\n\nfunction createPreviewProps(element, componentBlock, childrenByPath, relationships, setNode) {\n  return _getPreviewProps({\n    kind: 'object',\n    value: componentBlock.props\n  }, element.props, childrenByPath, [], relationships, props => {\n    setNode({\n      props\n    });\n  });\n}\n\n// this is in a different component to the other form inputs because it uses useKeystone\n// and we want to render the editor outside of the Admin UI on the docs site\n// and a call to useKeystone will break on the docs site\nfunction RelationshipFormInput(_ref) {\n  let {\n    prop,\n    path,\n    value,\n    onChange,\n    stringifiedPropPathToAutoFocus\n  } = _ref;\n  const relationships = useDocumentFieldRelationships();\n  const keystone = context.useKeystone();\n  const relationship = relationships[prop.relationship];\n  const stringifiedPath = JSON.stringify(path);\n  return /*#__PURE__*/React__default[\"default\"].createElement(fields.FieldContainer, null, /*#__PURE__*/React__default[\"default\"].createElement(fields.FieldLabel, null, prop.label), /*#__PURE__*/React__default[\"default\"].createElement(RelationshipSelect.RelationshipSelect, {\n    autoFocus: stringifiedPath === stringifiedPropPathToAutoFocus,\n    controlShouldRenderValue: true,\n    isDisabled: false,\n    list: keystone.adminMeta.lists[relationship.listKey],\n    extraSelection: relationship.selection || '',\n    portalMenu: true,\n    state: relationship.many ? {\n      kind: 'many',\n      value: value.map(x => ({\n        id: x.id,\n        label: x.label || x.id,\n        data: x.data\n      })),\n      onChange\n    } : {\n      kind: 'one',\n      value: value ? _objectSpread(_objectSpread({}, value), {}, {\n        label: value.label || value.id\n      }) : null,\n      onChange\n    }\n  }));\n}\n\nfunction FormValueContent(_ref2) {\n  let {\n    prop,\n    path,\n    value,\n    onChange,\n    stringifiedPropPathToAutoFocus,\n    forceValidation\n  } = _ref2;\n  const relationships = useDocumentFieldRelationships();\n  if (prop.kind === 'child') return null;\n\n  if (prop.kind === 'object') {\n    return /*#__PURE__*/React__default[\"default\"].createElement(core.Stack, {\n      gap: \"xlarge\"\n    }, Object.entries(prop.value).map(_ref3 => {\n      let [key, propVal] = _ref3;\n      return /*#__PURE__*/React__default[\"default\"].createElement(FormValueContent, {\n        key: key,\n        forceValidation: forceValidation,\n        stringifiedPropPathToAutoFocus: stringifiedPropPathToAutoFocus,\n        path: path.concat(key),\n        prop: propVal,\n        value: value[key],\n        onChange: val => {\n          onChange(_objectSpread(_objectSpread({}, value), {}, {\n            [key]: val\n          }));\n        }\n      });\n    }));\n  }\n\n  if (prop.kind === 'conditional') {\n    return /*#__PURE__*/React__default[\"default\"].createElement(core.Stack, {\n      gap: \"xlarge\"\n    }, /*#__PURE__*/React__default[\"default\"].createElement(prop.discriminant.Input, {\n      autoFocus: JSON.stringify(path.concat('discriminant')) === stringifiedPropPathToAutoFocus,\n      value: value.discriminant,\n      onChange: discriminant => {\n        onChange(getPropsForConditionalChange({\n          discriminant,\n          value: value.value\n        }, value, prop, relationships));\n      },\n      forceValidation: forceValidation && !prop.discriminant.validate(value)\n    }), /*#__PURE__*/React__default[\"default\"].createElement(FormValueContent, {\n      forceValidation: forceValidation,\n      stringifiedPropPathToAutoFocus: stringifiedPropPathToAutoFocus,\n      path: path.concat('value'),\n      prop: prop.values[value.discriminant],\n      value: value.value,\n      onChange: val => {\n        onChange({\n          discriminant: value.discriminant,\n          value: val\n        });\n      }\n    }));\n  }\n\n  if (prop.kind === 'relationship') {\n    return /*#__PURE__*/React__default[\"default\"].createElement(RelationshipFormInput, {\n      prop: prop,\n      path: path,\n      value: value,\n      onChange: onChange,\n      stringifiedPropPathToAutoFocus: stringifiedPropPathToAutoFocus\n    });\n  }\n\n  return /*#__PURE__*/React__default[\"default\"].createElement(prop.Input, {\n    autoFocus: JSON.stringify(path) === stringifiedPropPathToAutoFocus,\n    value: value,\n    onChange: onChange,\n    forceValidation: forceValidation && !prop.validate(value)\n  });\n} // child as in the props are a tree and you want the children of a prop, not as in the kind === 'inline'\n\nfunction getChildProps(prop, value) {\n  if (prop.kind === 'conditional') {\n    return {\n      discriminant: prop.discriminant,\n      value: prop.values[value.discriminant]\n    };\n  } else if (prop.kind === 'form' || prop.kind === 'child' || prop.kind === 'relationship') {\n    return {};\n  } else if (prop.kind === 'object') {\n    return prop.value;\n  } else {\n    assertNever(prop); // TypeScript should understand that this will never happen but for some reason it doesn't\n\n    return {};\n  }\n}\n\nfunction findFirstFocusablePropPath(props, path, value) {\n  for (const key of Object.keys(props)) {\n    const prop = props[key];\n    const newPath = path.concat(key);\n\n    if (prop.kind === 'form' || prop.kind === 'relationship') {\n      return newPath;\n    }\n\n    let children = getChildProps(prop, value[key]);\n    const childFocusable = findFirstFocusablePropPath(children, newPath, value[key]);\n\n    if (childFocusable) {\n      return childFocusable;\n    }\n  }\n}\n\nfunction FormValue(_ref4) {\n  let {\n    value,\n    onClose,\n    onChange,\n    componentBlock,\n    isValid\n  } = _ref4;\n  const [forceValidation, setForceValidation] = React.useState(false);\n  const focusablePath = JSON.stringify(findFirstFocusablePropPath(componentBlock.props, [], value));\n  return /*#__PURE__*/React__default[\"default\"].createElement(core.Stack, {\n    gap: \"xlarge\",\n    contentEditable: false\n  }, /*#__PURE__*/React__default[\"default\"].createElement(FormValueContent, {\n    forceValidation: forceValidation,\n    onChange: onChange,\n    path: [],\n    prop: {\n      kind: 'object',\n      value: componentBlock.props\n    },\n    value: value,\n    stringifiedPropPathToAutoFocus: focusablePath\n  }), /*#__PURE__*/React__default[\"default\"].createElement(button.Button, {\n    size: \"small\",\n    tone: \"active\",\n    weight: \"bold\",\n    onClick: () => {\n      if (isValid) {\n        onClose();\n      } else {\n        setForceValidation(true);\n      }\n    }\n  }, \"Done\"));\n}\n\nfunction areArraysEqual(arrA, arrB) {\n  if (arrA.length !== arrB.length) {\n    return false;\n  }\n\n  for (let i = 0; i < arrA.length; i++) {\n    if (arrA[i] !== arrB[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction normalizeTextBasedOnInlineMarksAndSoftBreaks(_ref, editor, inlineMarks, softBreaks) {\n  let [node, path] = _ref;\n  const marksToRemove = Object.keys(node).filter(x => x !== 'text' && x !== 'insertMenu' && inlineMarks[x] !== true);\n\n  if (marksToRemove.length) {\n    slate.Transforms.unsetNodes(editor, marksToRemove, {\n      at: path\n    });\n    return true;\n  }\n\n  if (!softBreaks) {\n    const hasSoftBreaks = node.text.includes('\\n');\n\n    if (hasSoftBreaks) {\n      const [parentNode] = slate.Editor.parent(editor, path);\n\n      if (parentNode.type !== 'code') {\n        for (const position of slate.Editor.positions(editor, {\n          at: path\n        })) {\n          const character = slate.Node.get(editor, position.path).text[position.offset];\n\n          if (character === '\\n') {\n            slate.Transforms.delete(editor, {\n              at: position\n            });\n            return true;\n          }\n        }\n      }\n    }\n  }\n\n  return false;\n}\nfunction normalizeInlineBasedOnLinksAndRelationships(_ref2, editor, links, relationshipsEnabled, relationships) {\n  let [node, path] = _ref2;\n\n  if (node.type === 'link' && !links) {\n    slate.Transforms.insertText(editor, ` (${node.href})`, {\n      at: slate.Editor.end(editor, path)\n    });\n    slate.Transforms.unwrapNodes(editor, {\n      at: path\n    });\n    return true;\n  }\n\n  if (node.type === 'relationship' && (!relationshipsEnabled || relationships[node.relationship] === undefined || relationships[node.relationship].kind !== 'inline')) {\n    const data = node.data;\n\n    if (data) {\n      const relationship = relationships[node.relationship];\n      slate.Transforms.insertText(editor, `${data.label || data.id || ''} (${(relationship === null || relationship === void 0 ? void 0 : relationship.kind) === 'inline' ? relationship.label : node.relationship}:${data.id || ''})`, {\n        at: slate.Editor.before(editor, path)\n      });\n    }\n\n    slate.Transforms.removeNodes(editor, {\n      at: path\n    });\n    return true;\n  }\n\n  return false;\n}\nfunction normalizeElementBasedOnDocumentFeatures(_ref3, editor, _ref4, relationships) {\n  let [node, path] = _ref3;\n  let {\n    formatting,\n    dividers,\n    layouts,\n    links,\n    relationships: relationshipsEnabled\n  } = _ref4;\n\n  if (node.type === 'heading' && (!formatting.headingLevels.length || !formatting.headingLevels.includes(node.level)) || node.type === 'ordered-list' && !formatting.listTypes.ordered || node.type === 'unordered-list' && !formatting.listTypes.unordered || node.type === 'code' && !formatting.blockTypes.code || node.type === 'blockquote' && !formatting.blockTypes.blockquote || node.type === 'layout' && (layouts.length === 0 || !layouts.some(layout => areArraysEqual(layout, node.layout)))) {\n    slate.Transforms.unwrapNodes(editor, {\n      at: path\n    });\n    return true;\n  }\n\n  if ((node.type === 'paragraph' || node.type === 'heading') && (!formatting.alignment.center && node.textAlign === 'center' || !formatting.alignment.end && node.textAlign === 'end' || 'textAlign' in node && node.textAlign !== 'center' && node.textAlign !== 'end')) {\n    slate.Transforms.unsetNodes(editor, 'textAlign', {\n      at: path\n    });\n    return true;\n  }\n\n  if (node.type === 'divider' && !dividers) {\n    slate.Transforms.removeNodes(editor, {\n      at: path\n    });\n    return true;\n  }\n\n  return normalizeInlineBasedOnLinksAndRelationships([node, path], editor, links, relationshipsEnabled, relationships);\n}\nfunction withDocumentFeaturesNormalization(documentFeatures, relationships, editor) {\n  const {\n    normalizeNode\n  } = editor;\n\n  const documentFeaturesForNormalization = _objectSpread(_objectSpread({}, documentFeatures), {}, {\n    relationships: true\n  });\n\n  editor.normalizeNode = _ref5 => {\n    let [node, path] = _ref5;\n\n    if (slate.Text.isText(node)) {\n      normalizeTextBasedOnInlineMarksAndSoftBreaks([node, path], editor, documentFeatures.formatting.inlineMarks, documentFeatures.formatting.softBreaks);\n    } else if (slate.Element.isElement(node)) {\n      normalizeElementBasedOnDocumentFeatures([node, path], editor, documentFeaturesForNormalization, relationships);\n    }\n\n    normalizeNode([node, path]);\n  };\n\n  return editor;\n}\n\nfunction getAncestorComponentBlock(editor) {\n  if (editor.selection) {\n    const ancestorEntry = slate.Editor.above(editor, {\n      match: node => slate.Editor.isBlock(editor, node) && node.type !== 'paragraph'\n    });\n\n    if (ancestorEntry && (ancestorEntry[0].type === 'component-block-prop' || ancestorEntry[0].type === 'component-inline-prop')) {\n      return {\n        isInside: true,\n        componentBlock: slate.Editor.parent(editor, ancestorEntry[1]),\n        prop: ancestorEntry\n      };\n    }\n  }\n\n  return {\n    isInside: false\n  };\n}\n\nconst alreadyNormalizedThings = new WeakMap();\n\nfunction normalizeNodeWithinComponentProp(_ref, editor, fieldOptions, relationships) {\n  let [node, path] = _ref;\n  let alreadyNormalizedNodes = alreadyNormalizedThings.get(fieldOptions);\n\n  if (!alreadyNormalizedNodes) {\n    alreadyNormalizedNodes = new WeakSet();\n    alreadyNormalizedThings.set(fieldOptions, alreadyNormalizedNodes);\n  }\n\n  if (alreadyNormalizedNodes.has(node)) {\n    return false;\n  }\n\n  let didNormalization = false;\n\n  if (fieldOptions.inlineMarks !== 'inherit' && slate.Text.isText(node)) {\n    didNormalization = normalizeTextBasedOnInlineMarksAndSoftBreaks([node, path], editor, fieldOptions.inlineMarks, fieldOptions.softBreaks);\n  }\n\n  if (slate.Element.isElement(node)) {\n    let childrenHasChanged = node.children.map((node, i) => normalizeNodeWithinComponentProp([node, [...path, i]], editor, fieldOptions, relationships)) // .map then .some because we don't want to exit early\n    .some(x => x);\n\n    if (fieldOptions.kind === 'block') {\n      didNormalization = normalizeElementBasedOnDocumentFeatures([node, path], editor, fieldOptions.documentFeatures, relationships) || childrenHasChanged;\n    } else {\n      didNormalization = normalizeInlineBasedOnLinksAndRelationships([node, path], editor, fieldOptions.documentFeatures.links, fieldOptions.documentFeatures.relationships, relationships);\n    }\n  }\n\n  if (didNormalization === false) {\n    alreadyNormalizedNodes.add(node);\n  }\n\n  return didNormalization;\n}\n\nfunction withComponentBlocks(blockComponents, editorDocumentFeatures, relationships, editor) {\n  // note that conflicts between the editor document features\n  // and the child field document features are dealt with elsewhere\n  const memoizedGetDocumentFeaturesForChildField = weakMemoize__default[\"default\"](options => {\n    return getDocumentFeaturesForChildField(editorDocumentFeatures, options);\n  });\n  const {\n    normalizeNode,\n    deleteBackward,\n    insertBreak\n  } = editor;\n\n  editor.deleteBackward = unit => {\n    if (editor.selection) {\n      const ancestorComponentBlock = getAncestorComponentBlock(editor);\n\n      if (ancestorComponentBlock.isInside && slate.Range.isCollapsed(editor.selection) && slate.Editor.isStart(editor, editor.selection.anchor, ancestorComponentBlock.prop[1]) && ancestorComponentBlock.prop[1][ancestorComponentBlock.prop[1].length - 1] === 0) {\n        slate.Transforms.unwrapNodes(editor, {\n          at: ancestorComponentBlock.componentBlock[1]\n        });\n        return;\n      }\n    }\n\n    deleteBackward(unit);\n  };\n\n  editor.insertBreak = () => {\n    const ancestorComponentBlock = getAncestorComponentBlock(editor);\n\n    if (editor.selection && ancestorComponentBlock.isInside) {\n      const {\n        prop: [componentPropNode, componentPropPath],\n        componentBlock: [componentBlockNode, componentBlockPath]\n      } = ancestorComponentBlock;\n      const isLastProp = componentPropPath[componentPropPath.length - 1] === componentBlockNode.children.length - 1;\n\n      if (componentPropNode.type === 'component-block-prop') {\n        const [[paragraphNode, paragraphPath]] = slate.Editor.nodes(editor, {\n          match: node => node.type === 'paragraph'\n        });\n        const isLastParagraph = paragraphPath[paragraphPath.length - 1] === componentPropNode.children.length - 1;\n\n        if (slate.Node.string(paragraphNode) === '' && isLastParagraph) {\n          if (isLastProp) {\n            slate.Transforms.moveNodes(editor, {\n              at: paragraphPath,\n              to: slate.Path.next(ancestorComponentBlock.componentBlock[1])\n            });\n          } else {\n            // TODO: this goes to the start of the next block, is that right?\n            // should we just insertBreak always here?\n            slate.Transforms.move(editor, {\n              distance: 1,\n              unit: 'line'\n            });\n            slate.Transforms.removeNodes(editor, {\n              at: paragraphPath\n            });\n          }\n\n          return;\n        }\n      }\n\n      if (componentPropNode.type === 'component-inline-prop') {\n        slate.Editor.withoutNormalizing(editor, () => {\n          slate.Transforms.splitNodes(editor, {\n            always: true\n          });\n          const splitNodePath = slate.Path.next(componentPropPath);\n\n          if (isLastProp) {\n            slate.Transforms.moveNodes(editor, {\n              at: splitNodePath,\n              to: slate.Path.next(componentBlockPath)\n            });\n          } else {\n            moveChildren(editor, splitNodePath, [...slate.Path.next(splitNodePath), 0]);\n            slate.Transforms.removeNodes(editor, {\n              at: splitNodePath\n            });\n          }\n        });\n        return;\n      }\n    }\n\n    insertBreak();\n  };\n\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n\n    if (slate.Element.isElement(node) || slate.Editor.isEditor(node)) {\n      if (node.type === 'component-inline-prop' && !node.propPath && (node.children.length !== 1 || !slate.Text.isText(node.children[0]) || node.children[0].text !== '')) {\n        slate.Transforms.removeNodes(editor, {\n          at: path\n        });\n        return;\n      }\n\n      if (slate.Element.isElement(node) && node.type === 'component-block') {\n        const componentBlock = blockComponents[node.component];\n\n        if (componentBlock) {\n          let missingKeys = new Map(findChildPropPaths(node.props, componentBlock.props).map(x => [JSON.stringify(x.path), x.options.kind]));\n          node.children.forEach(node => {\n            assert(node.type === 'component-block-prop' || node.type === 'component-inline-prop');\n            missingKeys.delete(JSON.stringify(node.propPath));\n          });\n\n          if (missingKeys.size) {\n            slate.Transforms.insertNodes(editor, [...missingKeys].map(_ref2 => {\n              let [prop, kind] = _ref2;\n              return {\n                type: `component-${kind}-prop`,\n                propPath: prop ? JSON.parse(prop) : prop,\n                children: [{\n                  text: ''\n                }]\n              };\n            }), {\n              at: [...path, node.children.length]\n            });\n            return;\n          }\n\n          let foundProps = new Set();\n          let stringifiedInlinePropPaths = {};\n          findChildPropPaths(node.props, blockComponents[node.component].props).forEach((x, index) => {\n            stringifiedInlinePropPaths[JSON.stringify(x.path)] = {\n              options: x.options,\n              index\n            };\n          });\n\n          for (const [index, childNode] of node.children.entries()) {\n            if ( // children that are not these will be handled by\n            // the generic allowedChildren normalization\n            childNode.type === 'component-inline-prop' || childNode.type === 'component-block-prop') {\n              const childPath = [...path, index];\n              const stringifiedPropPath = JSON.stringify(childNode.propPath);\n\n              if (stringifiedInlinePropPaths[stringifiedPropPath] === undefined) {\n                slate.Transforms.removeNodes(editor, {\n                  at: childPath\n                });\n                return;\n              } else {\n                if (foundProps.has(stringifiedPropPath)) {\n                  slate.Transforms.removeNodes(editor, {\n                    at: childPath\n                  });\n                  return;\n                }\n\n                foundProps.add(stringifiedPropPath);\n                const propInfo = stringifiedInlinePropPaths[stringifiedPropPath];\n                const expectedIndex = propInfo.index;\n\n                if (index !== expectedIndex) {\n                  slate.Transforms.moveNodes(editor, {\n                    at: childPath,\n                    to: [...path, expectedIndex]\n                  });\n                  return;\n                }\n\n                const expectedChildNodeType = `component-${propInfo.options.kind}-prop`;\n\n                if (childNode.type !== expectedChildNodeType) {\n                  slate.Transforms.setNodes(editor, {\n                    type: expectedChildNodeType\n                  }, {\n                    at: childPath\n                  });\n                  return;\n                }\n\n                const documentFeatures = memoizedGetDocumentFeaturesForChildField(propInfo.options);\n\n                if (normalizeNodeWithinComponentProp([childNode, childPath], editor, documentFeatures, relationships)) {\n                  return;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    normalizeNode(entry);\n  };\n\n  return editor;\n}\n\nconst ComponentBlockContext = /*#__PURE__*/React.createContext({});\nfunction getPlaceholderTextForPropPath(propPath, fields, formProps) {\n  const prop = propPath[0];\n  const field = fields[prop];\n\n  if (field.kind === 'relationship' || field.kind === 'form') {\n    throw new Error('unexpected prop field when finding placeholder text for child prop');\n  }\n\n  if (field.kind === 'object') {\n    return getPlaceholderTextForPropPath(propPath.slice(1), field.value, formProps[prop]);\n  }\n\n  if (field.kind === 'conditional') {\n    return getPlaceholderTextForPropPath(propPath.slice(1), {\n      value: field.values[formProps[prop].discriminant]\n    }, formProps[prop]);\n  }\n\n  return field.options.placeholder;\n}\nfunction ComponentInlineProp(props) {\n  return core.jsx(\"span\", props.attributes, props.children);\n}\nfunction insertComponentBlock(editor, componentBlocks, componentBlock, relationships) {\n  let node = getInitialValue(componentBlock, componentBlocks[componentBlock], relationships);\n  insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, node);\n  const componentBlockEntry = slate.Editor.above(editor, {\n    match: node => node.type === 'component-block'\n  });\n\n  if (componentBlockEntry) {\n    const start = slate.Editor.start(editor, componentBlockEntry[1]);\n    slate.Transforms.setSelection(editor, {\n      anchor: start,\n      focus: start\n    });\n  }\n}\nconst BlockComponentsButtons = _ref => {\n  let {\n    onClose\n  } = _ref;\n  const editor = slateReact.useSlateStatic();\n  const blockComponents = React.useContext(ComponentBlockContext);\n  const relationships = useDocumentFieldRelationships();\n  return core.jsx(React.Fragment, null, Object.keys(blockComponents).map(key => core.jsx(toolbar.ToolbarButton, {\n    key: key,\n    onMouseDown: event => {\n      event.preventDefault();\n      insertComponentBlock(editor, blockComponents, key, relationships);\n      onClose();\n    }\n  }, blockComponents[key].label)));\n};\nconst ComponentBlocksElement = _ref2 => {\n  let {\n    attributes,\n    children,\n    element: __elementToGetPath\n  } = _ref2;\n  const editor = slateReact.useSlateStatic();\n  const focused = slateReact.useFocused();\n  const selected = slateReact.useSelected();\n  const [editMode, setEditMode] = React.useState(false);\n  const [currentElement, setElement] = useElementWithSetNodes(editor, __elementToGetPath);\n  const {\n    colors,\n    fields,\n    spacing,\n    typography\n  } = core.useTheme();\n  const blockComponents = React.useContext(ComponentBlockContext);\n  const componentBlock = blockComponents[currentElement.component];\n  const isValid = React.useMemo(() => {\n    return componentBlock ? clientSideValidateProp({\n      kind: 'object',\n      value: componentBlock.props\n    }, currentElement.props) : true;\n  }, [componentBlock, currentElement.props]);\n  const documentFieldRelationships = useDocumentFieldRelationships();\n\n  if (!componentBlock) {\n    return core.jsx(\"div\", {\n      css: {\n        border: 'red 4px solid',\n        padding: spacing.medium\n      }\n    }, core.jsx(\"pre\", {\n      contentEditable: false,\n      css: {\n        userSelect: 'none'\n      }\n    }, `The block \"${currentElement.component}\" no longer exists.\n\nProps:\n\n${JSON.stringify(currentElement.props, null, 2)}\n\nContent:`), children);\n  }\n\n  return core.jsx(\"div\", _extends({\n    \"data-with-chrome\": !componentBlock.chromeless,\n    css: {\n      marginBottom: spacing.xlarge,\n      marginTop: spacing.xlarge,\n      '&[data-with-chrome=true]': {\n        paddingLeft: spacing.xlarge,\n        position: 'relative',\n        ':before': {\n          content: '\" \"',\n          backgroundColor: editMode ? colors.linkColor : colors.border,\n          borderRadius: 4,\n          width: 4,\n          position: 'absolute',\n          left: 0,\n          top: 0,\n          bottom: 0,\n          zIndex: 1\n        }\n      }\n    }\n  }, attributes), !componentBlock.chromeless && core.jsx(api.NotEditable, {\n    css: {\n      color: fields.legendColor,\n      display: 'block',\n      fontSize: typography.fontSize.small,\n      fontWeight: typography.fontWeight.bold,\n      lineHeight: 1,\n      marginBottom: spacing.small,\n      textTransform: 'uppercase'\n    }\n  }, componentBlock.label), editMode && core.jsx(FormValue, {\n    isValid: isValid,\n    componentBlock: componentBlock,\n    onClose: () => {\n      setEditMode(false);\n    },\n    value: currentElement.props,\n    onChange: val => {\n      setElement({\n        props: val\n      });\n    }\n  }), core.jsx(\"div\", {\n    css: {\n      display: editMode ? 'none' : 'block',\n      position: 'relative'\n    }\n  }, editMode ? children : core.jsx(ComponentBlockRender, {\n    children: children,\n    componentBlock: componentBlock,\n    element: currentElement,\n    onElementChange: setElement\n  }), !editMode && (() => {\n    const toolbarProps = createPreviewProps(currentElement, componentBlock, {}, documentFieldRelationships, setElement);\n    const ChromefulToolbar = componentBlock.toolbar ? componentBlock.toolbar : DefaultToolbarWithChrome;\n    const ChromelessToolbar = componentBlock.chromeless && componentBlock.toolbar ? componentBlock.toolbar : DefaultToolbarWithoutChrome;\n    return componentBlock.chromeless ? focused && selected && core.jsx(toolbar.InlineDialog, {\n      isRelative: true\n    }, core.jsx(ChromelessToolbar, {\n      onRemove: () => {\n        const path = slateReact.ReactEditor.findPath(editor, __elementToGetPath);\n        slate.Transforms.removeNodes(editor, {\n          at: path\n        });\n      },\n      props: toolbarProps\n    })) : core.jsx(ChromefulToolbar, {\n      isValid: isValid,\n      onRemove: () => {\n        const path = slateReact.ReactEditor.findPath(editor, __elementToGetPath);\n        slate.Transforms.removeNodes(editor, {\n          at: path\n        });\n      },\n      onShowEditMode: () => {\n        setEditMode(true);\n      },\n      props: toolbarProps\n    });\n  })()));\n};\n\nfunction DefaultToolbarWithChrome(_ref3) {\n  let {\n    onShowEditMode,\n    onRemove,\n    isValid\n  } = _ref3;\n  const theme = core.useTheme();\n  return core.jsx(toolbar.ToolbarGroup, {\n    as: api.NotEditable,\n    marginTop: \"small\"\n  }, core.jsx(toolbar.ToolbarButton, {\n    onClick: () => {\n      onShowEditMode();\n    }\n  }, \"Edit\"), core.jsx(toolbar.ToolbarSeparator, null), core.jsx(tooltip.Tooltip, {\n    content: \"Remove\",\n    weight: \"subtle\"\n  }, attrs => core.jsx(toolbar.ToolbarButton, _extends({\n    variant: \"destructive\",\n    onClick: () => {\n      onRemove();\n    }\n  }, attrs), core.jsx(Trash2Icon.Trash2Icon, {\n    size: \"small\"\n  }))), !isValid && core.jsx(React.Fragment, null, core.jsx(toolbar.ToolbarSeparator, null), core.jsx(\"span\", {\n    css: {\n      color: theme.palette.red500,\n      display: 'flex',\n      alignItems: 'center',\n      paddingLeft: theme.spacing.small\n    }\n  }, \"Please edit the form, there are invalid fields.\")));\n}\n\nfunction DefaultToolbarWithoutChrome(_ref4) {\n  let {\n    onRemove\n  } = _ref4;\n  return core.jsx(tooltip.Tooltip, {\n    content: \"Remove\",\n    weight: \"subtle\"\n  }, attrs => core.jsx(toolbar.ToolbarButton, _extends({\n    variant: \"destructive\",\n    onMouseDown: event => {\n      event.preventDefault();\n      onRemove();\n    }\n  }, attrs), core.jsx(Trash2Icon.Trash2Icon, {\n    size: \"small\"\n  })));\n}\n\nfunction ComponentBlockRender(_ref5) {\n  let {\n    componentBlock,\n    element,\n    onElementChange,\n    children\n  } = _ref5;\n  const childrenByPath = {};\n  let maybeChild;\n  children.forEach(child => {\n    let stringified = JSON.stringify(child.props.children.props.element.propPath);\n\n    if (stringified === undefined) {\n      maybeChild = child;\n    } else {\n      childrenByPath[stringified] = child;\n    }\n  });\n  const previewProps = createPreviewProps(element, componentBlock, childrenByPath, useDocumentFieldRelationships(), onElementChange);\n  return core.jsx(React.Fragment, null, core.jsx(componentBlock.component, previewProps), core.jsx(\"span\", {\n    css: {\n      display: 'none'\n    }\n  }, maybeChild));\n}\n\nconst LayoutOptionsContext = /*#__PURE__*/React.createContext([]);\nconst LayoutOptionsProvider = LayoutOptionsContext.Provider; // UI Components\n\nconst LayoutContainer = _ref => {\n  let {\n    attributes,\n    children,\n    element\n  } = _ref;\n  const {\n    spacing\n  } = core.useTheme();\n  const focused = slateReact.useFocused();\n  const selected = slateReact.useSelected();\n  const editor = slateReact.useSlateStatic();\n  const layout = element.layout;\n  const layoutOptions = React.useContext(LayoutOptionsContext);\n  return core.jsx(\"div\", _extends({\n    css: {\n      marginBottom: spacing.medium,\n      marginTop: spacing.medium,\n      position: 'relative'\n    }\n  }, attributes), core.jsx(\"div\", {\n    css: {\n      columnGap: spacing.small,\n      display: 'grid',\n      gridTemplateColumns: layout.map(x => `${x}fr`).join(' ')\n    }\n  }, children), focused && selected && core.jsx(toolbar.InlineDialog, {\n    isRelative: true\n  }, core.jsx(toolbar.ToolbarGroup, null, layoutOptions.map((layoutOption, i) => core.jsx(toolbar.ToolbarButton, {\n    isSelected: layoutOption.toString() === layout.toString(),\n    key: i,\n    onMouseDown: event => {\n      event.preventDefault();\n      const path = slateReact.ReactEditor.findPath(editor, element);\n      slate.Transforms.setNodes(editor, {\n        type: 'layout',\n        layout: layoutOption\n      }, {\n        at: path\n      });\n    }\n  }, makeLayoutIcon(layoutOption))), core.jsx(toolbar.ToolbarSeparator, null), core.jsx(tooltip.Tooltip, {\n    content: \"Remove\",\n    weight: \"subtle\"\n  }, attrs => core.jsx(toolbar.ToolbarButton, _extends({\n    variant: \"destructive\",\n    onMouseDown: event => {\n      event.preventDefault();\n      const path = slateReact.ReactEditor.findPath(editor, element);\n      slate.Transforms.removeNodes(editor, {\n        at: path\n      });\n    }\n  }, attrs), core.jsx(Trash2Icon.Trash2Icon, {\n    size: \"small\"\n  }))))));\n};\nconst LayoutArea = _ref2 => {\n  let {\n    attributes,\n    children\n  } = _ref2;\n  const {\n    colors,\n    radii,\n    spacing\n  } = core.useTheme();\n  return core.jsx(\"div\", _extends({\n    css: {\n      border: `2px dashed ${colors.border}`,\n      borderRadius: radii.small,\n      paddingLeft: spacing.medium,\n      paddingRight: spacing.medium\n    }\n  }, attributes), children);\n};\nconst insertLayout = (editor, layout) => {\n  insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, [{\n    type: 'layout',\n    layout,\n    children: [{\n      type: 'layout-area',\n      children: [{\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      }]\n    }]\n  }]);\n  const layoutEntry = slate.Editor.above(editor, {\n    match: x => x.type === 'layout'\n  });\n\n  if (layoutEntry) {\n    slate.Transforms.select(editor, [...layoutEntry[1], 0]);\n  }\n}; // Plugin\n\nfunction withLayouts(editor) {\n  const {\n    normalizeNode,\n    deleteBackward\n  } = editor;\n\n  editor.deleteBackward = unit => {\n    if (editor.selection && slate.Range.isCollapsed(editor.selection) && // this is just an little optimisation\n    // we're only doing things if we're at the start of a layout area\n    // and the start of anything will always be offset 0\n    // so we'll bailout if we're not at offset 0\n    editor.selection.anchor.offset === 0) {\n      const [aboveNode, abovePath] = slate.Editor.above(editor, {\n        match: node => node.type === 'layout-area'\n      }) || [editor, []];\n\n      if (aboveNode.type === 'layout-area' && slate.Point.equals(slate.Editor.start(editor, abovePath), editor.selection.anchor)) {\n        return;\n      }\n    }\n\n    deleteBackward(unit);\n  };\n\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n\n    if (slate.Element.isElement(node) && node.type === 'layout') {\n      if (node.layout === undefined) {\n        slate.Transforms.unwrapNodes(editor, {\n          at: path\n        });\n        return;\n      }\n\n      if (node.children.length < node.layout.length) {\n        slate.Transforms.insertNodes(editor, Array.from({\n          length: node.layout.length - node.children.length\n        }).map(() => ({\n          type: 'layout-area',\n          children: [paragraphElement()]\n        })), {\n          at: [...path, node.children.length]\n        });\n        return;\n      }\n\n      if (node.children.length > node.layout.length) {\n        Array.from({\n          length: node.children.length - node.layout.length\n        }).map((_, i) => i).reverse().forEach(i => {\n          const layoutAreaToRemovePath = [...path, i + node.layout.length];\n          const child = node.children[i + node.layout.length];\n          moveChildren(editor, layoutAreaToRemovePath, [...path, node.layout.length - 1, node.children[node.layout.length - 1].children.length], node => node.type !== 'paragraph' || slate.Node.string(child) !== '');\n          slate.Transforms.removeNodes(editor, {\n            at: layoutAreaToRemovePath\n          });\n        });\n        return;\n      }\n    }\n\n    normalizeNode(entry);\n  };\n\n  return editor;\n} // Utils\n// ------------------------------\n\nfunction makeLayoutIcon(ratios) {\n  const size = 16;\n  const element = core.jsx(\"div\", {\n    role: \"img\",\n    css: {\n      display: 'grid',\n      gridTemplateColumns: ratios.map(r => `${r}fr`).join(' '),\n      gap: 2,\n      width: size,\n      height: size\n    }\n  }, ratios.map((_, i) => {\n    return core.jsx(\"div\", {\n      key: i,\n      css: {\n        backgroundColor: 'currentcolor',\n        borderRadius: 1\n      }\n    });\n  }));\n  return element;\n}\n\nconst layoutsIcon = core.jsx(ColumnsIcon.ColumnsIcon, {\n  size: \"small\"\n});\nconst LayoutsButton = _ref3 => {\n  let {\n    layouts\n  } = _ref3;\n  const {\n    editor,\n    layouts: {\n      isSelected\n    }\n  } = useToolbarState();\n  return React.useMemo(() => core.jsx(tooltip.Tooltip, {\n    content: \"Layouts\",\n    weight: \"subtle\"\n  }, attrs => core.jsx(toolbar.ToolbarButton, _extends({\n    isSelected: isSelected,\n    onMouseDown: event => {\n      event.preventDefault();\n\n      if (isElementActive(editor, 'layout')) {\n        slate.Transforms.unwrapNodes(editor, {\n          match: node => node.type === 'layout'\n        });\n        return;\n      }\n\n      insertLayout(editor, layouts[0]);\n    }\n  }, attrs), layoutsIcon)), [editor, isSelected, layouts]);\n};\n\nconst _excluded$1 = [\"type\"];\nconst isListType = type => type === 'ordered-list' || type === 'unordered-list';\nconst isListNode = node => isListType(node.type);\nconst toggleList = (editor, format) => {\n  const listAbove = getListTypeAbove(editor);\n  const isActive = isElementActive(editor, format) && (listAbove === 'none' || listAbove === format);\n  slate.Editor.withoutNormalizing(editor, () => {\n    slate.Transforms.unwrapNodes(editor, {\n      match: isListNode,\n      split: true,\n      mode: isActive ? 'all' : 'lowest'\n    });\n\n    if (!isActive) {\n      slate.Transforms.wrapNodes(editor, {\n        type: format,\n        children: []\n      }, {\n        match: x => x.type !== 'list-item-content' && slate.Editor.isBlock(editor, x)\n      });\n    }\n  });\n};\n\nfunction getAncestorList(editor) {\n  if (editor.selection) {\n    const listItem = slate.Editor.above(editor, {\n      match: nodeTypeMatcher('list-item')\n    });\n    const list = slate.Editor.above(editor, {\n      match: isListNode\n    });\n\n    if (listItem && list) {\n      return {\n        isInside: true,\n        listItem,\n        list\n      };\n    }\n  }\n\n  return {\n    isInside: false\n  };\n}\n\nfunction withList(editor) {\n  const {\n    insertBreak,\n    normalizeNode,\n    deleteBackward\n  } = editor;\n\n  editor.deleteBackward = unit => {\n    if (editor.selection) {\n      const ancestorList = getAncestorList(editor);\n\n      if (ancestorList.isInside && slate.Range.isCollapsed(editor.selection) && slate.Editor.isStart(editor, editor.selection.anchor, ancestorList.list[1])) {\n        slate.Transforms.unwrapNodes(editor, {\n          match: isListNode,\n          split: true\n        });\n        return;\n      }\n    }\n\n    deleteBackward(unit);\n  };\n\n  editor.insertBreak = () => {\n    const [listItem] = slate.Editor.nodes(editor, {\n      match: node => node.type === 'list-item',\n      mode: 'lowest'\n    });\n\n    if (listItem && slate.Node.string(listItem[0]) === '') {\n      slate.Transforms.unwrapNodes(editor, {\n        match: isListNode,\n        split: true\n      });\n      return;\n    }\n\n    insertBreak();\n  };\n\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n\n    if (slate.Element.isElement(node) || slate.Editor.isEditor(node)) {\n      const isElementBeingNormalizedAList = isListNode(node);\n\n      for (const [childNode, childPath] of slate.Node.children(editor, path)) {\n        const index = childPath[childPath.length - 1]; // merge sibling lists\n\n        if (isListNode(childNode)) {\n          var _node$children;\n\n          if (((_node$children = node.children[childPath[childPath.length - 1] + 1]) === null || _node$children === void 0 ? void 0 : _node$children.type) === childNode.type) {\n            const siblingNodePath = slate.Path.next(childPath);\n            moveChildren(editor, siblingNodePath, [...childPath, childNode.children.length]);\n            slate.Transforms.removeNodes(editor, {\n              at: siblingNodePath\n            });\n            return;\n          }\n\n          if (isElementBeingNormalizedAList) {\n            const previousChild = node.children[index - 1];\n\n            if (slate.Element.isElement(previousChild)) {\n              slate.Transforms.moveNodes(editor, {\n                at: childPath,\n                to: [...slate.Path.previous(childPath), previousChild.children.length - 1]\n              });\n            } else {\n              slate.Transforms.unwrapNodes(editor, {\n                at: childPath\n              });\n            }\n\n            return;\n          }\n        }\n\n        if (node.type === 'list-item' && childNode.type !== 'list-item-content' && index === 0 && slate.Editor.isBlock(editor, childNode)) {\n          if (path[path.length - 1] !== 0) {\n            const previousChild = slate.Node.get(editor, slate.Path.previous(path));\n\n            if (slate.Element.isElement(previousChild)) {\n              slate.Transforms.moveNodes(editor, {\n                at: path,\n                to: [...slate.Path.previous(path), previousChild.children.length]\n              });\n              return;\n            }\n          }\n\n          slate.Transforms.unwrapNodes(editor, {\n            at: childPath\n          });\n          return;\n        }\n\n        if (node.type === 'list-item' && childNode.type === 'list-item-content' && index !== 0) {\n          slate.Transforms.splitNodes(editor, {\n            at: childPath\n          });\n          return;\n        }\n      }\n    }\n\n    normalizeNode(entry);\n  };\n\n  return editor;\n}\nconst ListButton = /*#__PURE__*/React.forwardRef(function ListButton(props, ref) {\n  const {\n    editor,\n    lists: {\n      [props.type === 'ordered-list' ? 'ordered' : 'unordered']: {\n        isDisabled,\n        isSelected\n      }\n    }\n  } = useToolbarState();\n  return React.useMemo(() => {\n    const {\n      type\n    } = props,\n          restProps = _objectWithoutProperties(props, _excluded$1);\n\n    return core.jsx(toolbar.ToolbarButton, _extends({\n      ref: ref,\n      isDisabled: isDisabled,\n      isSelected: isSelected,\n      onMouseDown: event => {\n        event.preventDefault();\n        toggleList(editor, type);\n      }\n    }, restProps));\n  }, [props, ref, isDisabled, isSelected, editor]);\n});\nfunction nestList(editor) {\n  const block = slate.Editor.above(editor, {\n    match: n => slate.Editor.isBlock(editor, n)\n  });\n\n  if (!block || block[0].type !== 'list-item-content') {\n    return false;\n  }\n\n  const listItemPath = slate.Path.parent(block[1]); // we're the first item in the list therefore we can't nest\n\n  if (listItemPath[listItemPath.length - 1] === 0) {\n    return false;\n  }\n\n  const previousListItemPath = slate.Path.previous(listItemPath);\n  const previousListItemNode = slate.Node.get(editor, previousListItemPath);\n\n  if (previousListItemNode.children.length !== 1) {\n    // there's a list nested inside our previous sibling list item so move there\n    slate.Transforms.moveNodes(editor, {\n      at: listItemPath,\n      to: [...previousListItemPath, previousListItemNode.children.length - 1, previousListItemNode.children[previousListItemNode.children.length - 1].children.length]\n    });\n    return true;\n  }\n\n  const type = slate.Editor.parent(editor, slate.Path.parent(block[1]))[0].type;\n  slate.Editor.withoutNormalizing(editor, () => {\n    slate.Transforms.wrapNodes(editor, {\n      type,\n      children: []\n    }, {\n      at: listItemPath\n    });\n    slate.Transforms.moveNodes(editor, {\n      to: [...previousListItemPath, previousListItemNode.children.length],\n      at: listItemPath\n    });\n  });\n  return true;\n}\nfunction unnestList(editor) {\n  const block = slate.Editor.above(editor, {\n    match: n => slate.Editor.isBlock(editor, n)\n  });\n\n  if (block && block[0].type === 'list-item-content') {\n    slate.Transforms.unwrapNodes(editor, {\n      match: isListNode,\n      split: true\n    });\n    return true;\n  }\n\n  return false;\n}\n\nconst ToolbarStateContext = /*#__PURE__*/React__default[\"default\"].createContext(null);\nfunction useToolbarState() {\n  const toolbarState = React.useContext(ToolbarStateContext);\n\n  if (!toolbarState) {\n    throw new Error('ToolbarStateProvider must be used to use useToolbarState');\n  }\n\n  return toolbarState;\n}\nfunction getAncestorComponentChildFieldDocumentFeatures(editor, editorDocumentFeatures, componentBlocks) {\n  const ancestorComponentProp = slate.Editor.above(editor, {\n    match: nodeTypeMatcher('component-block-prop', 'component-inline-prop')\n  });\n\n  if (ancestorComponentProp) {\n    const propPath = ancestorComponentProp[0].propPath;\n    const ancestorComponent = slate.Editor.parent(editor, ancestorComponentProp[1]);\n\n    if (ancestorComponent[0].type === 'component-block') {\n      const component = ancestorComponent[0].component;\n      const componentBlock = componentBlocks[component];\n\n      if (componentBlock && propPath) {\n        var _getChildFieldAtPropP;\n\n        const options = (_getChildFieldAtPropP = getChildFieldAtPropPath(propPath, ancestorComponent[0].props, componentBlock.props)) === null || _getChildFieldAtPropP === void 0 ? void 0 : _getChildFieldAtPropP.options;\n\n        if (options) {\n          return getDocumentFeaturesForChildField(editorDocumentFeatures, options);\n        }\n      }\n    }\n  }\n}\nconst createToolbarState = (editor, componentBlocks, editorDocumentFeatures) => {\n  const locationDocumentFeatures = getAncestorComponentChildFieldDocumentFeatures(editor, editorDocumentFeatures, componentBlocks) || {\n    kind: 'block',\n    inlineMarks: 'inherit',\n    documentFeatures: {\n      dividers: true,\n      formatting: {\n        alignment: {\n          center: true,\n          end: true\n        },\n        blockTypes: {\n          blockquote: true,\n          code: true\n        },\n        headingLevels: [1, 2, 3, 4, 5, 6],\n        listTypes: {\n          ordered: true,\n          unordered: true\n        }\n      },\n      layouts: editorDocumentFeatures.layouts,\n      links: true,\n      relationships: true\n    },\n    softBreaks: true\n  };\n  let [maybeCodeBlockEntry] = slate.Editor.nodes(editor, {\n    match: node => node.type !== 'code' && slate.Editor.isBlock(editor, node)\n  });\n  const editorMarks = slate.Editor.marks(editor) || {};\n  const marks = Object.fromEntries(allMarks.map(mark => [mark, {\n    isDisabled: locationDocumentFeatures.inlineMarks !== 'inherit' && !locationDocumentFeatures.inlineMarks[mark] || !maybeCodeBlockEntry,\n    isSelected: !!editorMarks[mark]\n  }])); // Editor.marks is \"what are the marks that would be applied if text was inserted now\"\n  // that's not really the UX we want, if we have some a document like this\n  // <paragraph>\n  //   <text>\n  //     <anchor />\n  //     content\n  //   </text>\n  //   <text bold>bold</text>\n  //   <text>\n  //     content\n  //     <focus />\n  //   </text>\n  // </paragraph>\n  // we want bold to be shown as selected even though if you inserted text from that selection, it wouldn't be bold\n  // so we look at all the text nodes in the selection to get their marks\n  // but only if the selection is expanded because if you're in the middle of some text\n  // with your selection collapsed with a mark but you've removed it(i.e. editor.removeMark)\n  // the text nodes you're in will have the mark but the ui should show the mark as not being selected\n\n  if (editor.selection && slate.Range.isExpanded(editor.selection)) {\n    for (const node of slate.Editor.nodes(editor, {\n      match: slate.Text.isText\n    })) {\n      for (const key of Object.keys(node[0])) {\n        if (key === 'insertMenu' || key === 'text') {\n          continue;\n        }\n\n        if (key in marks) {\n          marks[key].isSelected = true;\n        }\n      }\n    }\n  }\n\n  let [headingEntry] = slate.Editor.nodes(editor, {\n    match: nodeTypeMatcher('heading')\n  });\n  let [listEntry] = slate.Editor.nodes(editor, {\n    match: isListNode\n  });\n  let [alignableEntry] = slate.Editor.nodes(editor, {\n    match: nodeTypeMatcher('paragraph', 'heading')\n  }); // (we're gonna use markdown here because the equivelant slate structure is quite large and doesn't add value here)\n  // let's imagine a document that looks like this:\n  // - thing\n  //   1. something<cursor />\n  // in the toolbar, you don't want to see that both ordered and unordered lists are selected\n  // you want to see only ordered list selected, because\n  // - you want to know what list you're actually in, you don't really care about the outer list\n  // - when you want to change the list to a unordered list, the unordered list button should be inactive to show you can change to it\n\n  const listTypeAbove = getListTypeAbove(editor);\n  return {\n    marks,\n    textStyles: {\n      selected: headingEntry ? headingEntry[0].level : 'normal',\n      allowedHeadingLevels: locationDocumentFeatures.kind === 'block' && !listEntry ? locationDocumentFeatures.documentFeatures.formatting.headingLevels : []\n    },\n    relationships: {\n      isDisabled: !locationDocumentFeatures.documentFeatures.relationships\n    },\n    code: {\n      isSelected: isElementActive(editor, 'code'),\n      isDisabled: !(locationDocumentFeatures.kind === 'block' && locationDocumentFeatures.documentFeatures.formatting.blockTypes.code)\n    },\n    lists: {\n      ordered: {\n        isSelected: isElementActive(editor, 'ordered-list') && (listTypeAbove === 'none' || listTypeAbove === 'ordered-list'),\n        isDisabled: !(locationDocumentFeatures.kind === 'block' && locationDocumentFeatures.documentFeatures.formatting.listTypes.ordered && !headingEntry)\n      },\n      unordered: {\n        isSelected: isElementActive(editor, 'unordered-list') && (listTypeAbove === 'none' || listTypeAbove === 'unordered-list'),\n        isDisabled: !(locationDocumentFeatures.kind === 'block' && locationDocumentFeatures.documentFeatures.formatting.listTypes.unordered && !headingEntry)\n      }\n    },\n    alignment: {\n      isDisabled: !alignableEntry && !(locationDocumentFeatures.kind === 'block' && locationDocumentFeatures.documentFeatures.formatting.alignment),\n      selected: (alignableEntry === null || alignableEntry === void 0 ? void 0 : alignableEntry[0].textAlign) || 'start'\n    },\n    blockquote: {\n      isDisabled: !(locationDocumentFeatures.kind === 'block' && locationDocumentFeatures.documentFeatures.formatting.blockTypes.blockquote),\n      isSelected: isElementActive(editor, 'blockquote')\n    },\n    layouts: {\n      isSelected: isElementActive(editor, 'layout')\n    },\n    links: {\n      isDisabled: !editor.selection || slate.Range.isCollapsed(editor.selection) || !locationDocumentFeatures.documentFeatures.links,\n      isSelected: isElementActive(editor, 'link')\n    },\n    editor,\n    dividers: {\n      isDisabled: locationDocumentFeatures.kind === 'inline' || !locationDocumentFeatures.documentFeatures.dividers\n    },\n    clearFormatting: {\n      isDisabled: !(Object.values(marks).some(x => x.isSelected) || !!hasBlockThatClearsOnClearFormatting(editor))\n    },\n    editorDocumentFeatures\n  };\n};\n\nfunction hasBlockThatClearsOnClearFormatting(editor) {\n  const [node] = slate.Editor.nodes(editor, {\n    match: node => node.type === 'heading' || node.type === 'code' || node.type === 'blockquote'\n  });\n  return !!node;\n}\n\nfunction getListTypeAbove(editor) {\n  const listAbove = slate.Editor.above(editor, {\n    match: isListNode\n  });\n\n  if (!listAbove) {\n    return 'none';\n  }\n\n  return listAbove[0].type;\n}\nconst ToolbarStateProvider = _ref => {\n  let {\n    children,\n    componentBlocks,\n    editorDocumentFeatures,\n    relationships\n  } = _ref;\n  const editor = slateReact.useSlate();\n  return /*#__PURE__*/React__default[\"default\"].createElement(DocumentFieldRelationshipsProvider, {\n    value: relationships\n  }, /*#__PURE__*/React__default[\"default\"].createElement(LayoutOptionsProvider, {\n    value: editorDocumentFeatures.layouts\n  }, /*#__PURE__*/React__default[\"default\"].createElement(ComponentBlockContext.Provider, {\n    value: componentBlocks\n  }, /*#__PURE__*/React__default[\"default\"].createElement(ToolbarStateContext.Provider, {\n    value: createToolbarState(editor, componentBlocks, editorDocumentFeatures)\n  }, children))));\n};\n\nconst isLinkActive = editor => {\n  return isElementActive(editor, 'link');\n};\n\nconst wrapLink = (editor, url) => {\n  if (isLinkActive(editor)) {\n    slate.Transforms.unwrapNodes(editor, {\n      match: n => n.type === 'link'\n    });\n    return;\n  }\n\n  const {\n    selection\n  } = editor;\n  const isCollapsed = selection && slate.Range.isCollapsed(selection);\n\n  if (isCollapsed) {\n    slate.Transforms.insertNodes(editor, {\n      type: 'link',\n      href: url,\n      children: [{\n        text: url\n      }]\n    });\n  } else {\n    slate.Transforms.wrapNodes(editor, {\n      type: 'link',\n      href: url,\n      children: [{\n        text: ''\n      }]\n    }, {\n      split: true\n    });\n  }\n};\nconst LinkElement = _ref => {\n  let {\n    attributes,\n    children,\n    element: __elementForGettingPath\n  } = _ref;\n  const {\n    typography\n  } = core.useTheme();\n  const editor = slateReact.useSlateStatic();\n  const [currentElement, setNode] = useElementWithSetNodes(editor, __elementForGettingPath);\n  const href = currentElement.href;\n  const selected = slateReact.useSelected();\n  const focused = slateReact.useFocused();\n  const [focusedInInlineDialog, setFocusedInInlineDialog] = React.useState(false); // we want to show the link dialog when the editor is focused and the link element is selected\n  // or when the input inside the dialog is focused so you would think that would look like this:\n  // (selected && focused) || focusedInInlineDialog\n  // this doesn't work though because the blur will happen before the focus is inside the inline dialog\n  // so this component would be rendered and focused would be false so the input would be removed so it couldn't be focused\n  // to fix this, we delay our reading of the updated `focused` value so that we'll still render the dialog\n  // immediately after the editor is blurred but before the input has been focused\n\n  const [delayedFocused, setDelayedFocused] = React.useState(false);\n  React.useEffect(() => {\n    const id = setTimeout(() => {\n      setDelayedFocused(focused);\n    }, 0);\n    return () => {\n      clearTimeout(id);\n    };\n  }, [focused]);\n  const [localForceValidation, setLocalForceValidation] = React.useState(false);\n  const {\n    dialog,\n    trigger\n  } = popover.useControlledPopover({\n    isOpen: selected && focused || focusedInInlineDialog,\n    onClose: () => {}\n  }, {\n    placement: 'bottom-start',\n    modifiers: [{\n      name: 'offset',\n      options: {\n        offset: [0, 8]\n      }\n    }]\n  });\n  const unlink = useEventCallback(() => {\n    slate.Transforms.unwrapNodes(editor, {\n      at: slateReact.ReactEditor.findPath(editor, __elementForGettingPath)\n    });\n  });\n  const forceValidation = useForceValidation();\n  const showInvalidState = api.isValidURL(href) ? false : forceValidation || localForceValidation;\n  return core.jsx(\"span\", _extends({}, attributes, {\n    css: {\n      position: 'relative',\n      display: 'inline-block'\n    }\n  }), core.jsx(\"a\", _extends({}, trigger.props, {\n    css: {\n      color: showInvalidState ? 'red' : undefined\n    },\n    ref: trigger.ref,\n    href: href\n  }), children), (selected && delayedFocused || focusedInInlineDialog) && core.jsx(core.Portal, null, core.jsx(toolbar.InlineDialog, _extends({}, dialog.props, {\n    ref: dialog.ref,\n    onFocus: () => {\n      setFocusedInInlineDialog(true);\n    },\n    onBlur: () => {\n      setFocusedInInlineDialog(false);\n      setLocalForceValidation(true);\n    }\n  }), core.jsx(\"div\", {\n    css: {\n      display: 'flex',\n      flexDirection: 'column'\n    }\n  }, core.jsx(toolbar.ToolbarGroup, null, core.jsx(\"input\", {\n    css: {\n      fontSize: typography.fontSize.small,\n      width: 240\n    },\n    value: href,\n    onChange: event => {\n      setNode({\n        href: event.target.value\n      });\n    }\n  }), core.jsx(tooltip.Tooltip, {\n    content: \"Open link in new tab\",\n    weight: \"subtle\"\n  }, attrs => core.jsx(toolbar.ToolbarButton, _extends({\n    as: \"a\",\n    onMouseDown: event => {\n      event.preventDefault();\n    },\n    href: href,\n    target: \"_blank\",\n    rel: \"noreferrer\",\n    variant: \"action\"\n  }, attrs), externalLinkIcon)), separator, core.jsx(UnlinkButton, {\n    onUnlink: unlink\n  })), showInvalidState && core.jsx(\"span\", {\n    css: {\n      color: 'red'\n    }\n  }, \"Please enter a valid URL\")))));\n};\nconst separator = core.jsx(toolbar.ToolbarSeparator, null);\nconst externalLinkIcon = core.jsx(ExternalLinkIcon.ExternalLinkIcon, {\n  size: \"small\"\n});\nconst UnlinkButton = /*#__PURE__*/React.memo(function UnlinkButton(_ref2) {\n  let {\n    onUnlink\n  } = _ref2;\n  return core.jsx(tooltip.Tooltip, {\n    content: \"Unlink\",\n    weight: \"subtle\"\n  }, attrs => core.jsx(toolbar.ToolbarButton, _extends({\n    variant: \"destructive\",\n    onMouseDown: event => {\n      event.preventDefault();\n      onUnlink();\n    }\n  }, attrs), core.jsx(Trash2Icon.Trash2Icon, {\n    size: \"small\"\n  })));\n});\nlet linkIcon = core.jsx(LinkIcon.LinkIcon, {\n  size: \"small\"\n});\nconst LinkButton = /*#__PURE__*/React.forwardRef(function LinkButton(props, ref) {\n  const {\n    editor,\n    links: {\n      isDisabled,\n      isSelected\n    }\n  } = useToolbarState();\n  return React.useMemo(() => core.jsx(toolbar.ToolbarButton, _extends({\n    ref: ref,\n    isDisabled: isDisabled,\n    isSelected: isSelected,\n    onMouseDown: event => {\n      event.preventDefault();\n      wrapLink(editor, '');\n    }\n  }, props), linkIcon), [isSelected, isDisabled, editor, props, ref]);\n});\nconst linkButton = core.jsx(tooltip.Tooltip, {\n  content: \"Link\",\n  weight: \"subtle\"\n}, attrs => core.jsx(LinkButton, attrs));\nconst markdownLinkPattern = /(^|\\s)\\[(.+?)\\]\\((\\S+)\\)$/;\nfunction withLink(editorDocumentFeatures, componentBlocks, editor) {\n  const {\n    insertText,\n    isInline,\n    normalizeNode\n  } = editor;\n\n  editor.isInline = element => {\n    return element.type === 'link' ? true : isInline(element);\n  };\n\n  if (editorDocumentFeatures.links) {\n    editor.insertText = text => {\n      insertText(text);\n      if (text !== ')' || !editor.selection) return;\n      const startOfBlock = slate.Editor.start(editor, slate.Editor.above(editor, {\n        match: node => slate.Editor.isBlock(editor, node)\n      })[1]);\n      const startOfBlockToEndOfShortcutString = slate.Editor.string(editor, {\n        anchor: editor.selection.anchor,\n        focus: startOfBlock\n      });\n      const match = markdownLinkPattern.exec(startOfBlockToEndOfShortcutString);\n      if (!match) return;\n      const ancestorComponentChildFieldDocumentFeatures = getAncestorComponentChildFieldDocumentFeatures(editor, editorDocumentFeatures, componentBlocks);\n\n      if ((ancestorComponentChildFieldDocumentFeatures === null || ancestorComponentChildFieldDocumentFeatures === void 0 ? void 0 : ancestorComponentChildFieldDocumentFeatures.documentFeatures.links) === false) {\n        return;\n      }\n\n      const [, maybeWhitespace, linkText, href] = match; // by doing this, the insertText(')') above will happen in a different undo than the link replacement\n      // so that means that when someone does an undo after this\n      // it will undo to the state of \"[content](link)\" rather than \"[content](link\" (note the missing closing bracket)\n\n      editor.history.undos.push([]);\n      const startOfShortcut = match.index === 0 ? startOfBlock : EditorAfterButIgnoringingPointsWithNoContent(editor, startOfBlock, {\n        distance: match.index\n      });\n      const startOfLinkText = EditorAfterButIgnoringingPointsWithNoContent(editor, startOfShortcut, {\n        distance: maybeWhitespace === '' ? 1 : 2\n      });\n      const endOfLinkText = EditorAfterButIgnoringingPointsWithNoContent(editor, startOfLinkText, {\n        distance: linkText.length\n      });\n      slate.Transforms.delete(editor, {\n        at: {\n          anchor: endOfLinkText,\n          focus: editor.selection.anchor\n        }\n      });\n      slate.Transforms.delete(editor, {\n        at: {\n          anchor: startOfShortcut,\n          focus: startOfLinkText\n        }\n      });\n      slate.Transforms.wrapNodes(editor, {\n        type: 'link',\n        href,\n        children: []\n      }, {\n        at: {\n          anchor: editor.selection.anchor,\n          focus: startOfShortcut\n        },\n        split: true\n      });\n      const nextNode = slate.Editor.next(editor);\n\n      if (nextNode) {\n        slate.Transforms.select(editor, nextNode[1]);\n      }\n    };\n  }\n\n  editor.normalizeNode = _ref3 => {\n    let [node, path] = _ref3;\n\n    if (node.type === 'link' && slate.Node.string(node) === '') {\n      slate.Transforms.unwrapNodes(editor, {\n        at: path\n      });\n      return;\n    }\n\n    normalizeNode([node, path]);\n  };\n\n  return editor;\n}\n\nconst insertBlockquote = editor => {\n  const isActive = isElementActive(editor, 'blockquote');\n\n  if (isActive) {\n    slate.Transforms.unwrapNodes(editor, {\n      match: node => node.type === 'blockquote'\n    });\n  } else {\n    slate.Transforms.wrapNodes(editor, {\n      type: 'blockquote',\n      children: []\n    });\n  }\n};\n\nfunction getDirectBlockquoteParentFromSelection(editor) {\n  if (!editor.selection) return {\n    isInside: false\n  };\n  const [, parentPath] = slate.Editor.parent(editor, editor.selection);\n  const [maybeBlockquoteParent, maybeBlockquoteParentPath] = slate.Editor.parent(editor, parentPath);\n  const isBlockquote = maybeBlockquoteParent.type === 'blockquote';\n  return isBlockquote ? {\n    isInside: true,\n    path: maybeBlockquoteParentPath\n  } : {\n    isInside: false\n  };\n}\n\nfunction withBlockquote(editor) {\n  const {\n    insertBreak,\n    deleteBackward\n  } = editor;\n\n  editor.deleteBackward = unit => {\n    if (editor.selection) {\n      const parentBlockquote = getDirectBlockquoteParentFromSelection(editor);\n\n      if (parentBlockquote.isInside && slate.Range.isCollapsed(editor.selection) && // the selection is at the start of the paragraph\n      editor.selection.anchor.offset === 0 && // it's the first paragraph in the panel\n      editor.selection.anchor.path[editor.selection.anchor.path.length - 2] === 0) {\n        slate.Transforms.unwrapNodes(editor, {\n          match: node => node.type === 'blockquote',\n          split: true\n        });\n        return;\n      }\n    }\n\n    deleteBackward(unit);\n  };\n\n  editor.insertBreak = () => {\n    const panel = getDirectBlockquoteParentFromSelection(editor);\n\n    if (editor.selection && panel.isInside) {\n      const [node, nodePath] = slate.Editor.node(editor, editor.selection);\n\n      if (slate.Path.isDescendant(nodePath, panel.path) && slate.Node.string(node) === '') {\n        slate.Transforms.unwrapNodes(editor, {\n          match: node => node.type === 'blockquote',\n          split: true\n        });\n        return;\n      }\n    }\n\n    insertBreak();\n  };\n\n  return editor;\n}\nconst BlockquoteElement = _ref => {\n  let {\n    attributes,\n    children\n  } = _ref;\n  const {\n    colors,\n    spacing\n  } = core.useTheme();\n  return core.jsx(\"blockquote\", _extends({\n    css: {\n      borderLeft: '3px solid #CBD5E0',\n      color: colors.foregroundDim,\n      margin: 0,\n      padding: `0 ${spacing.xlarge}px`\n    }\n  }, attributes), children);\n};\n\nconst BlockquoteButton = _ref2 => {\n  let {\n    attrs\n  } = _ref2;\n  const {\n    editor,\n    blockquote: {\n      isDisabled,\n      isSelected\n    }\n  } = useToolbarState();\n  return React.useMemo(() => core.jsx(toolbar.ToolbarButton, _extends({\n    isSelected: isSelected,\n    isDisabled: isDisabled,\n    onMouseDown: event => {\n      event.preventDefault();\n      insertBlockquote(editor);\n    }\n  }, attrs), core.jsx(QuoteIcon, null)), [editor, attrs, isDisabled, isSelected]);\n};\n\nconst blockquoteButton = core.jsx(tooltip.Tooltip, {\n  content: core.jsx(React.Fragment, null, \"Quote\", core.jsx(toolbar.KeyboardInTooltip, null, '> ')),\n  weight: \"subtle\"\n}, attrs => core.jsx(BlockquoteButton, {\n  attrs: attrs\n}));\n\nconst QuoteIcon = () => core.jsx(IconBase, null, core.jsx(\"path\", {\n  d: \"M11.3031 2C9.83843 2 8.64879 3.22321 8.64879 4.73171C8.64879 6.23928 9.83843 7.46342 11.3031 7.46342C13.8195 7.46342 12.3613 12.2071 9.18767 12.7012C9.03793 12.7239 8.90127 12.7995 8.80243 12.9143C8.70358 13.029 8.64908 13.1754 8.64879 13.3268C8.64879 13.7147 8.99561 14.0214 9.37973 13.9627C15.148 13.0881 17.1991 2.00093 11.3031 2.00093V2ZM3.65526 2C2.18871 2 1 3.22228 1 4.73171C1 6.23835 2.18871 7.46155 3.65526 7.46155C6.17067 7.46155 4.71252 12.2071 1.53888 12.7012C1.3893 12.7239 1.25277 12.7993 1.15394 12.9139C1.05511 13.0285 1.00051 13.1746 1 13.3259C1 13.7137 1.34682 14.0205 1.73001 13.9617C7.50016 13.0872 9.55128 2 3.65526 2Z\"\n}));\n\nfunction withCodeBlock(editor) {\n  const {\n    insertBreak,\n    normalizeNode\n  } = editor;\n\n  editor.insertBreak = () => {\n    const [node, path] = slate.Editor.above(editor, {\n      match: n => slate.Editor.isBlock(editor, n)\n    }) || [editor, []];\n\n    if (node.type === 'code' && slate.Text.isText(node.children[0])) {\n      const text = node.children[0].text;\n\n      if (text[text.length - 1] === '\\n' && editor.selection && slate.Range.isCollapsed(editor.selection) && slate.Point.equals(slate.Editor.end(editor, path), editor.selection.anchor)) {\n        insertBreak();\n        slate.Transforms.setNodes(editor, {\n          type: 'paragraph',\n          children: []\n        });\n        slate.Transforms.delete(editor, {\n          distance: 1,\n          at: {\n            path: [...path, 0],\n            offset: text.length - 1\n          }\n        });\n        return;\n      }\n\n      editor.insertText('\\n');\n      return;\n    }\n\n    insertBreak();\n  };\n\n  editor.normalizeNode = _ref => {\n    let [node, path] = _ref;\n\n    if (node.type === 'code' && slate.Element.isElement(node)) {\n      for (const [index, childNode] of node.children.entries()) {\n        if (!slate.Text.isText(childNode)) {\n          if (editor.isVoid(childNode)) {\n            slate.Transforms.removeNodes(editor, {\n              at: [...path, index]\n            });\n          } else {\n            slate.Transforms.unwrapNodes(editor, {\n              at: [...path, index]\n            });\n          }\n\n          return;\n        }\n\n        const marks = Object.keys(childNode).filter(x => x !== 'text');\n\n        if (marks.length) {\n          slate.Transforms.unsetNodes(editor, marks, {\n            at: [...path, index]\n          });\n          return;\n        }\n      }\n    }\n\n    normalizeNode([node, path]);\n  };\n\n  return editor;\n}\n\nfunction CodeButton(_ref2) {\n  let {\n    attrs\n  } = _ref2;\n  const {\n    editor,\n    code: {\n      isDisabled,\n      isSelected\n    }\n  } = useToolbarState();\n  return React.useMemo(() => core.jsx(toolbar.ToolbarButton, _extends({\n    isSelected: isSelected,\n    isDisabled: isDisabled,\n    onMouseDown: event => {\n      event.preventDefault();\n\n      if (isSelected) {\n        slate.Transforms.unwrapNodes(editor, {\n          match: node => node.type === 'code'\n        });\n      } else {\n        slate.Transforms.wrapNodes(editor, {\n          type: 'code',\n          children: [{\n            text: ''\n          }]\n        });\n      }\n    }\n  }, attrs), core.jsx(CodeIcon.CodeIcon, {\n    size: \"small\"\n  })), [isDisabled, isSelected, attrs, editor]);\n}\n\nconst codeButton = core.jsx(tooltip.Tooltip, {\n  weight: \"subtle\",\n  content: core.jsx(React.Fragment, null, \"Code block \", core.jsx(toolbar.KeyboardInTooltip, null, \"```\"))\n}, attrs => core.jsx(CodeButton, {\n  attrs: attrs\n}));\n\nconst TextAlignMenu = _ref => {\n  let {\n    alignment\n  } = _ref;\n  const [showMenu, setShowMenu] = React.useState(false);\n  const {\n    dialog,\n    trigger\n  } = popover.useControlledPopover({\n    isOpen: showMenu,\n    onClose: () => setShowMenu(false)\n  }, {\n    placement: 'bottom-start',\n    modifiers: [{\n      name: 'offset',\n      options: {\n        offset: [0, 8]\n      }\n    }]\n  });\n  return core.jsx(\"div\", {\n    css: {\n      display: 'inline-block',\n      position: 'relative'\n    }\n  }, core.jsx(tooltip.Tooltip, {\n    content: \"Text alignment\",\n    weight: \"subtle\"\n  }, attrs => core.jsx(TextAlignButton, {\n    attrs: attrs,\n    onToggle: () => {\n      setShowMenu(x => !x);\n    },\n    trigger: trigger,\n    showMenu: showMenu\n  })), showMenu ? core.jsx(toolbar.InlineDialog, _extends({\n    ref: dialog.ref\n  }, dialog.props), core.jsx(TextAlignDialog, {\n    alignment: alignment,\n    onClose: () => {\n      setShowMenu(false);\n    }\n  })) : null);\n};\n\nfunction TextAlignDialog(_ref2) {\n  let {\n    alignment,\n    onClose\n  } = _ref2;\n  const {\n    alignment: {\n      selected\n    },\n    editor\n  } = useToolbarState();\n  const alignments = ['start', ...Object.keys(alignment).filter(key => alignment[key])];\n  return core.jsx(toolbar.ToolbarGroup, null, alignments.map(alignment => core.jsx(tooltip.Tooltip, {\n    key: alignment,\n    content: `Align ${alignment}`,\n    weight: \"subtle\"\n  }, attrs => core.jsx(toolbar.ToolbarButton, _extends({\n    isSelected: selected === alignment,\n    onMouseDown: event => {\n      event.preventDefault();\n\n      if (alignment === 'start') {\n        slate.Transforms.unsetNodes(editor, 'textAlign', {\n          match: node => node.type === 'paragraph' || node.type === 'heading'\n        });\n      } else {\n        slate.Transforms.setNodes(editor, {\n          textAlign: alignment\n        }, {\n          match: node => node.type === 'paragraph' || node.type === 'heading'\n        });\n      }\n\n      onClose();\n    }\n  }, attrs), alignmentIcons[alignment]))));\n}\n\nconst alignmentIcons = {\n  start: core.jsx(AlignLeftIcon.AlignLeftIcon, {\n    size: \"small\"\n  }),\n  center: core.jsx(AlignCenterIcon.AlignCenterIcon, {\n    size: \"small\"\n  }),\n  end: core.jsx(AlignRightIcon.AlignRightIcon, {\n    size: \"small\"\n  })\n};\n\nfunction TextAlignButton(props) {\n  const {\n    alignment: {\n      isDisabled,\n      selected\n    }\n  } = useToolbarState();\n  return React.useMemo(() => core.jsx(toolbar.ToolbarButton, _extends({\n    isDisabled: isDisabled,\n    isPressed: props.showMenu,\n    onMouseDown: event => {\n      event.preventDefault();\n      props.onToggle();\n    }\n  }, props.attrs, props.trigger.props, {\n    ref: applyRef.applyRefs(props.attrs.ref, props.trigger.ref)\n  }), alignmentIcons[selected], downIcon$1), [isDisabled, selected, props]);\n}\n\nconst downIcon$1 = core.jsx(ChevronDownIcon.ChevronDownIcon, {\n  size: \"small\"\n});\n\nconst minusIcon = /*#__PURE__*/React__default[\"default\"].createElement(MinusIcon.MinusIcon, {\n  size: \"small\"\n});\nfunction insertDivider(editor) {\n  insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n    type: 'divider',\n    children: [{\n      text: ''\n    }]\n  });\n  slate.Editor.insertNode(editor, {\n    type: 'paragraph',\n    children: [{\n      text: ''\n    }]\n  });\n}\n\nconst DividerButton = _ref => {\n  let {\n    attrs\n  } = _ref;\n  const {\n    editor,\n    dividers: {\n      isDisabled\n    }\n  } = useToolbarState();\n  return React.useMemo(() => /*#__PURE__*/React__default[\"default\"].createElement(toolbar.ToolbarButton, _extends({\n    isDisabled: isDisabled,\n    onMouseDown: event => {\n      event.preventDefault();\n      insertDivider(editor);\n    }\n  }, attrs), minusIcon), [editor, isDisabled, attrs]);\n};\n\nconst dividerButton = /*#__PURE__*/React__default[\"default\"].createElement(tooltip.Tooltip, {\n  content: /*#__PURE__*/React__default[\"default\"].createElement(React.Fragment, null, \"Divider\", /*#__PURE__*/React__default[\"default\"].createElement(toolbar.KeyboardInTooltip, null, \"---\")),\n  weight: \"subtle\"\n}, attrs => /*#__PURE__*/React__default[\"default\"].createElement(DividerButton, {\n  attrs: attrs\n}));\nfunction withDivider(editor) {\n  const {\n    isVoid\n  } = editor;\n\n  editor.isVoid = node => {\n    return node.type === 'divider' || isVoid(node);\n  };\n\n  return editor;\n}\n\nconst _excluded = [\"type\"],\n      _excluded2 = [\"ref\"];\nfunction Toolbar(_ref) {\n  let {\n    documentFeatures,\n    viewState\n  } = _ref;\n  const relationship = React.useContext(DocumentFieldRelationshipsContext);\n  const blockComponent = React.useContext(ComponentBlockContext);\n  const hasBlockItems = Object.entries(relationship).length || Object.keys(blockComponent).length;\n  return core.jsx(ToolbarContainer, null, !!documentFeatures.formatting.headingLevels.length && core.jsx(React.Fragment, null, core.jsx(HeadingMenu, {\n    headingLevels: documentFeatures.formatting.headingLevels\n  }), core.jsx(toolbar.ToolbarSeparator, null)), Object.values(documentFeatures.formatting.inlineMarks).some(x => x) && core.jsx(React.Fragment, null, core.jsx(InlineMarks, {\n    marks: documentFeatures.formatting.inlineMarks\n  }), core.jsx(toolbar.ToolbarSeparator, null)), (documentFeatures.formatting.alignment.center || documentFeatures.formatting.alignment.end) && core.jsx(TextAlignMenu, {\n    alignment: documentFeatures.formatting.alignment\n  }), documentFeatures.formatting.listTypes.unordered && core.jsx(tooltip.Tooltip, {\n    content: core.jsx(React.Fragment, null, \"Bullet List \", core.jsx(toolbar.KeyboardInTooltip, null, \"- \")),\n    weight: \"subtle\"\n  }, attrs => core.jsx(ListButton, _extends({\n    type: \"unordered-list\"\n  }, attrs), core.jsx(BulletListIcon, null))), documentFeatures.formatting.listTypes.ordered && core.jsx(tooltip.Tooltip, {\n    content: core.jsx(React.Fragment, null, \"Numbered List \", core.jsx(toolbar.KeyboardInTooltip, null, \"1. \")),\n    weight: \"subtle\"\n  }, attrs => core.jsx(ListButton, _extends({\n    type: \"ordered-list\"\n  }, attrs), core.jsx(NumberedListIcon, null))), (documentFeatures.formatting.alignment.center || documentFeatures.formatting.alignment.end || documentFeatures.formatting.listTypes.unordered || documentFeatures.formatting.listTypes.ordered) && core.jsx(toolbar.ToolbarSeparator, null), documentFeatures.dividers && dividerButton, documentFeatures.links && linkButton, documentFeatures.formatting.blockTypes.blockquote && blockquoteButton, !!documentFeatures.layouts.length && core.jsx(LayoutsButton, {\n    layouts: documentFeatures.layouts\n  }), documentFeatures.formatting.blockTypes.code && codeButton, !!hasBlockItems && core.jsx(InsertBlockMenu, null), core.jsx(toolbar.ToolbarSeparator, null), React.useMemo(() => {\n    const ExpandIcon = viewState !== null && viewState !== void 0 && viewState.expanded ? Minimize2Icon.Minimize2Icon : Maximize2Icon.Maximize2Icon;\n    return viewState && core.jsx(tooltip.Tooltip, {\n      content: viewState.expanded ? 'Collapse' : 'Expand',\n      weight: \"subtle\"\n    }, attrs => core.jsx(toolbar.ToolbarButton, _extends({\n      onMouseDown: event => {\n        event.preventDefault();\n        viewState.toggle();\n      }\n    }, attrs), core.jsx(ExpandIcon, {\n      size: \"small\"\n    })));\n  }, [viewState]));\n}\n/* UI Components */\n\nconst MarkButton = /*#__PURE__*/React.forwardRef(function MarkButton(props, ref) {\n  const {\n    editor,\n    marks: {\n      [props.type]: {\n        isDisabled,\n        isSelected\n      }\n    }\n  } = useToolbarState();\n  return React.useMemo(() => {\n    const restProps = _objectWithoutProperties(props, _excluded);\n\n    return core.jsx(toolbar.ToolbarButton, _extends({\n      ref: ref,\n      isDisabled: isDisabled,\n      isSelected: isSelected,\n      onMouseDown: event => {\n        event.preventDefault();\n\n        if (isSelected) {\n          slate.Editor.removeMark(editor, props.type);\n        } else {\n          slate.Editor.addMark(editor, props.type, true);\n        }\n      }\n    }, restProps));\n  }, [editor, isDisabled, isSelected, props, ref]);\n});\n\nconst ToolbarContainer = _ref2 => {\n  let {\n    children\n  } = _ref2;\n  const {\n    colors,\n    spacing\n  } = core.useTheme();\n  return core.jsx(\"div\", {\n    css: {\n      backgroundColor: colors.background,\n      boxShadow: `0 1px ${colors.border}, 0 -1px ${colors.border}`,\n      paddingBottom: spacing.small,\n      paddingTop: spacing.small,\n      position: 'sticky',\n      top: 0,\n      zIndex: 2\n    }\n  }, core.jsx(toolbar.ToolbarGroup, null, children));\n};\n\nconst downIcon = core.jsx(ChevronDownIcon.ChevronDownIcon, {\n  size: \"small\"\n});\n\nfunction HeadingButton(_ref3) {\n  let {\n    trigger,\n    onToggleShowMenu,\n    showMenu\n  } = _ref3;\n  const {\n    textStyles\n  } = useToolbarState();\n  let buttonLabel = textStyles.selected === 'normal' ? 'Normal text' : 'Heading ' + textStyles.selected;\n  const isDisabled = textStyles.allowedHeadingLevels.length === 0;\n  return React.useMemo(() => core.jsx(toolbar.ToolbarButton, _extends({\n    ref: trigger.ref,\n    isPressed: showMenu,\n    isDisabled: isDisabled,\n    onMouseDown: event => {\n      event.preventDefault();\n      onToggleShowMenu();\n    },\n    style: {\n      textAlign: 'left',\n      width: 116\n    }\n  }, trigger.props), core.jsx(\"span\", {\n    css: {\n      flex: 1\n    }\n  }, buttonLabel), downIcon), [buttonLabel, trigger, showMenu, onToggleShowMenu, isDisabled]);\n}\n\nconst HeadingMenu = _ref4 => {\n  let {\n    headingLevels\n  } = _ref4;\n  const [showMenu, setShowMenu] = React.useState(false);\n  const {\n    dialog,\n    trigger\n  } = popover.useControlledPopover({\n    isOpen: showMenu,\n    onClose: () => setShowMenu(false)\n  }, {\n    placement: 'bottom-start',\n    modifiers: [{\n      name: 'offset',\n      options: {\n        offset: [0, 8]\n      }\n    }]\n  });\n  return core.jsx(\"div\", {\n    css: {\n      display: 'inline-block',\n      position: 'relative'\n    }\n  }, core.jsx(HeadingButton, {\n    showMenu: showMenu,\n    trigger: trigger,\n    onToggleShowMenu: () => {\n      setShowMenu(x => !x);\n    }\n  }), showMenu ? core.jsx(toolbar.InlineDialog, _extends({\n    ref: dialog.ref\n  }, dialog.props), core.jsx(HeadingDialog, {\n    headingLevels: headingLevels,\n    onCloseMenu: () => {\n      setShowMenu(false);\n    }\n  })) : null);\n};\n\nfunction HeadingDialog(_ref5) {\n  let {\n    headingLevels,\n    onCloseMenu\n  } = _ref5;\n  const {\n    editor,\n    textStyles\n  } = useToolbarState();\n  return core.jsx(toolbar.ToolbarGroup, {\n    direction: \"column\"\n  }, headingLevels.map(hNum => {\n    let Tag = `h${hNum}`;\n    const isSelected = textStyles.selected === hNum;\n    return core.jsx(toolbar.ToolbarButton, {\n      key: hNum,\n      isSelected: isSelected,\n      onMouseDown: event => {\n        event.preventDefault();\n\n        if (isSelected) {\n          slate.Transforms.unwrapNodes(editor, {\n            match: n => n.type === 'heading'\n          });\n        } else {\n          slate.Transforms.setNodes(editor, {\n            type: 'heading',\n            level: hNum\n          }, {\n            match: node => node.type === 'paragraph' || node.type === 'heading'\n          });\n        }\n\n        onCloseMenu();\n      }\n    }, core.jsx(Tag, null, \"Heading \", hNum));\n  }));\n}\n\nfunction InsertBlockMenu() {\n  const [showMenu, setShowMenu] = React.useState(false);\n  const {\n    dialog,\n    trigger\n  } = popover.useControlledPopover({\n    isOpen: showMenu,\n    onClose: () => setShowMenu(false)\n  }, {\n    placement: 'bottom-start',\n    modifiers: [{\n      name: 'offset',\n      options: {\n        offset: [0, 8]\n      }\n    }]\n  });\n  return core.jsx(\"div\", {\n    css: {\n      display: 'inline-block',\n      position: 'relative'\n    }\n  }, core.jsx(tooltip.Tooltip, {\n    content: core.jsx(React.Fragment, null, \"Insert \", core.jsx(toolbar.KeyboardInTooltip, null, \"/\")),\n    weight: \"subtle\"\n  }, _ref6 => {\n    let {\n      ref\n    } = _ref6,\n        attrs = _objectWithoutProperties(_ref6, _excluded2);\n\n    return core.jsx(toolbar.ToolbarButton, _extends({\n      ref: applyRef.applyRefs(ref, trigger.ref),\n      isPressed: showMenu,\n      onMouseDown: event => {\n        event.preventDefault();\n        setShowMenu(v => !v);\n      }\n    }, trigger.props, attrs), core.jsx(PlusIcon.PlusIcon, {\n      size: \"small\",\n      style: {\n        strokeWidth: 3\n      }\n    }), core.jsx(ChevronDownIcon.ChevronDownIcon, {\n      size: \"small\"\n    }));\n  }), showMenu ? core.jsx(toolbar.InlineDialog, _extends({\n    ref: dialog.ref\n  }, dialog.props), core.jsx(toolbar.ToolbarGroup, {\n    direction: \"column\"\n  }, core.jsx(RelationshipButton, {\n    onClose: () => setShowMenu(false)\n  }), core.jsx(BlockComponentsButtons, {\n    onClose: () => setShowMenu(false)\n  }))) : null);\n}\n\nfunction InlineMarks(_ref7) {\n  let {\n    marks\n  } = _ref7;\n  const [showMenu, setShowMenu] = React.useState(false);\n  const {\n    dialog,\n    trigger\n  } = popover.useControlledPopover({\n    isOpen: showMenu,\n    onClose: () => setShowMenu(false)\n  }, {\n    placement: 'bottom-start',\n    modifiers: [{\n      name: 'offset',\n      options: {\n        offset: [0, 8]\n      }\n    }]\n  });\n  return core.jsx(React.Fragment, null, marks.bold && core.jsx(tooltip.Tooltip, {\n    content: core.jsx(React.Fragment, null, \"Bold\", core.jsx(toolbar.KeyboardInTooltip, null, modifierKeyText, \"B\")),\n    weight: \"subtle\"\n  }, attrs => core.jsx(MarkButton, _extends({\n    type: \"bold\"\n  }, attrs), core.jsx(BoldIcon.BoldIcon, {\n    size: \"small\",\n    style: {\n      strokeWidth: 3\n    }\n  }))), marks.italic && core.jsx(tooltip.Tooltip, {\n    content: core.jsx(React.Fragment, null, \"Italic\", core.jsx(toolbar.KeyboardInTooltip, null, modifierKeyText, \"I\")),\n    weight: \"subtle\"\n  }, attrs => core.jsx(MarkButton, _extends({\n    type: \"italic\"\n  }, attrs), core.jsx(ItalicIcon.ItalicIcon, {\n    size: \"small\"\n  }))), core.jsx(tooltip.Tooltip, {\n    content: \"More formatting\",\n    weight: \"subtle\"\n  }, attrs => core.jsx(MoreFormattingButton, {\n    isOpen: showMenu,\n    onToggle: () => {\n      setShowMenu(v => !v);\n    },\n    trigger: trigger,\n    attrs: attrs\n  })), showMenu && core.jsx(MoreFormattingDialog, {\n    onCloseMenu: () => {\n      setShowMenu(false);\n    },\n    dialog: dialog,\n    marks: marks\n  }));\n}\n\nfunction MoreFormattingDialog(_ref8) {\n  let {\n    dialog,\n    marks,\n    onCloseMenu\n  } = _ref8;\n  // not doing optimisations in here because this will only render when it's open\n  // which will be rare and you won't be typing while it's open\n  const {\n    editor,\n    clearFormatting: {\n      isDisabled\n    }\n  } = useToolbarState();\n  return core.jsx(toolbar.InlineDialog, _extends({\n    onMouseDown: event => {\n      if (event.target.nodeName === 'BUTTON') {\n        onCloseMenu();\n      }\n    },\n    ref: dialog.ref\n  }, dialog.props), core.jsx(toolbar.ToolbarGroup, {\n    direction: \"column\"\n  }, marks.underline && core.jsx(MarkButton, {\n    type: \"underline\"\n  }, core.jsx(ContentInButtonWithShortcut, {\n    content: \"Underline\",\n    shortcut: `${modifierKeyText}U`\n  })), marks.strikethrough && core.jsx(MarkButton, {\n    type: \"strikethrough\"\n  }, \"Strikethrough\"), marks.code && core.jsx(MarkButton, {\n    type: \"code\"\n  }, \"Code\"), marks.keyboard && core.jsx(MarkButton, {\n    type: \"keyboard\"\n  }, \"Keyboard\"), marks.subscript && core.jsx(MarkButton, {\n    type: \"subscript\"\n  }, \"Subscript\"), marks.superscript && core.jsx(MarkButton, {\n    type: \"superscript\"\n  }, \"Superscript\"), core.jsx(toolbar.ToolbarButton, {\n    isDisabled: isDisabled,\n    onMouseDown: event => {\n      event.preventDefault();\n      clearFormatting(editor);\n    }\n  }, core.jsx(ContentInButtonWithShortcut, {\n    content: \"Clear Formatting\",\n    shortcut: `${modifierKeyText}\\\\`\n  }))));\n}\n\nfunction ContentInButtonWithShortcut(_ref9) {\n  let {\n    content,\n    shortcut\n  } = _ref9;\n  const theme = core.useTheme();\n  return core.jsx(\"span\", {\n    css: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      width: '100%'\n    }\n  }, core.jsx(\"span\", null, content), core.jsx(\"kbd\", {\n    css: {\n      fontFamily: 'inherit',\n      marginLeft: theme.spacing.small,\n      padding: theme.spacing.xxsmall,\n      paddingLeft: theme.spacing.xsmall,\n      paddingRight: theme.spacing.xsmall,\n      backgroundColor: theme.palette.neutral400,\n      borderRadius: theme.radii.xsmall,\n      color: theme.colors.foregroundDim,\n      whiteSpace: 'pre'\n    }\n  }, shortcut));\n}\n\nfunction MoreFormattingButton(_ref10) {\n  let {\n    onToggle,\n    isOpen,\n    trigger,\n    attrs\n  } = _ref10;\n  const {\n    marks\n  } = useToolbarState();\n  const isActive = marks.strikethrough.isSelected || marks.underline.isSelected || marks.code.isSelected || marks.keyboard.isSelected || marks.subscript.isSelected || marks.superscript.isSelected;\n  return React.useMemo(() => core.jsx(toolbar.ToolbarButton, _extends({\n    isPressed: isOpen,\n    isSelected: isActive,\n    onMouseDown: event => {\n      event.preventDefault();\n      onToggle();\n    }\n  }, trigger.props, attrs, {\n    ref: applyRef.applyRefs(attrs.ref, trigger.ref)\n  }), core.jsx(MoreHorizontalIcon.MoreHorizontalIcon, {\n    size: \"small\"\n  })), [isActive, onToggle, isOpen, trigger, attrs]);\n} // Custom (non-feather) Icons\n// ------------------------------\n\n\nconst IconBase = props => core.jsx(\"svg\", _extends({\n  \"aria-hidden\": \"true\",\n  fill: \"currentColor\",\n  focusable: \"false\",\n  height: \"16\",\n  role: \"presentation\",\n  viewBox: \"0 0 16 16\",\n  width: \"16\"\n}, props));\n\nconst BulletListIcon = () => core.jsx(IconBase, null, core.jsx(\"path\", {\n  d: \"M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z\"\n}));\n\nconst NumberedListIcon = () => core.jsx(IconBase, null, core.jsx(\"path\", {\n  d: \"M2.003 2.5a.5.5 0 00-.723-.447l-1.003.5a.5.5 0 00.446.895l.28-.14V6H.5a.5.5 0 000 1h2.006a.5.5 0 100-1h-.503V2.5zM5 3.25a.75.75 0 01.75-.75h8.5a.75.75 0 010 1.5h-8.5A.75.75 0 015 3.25zm0 5a.75.75 0 01.75-.75h8.5a.75.75 0 010 1.5h-8.5A.75.75 0 015 8.25zm0 5a.75.75 0 01.75-.75h8.5a.75.75 0 010 1.5h-8.5a.75.75 0 01-.75-.75zM.924 10.32l.003-.004a.851.851 0 01.144-.153A.66.66 0 011.5 10c.195 0 .306.068.374.146a.57.57 0 01.128.376c0 .453-.269.682-.8 1.078l-.035.025C.692 11.98 0 12.495 0 13.5a.5.5 0 00.5.5h2.003a.5.5 0 000-1H1.146c.132-.197.351-.372.654-.597l.047-.035c.47-.35 1.156-.858 1.156-1.845 0-.365-.118-.744-.377-1.038-.268-.303-.658-.484-1.126-.484-.48 0-.84.202-1.068.392a1.858 1.858 0 00-.348.384l-.007.011-.002.004-.001.002-.001.001a.5.5 0 00.851.525zM.5 10.055l-.427-.26.427.26z\"\n}));\n\nconst headingStylesMap = {\n  h1: {\n    fontSize: '2.2rem'\n  },\n  h2: {\n    fontSize: '1.8rem'\n  },\n  h3: {\n    fontSize: '1.5rem'\n  },\n  h4: {\n    fontSize: '1.2rem'\n  },\n  h5: {\n    fontSize: '0.83rem'\n  },\n  h6: {\n    fontSize: '0.67rem'\n  }\n};\nconst HeadingElement = _ref => {\n  let {\n    attributes,\n    children,\n    element\n  } = _ref;\n  const Tag = `h${element.level}`;\n  const headingStyle = headingStylesMap[Tag];\n  return core.jsx(Tag, _extends({}, attributes, {\n    css: _objectSpread(_objectSpread({}, headingStyle), {}, {\n      textAlign: element.textAlign\n    })\n  }), children);\n};\nfunction withHeading(editor) {\n  const {\n    insertBreak\n  } = editor;\n\n  editor.insertBreak = () => {\n    insertBreak();\n    const entry = slate.Editor.above(editor, {\n      match: n => n.type === 'heading'\n    });\n    if (!entry || !editor.selection || !slate.Range.isCollapsed(editor.selection)) return;\n    const path = entry[1];\n\n    if ( // we want to unwrap the heading when the user inserted a break at the end of the heading\n    // when the user inserts a break at the end of a heading, the new heading\n    // that we want to unwrap will be empty so the end will be equal to the selection\n    slate.Point.equals(slate.Editor.end(editor, path), editor.selection.anchor)) {\n      slate.Transforms.unwrapNodes(editor, {\n        at: path\n      });\n      return;\n    } // we also want to unwrap the _previous_ heading when the user inserted a break\n    // at the start of the heading, essentially just inserting an empty paragraph above the heading\n\n\n    if (!slate.Path.hasPrevious(path)) return;\n    const previousPath = slate.Path.previous(path);\n    const previousNode = slate.Node.get(editor, previousPath);\n\n    if (previousNode.type === 'heading' && previousNode.children.length === 1 && slate.Text.isText(previousNode.children[0]) && previousNode.children[0].text === '') {\n      slate.Transforms.unwrapNodes(editor, {\n        at: previousPath\n      });\n    }\n  };\n\n  return editor;\n}\n\n// and TS doesn't understand the type narrowing when doing a spread for some reason\n// so that's why things aren't being spread in some cases\n\nconst renderElement = props => {\n  switch (props.element.type) {\n    case 'layout':\n      return core.jsx(LayoutContainer, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n\n    case 'layout-area':\n      return core.jsx(LayoutArea, props);\n\n    case 'code':\n      return core.jsx(CodeElement, props);\n\n    case 'component-block':\n      {\n        return core.jsx(ComponentBlocksElement, {\n          attributes: props.attributes,\n          children: props.children,\n          element: props.element\n        });\n      }\n\n    case 'component-inline-prop':\n    case 'component-block-prop':\n      return core.jsx(ComponentInlineProp, props);\n\n    case 'heading':\n      return core.jsx(HeadingElement, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n\n    case 'link':\n      return core.jsx(LinkElement, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n\n    case 'ordered-list':\n      return core.jsx(\"ol\", props.attributes, props.children);\n\n    case 'unordered-list':\n      return core.jsx(\"ul\", props.attributes, props.children);\n\n    case 'list-item':\n      return core.jsx(\"li\", props.attributes, props.children);\n\n    case 'list-item-content':\n      return core.jsx(\"span\", props.attributes, props.children);\n\n    case 'blockquote':\n      return core.jsx(BlockquoteElement, props);\n\n    case 'relationship':\n      return core.jsx(RelationshipElement, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n\n    case 'divider':\n      return core.jsx(DividerElement, props);\n\n    default:\n      return core.jsx(\"p\", _extends({\n        css: {\n          textAlign: props.element.textAlign\n        }\n      }, props.attributes), props.children);\n  }\n};\n/* Block Elements */\n\nconst CodeElement = _ref => {\n  let {\n    attributes,\n    children\n  } = _ref;\n  const {\n    colors,\n    radii,\n    spacing,\n    typography\n  } = core.useTheme();\n  return core.jsx(\"pre\", _extends({\n    spellCheck: \"false\",\n    css: {\n      backgroundColor: colors.backgroundDim,\n      border: `1px solid ${colors.border}`,\n      borderRadius: radii.xsmall,\n      fontFamily: typography.fontFamily.monospace,\n      fontSize: typography.fontSize.small,\n      padding: `${spacing.small}px ${spacing.medium}px`\n    }\n  }, attributes), core.jsx(\"code\", {\n    css: {\n      fontFamily: 'inherit'\n    }\n  }, children));\n};\n\nconst DividerElement = _ref2 => {\n  let {\n    attributes,\n    children\n  } = _ref2;\n  const {\n    colors,\n    spacing\n  } = core.useTheme();\n  const selected = slateReact.useSelected();\n  return core.jsx(\"div\", _extends({}, attributes, {\n    css: {\n      paddingBottom: spacing.medium,\n      paddingTop: spacing.medium,\n      marginBottom: spacing.medium,\n      marginTop: spacing.medium,\n      caretColor: 'transparent'\n    }\n  }), core.jsx(\"hr\", {\n    css: {\n      backgroundColor: selected ? colors.linkColor : colors.border,\n      border: 0,\n      height: 2\n    }\n  }), children);\n};\n\nconst allMarkdownShortcuts = {\n  bold: ['**', '__'],\n  italic: ['*', '_'],\n  strikethrough: ['~~'],\n  code: ['`']\n};\n\nfunction applyMark(editor, mark, shortcutText, startOfStartPoint) {\n  // so that this starts a new undo group\n  editor.history.undos.push([]);\n  const startPointRef = slate.Editor.pointRef(editor, startOfStartPoint);\n  slate.Transforms.delete(editor, {\n    at: editor.selection.anchor,\n    distance: shortcutText.length,\n    reverse: true\n  });\n  slate.Transforms.delete(editor, {\n    at: startOfStartPoint,\n    distance: shortcutText.length\n  });\n  slate.Transforms.setNodes(editor, {\n    [mark]: true\n  }, {\n    match: slate.Text.isText,\n    split: true,\n    at: {\n      anchor: startPointRef.unref(),\n      focus: editor.selection.anchor\n    }\n  }); // once you've ended the shortcut, you're done with the mark\n  // so we need to remove it so the text you insert after doesn't have it\n\n  editor.removeMark(mark);\n}\n\nfunction withMarks(editorDocumentFeatures, componentBlocks, editor) {\n  const {\n    insertText,\n    insertBreak\n  } = editor;\n\n  editor.insertBreak = () => {\n    insertBreak();\n    const marksAfterInsertBreak = slate.Editor.marks(editor);\n    if (!marksAfterInsertBreak || !editor.selection) return;\n    const parentBlock = slate.Editor.above(editor, {\n      match: node => slate.Editor.isBlock(editor, node)\n    });\n    if (!parentBlock) return;\n    const point = EditorAfterButIgnoringingPointsWithNoContent(editor, editor.selection.anchor);\n    const marksAfterInsertBreakArr = Object.keys(marksAfterInsertBreak);\n\n    if (!point || !slate.Path.isDescendant(point.path, parentBlock[1])) {\n      for (const mark of marksAfterInsertBreakArr) {\n        editor.removeMark(mark);\n      }\n\n      return;\n    }\n\n    const textNode = slate.Node.get(editor, point.path);\n\n    for (const mark of marksAfterInsertBreakArr) {\n      if (!textNode[mark]) {\n        editor.removeMark(mark);\n      }\n    }\n  };\n\n  const selectedMarkdownShortcuts = {};\n  const enabledMarks = editorDocumentFeatures.formatting.inlineMarks;\n  Object.keys(allMarkdownShortcuts).forEach(mark => {\n    if (enabledMarks[mark]) {\n      selectedMarkdownShortcuts[mark] = allMarkdownShortcuts[mark];\n    }\n  });\n  if (Object.keys(selectedMarkdownShortcuts).length === 0) return editor;\n\n  editor.insertText = text => {\n    insertText(text);\n\n    if (editor.selection && slate.Range.isCollapsed(editor.selection)) {\n      for (const [mark, shortcuts] of Object.entries(selectedMarkdownShortcuts)) {\n        for (const shortcutText of shortcuts) {\n          if (text === shortcutText[shortcutText.length - 1]) {\n            // this function is not inlined because\n            // https://github.com/swc-project/swc/issues/2622\n            const startOfBlock = getStartOfBlock(editor);\n            let startOfBlockToEndOfShortcutString = slate.Editor.string(editor, {\n              anchor: editor.selection.anchor,\n              focus: startOfBlock\n            });\n            const hasWhitespaceBeforeEndOfShortcut = /\\s/.test(startOfBlockToEndOfShortcutString.substr(-shortcutText.length - 1, 1));\n            const endOfShortcutContainsExpectedContent = shortcutText === startOfBlockToEndOfShortcutString.slice(-shortcutText.length);\n\n            if (hasWhitespaceBeforeEndOfShortcut || !endOfShortcutContainsExpectedContent) {\n              continue;\n            }\n\n            const strToMatchOn = startOfBlockToEndOfShortcutString.slice(0, -shortcutText.length - 1); // TODO: use regex probs\n\n            for (const [offsetFromStartOfBlock] of [...strToMatchOn].reverse().entries()) {\n              const expectedShortcutText = strToMatchOn.substr(offsetFromStartOfBlock, shortcutText.length);\n\n              if (expectedShortcutText !== shortcutText) {\n                continue;\n              }\n\n              const startOfStartOfShortcut = offsetFromStartOfBlock === 0 ? startOfBlock : EditorAfterButIgnoringingPointsWithNoContent(editor, startOfBlock, {\n                distance: offsetFromStartOfBlock\n              });\n              const endOfStartOfShortcut = slate.Editor.after(editor, startOfStartOfShortcut, {\n                distance: shortcutText.length\n              });\n\n              if (offsetFromStartOfBlock !== 0 && !/\\s/.test(slate.Editor.string(editor, {\n                anchor: slate.Editor.before(editor, startOfStartOfShortcut, {\n                  unit: 'character'\n                }),\n                focus: startOfStartOfShortcut\n              }))) {\n                continue;\n              }\n\n              const contentBetweenShortcuts = slate.Editor.string(editor, {\n                anchor: endOfStartOfShortcut,\n                focus: editor.selection.anchor\n              }).slice(0, -shortcutText.length);\n\n              if (contentBetweenShortcuts === '' || /\\s/.test(contentBetweenShortcuts[0])) {\n                continue;\n              } // this is a bit of a weird one\n              // let's say you had <text>__thing _<cursor /></text> and you insert `_`.\n              // without the below, that would turn into <text italic>_thing _<cursor /></text>\n              // but it's probably meant to be bold but it's not because of the space before the ending _\n              // there's probably a better way to do this but meh, this works\n\n\n              if (mark === 'italic' && (contentBetweenShortcuts[0] === '_' || contentBetweenShortcuts[0] === '*')) {\n                continue;\n              }\n\n              const ancestorComponentChildFieldDocumentFeatures = getAncestorComponentChildFieldDocumentFeatures(editor, editorDocumentFeatures, componentBlocks);\n\n              if (ancestorComponentChildFieldDocumentFeatures && ancestorComponentChildFieldDocumentFeatures.inlineMarks !== 'inherit' && ancestorComponentChildFieldDocumentFeatures.inlineMarks[mark] === false) {\n                continue;\n              }\n\n              applyMark(editor, mark, shortcutText, startOfStartOfShortcut);\n              return;\n            }\n          }\n        }\n      }\n    }\n  };\n\n  return editor;\n}\n\nfunction getStartOfBlock(editor) {\n  return slate.Editor.start(editor, slate.Editor.above(editor, {\n    match: node => slate.Editor.isBlock(editor, node)\n  })[1]);\n}\n\nlet noop = () => {};\n\nfunction getOptions(toolbarState, componentBlocks, relationships) {\n  const options = [...Object.entries(relationships).filter(x => x[1].kind === 'inline').map(_ref => {\n    let [relationship, {\n      label\n    }] = _ref;\n    return {\n      label,\n      insert: editor => {\n        slate.Transforms.insertNodes(editor, {\n          type: 'relationship',\n          relationship,\n          data: null,\n          children: [{\n            text: ''\n          }]\n        });\n      }\n    };\n  }), ...Object.keys(componentBlocks).map(key => ({\n    label: componentBlocks[key].label,\n    insert: editor => {\n      insertComponentBlock(editor, componentBlocks, key, relationships);\n    }\n  })), ...toolbarState.textStyles.allowedHeadingLevels.map(level => ({\n    label: `Heading ${level}`,\n\n    insert(editor) {\n      insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n        type: 'heading',\n        level,\n        children: [{\n          text: ''\n        }]\n      });\n    }\n\n  })), !toolbarState.blockquote.isDisabled && toolbarState.editorDocumentFeatures.formatting.blockTypes.blockquote && {\n    label: 'Blockquote',\n\n    insert(editor) {\n      insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n        type: 'blockquote',\n        children: [{\n          text: ''\n        }]\n      });\n    }\n\n  }, !toolbarState.code.isDisabled && toolbarState.editorDocumentFeatures.formatting.blockTypes.code && {\n    label: 'Code block',\n\n    insert(editor) {\n      insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n        type: 'code',\n        children: [{\n          text: ''\n        }]\n      });\n    }\n\n  }, !toolbarState.dividers.isDisabled && toolbarState.editorDocumentFeatures.dividers && {\n    label: 'Divider',\n\n    insert(editor) {\n      insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n        type: 'divider',\n        children: [{\n          text: ''\n        }]\n      });\n    }\n\n  }, !!toolbarState.editorDocumentFeatures.layouts.length && {\n    label: 'Layout',\n\n    insert(editor) {\n      insertLayout(editor, toolbarState.editorDocumentFeatures.layouts[0]);\n    }\n\n  }, !toolbarState.lists.ordered.isDisabled && toolbarState.editorDocumentFeatures.formatting.listTypes.ordered && {\n    label: 'Numbered List',\n    keywords: ['ordered list'],\n\n    insert(editor) {\n      insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n        type: 'ordered-list',\n        children: [{\n          text: ''\n        }]\n      });\n    }\n\n  }, !toolbarState.lists.unordered.isDisabled && toolbarState.editorDocumentFeatures.formatting.listTypes.unordered && {\n    label: 'Bullet List',\n    keywords: ['unordered list'],\n\n    insert(editor) {\n      insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n        type: 'unordered-list',\n        children: [{\n          text: ''\n        }]\n      });\n    }\n\n  }];\n  return options.filter(x => typeof x !== 'boolean');\n}\n\nfunction insertOption(editor, text, option) {\n  const path = slateReact.ReactEditor.findPath(editor, text);\n  slate.Transforms.delete(editor, {\n    at: {\n      focus: slate.Editor.start(editor, path),\n      anchor: slate.Editor.end(editor, path)\n    }\n  });\n  option.insert(editor);\n} // TODO: the changing width of the menu when searching isn't great\n\n\nfunction InsertMenu(_ref2) {\n  let {\n    children,\n    text\n  } = _ref2;\n  const toolbarState = useToolbarState();\n  const {\n    editor,\n    relationships: {\n      isDisabled: relationshipsDisabled\n    }\n  } = toolbarState;\n  const {\n    dialog,\n    trigger\n  } = popover.useControlledPopover({\n    isOpen: true,\n    onClose: noop\n  }, {\n    placement: 'bottom-start'\n  });\n  const componentBlocks = React.useContext(ComponentBlockContext);\n  const relationships = useDocumentFieldRelationships();\n  const options = matchSorter.matchSorter(getOptions(toolbarState, componentBlocks, relationshipsDisabled ? {} : relationships), text.text.slice(1), {\n    keys: ['label', 'keywords']\n  });\n  const [selectedIndex, setSelectedIndex] = React.useState(0);\n\n  if (options.length && selectedIndex >= options.length) {\n    setSelectedIndex(0);\n  }\n\n  const stateRef = React.useRef({\n    selectedIndex,\n    options,\n    text\n  });\n  React.useEffect(() => {\n    stateRef.current = {\n      selectedIndex,\n      options,\n      text\n    };\n  });\n  const dialogRef = React.useRef(null);\n  React.useEffect(() => {\n    var _dialogRef$current, _dialogRef$current$ch;\n\n    const element = (_dialogRef$current = dialogRef.current) === null || _dialogRef$current === void 0 ? void 0 : (_dialogRef$current$ch = _dialogRef$current.children) === null || _dialogRef$current$ch === void 0 ? void 0 : _dialogRef$current$ch[selectedIndex];\n\n    if (dialogRef.current && element) {\n      scrollIntoView__default[\"default\"](element, {\n        scrollMode: 'if-needed',\n        boundary: dialogRef.current,\n        block: 'nearest'\n      });\n    }\n  }, [selectedIndex]);\n  React.useEffect(() => {\n    const domNode = slateReact.ReactEditor.toDOMNode(editor, editor);\n\n    let listener = event => {\n      if (event.defaultPrevented) return;\n\n      switch (event.key) {\n        case 'ArrowDown':\n          {\n            if (stateRef.current.options.length) {\n              event.preventDefault();\n              setSelectedIndex(stateRef.current.selectedIndex === stateRef.current.options.length - 1 ? 0 : stateRef.current.selectedIndex + 1);\n            }\n\n            return;\n          }\n\n        case 'ArrowUp':\n          {\n            if (stateRef.current.options.length) {\n              event.preventDefault();\n              setSelectedIndex(stateRef.current.selectedIndex === 0 ? stateRef.current.options.length - 1 : stateRef.current.selectedIndex - 1);\n            }\n\n            return;\n          }\n\n        case 'Enter':\n          {\n            const option = stateRef.current.options[stateRef.current.selectedIndex];\n\n            if (option) {\n              insertOption(editor, stateRef.current.text, option);\n              event.preventDefault();\n            }\n\n            return;\n          }\n\n        case 'Escape':\n          {\n            const path = slateReact.ReactEditor.findPath(editor, stateRef.current.text);\n            slate.Transforms.unsetNodes(editor, 'insertMenu', {\n              at: path\n            });\n            event.preventDefault();\n            return;\n          }\n      }\n    };\n\n    domNode.addEventListener('keydown', listener);\n    return () => {\n      domNode.removeEventListener('keydown', listener);\n    };\n  }, [editor]);\n  const DIALOG_HEIGHT = 300;\n  return core.jsx(React.Fragment, null, core.jsx(\"span\", _extends({}, trigger.props, {\n    css: {\n      color: 'blue'\n    },\n    ref: trigger.ref\n  }), children), core.jsx(core.Portal, null, core.jsx(toolbar.InlineDialog, _extends({\n    contentEditable: false\n  }, dialog.props, {\n    css: {\n      display: options.length ? undefined : 'none',\n      userSelect: 'none',\n      maxHeight: DIALOG_HEIGHT\n    },\n    ref: dialog.ref\n  }), core.jsx(\"div\", {\n    ref: dialogRef,\n    css: {\n      overflowY: 'auto',\n      maxHeight: DIALOG_HEIGHT - 8 * 2\n    }\n  }, options.map((option, index) => core.jsx(toolbar.ToolbarButton, {\n    key: option.label,\n    isPressed: index === selectedIndex,\n    onMouseEnter: () => {\n      setSelectedIndex(index);\n    },\n    onMouseDown: event => {\n      event.preventDefault();\n      insertOption(editor, text, option);\n    }\n  }, option.label))))));\n}\nconst nodeListsWithoutInsertMenu = new WeakSet();\nconst nodesWithoutInsertMenu = new WeakSet();\n\nfunction findPathWithInsertMenu(node, path) {\n  if (slate.Text.isText(node)) {\n    return node.insertMenu ? path : undefined;\n  }\n\n  if (nodeListsWithoutInsertMenu.has(node.children)) {\n    return;\n  }\n\n  for (const [index, child] of node.children.entries()) {\n    if (nodesWithoutInsertMenu.has(child)) continue;\n    let maybePath = findPathWithInsertMenu(child, [...path, index]);\n\n    if (maybePath) {\n      return maybePath;\n    }\n\n    nodesWithoutInsertMenu.add(child);\n  }\n\n  nodeListsWithoutInsertMenu.add(node.children);\n}\n\nfunction removeInsertMenuMarkWhenOutsideOfSelection(editor) {\n  var _Editor$marks;\n\n  const path = findPathWithInsertMenu(editor, []);\n\n  if (path && !((_Editor$marks = slate.Editor.marks(editor)) !== null && _Editor$marks !== void 0 && _Editor$marks.insertMenu) && (!editor.selection || !slate.Path.equals(editor.selection.anchor.path, path) || !slate.Path.equals(editor.selection.focus.path, path))) {\n    slate.Transforms.unsetNodes(editor, 'insertMenu', {\n      at: path\n    });\n    return true;\n  }\n\n  return false;\n}\n\nfunction withInsertMenu(editor) {\n  const {\n    normalizeNode,\n    apply,\n    insertText\n  } = editor;\n\n  editor.normalizeNode = _ref3 => {\n    let [node, path] = _ref3;\n\n    if (slate.Text.isText(node) && node.insertMenu) {\n      if (node.text[0] !== '/') {\n        slate.Transforms.unsetNodes(editor, 'insertMenu', {\n          at: path\n        });\n        return;\n      }\n\n      const whitespaceMatch = /\\s/.exec(node.text);\n\n      if (whitespaceMatch) {\n        slate.Transforms.unsetNodes(editor, 'insertMenu', {\n          at: {\n            anchor: {\n              path,\n              offset: whitespaceMatch.index\n            },\n            focus: slate.Editor.end(editor, path)\n          },\n          match: slate.Text.isText,\n          split: true\n        });\n        return;\n      }\n    }\n\n    if (slate.Editor.isEditor(editor) && removeInsertMenuMarkWhenOutsideOfSelection(editor)) {\n      return;\n    }\n\n    normalizeNode([node, path]);\n  };\n\n  editor.apply = op => {\n    apply(op); // we're calling this here AND in normalizeNode\n    // because normalizeNode won't be called on selection changes\n    // but apply will\n    // we're still calling this from normalizeNode though because we want it to happen\n    // when normalization happens\n\n    if (op.type === 'set_selection') {\n      removeInsertMenuMarkWhenOutsideOfSelection(editor);\n    }\n  };\n\n  editor.insertText = text => {\n    insertText(text);\n\n    if (editor.selection && text === '/') {\n      const startOfBlock = slate.Editor.start(editor, slate.Editor.above(editor, {\n        match: node => slate.Editor.isBlock(editor, node)\n      })[1]);\n      const before = slate.Editor.before(editor, editor.selection.anchor, {\n        unit: 'character'\n      });\n\n      if (before && (slate.Point.equals(startOfBlock, before) || before.offset !== 0 && /\\s/.test(slate.Node.get(editor, before.path).text[before.offset - 1]))) {\n        slate.Transforms.setNodes(editor, {\n          insertMenu: true\n        }, {\n          at: {\n            anchor: before,\n            focus: editor.selection.anchor\n          },\n          match: slate.Text.isText,\n          split: true\n        });\n      }\n    }\n  };\n\n  return editor;\n}\n\n/** @jsxRuntime classic */\n\nfunction Placeholder(_ref) {\n  let {\n    placeholder,\n    children\n  } = _ref;\n  const [width, setWidth] = React.useState(0);\n  return core.jsx(\"span\", {\n    css: {\n      position: 'relative',\n      display: 'inline-block',\n      width\n    }\n  }, core.jsx(\"span\", {\n    contentEditable: false,\n    style: {\n      position: 'absolute',\n      pointerEvents: 'none',\n      display: 'inline-block',\n      left: 0,\n      top: 0,\n      maxWidth: '100%',\n      whiteSpace: 'nowrap',\n      opacity: '0.5',\n      userSelect: 'none',\n      fontStyle: 'normal',\n      fontWeight: 'normal',\n      textDecoration: 'none',\n      textAlign: 'left'\n    }\n  }, core.jsx(\"span\", {\n    ref: node => {\n      if (node) {\n        const offsetWidth = node.offsetWidth;\n\n        if (offsetWidth !== width) {\n          setWidth(offsetWidth);\n        }\n      }\n    }\n  }, placeholder)), children);\n}\n\nconst Leaf = _ref2 => {\n  let {\n    leaf,\n    text,\n    children,\n    attributes\n  } = _ref2;\n  const {\n    colors,\n    radii,\n    spacing,\n    typography\n  } = core.useTheme();\n  const {\n    underline,\n    strikethrough,\n    bold,\n    italic,\n    code,\n    keyboard,\n    superscript,\n    subscript,\n    placeholder,\n    insertMenu\n  } = leaf;\n\n  if (placeholder !== undefined) {\n    children = core.jsx(Placeholder, {\n      placeholder: placeholder\n    }, children);\n  }\n\n  if (insertMenu) {\n    children = core.jsx(InsertMenu, {\n      text: text\n    }, children);\n  }\n\n  if (code) {\n    children = core.jsx(\"code\", {\n      css: {\n        backgroundColor: colors.backgroundDim,\n        borderRadius: radii.xsmall,\n        display: 'inline-block',\n        fontFamily: typography.fontFamily.monospace,\n        fontSize: typography.fontSize.small,\n        padding: `0 ${spacing.xxsmall}px`\n      }\n    }, children);\n  }\n\n  if (bold) {\n    children = core.jsx(\"strong\", null, children);\n  }\n\n  if (strikethrough) {\n    children = core.jsx(\"s\", null, children);\n  }\n\n  if (italic) {\n    children = core.jsx(\"em\", null, children);\n  }\n\n  if (keyboard) {\n    children = core.jsx(\"kbd\", null, children);\n  }\n\n  if (superscript) {\n    children = core.jsx(\"sup\", null, children);\n  }\n\n  if (subscript) {\n    children = core.jsx(\"sub\", null, children);\n  }\n\n  if (underline) {\n    children = core.jsx(\"u\", null, children);\n  }\n\n  return core.jsx(\"span\", attributes, children);\n};\n\nconst renderLeaf = props => {\n  return core.jsx(Leaf, props);\n};\n\nfunction withSoftBreaks(isShiftPressedRef, editor) {\n  const {\n    insertBreak\n  } = editor; // TODO: should soft breaks only work in particular places\n\n  editor.insertBreak = () => {\n    if (isShiftPressedRef.current) {\n      slate.Transforms.insertText(editor, '\\n');\n    } else {\n      insertBreak();\n    }\n  };\n\n  return editor;\n}\nfunction useKeyDownRef(targetKey) {\n  const ref = React.useRef(false);\n  React.useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.key !== targetKey) return;\n      ref.current = true;\n    };\n\n    const handleKeyUp = e => {\n      if (e.key !== targetKey) return;\n      ref.current = false;\n    };\n\n    document.addEventListener('keydown', handleKeyDown, {\n      passive: true\n    });\n    document.addEventListener('keyup', handleKeyUp, {\n      passive: true\n    });\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n      document.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [targetKey]);\n  return ref;\n}\n\nconst shortcuts = {\n  '...': '…',\n  '-->': '→',\n  '->': '→',\n  '<-': '←',\n  '<--': '←',\n  '--': '–'\n};\nfunction withShortcuts(editor) {\n  const {\n    insertText\n  } = editor;\n\n  editor.insertText = text => {\n    insertText(text);\n\n    if (text === ' ' && editor.selection && slate.Range.isCollapsed(editor.selection)) {\n      const selectionPoint = editor.selection.anchor;\n      const ancestorBlock = slate.Editor.above(editor, {\n        match: node => slate.Editor.isBlock(editor, node)\n      });\n\n      if (ancestorBlock) {\n        Object.keys(shortcuts).forEach(shortcut => {\n          const pointBefore = slate.Editor.before(editor, selectionPoint, {\n            unit: 'character',\n            distance: shortcut.length + 1\n          });\n\n          if (pointBefore && slate.Path.isDescendant(pointBefore.path, ancestorBlock[1])) {\n            const range = {\n              anchor: selectionPoint,\n              focus: pointBefore\n            };\n            const str = slate.Editor.string(editor, range);\n\n            if (str.substr(0, shortcut.length) === shortcut) {\n              editor.history.undos.push([]);\n              slate.Transforms.select(editor, range);\n              editor.insertText(shortcuts[shortcut] + ' ');\n            }\n          }\n        });\n      }\n    }\n  };\n\n  return editor;\n}\n\nfunction withBlockMarkdownShortcuts(documentFeatures, componentBlocks, editor) {\n  const {\n    insertText\n  } = editor;\n  const shortcuts = Object.create(null);\n\n  const editorDocumentFeaturesForNormalizationToCheck = _objectSpread(_objectSpread({}, documentFeatures), {}, {\n    relationships: true\n  });\n\n  let addShortcut = function (text, insert, shouldBeEnabledInComponentBlock) {\n    let type = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'paragraph';\n    if (!shouldBeEnabledInComponentBlock(editorDocumentFeaturesForNormalizationToCheck)) return;\n    const trigger = text[text.length - 1];\n\n    if (!shortcuts[trigger]) {\n      shortcuts[trigger] = Object.create(null);\n    }\n\n    shortcuts[trigger][text] = {\n      insert,\n      type,\n      shouldBeEnabledInComponentBlock\n    };\n  };\n\n  addShortcut('1. ', () => {\n    slate.Transforms.wrapNodes(editor, {\n      type: 'ordered-list',\n      children: []\n    }, {\n      match: n => slate.Editor.isBlock(editor, n)\n    });\n  }, features => features.formatting.listTypes.ordered);\n  addShortcut('- ', () => {\n    slate.Transforms.wrapNodes(editor, {\n      type: 'unordered-list',\n      children: []\n    }, {\n      match: n => slate.Editor.isBlock(editor, n)\n    });\n  }, features => features.formatting.listTypes.unordered);\n  addShortcut('* ', () => {\n    slate.Transforms.wrapNodes(editor, {\n      type: 'unordered-list',\n      children: []\n    }, {\n      match: n => slate.Editor.isBlock(editor, n)\n    });\n  }, features => features.formatting.listTypes.unordered);\n  documentFeatures.formatting.headingLevels.forEach(level => {\n    addShortcut('#'.repeat(level) + ' ', () => {\n      slate.Transforms.setNodes(editor, {\n        type: 'heading',\n        level\n      }, {\n        match: node => node.type === 'paragraph' || node.type === 'heading'\n      });\n    }, features => features.formatting.headingLevels.includes(level), 'heading-or-paragraph');\n  });\n  addShortcut('> ', () => {\n    slate.Transforms.wrapNodes(editor, {\n      type: 'blockquote',\n      children: []\n    }, {\n      match: node => node.type === 'paragraph'\n    });\n  }, features => features.formatting.blockTypes.blockquote);\n  addShortcut('```', () => {\n    slate.Transforms.wrapNodes(editor, {\n      type: 'code',\n      children: []\n    }, {\n      match: node => node.type === 'paragraph'\n    });\n  }, features => features.formatting.blockTypes.code);\n  addShortcut('---', () => {\n    insertDivider(editor);\n  }, features => features.dividers);\n\n  editor.insertText = text => {\n    insertText(text);\n    const shortcutsForTrigger = shortcuts[text];\n\n    if (shortcutsForTrigger && editor.selection && slate.Range.isCollapsed(editor.selection)) {\n      const {\n        anchor\n      } = editor.selection;\n      const block = slate.Editor.above(editor, {\n        match: node => slate.Editor.isBlock(editor, node)\n      });\n      if (!block || block[0].type !== 'paragraph' && block[0].type !== 'heading') return;\n      const start = slate.Editor.start(editor, block[1]);\n      const range = {\n        anchor,\n        focus: start\n      };\n      const shortcutText = slate.Editor.string(editor, range);\n      const shortcut = shortcutsForTrigger[shortcutText];\n\n      if (!shortcut || shortcut.type === 'paragraph' && block[0].type !== 'paragraph') {\n        return;\n      }\n\n      const locationDocumentFeatures = getAncestorComponentChildFieldDocumentFeatures(editor, documentFeatures, componentBlocks);\n\n      if (locationDocumentFeatures && (locationDocumentFeatures.kind === 'inline' || !shortcut.shouldBeEnabledInComponentBlock(locationDocumentFeatures.documentFeatures))) {\n        return;\n      } // so that this starts a new undo group\n\n\n      editor.history.undos.push([]);\n      slate.Transforms.select(editor, range);\n      slate.Transforms.delete(editor);\n      shortcut.insert();\n    }\n  };\n\n  return editor;\n}\n\n// a v important note\n// marks in the markdown ast/html are represented quite differently to how they are in slate\n// if you had the markdown **something https://keystonejs.com something**\n// the bold node is the parent of the link node\n// but in slate, marks are only represented on text nodes\nconst currentlyActiveMarks = new Set();\nconst currentlyDisabledMarks = new Set();\nfunction addMarkToChildren(mark, cb) {\n  const wasPreviouslyActive = currentlyActiveMarks.has(mark);\n  currentlyActiveMarks.add(mark);\n\n  try {\n    return cb();\n  } finally {\n    if (!wasPreviouslyActive) {\n      currentlyActiveMarks.delete(mark);\n    }\n  }\n}\nfunction addMarksToChildren(marks, cb) {\n  const marksToRemove = new Set();\n\n  for (const mark of marks) {\n    if (!currentlyActiveMarks.has(mark)) {\n      marksToRemove.add(mark);\n    }\n\n    currentlyActiveMarks.add(mark);\n  }\n\n  try {\n    return cb();\n  } finally {\n    for (const mark of marksToRemove) {\n      currentlyActiveMarks.delete(mark);\n    }\n  }\n}\nfunction forceDisableMarkForChildren(mark, cb) {\n  const wasPreviouslyDisabled = currentlyDisabledMarks.has(mark);\n  currentlyDisabledMarks.add(mark);\n\n  try {\n    return cb();\n  } finally {\n    if (!wasPreviouslyDisabled) {\n      currentlyDisabledMarks.delete(mark);\n    }\n  }\n}\nfunction getTextNodeForCurrentlyActiveMarks(text) {\n  const node = {\n    text\n  };\n\n  for (const mark of currentlyActiveMarks) {\n    if (!currentlyDisabledMarks.has(mark)) {\n      node[mark] = true;\n    }\n  }\n\n  return node;\n}\n\nfunction getAlignmentFromElement(element) {\n  const parent = element.parentElement; // confluence\n\n  const attribute = parent === null || parent === void 0 ? void 0 : parent.getAttribute('data-align'); // note: we don't show html that confluence would parse as alignment\n  // we could change that but meh\n  // (they match on div.fabric-editor-block-mark with data-align)\n\n  if (attribute === 'center' || attribute === 'end') {\n    return attribute;\n  }\n\n  if (element instanceof HTMLElement) {\n    // Google docs\n    const textAlign = element.style.textAlign;\n\n    if (textAlign === 'center') {\n      return 'center';\n    } // TODO: RTL things?\n\n\n    if (textAlign === 'right' || textAlign === 'end') {\n      return 'end';\n    }\n  }\n} // See https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-8.html#distributive-conditional-types\n\n\nconst ELEMENT_TAGS = {\n  A: el => ({\n    type: 'link',\n    href: el.getAttribute('href'),\n    // underline is on links in Google Docs\n    children: forceDisableMarkForChildren('underline', () => deserializeChildren$1(el.childNodes))\n  }),\n  BLOCKQUOTE: () => ({\n    type: 'blockquote'\n  }),\n  H1: el => ({\n    type: 'heading',\n    level: 1,\n    textAlign: getAlignmentFromElement(el)\n  }),\n  H2: el => ({\n    type: 'heading',\n    level: 2,\n    textAlign: getAlignmentFromElement(el)\n  }),\n  H3: el => ({\n    type: 'heading',\n    level: 3,\n    textAlign: getAlignmentFromElement(el)\n  }),\n  H4: el => ({\n    type: 'heading',\n    level: 4,\n    textAlign: getAlignmentFromElement(el)\n  }),\n  H5: el => ({\n    type: 'heading',\n    level: 5,\n    textAlign: getAlignmentFromElement(el)\n  }),\n  H6: el => ({\n    type: 'heading',\n    level: 6,\n    textAlign: getAlignmentFromElement(el)\n  }),\n  IMG: el => ({\n    type: 'paragraph',\n    children: [{\n      text: `<img alt=${JSON.stringify(el.getAttribute('alt') || '')} src=${JSON.stringify(el.getAttribute('src') || '')}>`\n    }]\n  }),\n  LI: () => ({\n    type: 'list-item'\n  }),\n  OL: () => ({\n    type: 'ordered-list'\n  }),\n  P: el => ({\n    type: 'paragraph',\n    textAlign: getAlignmentFromElement(el)\n  }),\n  PRE: () => ({\n    type: 'code'\n  }),\n  UL: () => ({\n    type: 'unordered-list'\n  }),\n  HR: () => ({\n    type: 'divider',\n    children: [{\n      text: ''\n    }]\n  })\n};\nconst TEXT_TAGS = {\n  CODE: 'code',\n  DEL: 'strikethrough',\n  S: 'strikethrough',\n  STRIKE: 'strikethrough',\n  EM: 'italic',\n  I: 'italic',\n  STRONG: 'bold',\n  U: 'underline',\n  SUP: 'superscript',\n  SUB: 'subscript'\n};\n\nfunction marksFromElementAttributes(element) {\n  const marks = new Set();\n\n  if (element instanceof HTMLElement) {\n    const style = element.style;\n    const {\n      nodeName\n    } = element;\n    const markFromNodeName = TEXT_TAGS[nodeName];\n\n    if (markFromNodeName) {\n      marks.add(markFromNodeName);\n    }\n\n    const {\n      fontWeight,\n      textDecoration,\n      verticalAlign\n    } = style;\n\n    if (textDecoration === 'underline') {\n      marks.add('underline');\n    } else if (textDecoration === 'line-through') {\n      marks.add('strikethrough');\n    } // confluence\n\n\n    if (nodeName === 'SPAN' && element.classList.contains('code')) {\n      marks.add('code');\n    } // Google Docs does weird things with <b>\n\n\n    if (nodeName === 'B' && fontWeight !== 'normal') {\n      marks.add('bold');\n    } else if (typeof fontWeight === 'string' && (fontWeight === 'bold' || fontWeight === 'bolder' || fontWeight === '1000' || /^[5-9]\\d{2}$/.test(fontWeight))) {\n      marks.add('bold');\n    }\n\n    if (style.fontStyle === 'italic') {\n      marks.add('italic');\n    } // Google Docs uses vertical align for subscript and superscript instead of <sup> and <sub>\n\n\n    if (verticalAlign === 'super') {\n      marks.add('superscript');\n    } else if (verticalAlign === 'sub') {\n      marks.add('subscript');\n    }\n  }\n\n  return marks;\n}\n\nfunction deserializeHTML(html) {\n  const parsed = new DOMParser().parseFromString(html, 'text/html');\n  return deserializeHTMLNode(parsed.body);\n}\nfunction deserializeHTMLNode(el) {\n  if (el.nodeType === 3) {\n    const text = el.textContent;\n\n    if (!(text !== null && text !== void 0 && text.trim())) {\n      return [];\n    }\n\n    return [getTextNodeForCurrentlyActiveMarks(text)];\n  }\n\n  if (el.nodeType !== 1) {\n    return [];\n  }\n\n  let {\n    nodeName\n  } = el;\n\n  if (nodeName === 'BR') {\n    return [getTextNodeForCurrentlyActiveMarks('\\n')];\n  }\n\n  const marks = marksFromElementAttributes(el); // Dropbox Paper displays blockquotes as lists for some reason\n\n  if (el instanceof globalThis.Element && el.classList.contains('listtype-quote')) {\n    marks.delete('italic');\n    nodeName = 'BLOCKQUOTE';\n  }\n\n  return addMarksToChildren(marks, () => {\n    if (ELEMENT_TAGS[nodeName]) {\n      const attrs = ELEMENT_TAGS[nodeName](el);\n\n      if (attrs.children) {\n        return [attrs];\n      }\n\n      let children = deserializeChildren$1(el.childNodes);\n      return [_objectSpread(_objectSpread({}, attrs), {}, {\n        children: children\n      })];\n    }\n\n    return deserializeChildren$1(el.childNodes);\n  });\n}\n\nfunction deserializeChildren$1(nodes) {\n  const outputNodes = [];\n\n  for (const node of nodes) {\n    const result = deserializeHTMLNode(node);\n\n    if (result.length) {\n      outputNodes.push(...result);\n    }\n  }\n\n  if (!outputNodes.length) {\n    outputNodes.push({\n      text: ''\n    });\n  }\n\n  return outputNodes;\n}\n\nconst markdownConfig = {\n  mdastExtensions: [autoLinkLiteralFromMarkdownExtension__default[\"default\"], gfmStrikethroughFromMarkdownExtension__default[\"default\"]],\n  extensions: [autoLinkLiteralMarkdownSyntax__default[\"default\"], gfmStrikethroughMarkdownSyntax__default[\"default\"]()]\n};\nfunction deserializeMarkdown(markdown) {\n  const root = mdASTUtilFromMarkdown__default[\"default\"](markdown, markdownConfig);\n  const getDefinition = definitions__default[\"default\"](root);\n  let nodes = root.children;\n\n  if (nodes.length === 1 && nodes[0].type === 'paragraph') {\n    nodes = nodes[0].children;\n  }\n\n  return deserializeChildren(nodes, getDefinition);\n}\n\nfunction deserializeChildren(nodes, getDefinition) {\n  const outputNodes = [];\n\n  for (const node of nodes) {\n    const result = deserializeMarkdownNode(node, getDefinition);\n\n    if (result.length) {\n      outputNodes.push(...result);\n    }\n  }\n\n  if (!outputNodes.length) {\n    outputNodes.push({\n      text: ''\n    });\n  }\n\n  return outputNodes;\n}\n\nfunction deserializeMarkdownNode(node, getDefinition) {\n  switch (node.type) {\n    case 'blockquote':\n      {\n        return [{\n          type: 'blockquote',\n          children: deserializeChildren(node.children, getDefinition)\n        }];\n      }\n\n    case 'linkReference':\n      {\n        var _getDefinition;\n\n        return [{\n          type: 'link',\n          href: ((_getDefinition = getDefinition(node.identifier)) === null || _getDefinition === void 0 ? void 0 : _getDefinition.url) || '',\n          children: deserializeChildren(node.children, getDefinition)\n        }];\n      }\n\n    case 'link':\n      {\n        return [{\n          type: 'link',\n          href: node.url,\n          children: deserializeChildren(node.children, getDefinition)\n        }];\n      }\n\n    case 'code':\n      {\n        return [{\n          type: 'code',\n          children: [{\n            text: node.value\n          }]\n        }];\n      }\n\n    case 'paragraph':\n      {\n        return [{\n          type: 'paragraph',\n          children: deserializeChildren(node.children, getDefinition)\n        }];\n      }\n\n    case 'heading':\n      {\n        return [{\n          type: 'heading',\n          level: node.depth,\n          children: deserializeChildren(node.children, getDefinition)\n        }];\n      }\n\n    case 'list':\n      {\n        return [{\n          type: node.ordered ? 'ordered-list' : 'unordered-list',\n          children: deserializeChildren(node.children, getDefinition)\n        }];\n      }\n\n    case 'imageReference':\n      {\n        var _getDefinition2;\n\n        return [getTextNodeForCurrentlyActiveMarks(`![${node.alt || ''}](${((_getDefinition2 = getDefinition(node.identifier)) === null || _getDefinition2 === void 0 ? void 0 : _getDefinition2.url) || ''})`)];\n      }\n\n    case 'image':\n      {\n        return [getTextNodeForCurrentlyActiveMarks(`![${node.alt || ''}](${node.url})`)];\n      }\n\n    case 'listItem':\n      {\n        return [{\n          type: 'list-item',\n          children: deserializeChildren(node.children, getDefinition)\n        }];\n      }\n\n    case 'thematicBreak':\n      {\n        return [{\n          type: 'divider',\n          children: [{\n            text: ''\n          }]\n        }];\n      }\n\n    case 'break':\n      {\n        return [getTextNodeForCurrentlyActiveMarks('\\n')];\n      }\n\n    case 'delete':\n      {\n        return addMarkToChildren('strikethrough', () => deserializeChildren(node.children, getDefinition));\n      }\n\n    case 'strong':\n      {\n        return addMarkToChildren('bold', () => deserializeChildren(node.children, getDefinition));\n      }\n\n    case 'emphasis':\n      {\n        return addMarkToChildren('italic', () => deserializeChildren(node.children, getDefinition));\n      }\n\n    case 'inlineCode':\n      {\n        return addMarkToChildren('code', () => [getTextNodeForCurrentlyActiveMarks(node.value)]);\n      }\n    // while it would be nice if we parsed the html here\n    // it's a bit more complicated than just parsing the html\n    // because an html node might just be an opening/closing node\n    // but we just have an opening/closing node here\n    // not the opening and closing and children\n\n    case 'html':\n    case 'text':\n      {\n        return [getTextNodeForCurrentlyActiveMarks(node.value)];\n      }\n  }\n\n  return [];\n}\n\nfunction insertFragmentButDifferent(editor, nodes) {\n  if (slate.Editor.isBlock(editor, nodes[0])) {\n    insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, nodes);\n  } else {\n    slate.Transforms.insertFragment(editor, nodes);\n  }\n}\n\nfunction withPasting(editor) {\n  const {\n    insertData,\n    setFragmentData\n  } = editor;\n\n  editor.setFragmentData = data => {\n    if (editor.selection) {\n      data.setData('application/x-keystone-document-editor', 'true');\n    }\n\n    setFragmentData(data);\n  };\n\n  editor.insertData = data => {\n    // this exists because behind the scenes, Slate sets the slate document\n    // on the data transfer, this is great because it means when you copy and paste\n    // something in the editor or between editors, it'll use the actual Slate data\n    // rather than the serialized html so component blocks and etc. will work fine\n    // we're setting application/x-keystone-document-editor\n    // though so that we only accept slate data from Keystone's editor\n    // because other editors will likely have a different structure\n    // so we'll rely on the html deserialization instead\n    // (note that yes, we do call insertData at the end of this function\n    // which is where Slate's logic will run, it'll never do anything there though\n    // since anything that will have slate data will also have text/html which we handle\n    // before we call insertData)\n    // TODO: handle the case of copying between editors with different components blocks\n    // (right now, things will blow up in most cases)\n    if (data.getData('application/x-keystone-document-editor') === 'true') {\n      insertData(data);\n      return;\n    }\n\n    const blockAbove = slate.Editor.above(editor, {\n      match: node => slate.Editor.isBlock(editor, node)\n    });\n\n    if ((blockAbove === null || blockAbove === void 0 ? void 0 : blockAbove[0].type) === 'code') {\n      const plain = data.getData('text/plain');\n      editor.insertText(plain);\n      return;\n    }\n\n    let vsCodeEditorData = data.getData('vscode-editor-data');\n\n    if (vsCodeEditorData) {\n      try {\n        const vsCodeData = JSON.parse(vsCodeEditorData);\n\n        if ((vsCodeData === null || vsCodeData === void 0 ? void 0 : vsCodeData.mode) === 'markdown' || (vsCodeData === null || vsCodeData === void 0 ? void 0 : vsCodeData.mode) === 'mdx') {\n          const plain = data.getData('text/plain');\n\n          if (plain) {\n            const fragment = deserializeMarkdown(plain);\n            insertFragmentButDifferent(editor, fragment);\n            return;\n          }\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    }\n\n    let html = data.getData('text/html');\n\n    if (html) {\n      const fragment = deserializeHTML(html);\n      insertFragmentButDifferent(editor, fragment);\n      return;\n    }\n\n    const plain = data.getData('text/plain');\n\n    if (plain) {\n      const fragment = deserializeMarkdown(plain);\n      insertFragmentButDifferent(editor, fragment);\n      return;\n    }\n\n    insertData(data);\n  };\n\n  return editor;\n}\n\nconst HOTKEYS = {\n  'mod+b': 'bold',\n  'mod+i': 'italic',\n  'mod+u': 'underline'\n};\n\nfunction isMarkActive(editor, mark) {\n  const marks = slate.Editor.marks(editor);\n\n  if (marks !== null && marks !== void 0 && marks[mark]) {\n    return true;\n  } // see the stuff about marks in toolbar-state for why this is here\n\n\n  for (const entry of slate.Editor.nodes(editor, {\n    match: slate.Text.isText\n  })) {\n    if (entry[0][mark]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nconst getKeyDownHandler = editor => event => {\n  if (event.defaultPrevented) return;\n\n  for (const hotkey in HOTKEYS) {\n    if (isHotkey__default[\"default\"](hotkey, event.nativeEvent)) {\n      event.preventDefault();\n      const mark = HOTKEYS[hotkey];\n      const isActive = isMarkActive(editor, mark);\n\n      if (isActive) {\n        slate.Editor.removeMark(editor, mark);\n      } else {\n        slate.Editor.addMark(editor, mark, true);\n      }\n\n      return;\n    }\n  }\n\n  if (isHotkey__default[\"default\"]('mod+\\\\', event.nativeEvent)) {\n    clearFormatting(editor);\n    return;\n  }\n\n  if (isHotkey__default[\"default\"]('mod+k', event.nativeEvent)) {\n    event.preventDefault();\n    wrapLink(editor, '');\n    return;\n  }\n\n  if (event.key === 'Tab') {\n    if (event.shiftKey) {\n      unnestList(editor);\n    } else {\n      nestList(editor);\n    }\n\n    event.preventDefault();\n    return;\n  }\n\n  if (event.key === 'Tab' && editor.selection) {\n    const layoutArea = slate.Editor.above(editor, {\n      match: node => node.type === 'layout-area'\n    });\n\n    if (layoutArea) {\n      const layoutAreaToEnter = event.shiftKey ? slate.Editor.before(editor, layoutArea[1], {\n        unit: 'block'\n      }) : slate.Editor.after(editor, layoutArea[1], {\n        unit: 'block'\n      });\n      slate.Transforms.setSelection(editor, {\n        anchor: layoutAreaToEnter,\n        focus: layoutAreaToEnter\n      });\n      event.preventDefault();\n    }\n  }\n};\n\nfunction createDocumentEditor(documentFeatures, componentBlocks, relationships, isShiftPressedRef) {\n  return withPasting(withSoftBreaks(isShiftPressedRef, withBlocksSchema(withLink(documentFeatures, componentBlocks, withList(withHeading(withRelationship(withInsertMenu(withComponentBlocks(componentBlocks, documentFeatures, relationships, withParagraphs(withShortcuts(withDivider(withLayouts(withMarks(documentFeatures, componentBlocks, withCodeBlock(withBlockMarkdownShortcuts(documentFeatures, componentBlocks, withBlockquote(withDocumentFeaturesNormalization(documentFeatures, relationships, slateHistory.withHistory(slateReact.withReact(slate.createEditor()))))))))))))))))))));\n}\nfunction DocumentEditor(_ref) {\n  let {\n    autoFocus,\n    onChange,\n    value,\n    componentBlocks,\n    relationships,\n    documentFeatures\n  } = _ref;\n  const isShiftPressedRef = useKeyDownRef('Shift');\n  const {\n    colors,\n    spacing\n  } = core.useTheme();\n  const [expanded, setExpanded] = React.useState(false);\n  const editor = React.useMemo(() => createDocumentEditor(documentFeatures, componentBlocks, relationships, isShiftPressedRef), [documentFeatures, componentBlocks, relationships, isShiftPressedRef]);\n  return core.jsx(\"div\", {\n    css: [{\n      display: 'flex',\n      flexDirection: 'column'\n    }, expanded && {\n      background: colors.background,\n      bottom: 0,\n      left: 0,\n      overflowY: 'auto',\n      // required to keep the toolbar stuck in place\n      position: 'absolute',\n      right: 0,\n      top: 0,\n      zIndex: 100\n    }]\n  }, core.jsx(DocumentEditorProvider, {\n    componentBlocks: componentBlocks,\n    documentFeatures: documentFeatures,\n    relationships: relationships,\n    editor: editor,\n    value: value,\n    onChange: value => {\n      onChange === null || onChange === void 0 ? void 0 : onChange(value); // this fixes a strange issue in Safari where the selection stays inside of the editor\n      // after a blur event happens but the selection is still in the editor\n      // so the cursor is visually in the wrong place and it inserts text backwards\n\n      const selection = window.getSelection();\n\n      if (selection && !slateReact.ReactEditor.isFocused(editor)) {\n        const editorNode = slateReact.ReactEditor.toDOMNode(editor, editor);\n\n        if (selection.anchorNode === editorNode) {\n          slateReact.ReactEditor.focus(editor);\n        }\n      }\n    }\n  }, React.useMemo(() => core.jsx(Toolbar, {\n    documentFeatures: documentFeatures,\n    viewState: {\n      expanded,\n      toggle: () => {\n        setExpanded(v => !v);\n      }\n    }\n  }), [expanded, documentFeatures]), core.jsx(DocumentEditorEditable, {\n    css: expanded && {\n      marginLeft: spacing.medium,\n      marginRight: spacing.medium\n    },\n    autoFocus: autoFocus,\n    readOnly: onChange === undefined\n  }), // for debugging\n  false ));\n}\nfunction DocumentEditorProvider(_ref2) {\n  let {\n    children,\n    editor,\n    onChange,\n    value,\n    componentBlocks,\n    documentFeatures,\n    relationships\n  } = _ref2;\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const identity = React.useMemo(() => Math.random().toString(36), [editor]);\n  return core.jsx(slateReact.Slate // this fixes issues with Slate crashing when a fast refresh occcurs\n  , {\n    key: identity,\n    editor: editor,\n    value: value,\n    onChange: value => {\n      onChange(value); // this fixes a strange issue in Safari where the selection stays inside of the editor\n      // after a blur event happens but the selection is still in the editor\n      // so the cursor is visually in the wrong place and it inserts text backwards\n\n      const selection = window.getSelection();\n\n      if (selection && !slateReact.ReactEditor.isFocused(editor)) {\n        const editorNode = slateReact.ReactEditor.toDOMNode(editor, editor);\n\n        if (selection.anchorNode === editorNode) {\n          slateReact.ReactEditor.focus(editor);\n        }\n      }\n    }\n  }, core.jsx(ToolbarStateProvider, {\n    componentBlocks: componentBlocks,\n    editorDocumentFeatures: documentFeatures,\n    relationships: relationships\n  }, children));\n}\nfunction DocumentEditorEditable(props) {\n  const editor = slateReact.useSlate();\n  const componentBlocks = React.useContext(ComponentBlockContext);\n  const onKeyDown = React.useMemo(() => getKeyDownHandler(editor), [editor]);\n  return core.jsx(slateReact.Editable, _extends({\n    decorate: React.useCallback(_ref3 => {\n      let [node, path] = _ref3;\n      let decorations = [];\n\n      if (node.type === 'component-block') {\n        if (node.children.length === 1 && slate.Element.isElement(node.children[0]) && node.children[0].type === 'component-inline-prop' && node.children[0].propPath === undefined) {\n          return decorations;\n        }\n\n        node.children.forEach((child, index) => {\n          if (slate.Node.string(child) === '' && slate.Element.isElement(child) && (child.type === 'component-block-prop' || child.type === 'component-inline-prop') && child.propPath !== undefined) {\n            const start = slate.Editor.start(editor, [...path, index]);\n            const placeholder = getPlaceholderTextForPropPath(child.propPath, componentBlocks[node.component].props, node.props);\n\n            if (placeholder) {\n              decorations.push({\n                placeholder,\n                anchor: start,\n                focus: start\n              });\n            }\n          }\n        });\n      }\n\n      return decorations;\n    }, [editor, componentBlocks]),\n    css: styles,\n    onKeyDown: onKeyDown,\n    renderElement: renderElement,\n    renderLeaf: renderLeaf\n  }, props));\n}\n\nconst orderedListStyles = ['lower-roman', 'decimal', 'lower-alpha'];\nconst unorderedListStyles = ['square', 'disc', 'circle'];\nlet styles = {\n  flex: 1\n};\nlet listDepth = 10;\n\nwhile (listDepth--) {\n  let arr = Array.from({\n    length: listDepth\n  });\n\n  if (arr.length) {\n    styles[arr.map(() => `ol`).join(' ')] = {\n      listStyle: orderedListStyles[listDepth % 3]\n    };\n    styles[arr.map(() => `ul`).join(' ')] = {\n      listStyle: unorderedListStyles[listDepth % 3]\n    };\n  }\n}\n\nfunction makeEditorSchema(obj) {\n  let ret = {};\n  Object.keys(obj).forEach(key => {\n    const val = obj[key];\n\n    if (val.kind === 'blocks') {\n      ret[key] = {\n        kind: 'blocks',\n        allowedChildren: new Set(val.allowedChildren),\n        blockToWrapInlinesIn: val.allowedChildren[0],\n        invalidPositionHandleMode: val.invalidPositionHandleMode\n      };\n    } else {\n      ret[key] = val;\n    }\n  });\n  return ret;\n}\n\nconst blockquoteChildren = ['paragraph', 'code', 'heading', 'ordered-list', 'unordered-list', 'divider'];\nconst paragraphLike = [...blockquoteChildren, 'blockquote'];\nconst insideOfLayouts = [...paragraphLike, 'component-block'];\nconst editorSchema = makeEditorSchema({\n  editor: {\n    kind: 'blocks',\n    allowedChildren: [...insideOfLayouts, 'layout'],\n    invalidPositionHandleMode: 'move'\n  },\n  layout: {\n    kind: 'blocks',\n    allowedChildren: ['layout-area'],\n    invalidPositionHandleMode: 'move'\n  },\n  'layout-area': {\n    kind: 'blocks',\n    allowedChildren: insideOfLayouts,\n    invalidPositionHandleMode: 'unwrap'\n  },\n  blockquote: {\n    kind: 'blocks',\n    allowedChildren: blockquoteChildren,\n    invalidPositionHandleMode: 'move'\n  },\n  paragraph: {\n    kind: 'inlines',\n    invalidPositionHandleMode: 'unwrap'\n  },\n  code: {\n    kind: 'inlines',\n    invalidPositionHandleMode: 'move'\n  },\n  divider: {\n    kind: 'inlines',\n    invalidPositionHandleMode: 'move'\n  },\n  heading: {\n    kind: 'inlines',\n    invalidPositionHandleMode: 'unwrap'\n  },\n  'component-block': {\n    kind: 'blocks',\n    allowedChildren: ['component-block-prop', 'component-inline-prop'],\n    invalidPositionHandleMode: 'move'\n  },\n  'component-inline-prop': {\n    kind: 'inlines',\n    invalidPositionHandleMode: 'unwrap'\n  },\n  'component-block-prop': {\n    kind: 'blocks',\n    allowedChildren: paragraphLike,\n    invalidPositionHandleMode: 'unwrap'\n  },\n  'ordered-list': {\n    kind: 'blocks',\n    allowedChildren: ['list-item'],\n    invalidPositionHandleMode: 'move'\n  },\n  'unordered-list': {\n    kind: 'blocks',\n    allowedChildren: ['list-item'],\n    invalidPositionHandleMode: 'move'\n  },\n  'list-item': {\n    kind: 'blocks',\n    allowedChildren: ['list-item-content', 'ordered-list', 'unordered-list'],\n    invalidPositionHandleMode: 'unwrap'\n  },\n  'list-item-content': {\n    kind: 'inlines',\n    invalidPositionHandleMode: 'unwrap'\n  }\n});\n\nfunction withBlocksSchema(editor) {\n  const {\n    normalizeNode\n  } = editor;\n\n  editor.normalizeNode = _ref4 => {\n    let [node, path] = _ref4;\n\n    if (!slate.Text.isText(node) && node.type !== 'link' && node.type !== 'relationship') {\n      const nodeType = slate.Editor.isEditor(node) ? 'editor' : node.type;\n\n      if (typeof nodeType !== 'string' || editorSchema[nodeType] === undefined) {\n        slate.Transforms.unwrapNodes(editor, {\n          at: path\n        });\n        return;\n      }\n\n      const info = editorSchema[nodeType];\n\n      for (const [index, childNode] of node.children.entries()) {\n        const childPath = [...path, index];\n\n        if (info.kind === 'inlines') {\n          if (!slate.Text.isText(childNode) && !slate.Editor.isInline(editor, childNode)) {\n            handleNodeInInvalidPosition(editor, [childNode, childPath], path);\n            return;\n          }\n        } else {\n          if (!slate.Editor.isBlock(editor, childNode) || // these checks are implicit in Editor.isBlock\n          // but that isn't encoded in types so these will make TS happy\n          childNode.type === 'link' || childNode.type === 'relationship') {\n            slate.Transforms.wrapNodes(editor, {\n              type: info.blockToWrapInlinesIn,\n              children: []\n            }, {\n              at: childPath\n            });\n            return;\n          }\n\n          if (!info.allowedChildren.has(childNode.type)) {\n            handleNodeInInvalidPosition(editor, [childNode, childPath], path);\n            return;\n          }\n        }\n      }\n    }\n\n    normalizeNode([node, path]);\n  };\n\n  return editor;\n}\n\nfunction handleNodeInInvalidPosition(editor, _ref5, parentPath) {\n  let [node, path] = _ref5;\n  const nodeType = node.type;\n  const childNodeInfo = editorSchema[nodeType];\n\n  if (!childNodeInfo || childNodeInfo.invalidPositionHandleMode === 'unwrap') {\n    slate.Transforms.unwrapNodes(editor, {\n      at: path\n    });\n    return;\n  } // the parent of a block will never be an inline so this casting is okay\n\n\n  const parentNode = slate.Node.get(editor, parentPath);\n  const info = editorSchema[parentNode.type || 'editor'];\n\n  if ((info === null || info === void 0 ? void 0 : info.kind) === 'blocks' && info.allowedChildren.has(nodeType)) {\n    if (parentPath.length === 0) {\n      slate.Transforms.moveNodes(editor, {\n        at: path,\n        to: [path[0] + 1]\n      });\n    } else {\n      slate.Transforms.moveNodes(editor, {\n        at: path,\n        to: slate.Path.next(parentPath)\n      });\n    }\n\n    return;\n  }\n\n  if (slate.Editor.isEditor(parentNode)) {\n    slate.Transforms.moveNodes(editor, {\n      at: path,\n      to: [path[0] + 1]\n    });\n    slate.Transforms.unwrapNodes(editor, {\n      at: [path[0] + 1]\n    });\n    return;\n  }\n\n  handleNodeInInvalidPosition(editor, [node, path], parentPath.slice(0, -1));\n} // to print the editor schema in Graphviz if you want to visualize it\n// function printEditorSchema(editorSchema: EditorSchema) {\n//   return `digraph G {\n//   concentrate=true;\n//   ${Object.keys(editorSchema)\n//     .map(key => {\n//       let val = editorSchema[key];\n//       if (val.kind === 'inlines') {\n//         return `\"${key}\" -> inlines`;\n//       }\n//       if (val.kind === 'blocks') {\n//         return `\"${key}\" -> {${[...val.allowedChildren].map(x => JSON.stringify(x)).join(' ')}}`;\n//       }\n//     })\n//     .join('\\n  ')}\n// }`;\n// }\n\nexports.DocumentEditor = DocumentEditor;\nexports.ForceValidationProvider = ForceValidationProvider;\nexports.assertNever = assertNever;\nexports.clientSideValidateProp = clientSideValidateProp;\nexports.createDocumentEditor = createDocumentEditor;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2ZpZWxkcy1kb2N1bWVudC9kaXN0L2luZGV4LTVjOTkyYTA0LmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsZUFBZSxtQkFBTyxDQUFDLDRGQUFnQztBQUN2RCxXQUFXLG1CQUFPLENBQUMsNENBQW1CO0FBQ3RDLFlBQVksbUJBQU8sQ0FBQyxvQkFBTztBQUMzQixlQUFlLG1CQUFPLENBQUMsNEJBQVc7QUFDbEMsWUFBWSxtQkFBTyxDQUFDLG9CQUFPO0FBQzNCLGlCQUFpQixtQkFBTyxDQUFDLGdDQUFhO0FBQ3RDLG1CQUFtQixtQkFBTyxDQUFDLG9DQUFlO0FBQzFDLGNBQWMsbUJBQU8sQ0FBQyxrREFBc0I7QUFDNUMsY0FBYyxtQkFBTyxDQUFDLGtEQUFzQjtBQUM1QyxlQUFlLG1CQUFPLENBQUMsNEVBQW1DO0FBQzFELGlCQUFpQixtQkFBTyxDQUFDLGdGQUFxQztBQUM5RCx1QkFBdUIsbUJBQU8sQ0FBQyw0RkFBMkM7QUFDMUUsY0FBYyxtQkFBTyxDQUFDLHNIQUErQjtBQUNyRCxvQkFBb0IsbUJBQU8sQ0FBQyx3R0FBc0M7QUFDbEUsVUFBVSxtQkFBTyxDQUFDLDhHQUEyQjtBQUM3QyxjQUFjLG1CQUFPLENBQUMsNEVBQW1DO0FBQ3pELHlCQUF5QixtQkFBTyxDQUFDLGdKQUFxRTtBQUN0RywrQkFBK0IsbUJBQU8sQ0FBQyw0SEFBZ0Q7QUFDdkYsYUFBYSxtQkFBTyxDQUFDLGdEQUFxQjtBQUMxQyxhQUFhLG1CQUFPLENBQUMsZ0RBQXFCO0FBQzFDLGtCQUFrQixtQkFBTyxDQUFDLG9EQUF1QjtBQUNqRCxrQkFBa0IsbUJBQU8sQ0FBQyxrRkFBc0M7QUFDaEUsZUFBZSxtQkFBTyxDQUFDLDRCQUFXO0FBQ2xDLGVBQWUsbUJBQU8sQ0FBQyw0RUFBbUM7QUFDMUQsaUJBQWlCLG1CQUFPLENBQUMsZ0ZBQXFDO0FBQzlELGVBQWUsbUJBQU8sQ0FBQyw0RUFBbUM7QUFDMUQsc0JBQXNC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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELFlBQVk7QUFDeEU7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtB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QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsRUFBRTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSx1REFBdUQ7O0FBRXZEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsY0FBYztBQUNkO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQSxvREFBb0Q7O0FBRXBEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxLQUFLO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRyxHQUFHO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7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RDtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsWUFBWTtBQUNaO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixVQUFVO0FBQ2hDO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixjQUFjLFdBQVcsY0FBYztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsa0JBQWtCLEtBQUs7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FB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QTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvRUFBb0U7QUFDcEU7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixnQkFBZ0I7QUFDdEM7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUksVUFBVTs7QUFFZDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQSxzRkFBc0YsdUJBQXVCO0FBQzdHO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7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QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx3REFBd0QsZUFBZSxJQUFJLGlJQUFpSTtBQUM1TTs7QUFFQTtBQUNBO0FBQ0Esd0RBQXdELGVBQWUsSUFBSSxTQUFTO0FBQ3BGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7OztBQUdKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkU7QUFDM0U7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7OztBQUdKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsSUFBSTtBQUMxQjtBQUNBO0FBQ0Esc0JBQXNCLElBQUksTUFBTSxFQUFFLGdFQUFnRTtBQUNsRztBQUNBLFFBQVE7QUFDUjtBQUNBLElBQUk7QUFDSjs7QUFFQSxzQkFBc0I7QUFDdEIsK0JBQStCO0FBQy9CLG1CQUFtQjtBQUNuQiw4QkFBOEI7QUFDOUIsNEJBQTRCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9maWVsZHMtZG9jdW1lbnQvZGlzdC9pbmRleC01Yzk5MmEwNC5janMuZGV2LmpzPzljYWMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2V4dGVuZHMgPSByZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHMnKTtcbnZhciBjb3JlID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2NvcmUnKTtcbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgaXNIb3RrZXkgPSByZXF1aXJlKCdpcy1ob3RrZXknKTtcbnZhciBzbGF0ZSA9IHJlcXVpcmUoJ3NsYXRlJyk7XG52YXIgc2xhdGVSZWFjdCA9IHJlcXVpcmUoJ3NsYXRlLXJlYWN0Jyk7XG52YXIgc2xhdGVIaXN0b3J5ID0gcmVxdWlyZSgnc2xhdGUtaGlzdG9yeScpO1xudmFyIHBvcG92ZXIgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvcG9wb3ZlcicpO1xudmFyIHRvb2x0aXAgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvdG9vbHRpcCcpO1xudmFyIExpbmtJY29uID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL0xpbmtJY29uJyk7XG52YXIgVHJhc2gySWNvbiA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9UcmFzaDJJY29uJyk7XG52YXIgRXh0ZXJuYWxMaW5rSWNvbiA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9FeHRlcm5hbExpbmtJY29uJyk7XG52YXIgdG9vbGJhciA9IHJlcXVpcmUoJy4vdG9vbGJhci03ZTBlOTk0ZS5janMuZGV2LmpzJyk7XG52YXIgX29iamVjdFNwcmVhZCA9IHJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0U3ByZWFkMicpO1xudmFyIGFwaSA9IHJlcXVpcmUoJy4vYXBpLWZkZDkxNmQxLmNqcy5kZXYuanMnKTtcbnZhciBjb250ZXh0ID0gcmVxdWlyZSgnQGtleXN0b25lLTYvY29yZS9hZG1pbi11aS9jb250ZXh0Jyk7XG52YXIgUmVsYXRpb25zaGlwU2VsZWN0ID0gcmVxdWlyZSgnQGtleXN0b25lLTYvY29yZS9maWVsZHMvdHlwZXMvcmVsYXRpb25zaGlwL3ZpZXdzL1JlbGF0aW9uc2hpcFNlbGVjdCcpO1xudmFyIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyA9IHJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXMnKTtcbnZhciBmaWVsZHMgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvZmllbGRzJyk7XG52YXIgYnV0dG9uID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2J1dHRvbicpO1xudmFyIHdlYWtNZW1vaXplID0gcmVxdWlyZSgnQGVtb3Rpb24vd2Vhay1tZW1vaXplJyk7XG52YXIgQ29sdW1uc0ljb24gPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvQ29sdW1uc0ljb24nKTtcbnZhciBhcHBseVJlZiA9IHJlcXVpcmUoJ2FwcGx5LXJlZicpO1xudmFyIEJvbGRJY29uID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL0JvbGRJY29uJyk7XG52YXIgSXRhbGljSWNvbiA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9JdGFsaWNJY29uJyk7XG52YXIgUGx1c0ljb24gPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvUGx1c0ljb24nKTtcbnZhciBDaGV2cm9uRG93bkljb24gPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvQ2hldnJvbkRvd25JY29uJyk7XG52YXIgTWF4aW1pemUySWNvbiA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9NYXhpbWl6ZTJJY29uJyk7XG52YXIgTWluaW1pemUySWNvbiA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9NaW5pbWl6ZTJJY29uJyk7XG52YXIgTW9yZUhvcml6b250YWxJY29uID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL01vcmVIb3Jpem9udGFsSWNvbicpO1xudmFyIENvZGVJY29uID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL0NvZGVJY29uJyk7XG52YXIgQWxpZ25MZWZ0SWNvbiA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9BbGlnbkxlZnRJY29uJyk7XG52YXIgQWxpZ25SaWdodEljb24gPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvQWxpZ25SaWdodEljb24nKTtcbnZhciBBbGlnbkNlbnRlckljb24gPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvQWxpZ25DZW50ZXJJY29uJyk7XG52YXIgTWludXNJY29uID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL01pbnVzSWNvbicpO1xudmFyIG1hdGNoU29ydGVyID0gcmVxdWlyZSgnbWF0Y2gtc29ydGVyJyk7XG52YXIgc2Nyb2xsSW50b1ZpZXcgPSByZXF1aXJlKCdzY3JvbGwtaW50by12aWV3LWlmLW5lZWRlZCcpO1xudmFyIG1kQVNUVXRpbEZyb21NYXJrZG93biA9IHJlcXVpcmUoJ21kYXN0LXV0aWwtZnJvbS1tYXJrZG93bicpO1xudmFyIGF1dG9MaW5rTGl0ZXJhbEZyb21NYXJrZG93bkV4dGVuc2lvbiA9IHJlcXVpcmUoJ21kYXN0LXV0aWwtZ2ZtLWF1dG9saW5rLWxpdGVyYWwvZnJvbS1tYXJrZG93bicpO1xudmFyIGF1dG9MaW5rTGl0ZXJhbE1hcmtkb3duU3ludGF4ID0gcmVxdWlyZSgnbWljcm9tYXJrLWV4dGVuc2lvbi1nZm0tYXV0b2xpbmstbGl0ZXJhbCcpO1xudmFyIGdmbVN0cmlrZXRocm91Z2hGcm9tTWFya2Rvd25FeHRlbnNpb24gPSByZXF1aXJlKCdtZGFzdC11dGlsLWdmbS1zdHJpa2V0aHJvdWdoL2Zyb20tbWFya2Rvd24nKTtcbnZhciBnZm1TdHJpa2V0aHJvdWdoTWFya2Rvd25TeW50YXggPSByZXF1aXJlKCdtaWNyb21hcmstZXh0ZW5zaW9uLWdmbS1zdHJpa2V0aHJvdWdoJyk7XG52YXIgZGVmaW5pdGlvbnMgPSByZXF1aXJlKCdtZGFzdC11dGlsLWRlZmluaXRpb25zJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wRGVmYXVsdCAoZSkgeyByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyAnZGVmYXVsdCc6IGUgfTsgfVxuXG52YXIgUmVhY3RfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0KFJlYWN0KTtcbnZhciBpc0hvdGtleV9fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9faW50ZXJvcERlZmF1bHQoaXNIb3RrZXkpO1xudmFyIHdlYWtNZW1vaXplX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdCh3ZWFrTWVtb2l6ZSk7XG52YXIgc2Nyb2xsSW50b1ZpZXdfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0KHNjcm9sbEludG9WaWV3KTtcbnZhciBtZEFTVFV0aWxGcm9tTWFya2Rvd25fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0KG1kQVNUVXRpbEZyb21NYXJrZG93bik7XG52YXIgYXV0b0xpbmtMaXRlcmFsRnJvbU1hcmtkb3duRXh0ZW5zaW9uX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdChhdXRvTGlua0xpdGVyYWxGcm9tTWFya2Rvd25FeHRlbnNpb24pO1xudmFyIGF1dG9MaW5rTGl0ZXJhbE1hcmtkb3duU3ludGF4X19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdChhdXRvTGlua0xpdGVyYWxNYXJrZG93blN5bnRheCk7XG52YXIgZ2ZtU3RyaWtldGhyb3VnaEZyb21NYXJrZG93bkV4dGVuc2lvbl9fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9faW50ZXJvcERlZmF1bHQoZ2ZtU3RyaWtldGhyb3VnaEZyb21NYXJrZG93bkV4dGVuc2lvbik7XG52YXIgZ2ZtU3RyaWtldGhyb3VnaE1hcmtkb3duU3ludGF4X19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdChnZm1TdHJpa2V0aHJvdWdoTWFya2Rvd25TeW50YXgpO1xudmFyIGRlZmluaXRpb25zX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdChkZWZpbml0aW9ucyk7XG5cbmNvbnN0IHBhcmFncmFwaEVsZW1lbnQgPSAoKSA9PiAoe1xuICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgY2hpbGRyZW46IFt7XG4gICAgdGV4dDogJydcbiAgfV1cbn0pO1xuZnVuY3Rpb24gd2l0aFBhcmFncmFwaHMoZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBub3JtYWxpemVOb2RlXG4gIH0gPSBlZGl0b3I7XG5cbiAgZWRpdG9yLm5vcm1hbGl6ZU5vZGUgPSBlbnRyeSA9PiB7XG4gICAgY29uc3QgW25vZGUsIHBhdGhdID0gZW50cnk7XG5cbiAgICBpZiAoc2xhdGUuRWRpdG9yLmlzRWRpdG9yKG5vZGUpKSB7XG4gICAgICBsZXQgbGFzdE5vZGUgPSBub2RlLmNoaWxkcmVuW25vZGUuY2hpbGRyZW4ubGVuZ3RoIC0gMV07XG5cbiAgICAgIGlmICgobGFzdE5vZGUgPT09IG51bGwgfHwgbGFzdE5vZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxhc3ROb2RlLnR5cGUpICE9PSAncGFyYWdyYXBoJykge1xuICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgcGFyYWdyYXBoRWxlbWVudCgpLCB7XG4gICAgICAgICAgYXQ6IFsuLi5wYXRoLCBub2RlLmNoaWxkcmVuLmxlbmd0aF1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBub3JtYWxpemVOb2RlKGVudHJ5KTtcbiAgfTtcblxuICByZXR1cm4gZWRpdG9yO1xufVxuXG5jb25zdCBhbGxNYXJrcyA9IFsnYm9sZCcsICdpdGFsaWMnLCAndW5kZXJsaW5lJywgJ3N0cmlrZXRocm91Z2gnLCAnY29kZScsICdzdXBlcnNjcmlwdCcsICdzdWJzY3JpcHQnLCAna2V5Ym9hcmQnXTtcbmNvbnN0IGlzRWxlbWVudEFjdGl2ZSA9IChlZGl0b3IsIGZvcm1hdCkgPT4ge1xuICBjb25zdCBbbWF0Y2hdID0gc2xhdGUuRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgIG1hdGNoOiBuID0+IG4udHlwZSA9PT0gZm9ybWF0XG4gIH0pO1xuICByZXR1cm4gISFtYXRjaDtcbn07XG5mdW5jdGlvbiBjbGVhckZvcm1hdHRpbmcoZWRpdG9yKSB7XG4gIHNsYXRlLlRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAnaGVhZGluZycgfHwgbm9kZS50eXBlID09PSAnYmxvY2txdW90ZScgfHwgbm9kZS50eXBlID09PSAnY29kZSdcbiAgfSk7XG4gIHNsYXRlLlRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsIGFsbE1hcmtzLCB7XG4gICAgbWF0Y2g6IHNsYXRlLlRleHQuaXNUZXh0XG4gIH0pO1xufVxuZnVuY3Rpb24gbW92ZUNoaWxkcmVuKGVkaXRvciwgcGFyZW50LCB0bykge1xuICBsZXQgc2hvdWxkTW92ZU5vZGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6ICgpID0+IHRydWU7XG4gIGNvbnN0IHBhcmVudFBhdGggPSBzbGF0ZS5QYXRoLmlzUGF0aChwYXJlbnQpID8gcGFyZW50IDogcGFyZW50WzFdO1xuICBjb25zdCBwYXJlbnROb2RlID0gc2xhdGUuUGF0aC5pc1BhdGgocGFyZW50KSA/IHNsYXRlLk5vZGUuZ2V0KGVkaXRvciwgcGFyZW50UGF0aCkgOiBwYXJlbnRbMF07XG4gIGlmICghc2xhdGUuRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBwYXJlbnROb2RlKSkgcmV0dXJuO1xuXG4gIGZvciAobGV0IGkgPSBwYXJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKHNob3VsZE1vdmVOb2RlKHBhcmVudE5vZGUuY2hpbGRyZW5baV0pKSB7XG4gICAgICBjb25zdCBjaGlsZFBhdGggPSBbLi4ucGFyZW50UGF0aCwgaV07XG4gICAgICBzbGF0ZS5UcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IGNoaWxkUGF0aCxcbiAgICAgICAgdG9cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSAvLyB0aGlzIGVuc3VyZXMgdGhhdCB3aGVuIGNoYW5nZXMgaGFwcGVuLCB0aGV5IGFyZSBpbW1lZGlhdGVseSBzaG93blxuLy8gdGhpcyBzdG9wcyB0aGUgcHJvYmxlbSBvZiBhIGN1cnNvciByZXNldHRpbmcgdG8gdGhlIGVuZCB3aGVuIGEgY2hhbmdlIGlzIG1hZGVcbi8vIGJlY2F1c2UgdGhlIGNoYW5nZXMgYXJlIGFwcGxpZWQgYXN5bmNocm9ub3VzbHlcblxuZnVuY3Rpb24gdXNlRWxlbWVudFdpdGhTZXROb2RlcyhlZGl0b3IsIGVsZW1lbnQpIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSBSZWFjdC51c2VTdGF0ZSh7XG4gICAgZWxlbWVudCxcbiAgICBlbGVtZW50V2l0aENoYW5nZXM6IGVsZW1lbnRcbiAgfSk7XG5cbiAgaWYgKHN0YXRlLmVsZW1lbnQgIT09IGVsZW1lbnQpIHtcbiAgICBzZXRTdGF0ZSh7XG4gICAgICBlbGVtZW50LFxuICAgICAgZWxlbWVudFdpdGhDaGFuZ2VzOiBlbGVtZW50XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBzZXROb2RlcyA9IGNoYW5nZXMgPT4ge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCBjaGFuZ2VzLCB7XG4gICAgICBhdDogc2xhdGVSZWFjdC5SZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIGVsZW1lbnQpXG4gICAgfSk7XG4gICAgc2V0U3RhdGUoe1xuICAgICAgZWxlbWVudCxcbiAgICAgIGVsZW1lbnRXaXRoQ2hhbmdlczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBlbGVtZW50KSwgY2hhbmdlcylcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gW3N0YXRlLmVsZW1lbnRXaXRoQ2hhbmdlcywgc2V0Tm9kZXNdO1xufVxuZnVuY3Rpb24gdXNlRXZlbnRDYWxsYmFjayhjYWxsYmFjaykge1xuICBjb25zdCBjYWxsYmFja1JlZiA9IFJlYWN0LnVzZVJlZihjYWxsYmFjayk7XG4gIGNvbnN0IGNiID0gUmVhY3QudXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjYWxsYmFja1JlZi5jdXJyZW50KC4uLmFyZ3VtZW50cyk7XG4gIH0sIFtdKTtcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjYWxsYmFja1JlZi5jdXJyZW50ID0gY2FsbGJhY2s7XG4gIH0pO1xuICByZXR1cm4gY2I7XG59XG5jb25zdCBJU19NQUMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIC9NYWN8aVBvZHxpUGhvbmV8aVBhZC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtKTtcbmNvbnN0IG1vZGlmaWVyS2V5VGV4dCA9IElTX01BQyA/ICfijJgnIDogJ0N0cmwnO1xuY29uc3QgRm9yY2VWYWxpZGF0aW9uQ29udGV4dCA9IC8qI19fUFVSRV9fKi9SZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlQ29udGV4dChmYWxzZSk7XG5jb25zdCBGb3JjZVZhbGlkYXRpb25Qcm92aWRlciA9IEZvcmNlVmFsaWRhdGlvbkNvbnRleHQuUHJvdmlkZXI7XG5mdW5jdGlvbiB1c2VGb3JjZVZhbGlkYXRpb24oKSB7XG4gIHJldHVybiBSZWFjdC51c2VDb250ZXh0KEZvcmNlVmFsaWRhdGlvbkNvbnRleHQpO1xufVxuZnVuY3Rpb24gaW5zZXJ0Tm9kZXNCdXRSZXBsYWNlSWZTZWxlY3Rpb25Jc0F0RW1wdHlQYXJhZ3JhcGhPckhlYWRpbmcoZWRpdG9yLCBub2Rlcykge1xuICB2YXIgX3BhdGhSZWZGb3JFbXB0eU5vZGVBO1xuXG4gIGxldCBwYXRoUmVmRm9yRW1wdHlOb2RlQXRDdXJzb3I7XG4gIGNvbnN0IGVudHJ5ID0gc2xhdGUuRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ2hlYWRpbmcnIHx8IG5vZGUudHlwZSA9PT0gJ3BhcmFncmFwaCdcbiAgfSk7XG5cbiAgaWYgKGVudHJ5ICYmIHNsYXRlLk5vZGUuc3RyaW5nKGVudHJ5WzBdKSA9PT0gJycpIHtcbiAgICBwYXRoUmVmRm9yRW1wdHlOb2RlQXRDdXJzb3IgPSBzbGF0ZS5FZGl0b3IucGF0aFJlZihlZGl0b3IsIGVudHJ5WzFdKTtcbiAgfVxuXG4gIHNsYXRlLlRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBub2Rlcyk7XG4gIGxldCBwYXRoID0gKF9wYXRoUmVmRm9yRW1wdHlOb2RlQSA9IHBhdGhSZWZGb3JFbXB0eU5vZGVBdEN1cnNvcikgPT09IG51bGwgfHwgX3BhdGhSZWZGb3JFbXB0eU5vZGVBID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGF0aFJlZkZvckVtcHR5Tm9kZUEudW5yZWYoKTtcblxuICBpZiAocGF0aCkge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICBhdDogcGF0aFxuICAgIH0pOyAvLyBldmVuIHRob3VnaCB0aGUgc2VsZWN0aW9uIGlzIGluIHRoZSByaWdodCBwbGFjZSBhZnRlciB0aGUgcmVtb3ZlTm9kZXNcbiAgICAvLyBmb3Igc29tZSByZWFzb24gdGhlIGVkaXRvciBibHVycyBzbyB3ZSBuZWVkIHRvIGZvY3VzIGl0IGFnYWluXG5cbiAgICBzbGF0ZVJlYWN0LlJlYWN0RWRpdG9yLmZvY3VzKGVkaXRvcik7XG4gIH1cbn1cbi8qKlxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIEVkaXRvci5hZnRlciBleGNlcHQgdGhhdCBpdCBpZ25vcmVzIHBvaW50cyB0aGF0IGhhdmUgbm8gY29udGVudFxuICogbGlrZSB0aGUgcG9pbnQgaW4gYSB2b2lkIHRleHQgbm9kZSwgYW4gZW1wdHkgdGV4dCBub2RlIGFuZCB0aGUgbGFzdCBwb2ludCBpbiBhIHRleHQgbm9kZVxuICovXG4vLyBUT0RPOiB0aGlzIHdvdWxkIHByb2JhYmx5IGJyZWFrIGlmIHlvdSB3ZXJlIHRyeWluZyB0byBnZXQgdGhlIGxhc3QgcG9pbnQgaW4gdGhlIGVkaXRvcj9cblxuZnVuY3Rpb24gRWRpdG9yQWZ0ZXJCdXRJZ25vcmluZ2luZ1BvaW50c1dpdGhOb0NvbnRlbnQoZWRpdG9yLCBhdCkge1xuICBsZXQge1xuICAgIGRpc3RhbmNlID0gMVxuICB9ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgY29uc3QgYW5jaG9yID0gc2xhdGUuRWRpdG9yLnBvaW50KGVkaXRvciwgYXQsIHtcbiAgICBlZGdlOiAnZW5kJ1xuICB9KTtcbiAgY29uc3QgZm9jdXMgPSBzbGF0ZS5FZGl0b3IuZW5kKGVkaXRvciwgW10pO1xuICBjb25zdCByYW5nZSA9IHtcbiAgICBhbmNob3IsXG4gICAgZm9jdXNcbiAgfTtcbiAgbGV0IGQgPSAwO1xuICBsZXQgdGFyZ2V0O1xuXG4gIGZvciAoY29uc3QgcCBvZiBzbGF0ZS5FZGl0b3IucG9zaXRpb25zKGVkaXRvciwge1xuICAgIGF0OiByYW5nZVxuICB9KSkge1xuICAgIGlmIChkID4gZGlzdGFuY2UpIHtcbiAgICAgIGJyZWFrO1xuICAgIH0gLy8gdGhpcyBpcyB0aGUgaW1wb3J0YW50IGNoYW5nZVxuXG5cbiAgICBjb25zdCBub2RlID0gc2xhdGUuTm9kZS5nZXQoZWRpdG9yLCBwLnBhdGgpO1xuXG4gICAgaWYgKG5vZGUudGV4dC5sZW5ndGggPT09IHAub2Zmc2V0KSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoZCAhPT0gMCkge1xuICAgICAgdGFyZ2V0ID0gcDtcbiAgICB9XG5cbiAgICBkKys7XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gbm9kZVR5cGVNYXRjaGVyKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgY29uc3QgdHlwZSA9IGFyZ3NbMF07XG4gICAgcmV0dXJuIG5vZGUgPT4gbm9kZS50eXBlID09PSB0eXBlO1xuICB9XG5cbiAgY29uc3Qgc2V0ID0gbmV3IFNldChhcmdzKTtcbiAgcmV0dXJuIG5vZGUgPT4gdHlwZW9mIG5vZGUudHlwZSA9PT0gJ3N0cmluZycgJiYgc2V0Lmhhcyhub2RlLnR5cGUpO1xufVxuZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbikge1xuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignZmFpbGVkIGFzc2VydCcpO1xuICB9XG59XG5cbmNvbnN0IERvY3VtZW50RmllbGRSZWxhdGlvbnNoaXBzQ29udGV4dCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVDb250ZXh0KHt9KTtcbmZ1bmN0aW9uIHVzZURvY3VtZW50RmllbGRSZWxhdGlvbnNoaXBzKCkge1xuICByZXR1cm4gUmVhY3QudXNlQ29udGV4dChEb2N1bWVudEZpZWxkUmVsYXRpb25zaGlwc0NvbnRleHQpO1xufVxuY29uc3QgRG9jdW1lbnRGaWVsZFJlbGF0aW9uc2hpcHNQcm92aWRlciA9IERvY3VtZW50RmllbGRSZWxhdGlvbnNoaXBzQ29udGV4dC5Qcm92aWRlcjtcbmZ1bmN0aW9uIHdpdGhSZWxhdGlvbnNoaXAoZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBpc1ZvaWQsXG4gICAgaXNJbmxpbmVcbiAgfSA9IGVkaXRvcjtcblxuICBlZGl0b3IuaXNWb2lkID0gZWxlbWVudCA9PiB7XG4gICAgcmV0dXJuIGVsZW1lbnQudHlwZSA9PT0gJ3JlbGF0aW9uc2hpcCcgfHwgaXNWb2lkKGVsZW1lbnQpO1xuICB9O1xuXG4gIGVkaXRvci5pc0lubGluZSA9IGVsZW1lbnQgPT4ge1xuICAgIHJldHVybiBlbGVtZW50LnR5cGUgPT09ICdyZWxhdGlvbnNoaXAnIHx8IGlzSW5saW5lKGVsZW1lbnQpO1xuICB9O1xuXG4gIHJldHVybiBlZGl0b3I7XG59XG5mdW5jdGlvbiBSZWxhdGlvbnNoaXBCdXR0b24oX3JlZikge1xuICBsZXQge1xuICAgIG9uQ2xvc2VcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgcmVsYXRpb25zaGlwczoge1xuICAgICAgaXNEaXNhYmxlZFxuICAgIH1cbiAgfSA9IHVzZVRvb2xiYXJTdGF0ZSgpO1xuICBjb25zdCByZWxhdGlvbnNoaXBzID0gUmVhY3QudXNlQ29udGV4dChEb2N1bWVudEZpZWxkUmVsYXRpb25zaGlwc0NvbnRleHQpO1xuICByZXR1cm4gY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIG51bGwsIE9iamVjdC5lbnRyaWVzKHJlbGF0aW9uc2hpcHMpLm1hcChfcmVmMiA9PiB7XG4gICAgbGV0IFtrZXksIHJlbGF0aW9uc2hpcF0gPSBfcmVmMjtcbiAgICBpZiAocmVsYXRpb25zaGlwLmtpbmQgPT09ICdwcm9wJykgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGNvcmUuanN4KHRvb2xiYXIuVG9vbGJhckJ1dHRvbiwge1xuICAgICAga2V5OiBrZXksXG4gICAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxuICAgICAgb25Nb3VzZURvd246IGV2ZW50ID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICB0eXBlOiAncmVsYXRpb25zaGlwJyxcbiAgICAgICAgICByZWxhdGlvbnNoaXA6IGtleSxcbiAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgICAgb25DbG9zZSgpO1xuICAgICAgfVxuICAgIH0sIHJlbGF0aW9uc2hpcC5sYWJlbCk7XG4gIH0pKTtcbn1cbmZ1bmN0aW9uIFJlbGF0aW9uc2hpcEVsZW1lbnQoX3JlZjMpIHtcbiAgbGV0IHtcbiAgICBhdHRyaWJ1dGVzLFxuICAgIGNoaWxkcmVuLFxuICAgIGVsZW1lbnRcbiAgfSA9IF9yZWYzO1xuICBjb25zdCBrZXlzdG9uZSA9IGNvbnRleHQudXNlS2V5c3RvbmUoKTtcbiAgY29uc3QgZWRpdG9yID0gc2xhdGVSZWFjdC51c2VTbGF0ZVN0YXRpYygpO1xuICBjb25zdCByZWxhdGlvbnNoaXBzID0gUmVhY3QudXNlQ29udGV4dChEb2N1bWVudEZpZWxkUmVsYXRpb25zaGlwc0NvbnRleHQpO1xuICBjb25zdCByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXBzW2VsZW1lbnQucmVsYXRpb25zaGlwXTtcbiAgcmV0dXJuIGNvcmUuanN4KFwic3BhblwiLCBfZXh0ZW5kcyh7fSwgYXR0cmlidXRlcywge1xuICAgIGNzczoge1xuICAgICAgZGlzcGxheTogJ2lubGluZS1mbGV4JyxcbiAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInXG4gICAgfVxuICB9KSwgY29yZS5qc3goXCJzcGFuXCIsIHtcbiAgICBjb250ZW50RWRpdGFibGU6IGZhbHNlLFxuICAgIGNzczoge1xuICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgd2lkdGg6IDIwMCxcbiAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgcGFkZGluZ0xlZnQ6IDQsXG4gICAgICBwYWRkaW5nUmlnaHQ6IDQsXG4gICAgICBmbGV4OiAxXG4gICAgfVxuICB9LCByZWxhdGlvbnNoaXAgPyBjb3JlLmpzeChSZWxhdGlvbnNoaXBTZWxlY3QuUmVsYXRpb25zaGlwU2VsZWN0LCB7XG4gICAgY29udHJvbFNob3VsZFJlbmRlclZhbHVlOiB0cnVlLFxuICAgIGlzRGlzYWJsZWQ6IGZhbHNlLFxuICAgIGxpc3Q6IGtleXN0b25lLmFkbWluTWV0YS5saXN0c1tyZWxhdGlvbnNoaXAubGlzdEtleV0sXG4gICAgcG9ydGFsTWVudTogdHJ1ZSxcbiAgICBzdGF0ZToge1xuICAgICAga2luZDogJ29uZScsXG4gICAgICB2YWx1ZTogZWxlbWVudC5kYXRhID09PSBudWxsID8gbnVsbCA6IHtcbiAgICAgICAgaWQ6IGVsZW1lbnQuZGF0YS5pZCxcbiAgICAgICAgbGFiZWw6IGVsZW1lbnQuZGF0YS5sYWJlbCB8fCBlbGVtZW50LmRhdGEuaWRcbiAgICAgIH0sXG5cbiAgICAgIG9uQ2hhbmdlKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGF0ID0gc2xhdGVSZWFjdC5SZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIGVsZW1lbnQpO1xuXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHNsYXRlLlRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBhdFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNsYXRlLlRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBkYXRhOiB2YWx1ZVxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIGF0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH1cbiAgfSkgOiAnSW52YWxpZCByZWxhdGlvbnNoaXAnKSwgY29yZS5qc3goXCJzcGFuXCIsIHtcbiAgICBjc3M6IHtcbiAgICAgIGZsZXg6IDBcbiAgICB9XG4gIH0sIGNoaWxkcmVuKSk7XG59XG5cbmZ1bmN0aW9uIGdldEluaXRpYWxWYWx1ZSh0eXBlLCBjb21wb25lbnRCbG9jaywgcmVsYXRpb25zaGlwcykge1xuICBjb25zdCBwcm9wcyA9IGdldEluaXRpYWxQcm9wc1ZhbHVlKHtcbiAgICBraW5kOiAnb2JqZWN0JyxcbiAgICB2YWx1ZTogY29tcG9uZW50QmxvY2sucHJvcHNcbiAgfSwgcmVsYXRpb25zaGlwcyk7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ2NvbXBvbmVudC1ibG9jaycsXG4gICAgY29tcG9uZW50OiB0eXBlLFxuICAgIHByb3BzLFxuICAgIGNoaWxkcmVuOiBmaW5kQ2hpbGRQcm9wUGF0aHMocHJvcHMsIGNvbXBvbmVudEJsb2NrLnByb3BzKS5tYXAoeCA9PiAoe1xuICAgICAgdHlwZTogYGNvbXBvbmVudC0ke3gub3B0aW9ucy5raW5kfS1wcm9wYCxcbiAgICAgIHByb3BQYXRoOiB4LnBhdGgsXG4gICAgICBjaGlsZHJlbjogW3gub3B0aW9ucy5raW5kID09PSAnYmxvY2snID8ge1xuICAgICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgdGV4dDogJydcbiAgICAgICAgfV1cbiAgICAgIH0gOiB7XG4gICAgICAgIHRleHQ6ICcnXG4gICAgICB9XVxuICAgIH0pKVxuICB9O1xufVxuZnVuY3Rpb24gZ2V0SW5pdGlhbFByb3BzVmFsdWUocHJvcCwgcmVsYXRpb25zaGlwcykge1xuICBzd2l0Y2ggKHByb3Aua2luZCkge1xuICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgcmV0dXJuIHByb3AuZGVmYXVsdFZhbHVlO1xuXG4gICAgY2FzZSAnY2hpbGQnOlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgIGNhc2UgJ3JlbGF0aW9uc2hpcCc6XG4gICAgICByZXR1cm4gcmVsYXRpb25zaGlwc1twcm9wLnJlbGF0aW9uc2hpcF0ubWFueSA/IFtdIDogbnVsbDtcblxuICAgIGNhc2UgJ2NvbmRpdGlvbmFsJzpcbiAgICAgIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gcHJvcC5kaXNjcmltaW5hbnQuZGVmYXVsdFZhbHVlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRpc2NyaW1pbmFudDogZGVmYXVsdFZhbHVlLFxuICAgICAgICAgIHZhbHVlOiBnZXRJbml0aWFsUHJvcHNWYWx1ZShwcm9wLnZhbHVlc1tkZWZhdWx0VmFsdWVdLCByZWxhdGlvbnNoaXBzKVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIHtcbiAgICAgICAgbGV0IG9iaiA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhwcm9wLnZhbHVlKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgb2JqW2tleV0gPSBnZXRJbml0aWFsUHJvcHNWYWx1ZShwcm9wLnZhbHVlW2tleV0sIHJlbGF0aW9uc2hpcHMpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH1cbiAgfVxuXG4gIGFzc2VydE5ldmVyKHByb3ApO1xufVxuXG5mdW5jdGlvbiBfZmluZENoaWxkUHJvcFBhdGhzKHZhbHVlLCBwcm9wLCBwYXRoKSB7XG4gIHN3aXRjaCAocHJvcC5raW5kKSB7XG4gICAgY2FzZSAnZm9ybSc6XG4gICAgY2FzZSAncmVsYXRpb25zaGlwJzpcbiAgICAgIHJldHVybiBbXTtcblxuICAgIGNhc2UgJ2NoaWxkJzpcbiAgICAgIHJldHVybiBbe1xuICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICBvcHRpb25zOiBwcm9wLm9wdGlvbnNcbiAgICAgIH1dO1xuXG4gICAgY2FzZSAnY29uZGl0aW9uYWwnOlxuICAgICAgcmV0dXJuIF9maW5kQ2hpbGRQcm9wUGF0aHModmFsdWUudmFsdWUsIHByb3AudmFsdWVzW3ZhbHVlLmRpc2NyaW1pbmFudF0sIHBhdGguY29uY2F0KCd2YWx1ZScpKTtcblxuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICB7XG4gICAgICAgIGxldCBwYXRocyA9IFtdO1xuICAgICAgICBPYmplY3Qua2V5cyhwcm9wLnZhbHVlKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgcGF0aHMucHVzaCguLi5fZmluZENoaWxkUHJvcFBhdGhzKHZhbHVlW2tleV0sIHByb3AudmFsdWVba2V5XSwgcGF0aC5jb25jYXQoa2V5KSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBhdGhzO1xuICAgICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRDaGlsZFByb3BQYXRocyh2YWx1ZSwgcHJvcHMpIHtcbiAgbGV0IHByb3BQYXRocyA9IF9maW5kQ2hpbGRQcm9wUGF0aHModmFsdWUsIHtcbiAgICBraW5kOiAnb2JqZWN0JyxcbiAgICB2YWx1ZTogcHJvcHNcbiAgfSwgW10pO1xuXG4gIGlmICghcHJvcFBhdGhzLmxlbmd0aCkge1xuICAgIHJldHVybiBbe1xuICAgICAgcGF0aDogdW5kZWZpbmVkLFxuICAgICAgb3B0aW9uczoge1xuICAgICAgICBraW5kOiAnaW5saW5lJyxcbiAgICAgICAgcGxhY2Vob2xkZXI6ICcnXG4gICAgICB9XG4gICAgfV07XG4gIH1cblxuICByZXR1cm4gcHJvcFBhdGhzO1xufVxuZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoYXJnKSB7XG4gIHRocm93IG5ldyBFcnJvcignZXhwZWN0ZWQgdG8gbmV2ZXIgYmUgY2FsbGVkIGJ1dCByZWNlaXZlZDogJyArIEpTT04uc3RyaW5naWZ5KGFyZykpO1xufVxuZnVuY3Rpb24gZ2V0UHJvcHNGb3JDb25kaXRpb25hbENoYW5nZShuZXdWYWx1ZSwgb2xkVmFsdWUsIHByb3AsIHJlbGF0aW9uc2hpcHMpIHtcbiAgaWYgKG5ld1ZhbHVlLmRpc2NyaW1pbmFudCAhPT0gb2xkVmFsdWUuZGlzY3JpbWluYW50KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc2NyaW1pbmFudDogbmV3VmFsdWUuZGlzY3JpbWluYW50LFxuICAgICAgdmFsdWU6IGdldEluaXRpYWxQcm9wc1ZhbHVlKHByb3AudmFsdWVzW25ld1ZhbHVlLmRpc2NyaW1pbmFudF0sIHJlbGF0aW9uc2hpcHMpXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3VmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldERvY3VtZW50RmVhdHVyZXNGb3JDaGlsZEZpZWxkKGVkaXRvckRvY3VtZW50RmVhdHVyZXMsIG9wdGlvbnMpIHtcbiAgdmFyIF9vcHRpb25zJGZvcm1hdHRpbmcsIF9vcHRpb25zJGZvcm1hdHRpbmczLCBfb3B0aW9ucyRmb3JtYXR0aW5nNCwgX29wdGlvbnMkZm9ybWF0dGluZzUsIF9vcHRpb25zJGZvcm1hdHRpbmc2LCBfb3B0aW9ucyRmb3JtYXR0aW5nNywgX29wdGlvbnMkZm9ybWF0dGluZzg7XG5cbiAgLy8gYW4gaW1wb3J0YW50IG5vdGUgZm9yIHRoaXM6IG5vcm1hbGl6YXRpb24gYmFzZWQgb24gZG9jdW1lbnQgZmVhdHVyZXNcbiAgLy8gaXMgZG9uZSBiYXNlZCBvbiB0aGUgZG9jdW1lbnQgZmVhdHVyZXMgcmV0dXJuZWQgaGVyZVxuICAvLyBhbmQgdGhlIGVkaXRvciBkb2N1bWVudCBmZWF0dXJlc1xuICAvLyBzbyB0aGUgcmVzdWx0IGZvciBhbnkgZ2l2ZW4gY2hpbGQgcHJvcCB3aWxsIGJlIHRoZSB0aGluZ3MgdGhhdCBhcmVcbiAgLy8gYWxsb3dlZCBieSBib3RoIHRoZXNlIGRvY3VtZW50IGZlYXR1cmVzXG4gIC8vIEFORCB0aGUgZWRpdG9yIGRvY3VtZW50IGZlYXR1cmVzXG4gIGNvbnN0IGlubGluZU1hcmtzRnJvbU9wdGlvbnMgPSAoX29wdGlvbnMkZm9ybWF0dGluZyA9IG9wdGlvbnMuZm9ybWF0dGluZykgPT09IG51bGwgfHwgX29wdGlvbnMkZm9ybWF0dGluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkZm9ybWF0dGluZy5pbmxpbmVNYXJrcztcbiAgY29uc3QgaW5saW5lTWFya3MgPSBpbmxpbmVNYXJrc0Zyb21PcHRpb25zID09PSAnaW5oZXJpdCcgPyAnaW5oZXJpdCcgOiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmtleXMoZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmlubGluZU1hcmtzKS5tYXAobWFyayA9PiB7XG4gICAgcmV0dXJuIFttYXJrLCAhIShpbmxpbmVNYXJrc0Zyb21PcHRpb25zIHx8IHt9KVttYXJrXV07XG4gIH0pKTtcblxuICBpZiAob3B0aW9ucy5raW5kID09PSAnaW5saW5lJykge1xuICAgIHZhciBfb3B0aW9ucyRmb3JtYXR0aW5nMjtcblxuICAgIHJldHVybiB7XG4gICAgICBraW5kOiAnaW5saW5lJyxcbiAgICAgIGlubGluZU1hcmtzLFxuICAgICAgZG9jdW1lbnRGZWF0dXJlczoge1xuICAgICAgICBsaW5rczogb3B0aW9ucy5saW5rcyA9PT0gJ2luaGVyaXQnLFxuICAgICAgICByZWxhdGlvbnNoaXBzOiBvcHRpb25zLnJlbGF0aW9uc2hpcHMgPT09ICdpbmhlcml0J1xuICAgICAgfSxcbiAgICAgIHNvZnRCcmVha3M6ICgoX29wdGlvbnMkZm9ybWF0dGluZzIgPSBvcHRpb25zLmZvcm1hdHRpbmcpID09PSBudWxsIHx8IF9vcHRpb25zJGZvcm1hdHRpbmcyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRmb3JtYXR0aW5nMi5zb2Z0QnJlYWtzKSA9PT0gJ2luaGVyaXQnXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAga2luZDogJ2Jsb2NrJyxcbiAgICBpbmxpbmVNYXJrcyxcbiAgICBzb2Z0QnJlYWtzOiAoKF9vcHRpb25zJGZvcm1hdHRpbmczID0gb3B0aW9ucy5mb3JtYXR0aW5nKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRmb3JtYXR0aW5nMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkZm9ybWF0dGluZzMuc29mdEJyZWFrcykgPT09ICdpbmhlcml0JyxcbiAgICBkb2N1bWVudEZlYXR1cmVzOiB7XG4gICAgICBsYXlvdXRzOiBbXSxcbiAgICAgIGRpdmlkZXJzOiBvcHRpb25zLmRpdmlkZXJzID09PSAnaW5oZXJpdCcgPyBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmRpdmlkZXJzIDogZmFsc2UsXG4gICAgICBmb3JtYXR0aW5nOiB7XG4gICAgICAgIGFsaWdubWVudDogKChfb3B0aW9ucyRmb3JtYXR0aW5nNCA9IG9wdGlvbnMuZm9ybWF0dGluZykgPT09IG51bGwgfHwgX29wdGlvbnMkZm9ybWF0dGluZzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmc0LmFsaWdubWVudCkgPT09ICdpbmhlcml0JyA/IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5hbGlnbm1lbnQgOiB7XG4gICAgICAgICAgY2VudGVyOiBmYWxzZSxcbiAgICAgICAgICBlbmQ6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGJsb2NrVHlwZXM6ICgoX29wdGlvbnMkZm9ybWF0dGluZzUgPSBvcHRpb25zLmZvcm1hdHRpbmcpID09PSBudWxsIHx8IF9vcHRpb25zJGZvcm1hdHRpbmc1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRmb3JtYXR0aW5nNS5ibG9ja1R5cGVzKSA9PT0gJ2luaGVyaXQnID8gZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmJsb2NrVHlwZXMgOiB7XG4gICAgICAgICAgYmxvY2txdW90ZTogZmFsc2UsXG4gICAgICAgICAgY29kZTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGluZ0xldmVsczogKChfb3B0aW9ucyRmb3JtYXR0aW5nNiA9IG9wdGlvbnMuZm9ybWF0dGluZykgPT09IG51bGwgfHwgX29wdGlvbnMkZm9ybWF0dGluZzYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmc2LmhlYWRpbmdMZXZlbHMpID09PSAnaW5oZXJpdCcgPyBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaGVhZGluZ0xldmVscyA6ICgoX29wdGlvbnMkZm9ybWF0dGluZzcgPSBvcHRpb25zLmZvcm1hdHRpbmcpID09PSBudWxsIHx8IF9vcHRpb25zJGZvcm1hdHRpbmc3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRmb3JtYXR0aW5nNy5oZWFkaW5nTGV2ZWxzKSB8fCBbXSxcbiAgICAgICAgbGlzdFR5cGVzOiAoKF9vcHRpb25zJGZvcm1hdHRpbmc4ID0gb3B0aW9ucy5mb3JtYXR0aW5nKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRmb3JtYXR0aW5nOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkZm9ybWF0dGluZzgubGlzdFR5cGVzKSA9PT0gJ2luaGVyaXQnID8gZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmxpc3RUeXBlcyA6IHtcbiAgICAgICAgICBvcmRlcmVkOiBmYWxzZSxcbiAgICAgICAgICB1bm9yZGVyZWQ6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBsaW5rczogb3B0aW9ucy5saW5rcyA9PT0gJ2luaGVyaXQnLFxuICAgICAgcmVsYXRpb25zaGlwczogb3B0aW9ucy5yZWxhdGlvbnNoaXBzID09PSAnaW5oZXJpdCdcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBnZXRDaGlsZEZpZWxkQXRQcm9wUGF0aChfcmVmLCB2YWx1ZXMsIHByb3BzKSB7XG4gIGxldCBba2V5LCAuLi5yZXN0T2ZQYXRoXSA9IF9yZWY7XG4gIGxldCBwcm9wID0gcHJvcHNba2V5XTtcblxuICBpZiAoIXByb3AgfHwgcHJvcC5raW5kID09PSAnZm9ybScgfHwgcHJvcC5raW5kID09PSAncmVsYXRpb25zaGlwJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChwcm9wLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICBjb25zdCBwcm9wVmFsID0gcHJvcC52YWx1ZXNbdmFsdWVzW2tleV0uZGlzY3JpbWluYW50XTtcbiAgICByZXR1cm4gZ2V0Q2hpbGRGaWVsZEF0UHJvcFBhdGgocmVzdE9mUGF0aCwgdmFsdWVzLCB7XG4gICAgICB2YWx1ZTogcHJvcFZhbFxuICAgIH0pO1xuICB9XG5cbiAgaWYgKHByb3Aua2luZCA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gZ2V0Q2hpbGRGaWVsZEF0UHJvcFBhdGgocmVzdE9mUGF0aCwgdmFsdWVzW2tleV0sIHByb3AudmFsdWUpO1xuICB9XG5cbiAgcmV0dXJuIHByb3A7XG59XG5mdW5jdGlvbiBjbGllbnRTaWRlVmFsaWRhdGVQcm9wKHByb3AsIHZhbHVlKSB7XG4gIHN3aXRjaCAocHJvcC5raW5kKSB7XG4gICAgY2FzZSAnY2hpbGQnOlxuICAgIGNhc2UgJ3JlbGF0aW9uc2hpcCc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgY2FzZSAnZm9ybSc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBwcm9wLnZhbGlkYXRlKHZhbHVlKTtcbiAgICAgIH1cblxuICAgIGNhc2UgJ2NvbmRpdGlvbmFsJzpcbiAgICAgIHtcbiAgICAgICAgaWYgKCFwcm9wLmRpc2NyaW1pbmFudC52YWxpZGF0ZSh2YWx1ZS5kaXNjcmltaW5hbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNsaWVudFNpZGVWYWxpZGF0ZVByb3AocHJvcC52YWx1ZXNbdmFsdWUuZGlzY3JpbWluYW50XSwgdmFsdWUudmFsdWUpO1xuICAgICAgfVxuXG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBjaGlsZFByb3BdIG9mIE9iamVjdC5lbnRyaWVzKHByb3AudmFsdWUpKSB7XG4gICAgICAgICAgaWYgKCFjbGllbnRTaWRlVmFsaWRhdGVQcm9wKGNoaWxkUHJvcCwgdmFsdWVba2V5XSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBfZ2V0UHJldmlld1Byb3BzKHByb3AsIHZhbHVlLCBjaGlsZHJlbkJ5UGF0aCwgcGF0aCwgcmVsYXRpb25zaGlwcywgb25Gb3JtUHJvcHNDaGFuZ2UpIHtcbiAgc3dpdGNoIChwcm9wLmtpbmQpIHtcbiAgICBjYXNlICdmb3JtJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlLFxuXG4gICAgICAgIG9uQ2hhbmdlKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgb25Gb3JtUHJvcHNDaGFuZ2UobmV3VmFsdWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9wdGlvbnM6IHByb3Aub3B0aW9uc1xuICAgICAgfTtcblxuICAgIGNhc2UgJ2NoaWxkJzpcbiAgICAgIHJldHVybiBjaGlsZHJlbkJ5UGF0aFtKU09OLnN0cmluZ2lmeShwYXRoKV07XG5cbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAge1xuICAgICAgICBjb25zdCBwcmV2aWV3UHJvcHMgPSB7fTtcbiAgICAgICAgT2JqZWN0LmtleXMocHJvcC52YWx1ZSkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgIHByZXZpZXdQcm9wc1trZXldID0gX2dldFByZXZpZXdQcm9wcyhwcm9wLnZhbHVlW2tleV0sIHZhbHVlW2tleV0sIGNoaWxkcmVuQnlQYXRoLCBwYXRoLmNvbmNhdChrZXkpLCByZWxhdGlvbnNoaXBzLCBuZXdWYWwgPT4ge1xuICAgICAgICAgICAgb25Gb3JtUHJvcHNDaGFuZ2UoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZSksIHt9LCB7XG4gICAgICAgICAgICAgIFtrZXldOiBuZXdWYWxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwcmV2aWV3UHJvcHM7XG4gICAgICB9XG5cbiAgICBjYXNlICdyZWxhdGlvbnNoaXAnOlxuICAgICAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlLFxuXG4gICAgICAgICAgb25DaGFuZ2UobmV3VmFsdWUpIHtcbiAgICAgICAgICAgIG9uRm9ybVByb3BzQ2hhbmdlKG5ld1ZhbHVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgIGNhc2UgJ2NvbmRpdGlvbmFsJzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkaXNjcmltaW5hbnQ6IHZhbHVlLmRpc2NyaW1pbmFudCxcblxuICAgICAgICAgIG9uQ2hhbmdlKG5ld0Rpc2NyaW1pbmFudCkge1xuICAgICAgICAgICAgb25Gb3JtUHJvcHNDaGFuZ2UoZ2V0UHJvcHNGb3JDb25kaXRpb25hbENoYW5nZSh7XG4gICAgICAgICAgICAgIGRpc2NyaW1pbmFudDogbmV3RGlzY3JpbWluYW50LFxuICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWVcbiAgICAgICAgICAgIH0sIHZhbHVlLCBwcm9wLCByZWxhdGlvbnNoaXBzKSk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIG9wdGlvbnM6IHByb3AuZGlzY3JpbWluYW50Lm9wdGlvbnMsXG4gICAgICAgICAgdmFsdWU6IF9nZXRQcmV2aWV3UHJvcHMocHJvcC52YWx1ZXNbdmFsdWUuZGlzY3JpbWluYW50XSwgdmFsdWUudmFsdWUsIGNoaWxkcmVuQnlQYXRoLCBwYXRoLmNvbmNhdCgndmFsdWUnKSwgcmVsYXRpb25zaGlwcywgdmFsID0+IHtcbiAgICAgICAgICAgIG9uRm9ybVByb3BzQ2hhbmdlKHtcbiAgICAgICAgICAgICAgZGlzY3JpbWluYW50OiB2YWx1ZS5kaXNjcmltaW5hbnQsXG4gICAgICAgICAgICAgIHZhbHVlOiB2YWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJldmlld1Byb3BzKGVsZW1lbnQsIGNvbXBvbmVudEJsb2NrLCBjaGlsZHJlbkJ5UGF0aCwgcmVsYXRpb25zaGlwcywgc2V0Tm9kZSkge1xuICByZXR1cm4gX2dldFByZXZpZXdQcm9wcyh7XG4gICAga2luZDogJ29iamVjdCcsXG4gICAgdmFsdWU6IGNvbXBvbmVudEJsb2NrLnByb3BzXG4gIH0sIGVsZW1lbnQucHJvcHMsIGNoaWxkcmVuQnlQYXRoLCBbXSwgcmVsYXRpb25zaGlwcywgcHJvcHMgPT4ge1xuICAgIHNldE5vZGUoe1xuICAgICAgcHJvcHNcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8vIHRoaXMgaXMgaW4gYSBkaWZmZXJlbnQgY29tcG9uZW50IHRvIHRoZSBvdGhlciBmb3JtIGlucHV0cyBiZWNhdXNlIGl0IHVzZXMgdXNlS2V5c3RvbmVcbi8vIGFuZCB3ZSB3YW50IHRvIHJlbmRlciB0aGUgZWRpdG9yIG91dHNpZGUgb2YgdGhlIEFkbWluIFVJIG9uIHRoZSBkb2NzIHNpdGVcbi8vIGFuZCBhIGNhbGwgdG8gdXNlS2V5c3RvbmUgd2lsbCBicmVhayBvbiB0aGUgZG9jcyBzaXRlXG5mdW5jdGlvbiBSZWxhdGlvbnNoaXBGb3JtSW5wdXQoX3JlZikge1xuICBsZXQge1xuICAgIHByb3AsXG4gICAgcGF0aCxcbiAgICB2YWx1ZSxcbiAgICBvbkNoYW5nZSxcbiAgICBzdHJpbmdpZmllZFByb3BQYXRoVG9BdXRvRm9jdXNcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHJlbGF0aW9uc2hpcHMgPSB1c2VEb2N1bWVudEZpZWxkUmVsYXRpb25zaGlwcygpO1xuICBjb25zdCBrZXlzdG9uZSA9IGNvbnRleHQudXNlS2V5c3RvbmUoKTtcbiAgY29uc3QgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwc1twcm9wLnJlbGF0aW9uc2hpcF07XG4gIGNvbnN0IHN0cmluZ2lmaWVkUGF0aCA9IEpTT04uc3RyaW5naWZ5KHBhdGgpO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KGZpZWxkcy5GaWVsZENvbnRhaW5lciwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KGZpZWxkcy5GaWVsZExhYmVsLCBudWxsLCBwcm9wLmxhYmVsKSwgLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFJlbGF0aW9uc2hpcFNlbGVjdC5SZWxhdGlvbnNoaXBTZWxlY3QsIHtcbiAgICBhdXRvRm9jdXM6IHN0cmluZ2lmaWVkUGF0aCA9PT0gc3RyaW5naWZpZWRQcm9wUGF0aFRvQXV0b0ZvY3VzLFxuICAgIGNvbnRyb2xTaG91bGRSZW5kZXJWYWx1ZTogdHJ1ZSxcbiAgICBpc0Rpc2FibGVkOiBmYWxzZSxcbiAgICBsaXN0OiBrZXlzdG9uZS5hZG1pbk1ldGEubGlzdHNbcmVsYXRpb25zaGlwLmxpc3RLZXldLFxuICAgIGV4dHJhU2VsZWN0aW9uOiByZWxhdGlvbnNoaXAuc2VsZWN0aW9uIHx8ICcnLFxuICAgIHBvcnRhbE1lbnU6IHRydWUsXG4gICAgc3RhdGU6IHJlbGF0aW9uc2hpcC5tYW55ID8ge1xuICAgICAga2luZDogJ21hbnknLFxuICAgICAgdmFsdWU6IHZhbHVlLm1hcCh4ID0+ICh7XG4gICAgICAgIGlkOiB4LmlkLFxuICAgICAgICBsYWJlbDogeC5sYWJlbCB8fCB4LmlkLFxuICAgICAgICBkYXRhOiB4LmRhdGFcbiAgICAgIH0pKSxcbiAgICAgIG9uQ2hhbmdlXG4gICAgfSA6IHtcbiAgICAgIGtpbmQ6ICdvbmUnLFxuICAgICAgdmFsdWU6IHZhbHVlID8gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZSksIHt9LCB7XG4gICAgICAgIGxhYmVsOiB2YWx1ZS5sYWJlbCB8fCB2YWx1ZS5pZFxuICAgICAgfSkgOiBudWxsLFxuICAgICAgb25DaGFuZ2VcbiAgICB9XG4gIH0pKTtcbn1cblxuZnVuY3Rpb24gRm9ybVZhbHVlQ29udGVudChfcmVmMikge1xuICBsZXQge1xuICAgIHByb3AsXG4gICAgcGF0aCxcbiAgICB2YWx1ZSxcbiAgICBvbkNoYW5nZSxcbiAgICBzdHJpbmdpZmllZFByb3BQYXRoVG9BdXRvRm9jdXMsXG4gICAgZm9yY2VWYWxpZGF0aW9uXG4gIH0gPSBfcmVmMjtcbiAgY29uc3QgcmVsYXRpb25zaGlwcyA9IHVzZURvY3VtZW50RmllbGRSZWxhdGlvbnNoaXBzKCk7XG4gIGlmIChwcm9wLmtpbmQgPT09ICdjaGlsZCcpIHJldHVybiBudWxsO1xuXG4gIGlmIChwcm9wLmtpbmQgPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChjb3JlLlN0YWNrLCB7XG4gICAgICBnYXA6IFwieGxhcmdlXCJcbiAgICB9LCBPYmplY3QuZW50cmllcyhwcm9wLnZhbHVlKS5tYXAoX3JlZjMgPT4ge1xuICAgICAgbGV0IFtrZXksIHByb3BWYWxdID0gX3JlZjM7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KEZvcm1WYWx1ZUNvbnRlbnQsIHtcbiAgICAgICAga2V5OiBrZXksXG4gICAgICAgIGZvcmNlVmFsaWRhdGlvbjogZm9yY2VWYWxpZGF0aW9uLFxuICAgICAgICBzdHJpbmdpZmllZFByb3BQYXRoVG9BdXRvRm9jdXM6IHN0cmluZ2lmaWVkUHJvcFBhdGhUb0F1dG9Gb2N1cyxcbiAgICAgICAgcGF0aDogcGF0aC5jb25jYXQoa2V5KSxcbiAgICAgICAgcHJvcDogcHJvcFZhbCxcbiAgICAgICAgdmFsdWU6IHZhbHVlW2tleV0sXG4gICAgICAgIG9uQ2hhbmdlOiB2YWwgPT4ge1xuICAgICAgICAgIG9uQ2hhbmdlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFsdWUpLCB7fSwge1xuICAgICAgICAgICAgW2tleV06IHZhbFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSkpO1xuICB9XG5cbiAgaWYgKHByb3Aua2luZCA9PT0gJ2NvbmRpdGlvbmFsJykge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3RfX2RlZmF1bHRbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoY29yZS5TdGFjaywge1xuICAgICAgZ2FwOiBcInhsYXJnZVwiXG4gICAgfSwgLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KHByb3AuZGlzY3JpbWluYW50LklucHV0LCB7XG4gICAgICBhdXRvRm9jdXM6IEpTT04uc3RyaW5naWZ5KHBhdGguY29uY2F0KCdkaXNjcmltaW5hbnQnKSkgPT09IHN0cmluZ2lmaWVkUHJvcFBhdGhUb0F1dG9Gb2N1cyxcbiAgICAgIHZhbHVlOiB2YWx1ZS5kaXNjcmltaW5hbnQsXG4gICAgICBvbkNoYW5nZTogZGlzY3JpbWluYW50ID0+IHtcbiAgICAgICAgb25DaGFuZ2UoZ2V0UHJvcHNGb3JDb25kaXRpb25hbENoYW5nZSh7XG4gICAgICAgICAgZGlzY3JpbWluYW50LFxuICAgICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZVxuICAgICAgICB9LCB2YWx1ZSwgcHJvcCwgcmVsYXRpb25zaGlwcykpO1xuICAgICAgfSxcbiAgICAgIGZvcmNlVmFsaWRhdGlvbjogZm9yY2VWYWxpZGF0aW9uICYmICFwcm9wLmRpc2NyaW1pbmFudC52YWxpZGF0ZSh2YWx1ZSlcbiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KEZvcm1WYWx1ZUNvbnRlbnQsIHtcbiAgICAgIGZvcmNlVmFsaWRhdGlvbjogZm9yY2VWYWxpZGF0aW9uLFxuICAgICAgc3RyaW5naWZpZWRQcm9wUGF0aFRvQXV0b0ZvY3VzOiBzdHJpbmdpZmllZFByb3BQYXRoVG9BdXRvRm9jdXMsXG4gICAgICBwYXRoOiBwYXRoLmNvbmNhdCgndmFsdWUnKSxcbiAgICAgIHByb3A6IHByb3AudmFsdWVzW3ZhbHVlLmRpc2NyaW1pbmFudF0sXG4gICAgICB2YWx1ZTogdmFsdWUudmFsdWUsXG4gICAgICBvbkNoYW5nZTogdmFsID0+IHtcbiAgICAgICAgb25DaGFuZ2Uoe1xuICAgICAgICAgIGRpc2NyaW1pbmFudDogdmFsdWUuZGlzY3JpbWluYW50LFxuICAgICAgICAgIHZhbHVlOiB2YWxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSkpO1xuICB9XG5cbiAgaWYgKHByb3Aua2luZCA9PT0gJ3JlbGF0aW9uc2hpcCcpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFJlbGF0aW9uc2hpcEZvcm1JbnB1dCwge1xuICAgICAgcHJvcDogcHJvcCxcbiAgICAgIHBhdGg6IHBhdGgsXG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBvbkNoYW5nZTogb25DaGFuZ2UsXG4gICAgICBzdHJpbmdpZmllZFByb3BQYXRoVG9BdXRvRm9jdXM6IHN0cmluZ2lmaWVkUHJvcFBhdGhUb0F1dG9Gb2N1c1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChwcm9wLklucHV0LCB7XG4gICAgYXV0b0ZvY3VzOiBKU09OLnN0cmluZ2lmeShwYXRoKSA9PT0gc3RyaW5naWZpZWRQcm9wUGF0aFRvQXV0b0ZvY3VzLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBvbkNoYW5nZTogb25DaGFuZ2UsXG4gICAgZm9yY2VWYWxpZGF0aW9uOiBmb3JjZVZhbGlkYXRpb24gJiYgIXByb3AudmFsaWRhdGUodmFsdWUpXG4gIH0pO1xufSAvLyBjaGlsZCBhcyBpbiB0aGUgcHJvcHMgYXJlIGEgdHJlZSBhbmQgeW91IHdhbnQgdGhlIGNoaWxkcmVuIG9mIGEgcHJvcCwgbm90IGFzIGluIHRoZSBraW5kID09PSAnaW5saW5lJ1xuXG5mdW5jdGlvbiBnZXRDaGlsZFByb3BzKHByb3AsIHZhbHVlKSB7XG4gIGlmIChwcm9wLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzY3JpbWluYW50OiBwcm9wLmRpc2NyaW1pbmFudCxcbiAgICAgIHZhbHVlOiBwcm9wLnZhbHVlc1t2YWx1ZS5kaXNjcmltaW5hbnRdXG4gICAgfTtcbiAgfSBlbHNlIGlmIChwcm9wLmtpbmQgPT09ICdmb3JtJyB8fCBwcm9wLmtpbmQgPT09ICdjaGlsZCcgfHwgcHJvcC5raW5kID09PSAncmVsYXRpb25zaGlwJykge1xuICAgIHJldHVybiB7fTtcbiAgfSBlbHNlIGlmIChwcm9wLmtpbmQgPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIHByb3AudmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgYXNzZXJ0TmV2ZXIocHJvcCk7IC8vIFR5cGVTY3JpcHQgc2hvdWxkIHVuZGVyc3RhbmQgdGhhdCB0aGlzIHdpbGwgbmV2ZXIgaGFwcGVuIGJ1dCBmb3Igc29tZSByZWFzb24gaXQgZG9lc24ndFxuXG4gICAgcmV0dXJuIHt9O1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRGaXJzdEZvY3VzYWJsZVByb3BQYXRoKHByb3BzLCBwYXRoLCB2YWx1ZSkge1xuICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhwcm9wcykpIHtcbiAgICBjb25zdCBwcm9wID0gcHJvcHNba2V5XTtcbiAgICBjb25zdCBuZXdQYXRoID0gcGF0aC5jb25jYXQoa2V5KTtcblxuICAgIGlmIChwcm9wLmtpbmQgPT09ICdmb3JtJyB8fCBwcm9wLmtpbmQgPT09ICdyZWxhdGlvbnNoaXAnKSB7XG4gICAgICByZXR1cm4gbmV3UGF0aDtcbiAgICB9XG5cbiAgICBsZXQgY2hpbGRyZW4gPSBnZXRDaGlsZFByb3BzKHByb3AsIHZhbHVlW2tleV0pO1xuICAgIGNvbnN0IGNoaWxkRm9jdXNhYmxlID0gZmluZEZpcnN0Rm9jdXNhYmxlUHJvcFBhdGgoY2hpbGRyZW4sIG5ld1BhdGgsIHZhbHVlW2tleV0pO1xuXG4gICAgaWYgKGNoaWxkRm9jdXNhYmxlKSB7XG4gICAgICByZXR1cm4gY2hpbGRGb2N1c2FibGU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIEZvcm1WYWx1ZShfcmVmNCkge1xuICBsZXQge1xuICAgIHZhbHVlLFxuICAgIG9uQ2xvc2UsXG4gICAgb25DaGFuZ2UsXG4gICAgY29tcG9uZW50QmxvY2ssXG4gICAgaXNWYWxpZFxuICB9ID0gX3JlZjQ7XG4gIGNvbnN0IFtmb3JjZVZhbGlkYXRpb24sIHNldEZvcmNlVmFsaWRhdGlvbl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGZvY3VzYWJsZVBhdGggPSBKU09OLnN0cmluZ2lmeShmaW5kRmlyc3RGb2N1c2FibGVQcm9wUGF0aChjb21wb25lbnRCbG9jay5wcm9wcywgW10sIHZhbHVlKSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3RfX2RlZmF1bHRbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoY29yZS5TdGFjaywge1xuICAgIGdhcDogXCJ4bGFyZ2VcIixcbiAgICBjb250ZW50RWRpdGFibGU6IGZhbHNlXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChGb3JtVmFsdWVDb250ZW50LCB7XG4gICAgZm9yY2VWYWxpZGF0aW9uOiBmb3JjZVZhbGlkYXRpb24sXG4gICAgb25DaGFuZ2U6IG9uQ2hhbmdlLFxuICAgIHBhdGg6IFtdLFxuICAgIHByb3A6IHtcbiAgICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgICAgdmFsdWU6IGNvbXBvbmVudEJsb2NrLnByb3BzXG4gICAgfSxcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgc3RyaW5naWZpZWRQcm9wUGF0aFRvQXV0b0ZvY3VzOiBmb2N1c2FibGVQYXRoXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3RfX2RlZmF1bHRbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoYnV0dG9uLkJ1dHRvbiwge1xuICAgIHNpemU6IFwic21hbGxcIixcbiAgICB0b25lOiBcImFjdGl2ZVwiLFxuICAgIHdlaWdodDogXCJib2xkXCIsXG4gICAgb25DbGljazogKCkgPT4ge1xuICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgb25DbG9zZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0Rm9yY2VWYWxpZGF0aW9uKHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgXCJEb25lXCIpKTtcbn1cblxuZnVuY3Rpb24gYXJlQXJyYXlzRXF1YWwoYXJyQSwgYXJyQikge1xuICBpZiAoYXJyQS5sZW5ndGggIT09IGFyckIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJBLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFyckFbaV0gIT09IGFyckJbaV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplVGV4dEJhc2VkT25JbmxpbmVNYXJrc0FuZFNvZnRCcmVha3MoX3JlZiwgZWRpdG9yLCBpbmxpbmVNYXJrcywgc29mdEJyZWFrcykge1xuICBsZXQgW25vZGUsIHBhdGhdID0gX3JlZjtcbiAgY29uc3QgbWFya3NUb1JlbW92ZSA9IE9iamVjdC5rZXlzKG5vZGUpLmZpbHRlcih4ID0+IHggIT09ICd0ZXh0JyAmJiB4ICE9PSAnaW5zZXJ0TWVudScgJiYgaW5saW5lTWFya3NbeF0gIT09IHRydWUpO1xuXG4gIGlmIChtYXJrc1RvUmVtb3ZlLmxlbmd0aCkge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsIG1hcmtzVG9SZW1vdmUsIHtcbiAgICAgIGF0OiBwYXRoXG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAoIXNvZnRCcmVha3MpIHtcbiAgICBjb25zdCBoYXNTb2Z0QnJlYWtzID0gbm9kZS50ZXh0LmluY2x1ZGVzKCdcXG4nKTtcblxuICAgIGlmIChoYXNTb2Z0QnJlYWtzKSB7XG4gICAgICBjb25zdCBbcGFyZW50Tm9kZV0gPSBzbGF0ZS5FZGl0b3IucGFyZW50KGVkaXRvciwgcGF0aCk7XG5cbiAgICAgIGlmIChwYXJlbnROb2RlLnR5cGUgIT09ICdjb2RlJykge1xuICAgICAgICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIHNsYXRlLkVkaXRvci5wb3NpdGlvbnMoZWRpdG9yLCB7XG4gICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICBjb25zdCBjaGFyYWN0ZXIgPSBzbGF0ZS5Ob2RlLmdldChlZGl0b3IsIHBvc2l0aW9uLnBhdGgpLnRleHRbcG9zaXRpb24ub2Zmc2V0XTtcblxuICAgICAgICAgIGlmIChjaGFyYWN0ZXIgPT09ICdcXG4nKSB7XG4gICAgICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IHBvc2l0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUlubGluZUJhc2VkT25MaW5rc0FuZFJlbGF0aW9uc2hpcHMoX3JlZjIsIGVkaXRvciwgbGlua3MsIHJlbGF0aW9uc2hpcHNFbmFibGVkLCByZWxhdGlvbnNoaXBzKSB7XG4gIGxldCBbbm9kZSwgcGF0aF0gPSBfcmVmMjtcblxuICBpZiAobm9kZS50eXBlID09PSAnbGluaycgJiYgIWxpbmtzKSB7XG4gICAgc2xhdGUuVHJhbnNmb3Jtcy5pbnNlcnRUZXh0KGVkaXRvciwgYCAoJHtub2RlLmhyZWZ9KWAsIHtcbiAgICAgIGF0OiBzbGF0ZS5FZGl0b3IuZW5kKGVkaXRvciwgcGF0aClcbiAgICB9KTtcbiAgICBzbGF0ZS5UcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgYXQ6IHBhdGhcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmIChub2RlLnR5cGUgPT09ICdyZWxhdGlvbnNoaXAnICYmICghcmVsYXRpb25zaGlwc0VuYWJsZWQgfHwgcmVsYXRpb25zaGlwc1tub2RlLnJlbGF0aW9uc2hpcF0gPT09IHVuZGVmaW5lZCB8fCByZWxhdGlvbnNoaXBzW25vZGUucmVsYXRpb25zaGlwXS5raW5kICE9PSAnaW5saW5lJykpIHtcbiAgICBjb25zdCBkYXRhID0gbm9kZS5kYXRhO1xuXG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIGNvbnN0IHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcHNbbm9kZS5yZWxhdGlvbnNoaXBdO1xuICAgICAgc2xhdGUuVHJhbnNmb3Jtcy5pbnNlcnRUZXh0KGVkaXRvciwgYCR7ZGF0YS5sYWJlbCB8fCBkYXRhLmlkIHx8ICcnfSAoJHsocmVsYXRpb25zaGlwID09PSBudWxsIHx8IHJlbGF0aW9uc2hpcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVsYXRpb25zaGlwLmtpbmQpID09PSAnaW5saW5lJyA/IHJlbGF0aW9uc2hpcC5sYWJlbCA6IG5vZGUucmVsYXRpb25zaGlwfToke2RhdGEuaWQgfHwgJyd9KWAsIHtcbiAgICAgICAgYXQ6IHNsYXRlLkVkaXRvci5iZWZvcmUoZWRpdG9yLCBwYXRoKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2xhdGUuVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgIGF0OiBwYXRoXG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBub3JtYWxpemVFbGVtZW50QmFzZWRPbkRvY3VtZW50RmVhdHVyZXMoX3JlZjMsIGVkaXRvciwgX3JlZjQsIHJlbGF0aW9uc2hpcHMpIHtcbiAgbGV0IFtub2RlLCBwYXRoXSA9IF9yZWYzO1xuICBsZXQge1xuICAgIGZvcm1hdHRpbmcsXG4gICAgZGl2aWRlcnMsXG4gICAgbGF5b3V0cyxcbiAgICBsaW5rcyxcbiAgICByZWxhdGlvbnNoaXBzOiByZWxhdGlvbnNoaXBzRW5hYmxlZFxuICB9ID0gX3JlZjQ7XG5cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2hlYWRpbmcnICYmICghZm9ybWF0dGluZy5oZWFkaW5nTGV2ZWxzLmxlbmd0aCB8fCAhZm9ybWF0dGluZy5oZWFkaW5nTGV2ZWxzLmluY2x1ZGVzKG5vZGUubGV2ZWwpKSB8fCBub2RlLnR5cGUgPT09ICdvcmRlcmVkLWxpc3QnICYmICFmb3JtYXR0aW5nLmxpc3RUeXBlcy5vcmRlcmVkIHx8IG5vZGUudHlwZSA9PT0gJ3Vub3JkZXJlZC1saXN0JyAmJiAhZm9ybWF0dGluZy5saXN0VHlwZXMudW5vcmRlcmVkIHx8IG5vZGUudHlwZSA9PT0gJ2NvZGUnICYmICFmb3JtYXR0aW5nLmJsb2NrVHlwZXMuY29kZSB8fCBub2RlLnR5cGUgPT09ICdibG9ja3F1b3RlJyAmJiAhZm9ybWF0dGluZy5ibG9ja1R5cGVzLmJsb2NrcXVvdGUgfHwgbm9kZS50eXBlID09PSAnbGF5b3V0JyAmJiAobGF5b3V0cy5sZW5ndGggPT09IDAgfHwgIWxheW91dHMuc29tZShsYXlvdXQgPT4gYXJlQXJyYXlzRXF1YWwobGF5b3V0LCBub2RlLmxheW91dCkpKSkge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICBhdDogcGF0aFxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKChub2RlLnR5cGUgPT09ICdwYXJhZ3JhcGgnIHx8IG5vZGUudHlwZSA9PT0gJ2hlYWRpbmcnKSAmJiAoIWZvcm1hdHRpbmcuYWxpZ25tZW50LmNlbnRlciAmJiBub2RlLnRleHRBbGlnbiA9PT0gJ2NlbnRlcicgfHwgIWZvcm1hdHRpbmcuYWxpZ25tZW50LmVuZCAmJiBub2RlLnRleHRBbGlnbiA9PT0gJ2VuZCcgfHwgJ3RleHRBbGlnbicgaW4gbm9kZSAmJiBub2RlLnRleHRBbGlnbiAhPT0gJ2NlbnRlcicgJiYgbm9kZS50ZXh0QWxpZ24gIT09ICdlbmQnKSkge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsICd0ZXh0QWxpZ24nLCB7XG4gICAgICBhdDogcGF0aFxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2RpdmlkZXInICYmICFkaXZpZGVycykge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICBhdDogcGF0aFxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIG5vcm1hbGl6ZUlubGluZUJhc2VkT25MaW5rc0FuZFJlbGF0aW9uc2hpcHMoW25vZGUsIHBhdGhdLCBlZGl0b3IsIGxpbmtzLCByZWxhdGlvbnNoaXBzRW5hYmxlZCwgcmVsYXRpb25zaGlwcyk7XG59XG5mdW5jdGlvbiB3aXRoRG9jdW1lbnRGZWF0dXJlc05vcm1hbGl6YXRpb24oZG9jdW1lbnRGZWF0dXJlcywgcmVsYXRpb25zaGlwcywgZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBub3JtYWxpemVOb2RlXG4gIH0gPSBlZGl0b3I7XG5cbiAgY29uc3QgZG9jdW1lbnRGZWF0dXJlc0Zvck5vcm1hbGl6YXRpb24gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRvY3VtZW50RmVhdHVyZXMpLCB7fSwge1xuICAgIHJlbGF0aW9uc2hpcHM6IHRydWVcbiAgfSk7XG5cbiAgZWRpdG9yLm5vcm1hbGl6ZU5vZGUgPSBfcmVmNSA9PiB7XG4gICAgbGV0IFtub2RlLCBwYXRoXSA9IF9yZWY1O1xuXG4gICAgaWYgKHNsYXRlLlRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgICBub3JtYWxpemVUZXh0QmFzZWRPbklubGluZU1hcmtzQW5kU29mdEJyZWFrcyhbbm9kZSwgcGF0aF0sIGVkaXRvciwgZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmlubGluZU1hcmtzLCBkb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuc29mdEJyZWFrcyk7XG4gICAgfSBlbHNlIGlmIChzbGF0ZS5FbGVtZW50LmlzRWxlbWVudChub2RlKSkge1xuICAgICAgbm9ybWFsaXplRWxlbWVudEJhc2VkT25Eb2N1bWVudEZlYXR1cmVzKFtub2RlLCBwYXRoXSwgZWRpdG9yLCBkb2N1bWVudEZlYXR1cmVzRm9yTm9ybWFsaXphdGlvbiwgcmVsYXRpb25zaGlwcyk7XG4gICAgfVxuXG4gICAgbm9ybWFsaXplTm9kZShbbm9kZSwgcGF0aF0pO1xuICB9O1xuXG4gIHJldHVybiBlZGl0b3I7XG59XG5cbmZ1bmN0aW9uIGdldEFuY2VzdG9yQ29tcG9uZW50QmxvY2soZWRpdG9yKSB7XG4gIGlmIChlZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgY29uc3QgYW5jZXN0b3JFbnRyeSA9IHNsYXRlLkVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBub2RlID0+IHNsYXRlLkVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbm9kZSkgJiYgbm9kZS50eXBlICE9PSAncGFyYWdyYXBoJ1xuICAgIH0pO1xuXG4gICAgaWYgKGFuY2VzdG9yRW50cnkgJiYgKGFuY2VzdG9yRW50cnlbMF0udHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jay1wcm9wJyB8fCBhbmNlc3RvckVudHJ5WzBdLnR5cGUgPT09ICdjb21wb25lbnQtaW5saW5lLXByb3AnKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNJbnNpZGU6IHRydWUsXG4gICAgICAgIGNvbXBvbmVudEJsb2NrOiBzbGF0ZS5FZGl0b3IucGFyZW50KGVkaXRvciwgYW5jZXN0b3JFbnRyeVsxXSksXG4gICAgICAgIHByb3A6IGFuY2VzdG9yRW50cnlcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpc0luc2lkZTogZmFsc2VcbiAgfTtcbn1cblxuY29uc3QgYWxyZWFkeU5vcm1hbGl6ZWRUaGluZ3MgPSBuZXcgV2Vha01hcCgpO1xuXG5mdW5jdGlvbiBub3JtYWxpemVOb2RlV2l0aGluQ29tcG9uZW50UHJvcChfcmVmLCBlZGl0b3IsIGZpZWxkT3B0aW9ucywgcmVsYXRpb25zaGlwcykge1xuICBsZXQgW25vZGUsIHBhdGhdID0gX3JlZjtcbiAgbGV0IGFscmVhZHlOb3JtYWxpemVkTm9kZXMgPSBhbHJlYWR5Tm9ybWFsaXplZFRoaW5ncy5nZXQoZmllbGRPcHRpb25zKTtcblxuICBpZiAoIWFscmVhZHlOb3JtYWxpemVkTm9kZXMpIHtcbiAgICBhbHJlYWR5Tm9ybWFsaXplZE5vZGVzID0gbmV3IFdlYWtTZXQoKTtcbiAgICBhbHJlYWR5Tm9ybWFsaXplZFRoaW5ncy5zZXQoZmllbGRPcHRpb25zLCBhbHJlYWR5Tm9ybWFsaXplZE5vZGVzKTtcbiAgfVxuXG4gIGlmIChhbHJlYWR5Tm9ybWFsaXplZE5vZGVzLmhhcyhub2RlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGxldCBkaWROb3JtYWxpemF0aW9uID0gZmFsc2U7XG5cbiAgaWYgKGZpZWxkT3B0aW9ucy5pbmxpbmVNYXJrcyAhPT0gJ2luaGVyaXQnICYmIHNsYXRlLlRleHQuaXNUZXh0KG5vZGUpKSB7XG4gICAgZGlkTm9ybWFsaXphdGlvbiA9IG5vcm1hbGl6ZVRleHRCYXNlZE9uSW5saW5lTWFya3NBbmRTb2Z0QnJlYWtzKFtub2RlLCBwYXRoXSwgZWRpdG9yLCBmaWVsZE9wdGlvbnMuaW5saW5lTWFya3MsIGZpZWxkT3B0aW9ucy5zb2Z0QnJlYWtzKTtcbiAgfVxuXG4gIGlmIChzbGF0ZS5FbGVtZW50LmlzRWxlbWVudChub2RlKSkge1xuICAgIGxldCBjaGlsZHJlbkhhc0NoYW5nZWQgPSBub2RlLmNoaWxkcmVuLm1hcCgobm9kZSwgaSkgPT4gbm9ybWFsaXplTm9kZVdpdGhpbkNvbXBvbmVudFByb3AoW25vZGUsIFsuLi5wYXRoLCBpXV0sIGVkaXRvciwgZmllbGRPcHRpb25zLCByZWxhdGlvbnNoaXBzKSkgLy8gLm1hcCB0aGVuIC5zb21lIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCB0byBleGl0IGVhcmx5XG4gICAgLnNvbWUoeCA9PiB4KTtcblxuICAgIGlmIChmaWVsZE9wdGlvbnMua2luZCA9PT0gJ2Jsb2NrJykge1xuICAgICAgZGlkTm9ybWFsaXphdGlvbiA9IG5vcm1hbGl6ZUVsZW1lbnRCYXNlZE9uRG9jdW1lbnRGZWF0dXJlcyhbbm9kZSwgcGF0aF0sIGVkaXRvciwgZmllbGRPcHRpb25zLmRvY3VtZW50RmVhdHVyZXMsIHJlbGF0aW9uc2hpcHMpIHx8IGNoaWxkcmVuSGFzQ2hhbmdlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlkTm9ybWFsaXphdGlvbiA9IG5vcm1hbGl6ZUlubGluZUJhc2VkT25MaW5rc0FuZFJlbGF0aW9uc2hpcHMoW25vZGUsIHBhdGhdLCBlZGl0b3IsIGZpZWxkT3B0aW9ucy5kb2N1bWVudEZlYXR1cmVzLmxpbmtzLCBmaWVsZE9wdGlvbnMuZG9jdW1lbnRGZWF0dXJlcy5yZWxhdGlvbnNoaXBzLCByZWxhdGlvbnNoaXBzKTtcbiAgICB9XG4gIH1cblxuICBpZiAoZGlkTm9ybWFsaXphdGlvbiA9PT0gZmFsc2UpIHtcbiAgICBhbHJlYWR5Tm9ybWFsaXplZE5vZGVzLmFkZChub2RlKTtcbiAgfVxuXG4gIHJldHVybiBkaWROb3JtYWxpemF0aW9uO1xufVxuXG5mdW5jdGlvbiB3aXRoQ29tcG9uZW50QmxvY2tzKGJsb2NrQ29tcG9uZW50cywgZWRpdG9yRG9jdW1lbnRGZWF0dXJlcywgcmVsYXRpb25zaGlwcywgZWRpdG9yKSB7XG4gIC8vIG5vdGUgdGhhdCBjb25mbGljdHMgYmV0d2VlbiB0aGUgZWRpdG9yIGRvY3VtZW50IGZlYXR1cmVzXG4gIC8vIGFuZCB0aGUgY2hpbGQgZmllbGQgZG9jdW1lbnQgZmVhdHVyZXMgYXJlIGRlYWx0IHdpdGggZWxzZXdoZXJlXG4gIGNvbnN0IG1lbW9pemVkR2V0RG9jdW1lbnRGZWF0dXJlc0ZvckNoaWxkRmllbGQgPSB3ZWFrTWVtb2l6ZV9fZGVmYXVsdFtcImRlZmF1bHRcIl0ob3B0aW9ucyA9PiB7XG4gICAgcmV0dXJuIGdldERvY3VtZW50RmVhdHVyZXNGb3JDaGlsZEZpZWxkKGVkaXRvckRvY3VtZW50RmVhdHVyZXMsIG9wdGlvbnMpO1xuICB9KTtcbiAgY29uc3Qge1xuICAgIG5vcm1hbGl6ZU5vZGUsXG4gICAgZGVsZXRlQmFja3dhcmQsXG4gICAgaW5zZXJ0QnJlYWtcbiAgfSA9IGVkaXRvcjtcblxuICBlZGl0b3IuZGVsZXRlQmFja3dhcmQgPSB1bml0ID0+IHtcbiAgICBpZiAoZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgY29uc3QgYW5jZXN0b3JDb21wb25lbnRCbG9jayA9IGdldEFuY2VzdG9yQ29tcG9uZW50QmxvY2soZWRpdG9yKTtcblxuICAgICAgaWYgKGFuY2VzdG9yQ29tcG9uZW50QmxvY2suaXNJbnNpZGUgJiYgc2xhdGUuUmFuZ2UuaXNDb2xsYXBzZWQoZWRpdG9yLnNlbGVjdGlvbikgJiYgc2xhdGUuRWRpdG9yLmlzU3RhcnQoZWRpdG9yLCBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvciwgYW5jZXN0b3JDb21wb25lbnRCbG9jay5wcm9wWzFdKSAmJiBhbmNlc3RvckNvbXBvbmVudEJsb2NrLnByb3BbMV1bYW5jZXN0b3JDb21wb25lbnRCbG9jay5wcm9wWzFdLmxlbmd0aCAtIDFdID09PSAwKSB7XG4gICAgICAgIHNsYXRlLlRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgYXQ6IGFuY2VzdG9yQ29tcG9uZW50QmxvY2suY29tcG9uZW50QmxvY2tbMV1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkZWxldGVCYWNrd2FyZCh1bml0KTtcbiAgfTtcblxuICBlZGl0b3IuaW5zZXJ0QnJlYWsgPSAoKSA9PiB7XG4gICAgY29uc3QgYW5jZXN0b3JDb21wb25lbnRCbG9jayA9IGdldEFuY2VzdG9yQ29tcG9uZW50QmxvY2soZWRpdG9yKTtcblxuICAgIGlmIChlZGl0b3Iuc2VsZWN0aW9uICYmIGFuY2VzdG9yQ29tcG9uZW50QmxvY2suaXNJbnNpZGUpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcHJvcDogW2NvbXBvbmVudFByb3BOb2RlLCBjb21wb25lbnRQcm9wUGF0aF0sXG4gICAgICAgIGNvbXBvbmVudEJsb2NrOiBbY29tcG9uZW50QmxvY2tOb2RlLCBjb21wb25lbnRCbG9ja1BhdGhdXG4gICAgICB9ID0gYW5jZXN0b3JDb21wb25lbnRCbG9jaztcbiAgICAgIGNvbnN0IGlzTGFzdFByb3AgPSBjb21wb25lbnRQcm9wUGF0aFtjb21wb25lbnRQcm9wUGF0aC5sZW5ndGggLSAxXSA9PT0gY29tcG9uZW50QmxvY2tOb2RlLmNoaWxkcmVuLmxlbmd0aCAtIDE7XG5cbiAgICAgIGlmIChjb21wb25lbnRQcm9wTm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnKSB7XG4gICAgICAgIGNvbnN0IFtbcGFyYWdyYXBoTm9kZSwgcGFyYWdyYXBoUGF0aF1dID0gc2xhdGUuRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ3BhcmFncmFwaCdcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGlzTGFzdFBhcmFncmFwaCA9IHBhcmFncmFwaFBhdGhbcGFyYWdyYXBoUGF0aC5sZW5ndGggLSAxXSA9PT0gY29tcG9uZW50UHJvcE5vZGUuY2hpbGRyZW4ubGVuZ3RoIC0gMTtcblxuICAgICAgICBpZiAoc2xhdGUuTm9kZS5zdHJpbmcocGFyYWdyYXBoTm9kZSkgPT09ICcnICYmIGlzTGFzdFBhcmFncmFwaCkge1xuICAgICAgICAgIGlmIChpc0xhc3RQcm9wKSB7XG4gICAgICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IHBhcmFncmFwaFBhdGgsXG4gICAgICAgICAgICAgIHRvOiBzbGF0ZS5QYXRoLm5leHQoYW5jZXN0b3JDb21wb25lbnRCbG9jay5jb21wb25lbnRCbG9ja1sxXSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUT0RPOiB0aGlzIGdvZXMgdG8gdGhlIHN0YXJ0IG9mIHRoZSBuZXh0IGJsb2NrLCBpcyB0aGF0IHJpZ2h0P1xuICAgICAgICAgICAgLy8gc2hvdWxkIHdlIGp1c3QgaW5zZXJ0QnJlYWsgYWx3YXlzIGhlcmU/XG4gICAgICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLm1vdmUoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGRpc3RhbmNlOiAxLFxuICAgICAgICAgICAgICB1bml0OiAnbGluZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IHBhcmFncmFwaFBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY29tcG9uZW50UHJvcE5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcpIHtcbiAgICAgICAgc2xhdGUuRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLnNwbGl0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBhbHdheXM6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCBzcGxpdE5vZGVQYXRoID0gc2xhdGUuUGF0aC5uZXh0KGNvbXBvbmVudFByb3BQYXRoKTtcblxuICAgICAgICAgIGlmIChpc0xhc3RQcm9wKSB7XG4gICAgICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IHNwbGl0Tm9kZVBhdGgsXG4gICAgICAgICAgICAgIHRvOiBzbGF0ZS5QYXRoLm5leHQoY29tcG9uZW50QmxvY2tQYXRoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1vdmVDaGlsZHJlbihlZGl0b3IsIHNwbGl0Tm9kZVBhdGgsIFsuLi5zbGF0ZS5QYXRoLm5leHQoc3BsaXROb2RlUGF0aCksIDBdKTtcbiAgICAgICAgICAgIHNsYXRlLlRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBzcGxpdE5vZGVQYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaW5zZXJ0QnJlYWsoKTtcbiAgfTtcblxuICBlZGl0b3Iubm9ybWFsaXplTm9kZSA9IGVudHJ5ID0+IHtcbiAgICBjb25zdCBbbm9kZSwgcGF0aF0gPSBlbnRyeTtcblxuICAgIGlmIChzbGF0ZS5FbGVtZW50LmlzRWxlbWVudChub2RlKSB8fCBzbGF0ZS5FZGl0b3IuaXNFZGl0b3Iobm9kZSkpIHtcbiAgICAgIGlmIChub2RlLnR5cGUgPT09ICdjb21wb25lbnQtaW5saW5lLXByb3AnICYmICFub2RlLnByb3BQYXRoICYmIChub2RlLmNoaWxkcmVuLmxlbmd0aCAhPT0gMSB8fCAhc2xhdGUuVGV4dC5pc1RleHQobm9kZS5jaGlsZHJlblswXSkgfHwgbm9kZS5jaGlsZHJlblswXS50ZXh0ICE9PSAnJykpIHtcbiAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICBhdDogcGF0aFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2xhdGUuRWxlbWVudC5pc0VsZW1lbnQobm9kZSkgJiYgbm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrJykge1xuICAgICAgICBjb25zdCBjb21wb25lbnRCbG9jayA9IGJsb2NrQ29tcG9uZW50c1tub2RlLmNvbXBvbmVudF07XG5cbiAgICAgICAgaWYgKGNvbXBvbmVudEJsb2NrKSB7XG4gICAgICAgICAgbGV0IG1pc3NpbmdLZXlzID0gbmV3IE1hcChmaW5kQ2hpbGRQcm9wUGF0aHMobm9kZS5wcm9wcywgY29tcG9uZW50QmxvY2sucHJvcHMpLm1hcCh4ID0+IFtKU09OLnN0cmluZ2lmeSh4LnBhdGgpLCB4Lm9wdGlvbnMua2luZF0pKTtcbiAgICAgICAgICBub2RlLmNoaWxkcmVuLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICAgICAgICBhc3NlcnQobm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnIHx8IG5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcpO1xuICAgICAgICAgICAgbWlzc2luZ0tleXMuZGVsZXRlKEpTT04uc3RyaW5naWZ5KG5vZGUucHJvcFBhdGgpKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChtaXNzaW5nS2V5cy5zaXplKSB7XG4gICAgICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgWy4uLm1pc3NpbmdLZXlzXS5tYXAoX3JlZjIgPT4ge1xuICAgICAgICAgICAgICBsZXQgW3Byb3AsIGtpbmRdID0gX3JlZjI7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogYGNvbXBvbmVudC0ke2tpbmR9LXByb3BgLFxuICAgICAgICAgICAgICAgIHByb3BQYXRoOiBwcm9wID8gSlNPTi5wYXJzZShwcm9wKSA6IHByb3AsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSwge1xuICAgICAgICAgICAgICBhdDogWy4uLnBhdGgsIG5vZGUuY2hpbGRyZW4ubGVuZ3RoXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IGZvdW5kUHJvcHMgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgbGV0IHN0cmluZ2lmaWVkSW5saW5lUHJvcFBhdGhzID0ge307XG4gICAgICAgICAgZmluZENoaWxkUHJvcFBhdGhzKG5vZGUucHJvcHMsIGJsb2NrQ29tcG9uZW50c1tub2RlLmNvbXBvbmVudF0ucHJvcHMpLmZvckVhY2goKHgsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBzdHJpbmdpZmllZElubGluZVByb3BQYXRoc1tKU09OLnN0cmluZ2lmeSh4LnBhdGgpXSA9IHtcbiAgICAgICAgICAgICAgb3B0aW9uczogeC5vcHRpb25zLFxuICAgICAgICAgICAgICBpbmRleFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBjaGlsZE5vZGVdIG9mIG5vZGUuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICBpZiAoIC8vIGNoaWxkcmVuIHRoYXQgYXJlIG5vdCB0aGVzZSB3aWxsIGJlIGhhbmRsZWQgYnlcbiAgICAgICAgICAgIC8vIHRoZSBnZW5lcmljIGFsbG93ZWRDaGlsZHJlbiBub3JtYWxpemF0aW9uXG4gICAgICAgICAgICBjaGlsZE5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcgfHwgY2hpbGROb2RlLnR5cGUgPT09ICdjb21wb25lbnQtYmxvY2stcHJvcCcpIHtcbiAgICAgICAgICAgICAgY29uc3QgY2hpbGRQYXRoID0gWy4uLnBhdGgsIGluZGV4XTtcbiAgICAgICAgICAgICAgY29uc3Qgc3RyaW5naWZpZWRQcm9wUGF0aCA9IEpTT04uc3RyaW5naWZ5KGNoaWxkTm9kZS5wcm9wUGF0aCk7XG5cbiAgICAgICAgICAgICAgaWYgKHN0cmluZ2lmaWVkSW5saW5lUHJvcFBhdGhzW3N0cmluZ2lmaWVkUHJvcFBhdGhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICAgICAgYXQ6IGNoaWxkUGF0aFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmRQcm9wcy5oYXMoc3RyaW5naWZpZWRQcm9wUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgIHNsYXRlLlRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgIGF0OiBjaGlsZFBhdGhcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvdW5kUHJvcHMuYWRkKHN0cmluZ2lmaWVkUHJvcFBhdGgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3BJbmZvID0gc3RyaW5naWZpZWRJbmxpbmVQcm9wUGF0aHNbc3RyaW5naWZpZWRQcm9wUGF0aF07XG4gICAgICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRJbmRleCA9IHByb3BJbmZvLmluZGV4O1xuXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSBleHBlY3RlZEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgYXQ6IGNoaWxkUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgdG86IFsuLi5wYXRoLCBleHBlY3RlZEluZGV4XVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRDaGlsZE5vZGVUeXBlID0gYGNvbXBvbmVudC0ke3Byb3BJbmZvLm9wdGlvbnMua2luZH0tcHJvcGA7XG5cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGROb2RlLnR5cGUgIT09IGV4cGVjdGVkQ2hpbGROb2RlVHlwZSkge1xuICAgICAgICAgICAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZXhwZWN0ZWRDaGlsZE5vZGVUeXBlXG4gICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGF0OiBjaGlsZFBhdGhcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50RmVhdHVyZXMgPSBtZW1vaXplZEdldERvY3VtZW50RmVhdHVyZXNGb3JDaGlsZEZpZWxkKHByb3BJbmZvLm9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZU5vZGVXaXRoaW5Db21wb25lbnRQcm9wKFtjaGlsZE5vZGUsIGNoaWxkUGF0aF0sIGVkaXRvciwgZG9jdW1lbnRGZWF0dXJlcywgcmVsYXRpb25zaGlwcykpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBub3JtYWxpemVOb2RlKGVudHJ5KTtcbiAgfTtcblxuICByZXR1cm4gZWRpdG9yO1xufVxuXG5jb25zdCBDb21wb25lbnRCbG9ja0NvbnRleHQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlQ29udGV4dCh7fSk7XG5mdW5jdGlvbiBnZXRQbGFjZWhvbGRlclRleHRGb3JQcm9wUGF0aChwcm9wUGF0aCwgZmllbGRzLCBmb3JtUHJvcHMpIHtcbiAgY29uc3QgcHJvcCA9IHByb3BQYXRoWzBdO1xuICBjb25zdCBmaWVsZCA9IGZpZWxkc1twcm9wXTtcblxuICBpZiAoZmllbGQua2luZCA9PT0gJ3JlbGF0aW9uc2hpcCcgfHwgZmllbGQua2luZCA9PT0gJ2Zvcm0nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1bmV4cGVjdGVkIHByb3AgZmllbGQgd2hlbiBmaW5kaW5nIHBsYWNlaG9sZGVyIHRleHQgZm9yIGNoaWxkIHByb3AnKTtcbiAgfVxuXG4gIGlmIChmaWVsZC5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBnZXRQbGFjZWhvbGRlclRleHRGb3JQcm9wUGF0aChwcm9wUGF0aC5zbGljZSgxKSwgZmllbGQudmFsdWUsIGZvcm1Qcm9wc1twcm9wXSk7XG4gIH1cblxuICBpZiAoZmllbGQua2luZCA9PT0gJ2NvbmRpdGlvbmFsJykge1xuICAgIHJldHVybiBnZXRQbGFjZWhvbGRlclRleHRGb3JQcm9wUGF0aChwcm9wUGF0aC5zbGljZSgxKSwge1xuICAgICAgdmFsdWU6IGZpZWxkLnZhbHVlc1tmb3JtUHJvcHNbcHJvcF0uZGlzY3JpbWluYW50XVxuICAgIH0sIGZvcm1Qcm9wc1twcm9wXSk7XG4gIH1cblxuICByZXR1cm4gZmllbGQub3B0aW9ucy5wbGFjZWhvbGRlcjtcbn1cbmZ1bmN0aW9uIENvbXBvbmVudElubGluZVByb3AocHJvcHMpIHtcbiAgcmV0dXJuIGNvcmUuanN4KFwic3BhblwiLCBwcm9wcy5hdHRyaWJ1dGVzLCBwcm9wcy5jaGlsZHJlbik7XG59XG5mdW5jdGlvbiBpbnNlcnRDb21wb25lbnRCbG9jayhlZGl0b3IsIGNvbXBvbmVudEJsb2NrcywgY29tcG9uZW50QmxvY2ssIHJlbGF0aW9uc2hpcHMpIHtcbiAgbGV0IG5vZGUgPSBnZXRJbml0aWFsVmFsdWUoY29tcG9uZW50QmxvY2ssIGNvbXBvbmVudEJsb2Nrc1tjb21wb25lbnRCbG9ja10sIHJlbGF0aW9uc2hpcHMpO1xuICBpbnNlcnROb2Rlc0J1dFJlcGxhY2VJZlNlbGVjdGlvbklzQXRFbXB0eVBhcmFncmFwaE9ySGVhZGluZyhlZGl0b3IsIG5vZGUpO1xuICBjb25zdCBjb21wb25lbnRCbG9ja0VudHJ5ID0gc2xhdGUuRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jaydcbiAgfSk7XG5cbiAgaWYgKGNvbXBvbmVudEJsb2NrRW50cnkpIHtcbiAgICBjb25zdCBzdGFydCA9IHNsYXRlLkVkaXRvci5zdGFydChlZGl0b3IsIGNvbXBvbmVudEJsb2NrRW50cnlbMV0pO1xuICAgIHNsYXRlLlRyYW5zZm9ybXMuc2V0U2VsZWN0aW9uKGVkaXRvciwge1xuICAgICAgYW5jaG9yOiBzdGFydCxcbiAgICAgIGZvY3VzOiBzdGFydFxuICAgIH0pO1xuICB9XG59XG5jb25zdCBCbG9ja0NvbXBvbmVudHNCdXR0b25zID0gX3JlZiA9PiB7XG4gIGxldCB7XG4gICAgb25DbG9zZVxuICB9ID0gX3JlZjtcbiAgY29uc3QgZWRpdG9yID0gc2xhdGVSZWFjdC51c2VTbGF0ZVN0YXRpYygpO1xuICBjb25zdCBibG9ja0NvbXBvbmVudHMgPSBSZWFjdC51c2VDb250ZXh0KENvbXBvbmVudEJsb2NrQ29udGV4dCk7XG4gIGNvbnN0IHJlbGF0aW9uc2hpcHMgPSB1c2VEb2N1bWVudEZpZWxkUmVsYXRpb25zaGlwcygpO1xuICByZXR1cm4gY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIG51bGwsIE9iamVjdC5rZXlzKGJsb2NrQ29tcG9uZW50cykubWFwKGtleSA9PiBjb3JlLmpzeCh0b29sYmFyLlRvb2xiYXJCdXR0b24sIHtcbiAgICBrZXk6IGtleSxcbiAgICBvbk1vdXNlRG93bjogZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGluc2VydENvbXBvbmVudEJsb2NrKGVkaXRvciwgYmxvY2tDb21wb25lbnRzLCBrZXksIHJlbGF0aW9uc2hpcHMpO1xuICAgICAgb25DbG9zZSgpO1xuICAgIH1cbiAgfSwgYmxvY2tDb21wb25lbnRzW2tleV0ubGFiZWwpKSk7XG59O1xuY29uc3QgQ29tcG9uZW50QmxvY2tzRWxlbWVudCA9IF9yZWYyID0+IHtcbiAgbGV0IHtcbiAgICBhdHRyaWJ1dGVzLFxuICAgIGNoaWxkcmVuLFxuICAgIGVsZW1lbnQ6IF9fZWxlbWVudFRvR2V0UGF0aFxuICB9ID0gX3JlZjI7XG4gIGNvbnN0IGVkaXRvciA9IHNsYXRlUmVhY3QudXNlU2xhdGVTdGF0aWMoKTtcbiAgY29uc3QgZm9jdXNlZCA9IHNsYXRlUmVhY3QudXNlRm9jdXNlZCgpO1xuICBjb25zdCBzZWxlY3RlZCA9IHNsYXRlUmVhY3QudXNlU2VsZWN0ZWQoKTtcbiAgY29uc3QgW2VkaXRNb2RlLCBzZXRFZGl0TW9kZV0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjdXJyZW50RWxlbWVudCwgc2V0RWxlbWVudF0gPSB1c2VFbGVtZW50V2l0aFNldE5vZGVzKGVkaXRvciwgX19lbGVtZW50VG9HZXRQYXRoKTtcbiAgY29uc3Qge1xuICAgIGNvbG9ycyxcbiAgICBmaWVsZHMsXG4gICAgc3BhY2luZyxcbiAgICB0eXBvZ3JhcGh5XG4gIH0gPSBjb3JlLnVzZVRoZW1lKCk7XG4gIGNvbnN0IGJsb2NrQ29tcG9uZW50cyA9IFJlYWN0LnVzZUNvbnRleHQoQ29tcG9uZW50QmxvY2tDb250ZXh0KTtcbiAgY29uc3QgY29tcG9uZW50QmxvY2sgPSBibG9ja0NvbXBvbmVudHNbY3VycmVudEVsZW1lbnQuY29tcG9uZW50XTtcbiAgY29uc3QgaXNWYWxpZCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBjb21wb25lbnRCbG9jayA/IGNsaWVudFNpZGVWYWxpZGF0ZVByb3Aoe1xuICAgICAga2luZDogJ29iamVjdCcsXG4gICAgICB2YWx1ZTogY29tcG9uZW50QmxvY2sucHJvcHNcbiAgICB9LCBjdXJyZW50RWxlbWVudC5wcm9wcykgOiB0cnVlO1xuICB9LCBbY29tcG9uZW50QmxvY2ssIGN1cnJlbnRFbGVtZW50LnByb3BzXSk7XG4gIGNvbnN0IGRvY3VtZW50RmllbGRSZWxhdGlvbnNoaXBzID0gdXNlRG9jdW1lbnRGaWVsZFJlbGF0aW9uc2hpcHMoKTtcblxuICBpZiAoIWNvbXBvbmVudEJsb2NrKSB7XG4gICAgcmV0dXJuIGNvcmUuanN4KFwiZGl2XCIsIHtcbiAgICAgIGNzczoge1xuICAgICAgICBib3JkZXI6ICdyZWQgNHB4IHNvbGlkJyxcbiAgICAgICAgcGFkZGluZzogc3BhY2luZy5tZWRpdW1cbiAgICAgIH1cbiAgICB9LCBjb3JlLmpzeChcInByZVwiLCB7XG4gICAgICBjb250ZW50RWRpdGFibGU6IGZhbHNlLFxuICAgICAgY3NzOiB7XG4gICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJ1xuICAgICAgfVxuICAgIH0sIGBUaGUgYmxvY2sgXCIke2N1cnJlbnRFbGVtZW50LmNvbXBvbmVudH1cIiBubyBsb25nZXIgZXhpc3RzLlxuXG5Qcm9wczpcblxuJHtKU09OLnN0cmluZ2lmeShjdXJyZW50RWxlbWVudC5wcm9wcywgbnVsbCwgMil9XG5cbkNvbnRlbnQ6YCksIGNoaWxkcmVuKTtcbiAgfVxuXG4gIHJldHVybiBjb3JlLmpzeChcImRpdlwiLCBfZXh0ZW5kcyh7XG4gICAgXCJkYXRhLXdpdGgtY2hyb21lXCI6ICFjb21wb25lbnRCbG9jay5jaHJvbWVsZXNzLFxuICAgIGNzczoge1xuICAgICAgbWFyZ2luQm90dG9tOiBzcGFjaW5nLnhsYXJnZSxcbiAgICAgIG1hcmdpblRvcDogc3BhY2luZy54bGFyZ2UsXG4gICAgICAnJltkYXRhLXdpdGgtY2hyb21lPXRydWVdJzoge1xuICAgICAgICBwYWRkaW5nTGVmdDogc3BhY2luZy54bGFyZ2UsXG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAnOmJlZm9yZSc6IHtcbiAgICAgICAgICBjb250ZW50OiAnXCIgXCInLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZWRpdE1vZGUgPyBjb2xvcnMubGlua0NvbG9yIDogY29sb3JzLmJvcmRlcixcbiAgICAgICAgICBib3JkZXJSYWRpdXM6IDQsXG4gICAgICAgICAgd2lkdGg6IDQsXG4gICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICAgIHpJbmRleDogMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBhdHRyaWJ1dGVzKSwgIWNvbXBvbmVudEJsb2NrLmNocm9tZWxlc3MgJiYgY29yZS5qc3goYXBpLk5vdEVkaXRhYmxlLCB7XG4gICAgY3NzOiB7XG4gICAgICBjb2xvcjogZmllbGRzLmxlZ2VuZENvbG9yLFxuICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgIGZvbnRTaXplOiB0eXBvZ3JhcGh5LmZvbnRTaXplLnNtYWxsLFxuICAgICAgZm9udFdlaWdodDogdHlwb2dyYXBoeS5mb250V2VpZ2h0LmJvbGQsXG4gICAgICBsaW5lSGVpZ2h0OiAxLFxuICAgICAgbWFyZ2luQm90dG9tOiBzcGFjaW5nLnNtYWxsLFxuICAgICAgdGV4dFRyYW5zZm9ybTogJ3VwcGVyY2FzZSdcbiAgICB9XG4gIH0sIGNvbXBvbmVudEJsb2NrLmxhYmVsKSwgZWRpdE1vZGUgJiYgY29yZS5qc3goRm9ybVZhbHVlLCB7XG4gICAgaXNWYWxpZDogaXNWYWxpZCxcbiAgICBjb21wb25lbnRCbG9jazogY29tcG9uZW50QmxvY2ssXG4gICAgb25DbG9zZTogKCkgPT4ge1xuICAgICAgc2V0RWRpdE1vZGUoZmFsc2UpO1xuICAgIH0sXG4gICAgdmFsdWU6IGN1cnJlbnRFbGVtZW50LnByb3BzLFxuICAgIG9uQ2hhbmdlOiB2YWwgPT4ge1xuICAgICAgc2V0RWxlbWVudCh7XG4gICAgICAgIHByb3BzOiB2YWxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSksIGNvcmUuanN4KFwiZGl2XCIsIHtcbiAgICBjc3M6IHtcbiAgICAgIGRpc3BsYXk6IGVkaXRNb2RlID8gJ25vbmUnIDogJ2Jsb2NrJyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXG4gICAgfVxuICB9LCBlZGl0TW9kZSA/IGNoaWxkcmVuIDogY29yZS5qc3goQ29tcG9uZW50QmxvY2tSZW5kZXIsIHtcbiAgICBjaGlsZHJlbjogY2hpbGRyZW4sXG4gICAgY29tcG9uZW50QmxvY2s6IGNvbXBvbmVudEJsb2NrLFxuICAgIGVsZW1lbnQ6IGN1cnJlbnRFbGVtZW50LFxuICAgIG9uRWxlbWVudENoYW5nZTogc2V0RWxlbWVudFxuICB9KSwgIWVkaXRNb2RlICYmICgoKSA9PiB7XG4gICAgY29uc3QgdG9vbGJhclByb3BzID0gY3JlYXRlUHJldmlld1Byb3BzKGN1cnJlbnRFbGVtZW50LCBjb21wb25lbnRCbG9jaywge30sIGRvY3VtZW50RmllbGRSZWxhdGlvbnNoaXBzLCBzZXRFbGVtZW50KTtcbiAgICBjb25zdCBDaHJvbWVmdWxUb29sYmFyID0gY29tcG9uZW50QmxvY2sudG9vbGJhciA/IGNvbXBvbmVudEJsb2NrLnRvb2xiYXIgOiBEZWZhdWx0VG9vbGJhcldpdGhDaHJvbWU7XG4gICAgY29uc3QgQ2hyb21lbGVzc1Rvb2xiYXIgPSBjb21wb25lbnRCbG9jay5jaHJvbWVsZXNzICYmIGNvbXBvbmVudEJsb2NrLnRvb2xiYXIgPyBjb21wb25lbnRCbG9jay50b29sYmFyIDogRGVmYXVsdFRvb2xiYXJXaXRob3V0Q2hyb21lO1xuICAgIHJldHVybiBjb21wb25lbnRCbG9jay5jaHJvbWVsZXNzID8gZm9jdXNlZCAmJiBzZWxlY3RlZCAmJiBjb3JlLmpzeCh0b29sYmFyLklubGluZURpYWxvZywge1xuICAgICAgaXNSZWxhdGl2ZTogdHJ1ZVxuICAgIH0sIGNvcmUuanN4KENocm9tZWxlc3NUb29sYmFyLCB7XG4gICAgICBvblJlbW92ZTogKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gc2xhdGVSZWFjdC5SZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIF9fZWxlbWVudFRvR2V0UGF0aCk7XG4gICAgICAgIHNsYXRlLlRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgcHJvcHM6IHRvb2xiYXJQcm9wc1xuICAgIH0pKSA6IGNvcmUuanN4KENocm9tZWZ1bFRvb2xiYXIsIHtcbiAgICAgIGlzVmFsaWQ6IGlzVmFsaWQsXG4gICAgICBvblJlbW92ZTogKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gc2xhdGVSZWFjdC5SZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIF9fZWxlbWVudFRvR2V0UGF0aCk7XG4gICAgICAgIHNsYXRlLlRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgb25TaG93RWRpdE1vZGU6ICgpID0+IHtcbiAgICAgICAgc2V0RWRpdE1vZGUodHJ1ZSk7XG4gICAgICB9LFxuICAgICAgcHJvcHM6IHRvb2xiYXJQcm9wc1xuICAgIH0pO1xuICB9KSgpKSk7XG59O1xuXG5mdW5jdGlvbiBEZWZhdWx0VG9vbGJhcldpdGhDaHJvbWUoX3JlZjMpIHtcbiAgbGV0IHtcbiAgICBvblNob3dFZGl0TW9kZSxcbiAgICBvblJlbW92ZSxcbiAgICBpc1ZhbGlkXG4gIH0gPSBfcmVmMztcbiAgY29uc3QgdGhlbWUgPSBjb3JlLnVzZVRoZW1lKCk7XG4gIHJldHVybiBjb3JlLmpzeCh0b29sYmFyLlRvb2xiYXJHcm91cCwge1xuICAgIGFzOiBhcGkuTm90RWRpdGFibGUsXG4gICAgbWFyZ2luVG9wOiBcInNtYWxsXCJcbiAgfSwgY29yZS5qc3godG9vbGJhci5Ub29sYmFyQnV0dG9uLCB7XG4gICAgb25DbGljazogKCkgPT4ge1xuICAgICAgb25TaG93RWRpdE1vZGUoKTtcbiAgICB9XG4gIH0sIFwiRWRpdFwiKSwgY29yZS5qc3godG9vbGJhci5Ub29sYmFyU2VwYXJhdG9yLCBudWxsKSwgY29yZS5qc3godG9vbHRpcC5Ub29sdGlwLCB7XG4gICAgY29udGVudDogXCJSZW1vdmVcIixcbiAgICB3ZWlnaHQ6IFwic3VidGxlXCJcbiAgfSwgYXR0cnMgPT4gY29yZS5qc3godG9vbGJhci5Ub29sYmFyQnV0dG9uLCBfZXh0ZW5kcyh7XG4gICAgdmFyaWFudDogXCJkZXN0cnVjdGl2ZVwiLFxuICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgIG9uUmVtb3ZlKCk7XG4gICAgfVxuICB9LCBhdHRycyksIGNvcmUuanN4KFRyYXNoMkljb24uVHJhc2gySWNvbiwge1xuICAgIHNpemU6IFwic21hbGxcIlxuICB9KSkpLCAhaXNWYWxpZCAmJiBjb3JlLmpzeChSZWFjdC5GcmFnbWVudCwgbnVsbCwgY29yZS5qc3godG9vbGJhci5Ub29sYmFyU2VwYXJhdG9yLCBudWxsKSwgY29yZS5qc3goXCJzcGFuXCIsIHtcbiAgICBjc3M6IHtcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnJlZDUwMCxcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgcGFkZGluZ0xlZnQ6IHRoZW1lLnNwYWNpbmcuc21hbGxcbiAgICB9XG4gIH0sIFwiUGxlYXNlIGVkaXQgdGhlIGZvcm0sIHRoZXJlIGFyZSBpbnZhbGlkIGZpZWxkcy5cIikpKTtcbn1cblxuZnVuY3Rpb24gRGVmYXVsdFRvb2xiYXJXaXRob3V0Q2hyb21lKF9yZWY0KSB7XG4gIGxldCB7XG4gICAgb25SZW1vdmVcbiAgfSA9IF9yZWY0O1xuICByZXR1cm4gY29yZS5qc3godG9vbHRpcC5Ub29sdGlwLCB7XG4gICAgY29udGVudDogXCJSZW1vdmVcIixcbiAgICB3ZWlnaHQ6IFwic3VidGxlXCJcbiAgfSwgYXR0cnMgPT4gY29yZS5qc3godG9vbGJhci5Ub29sYmFyQnV0dG9uLCBfZXh0ZW5kcyh7XG4gICAgdmFyaWFudDogXCJkZXN0cnVjdGl2ZVwiLFxuICAgIG9uTW91c2VEb3duOiBldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgb25SZW1vdmUoKTtcbiAgICB9XG4gIH0sIGF0dHJzKSwgY29yZS5qc3goVHJhc2gySWNvbi5UcmFzaDJJY29uLCB7XG4gICAgc2l6ZTogXCJzbWFsbFwiXG4gIH0pKSk7XG59XG5cbmZ1bmN0aW9uIENvbXBvbmVudEJsb2NrUmVuZGVyKF9yZWY1KSB7XG4gIGxldCB7XG4gICAgY29tcG9uZW50QmxvY2ssXG4gICAgZWxlbWVudCxcbiAgICBvbkVsZW1lbnRDaGFuZ2UsXG4gICAgY2hpbGRyZW5cbiAgfSA9IF9yZWY1O1xuICBjb25zdCBjaGlsZHJlbkJ5UGF0aCA9IHt9O1xuICBsZXQgbWF5YmVDaGlsZDtcbiAgY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgbGV0IHN0cmluZ2lmaWVkID0gSlNPTi5zdHJpbmdpZnkoY2hpbGQucHJvcHMuY2hpbGRyZW4ucHJvcHMuZWxlbWVudC5wcm9wUGF0aCk7XG5cbiAgICBpZiAoc3RyaW5naWZpZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgbWF5YmVDaGlsZCA9IGNoaWxkO1xuICAgIH0gZWxzZSB7XG4gICAgICBjaGlsZHJlbkJ5UGF0aFtzdHJpbmdpZmllZF0gPSBjaGlsZDtcbiAgICB9XG4gIH0pO1xuICBjb25zdCBwcmV2aWV3UHJvcHMgPSBjcmVhdGVQcmV2aWV3UHJvcHMoZWxlbWVudCwgY29tcG9uZW50QmxvY2ssIGNoaWxkcmVuQnlQYXRoLCB1c2VEb2N1bWVudEZpZWxkUmVsYXRpb25zaGlwcygpLCBvbkVsZW1lbnRDaGFuZ2UpO1xuICByZXR1cm4gY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIG51bGwsIGNvcmUuanN4KGNvbXBvbmVudEJsb2NrLmNvbXBvbmVudCwgcHJldmlld1Byb3BzKSwgY29yZS5qc3goXCJzcGFuXCIsIHtcbiAgICBjc3M6IHtcbiAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgIH1cbiAgfSwgbWF5YmVDaGlsZCkpO1xufVxuXG5jb25zdCBMYXlvdXRPcHRpb25zQ29udGV4dCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVDb250ZXh0KFtdKTtcbmNvbnN0IExheW91dE9wdGlvbnNQcm92aWRlciA9IExheW91dE9wdGlvbnNDb250ZXh0LlByb3ZpZGVyOyAvLyBVSSBDb21wb25lbnRzXG5cbmNvbnN0IExheW91dENvbnRhaW5lciA9IF9yZWYgPT4ge1xuICBsZXQge1xuICAgIGF0dHJpYnV0ZXMsXG4gICAgY2hpbGRyZW4sXG4gICAgZWxlbWVudFxuICB9ID0gX3JlZjtcbiAgY29uc3Qge1xuICAgIHNwYWNpbmdcbiAgfSA9IGNvcmUudXNlVGhlbWUoKTtcbiAgY29uc3QgZm9jdXNlZCA9IHNsYXRlUmVhY3QudXNlRm9jdXNlZCgpO1xuICBjb25zdCBzZWxlY3RlZCA9IHNsYXRlUmVhY3QudXNlU2VsZWN0ZWQoKTtcbiAgY29uc3QgZWRpdG9yID0gc2xhdGVSZWFjdC51c2VTbGF0ZVN0YXRpYygpO1xuICBjb25zdCBsYXlvdXQgPSBlbGVtZW50LmxheW91dDtcbiAgY29uc3QgbGF5b3V0T3B0aW9ucyA9IFJlYWN0LnVzZUNvbnRleHQoTGF5b3V0T3B0aW9uc0NvbnRleHQpO1xuICByZXR1cm4gY29yZS5qc3goXCJkaXZcIiwgX2V4dGVuZHMoe1xuICAgIGNzczoge1xuICAgICAgbWFyZ2luQm90dG9tOiBzcGFjaW5nLm1lZGl1bSxcbiAgICAgIG1hcmdpblRvcDogc3BhY2luZy5tZWRpdW0sXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJ1xuICAgIH1cbiAgfSwgYXR0cmlidXRlcyksIGNvcmUuanN4KFwiZGl2XCIsIHtcbiAgICBjc3M6IHtcbiAgICAgIGNvbHVtbkdhcDogc3BhY2luZy5zbWFsbCxcbiAgICAgIGRpc3BsYXk6ICdncmlkJyxcbiAgICAgIGdyaWRUZW1wbGF0ZUNvbHVtbnM6IGxheW91dC5tYXAoeCA9PiBgJHt4fWZyYCkuam9pbignICcpXG4gICAgfVxuICB9LCBjaGlsZHJlbiksIGZvY3VzZWQgJiYgc2VsZWN0ZWQgJiYgY29yZS5qc3godG9vbGJhci5JbmxpbmVEaWFsb2csIHtcbiAgICBpc1JlbGF0aXZlOiB0cnVlXG4gIH0sIGNvcmUuanN4KHRvb2xiYXIuVG9vbGJhckdyb3VwLCBudWxsLCBsYXlvdXRPcHRpb25zLm1hcCgobGF5b3V0T3B0aW9uLCBpKSA9PiBjb3JlLmpzeCh0b29sYmFyLlRvb2xiYXJCdXR0b24sIHtcbiAgICBpc1NlbGVjdGVkOiBsYXlvdXRPcHRpb24udG9TdHJpbmcoKSA9PT0gbGF5b3V0LnRvU3RyaW5nKCksXG4gICAga2V5OiBpLFxuICAgIG9uTW91c2VEb3duOiBldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgcGF0aCA9IHNsYXRlUmVhY3QuUmVhY3RFZGl0b3IuZmluZFBhdGgoZWRpdG9yLCBlbGVtZW50KTtcbiAgICAgIHNsYXRlLlRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIHR5cGU6ICdsYXlvdXQnLFxuICAgICAgICBsYXlvdXQ6IGxheW91dE9wdGlvblxuICAgICAgfSwge1xuICAgICAgICBhdDogcGF0aFxuICAgICAgfSk7XG4gICAgfVxuICB9LCBtYWtlTGF5b3V0SWNvbihsYXlvdXRPcHRpb24pKSksIGNvcmUuanN4KHRvb2xiYXIuVG9vbGJhclNlcGFyYXRvciwgbnVsbCksIGNvcmUuanN4KHRvb2x0aXAuVG9vbHRpcCwge1xuICAgIGNvbnRlbnQ6IFwiUmVtb3ZlXCIsXG4gICAgd2VpZ2h0OiBcInN1YnRsZVwiXG4gIH0sIGF0dHJzID0+IGNvcmUuanN4KHRvb2xiYXIuVG9vbGJhckJ1dHRvbiwgX2V4dGVuZHMoe1xuICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIixcbiAgICBvbk1vdXNlRG93bjogZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IHBhdGggPSBzbGF0ZVJlYWN0LlJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgZWxlbWVudCk7XG4gICAgICBzbGF0ZS5UcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICBhdDogcGF0aFxuICAgICAgfSk7XG4gICAgfVxuICB9LCBhdHRycyksIGNvcmUuanN4KFRyYXNoMkljb24uVHJhc2gySWNvbiwge1xuICAgIHNpemU6IFwic21hbGxcIlxuICB9KSkpKSkpO1xufTtcbmNvbnN0IExheW91dEFyZWEgPSBfcmVmMiA9PiB7XG4gIGxldCB7XG4gICAgYXR0cmlidXRlcyxcbiAgICBjaGlsZHJlblxuICB9ID0gX3JlZjI7XG4gIGNvbnN0IHtcbiAgICBjb2xvcnMsXG4gICAgcmFkaWksXG4gICAgc3BhY2luZ1xuICB9ID0gY29yZS51c2VUaGVtZSgpO1xuICByZXR1cm4gY29yZS5qc3goXCJkaXZcIiwgX2V4dGVuZHMoe1xuICAgIGNzczoge1xuICAgICAgYm9yZGVyOiBgMnB4IGRhc2hlZCAke2NvbG9ycy5ib3JkZXJ9YCxcbiAgICAgIGJvcmRlclJhZGl1czogcmFkaWkuc21hbGwsXG4gICAgICBwYWRkaW5nTGVmdDogc3BhY2luZy5tZWRpdW0sXG4gICAgICBwYWRkaW5nUmlnaHQ6IHNwYWNpbmcubWVkaXVtXG4gICAgfVxuICB9LCBhdHRyaWJ1dGVzKSwgY2hpbGRyZW4pO1xufTtcbmNvbnN0IGluc2VydExheW91dCA9IChlZGl0b3IsIGxheW91dCkgPT4ge1xuICBpbnNlcnROb2Rlc0J1dFJlcGxhY2VJZlNlbGVjdGlvbklzQXRFbXB0eVBhcmFncmFwaE9ySGVhZGluZyhlZGl0b3IsIFt7XG4gICAgdHlwZTogJ2xheW91dCcsXG4gICAgbGF5b3V0LFxuICAgIGNoaWxkcmVuOiBbe1xuICAgICAgdHlwZTogJ2xheW91dC1hcmVhJyxcbiAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgdGV4dDogJydcbiAgICAgICAgfV1cbiAgICAgIH1dXG4gICAgfV1cbiAgfV0pO1xuICBjb25zdCBsYXlvdXRFbnRyeSA9IHNsYXRlLkVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICBtYXRjaDogeCA9PiB4LnR5cGUgPT09ICdsYXlvdXQnXG4gIH0pO1xuXG4gIGlmIChsYXlvdXRFbnRyeSkge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgWy4uLmxheW91dEVudHJ5WzFdLCAwXSk7XG4gIH1cbn07IC8vIFBsdWdpblxuXG5mdW5jdGlvbiB3aXRoTGF5b3V0cyhlZGl0b3IpIHtcbiAgY29uc3Qge1xuICAgIG5vcm1hbGl6ZU5vZGUsXG4gICAgZGVsZXRlQmFja3dhcmRcbiAgfSA9IGVkaXRvcjtcblxuICBlZGl0b3IuZGVsZXRlQmFja3dhcmQgPSB1bml0ID0+IHtcbiAgICBpZiAoZWRpdG9yLnNlbGVjdGlvbiAmJiBzbGF0ZS5SYW5nZS5pc0NvbGxhcHNlZChlZGl0b3Iuc2VsZWN0aW9uKSAmJiAvLyB0aGlzIGlzIGp1c3QgYW4gbGl0dGxlIG9wdGltaXNhdGlvblxuICAgIC8vIHdlJ3JlIG9ubHkgZG9pbmcgdGhpbmdzIGlmIHdlJ3JlIGF0IHRoZSBzdGFydCBvZiBhIGxheW91dCBhcmVhXG4gICAgLy8gYW5kIHRoZSBzdGFydCBvZiBhbnl0aGluZyB3aWxsIGFsd2F5cyBiZSBvZmZzZXQgMFxuICAgIC8vIHNvIHdlJ2xsIGJhaWxvdXQgaWYgd2UncmUgbm90IGF0IG9mZnNldCAwXG4gICAgZWRpdG9yLnNlbGVjdGlvbi5hbmNob3Iub2Zmc2V0ID09PSAwKSB7XG4gICAgICBjb25zdCBbYWJvdmVOb2RlLCBhYm92ZVBhdGhdID0gc2xhdGUuRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgICBtYXRjaDogbm9kZSA9PiBub2RlLnR5cGUgPT09ICdsYXlvdXQtYXJlYSdcbiAgICAgIH0pIHx8IFtlZGl0b3IsIFtdXTtcblxuICAgICAgaWYgKGFib3ZlTm9kZS50eXBlID09PSAnbGF5b3V0LWFyZWEnICYmIHNsYXRlLlBvaW50LmVxdWFscyhzbGF0ZS5FZGl0b3Iuc3RhcnQoZWRpdG9yLCBhYm92ZVBhdGgpLCBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGRlbGV0ZUJhY2t3YXJkKHVuaXQpO1xuICB9O1xuXG4gIGVkaXRvci5ub3JtYWxpemVOb2RlID0gZW50cnkgPT4ge1xuICAgIGNvbnN0IFtub2RlLCBwYXRoXSA9IGVudHJ5O1xuXG4gICAgaWYgKHNsYXRlLkVsZW1lbnQuaXNFbGVtZW50KG5vZGUpICYmIG5vZGUudHlwZSA9PT0gJ2xheW91dCcpIHtcbiAgICAgIGlmIChub2RlLmxheW91dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNsYXRlLlRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoIDwgbm9kZS5sYXlvdXQubGVuZ3RoKSB7XG4gICAgICAgIHNsYXRlLlRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBBcnJheS5mcm9tKHtcbiAgICAgICAgICBsZW5ndGg6IG5vZGUubGF5b3V0Lmxlbmd0aCAtIG5vZGUuY2hpbGRyZW4ubGVuZ3RoXG4gICAgICAgIH0pLm1hcCgoKSA9PiAoe1xuICAgICAgICAgIHR5cGU6ICdsYXlvdXQtYXJlYScsXG4gICAgICAgICAgY2hpbGRyZW46IFtwYXJhZ3JhcGhFbGVtZW50KCldXG4gICAgICAgIH0pKSwge1xuICAgICAgICAgIGF0OiBbLi4ucGF0aCwgbm9kZS5jaGlsZHJlbi5sZW5ndGhdXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA+IG5vZGUubGF5b3V0Lmxlbmd0aCkge1xuICAgICAgICBBcnJheS5mcm9tKHtcbiAgICAgICAgICBsZW5ndGg6IG5vZGUuY2hpbGRyZW4ubGVuZ3RoIC0gbm9kZS5sYXlvdXQubGVuZ3RoXG4gICAgICAgIH0pLm1hcCgoXywgaSkgPT4gaSkucmV2ZXJzZSgpLmZvckVhY2goaSA9PiB7XG4gICAgICAgICAgY29uc3QgbGF5b3V0QXJlYVRvUmVtb3ZlUGF0aCA9IFsuLi5wYXRoLCBpICsgbm9kZS5sYXlvdXQubGVuZ3RoXTtcbiAgICAgICAgICBjb25zdCBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baSArIG5vZGUubGF5b3V0Lmxlbmd0aF07XG4gICAgICAgICAgbW92ZUNoaWxkcmVuKGVkaXRvciwgbGF5b3V0QXJlYVRvUmVtb3ZlUGF0aCwgWy4uLnBhdGgsIG5vZGUubGF5b3V0Lmxlbmd0aCAtIDEsIG5vZGUuY2hpbGRyZW5bbm9kZS5sYXlvdXQubGVuZ3RoIC0gMV0uY2hpbGRyZW4ubGVuZ3RoXSwgbm9kZSA9PiBub2RlLnR5cGUgIT09ICdwYXJhZ3JhcGgnIHx8IHNsYXRlLk5vZGUuc3RyaW5nKGNoaWxkKSAhPT0gJycpO1xuICAgICAgICAgIHNsYXRlLlRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBhdDogbGF5b3V0QXJlYVRvUmVtb3ZlUGF0aFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIG5vcm1hbGl6ZU5vZGUoZW50cnkpO1xuICB9O1xuXG4gIHJldHVybiBlZGl0b3I7XG59IC8vIFV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuZnVuY3Rpb24gbWFrZUxheW91dEljb24ocmF0aW9zKSB7XG4gIGNvbnN0IHNpemUgPSAxNjtcbiAgY29uc3QgZWxlbWVudCA9IGNvcmUuanN4KFwiZGl2XCIsIHtcbiAgICByb2xlOiBcImltZ1wiLFxuICAgIGNzczoge1xuICAgICAgZGlzcGxheTogJ2dyaWQnLFxuICAgICAgZ3JpZFRlbXBsYXRlQ29sdW1uczogcmF0aW9zLm1hcChyID0+IGAke3J9ZnJgKS5qb2luKCcgJyksXG4gICAgICBnYXA6IDIsXG4gICAgICB3aWR0aDogc2l6ZSxcbiAgICAgIGhlaWdodDogc2l6ZVxuICAgIH1cbiAgfSwgcmF0aW9zLm1hcCgoXywgaSkgPT4ge1xuICAgIHJldHVybiBjb3JlLmpzeChcImRpdlwiLCB7XG4gICAgICBrZXk6IGksXG4gICAgICBjc3M6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnY3VycmVudGNvbG9yJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAxXG4gICAgICB9XG4gICAgfSk7XG4gIH0pKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbmNvbnN0IGxheW91dHNJY29uID0gY29yZS5qc3goQ29sdW1uc0ljb24uQ29sdW1uc0ljb24sIHtcbiAgc2l6ZTogXCJzbWFsbFwiXG59KTtcbmNvbnN0IExheW91dHNCdXR0b24gPSBfcmVmMyA9PiB7XG4gIGxldCB7XG4gICAgbGF5b3V0c1xuICB9ID0gX3JlZjM7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgbGF5b3V0czoge1xuICAgICAgaXNTZWxlY3RlZFxuICAgIH1cbiAgfSA9IHVzZVRvb2xiYXJTdGF0ZSgpO1xuICByZXR1cm4gUmVhY3QudXNlTWVtbygoKSA9PiBjb3JlLmpzeCh0b29sdGlwLlRvb2x0aXAsIHtcbiAgICBjb250ZW50OiBcIkxheW91dHNcIixcbiAgICB3ZWlnaHQ6IFwic3VidGxlXCJcbiAgfSwgYXR0cnMgPT4gY29yZS5qc3godG9vbGJhci5Ub29sYmFyQnV0dG9uLCBfZXh0ZW5kcyh7XG4gICAgaXNTZWxlY3RlZDogaXNTZWxlY3RlZCxcbiAgICBvbk1vdXNlRG93bjogZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgaWYgKGlzRWxlbWVudEFjdGl2ZShlZGl0b3IsICdsYXlvdXQnKSkge1xuICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ2xheW91dCdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaW5zZXJ0TGF5b3V0KGVkaXRvciwgbGF5b3V0c1swXSk7XG4gICAgfVxuICB9LCBhdHRycyksIGxheW91dHNJY29uKSksIFtlZGl0b3IsIGlzU2VsZWN0ZWQsIGxheW91dHNdKTtcbn07XG5cbmNvbnN0IF9leGNsdWRlZCQxID0gW1widHlwZVwiXTtcbmNvbnN0IGlzTGlzdFR5cGUgPSB0eXBlID0+IHR5cGUgPT09ICdvcmRlcmVkLWxpc3QnIHx8IHR5cGUgPT09ICd1bm9yZGVyZWQtbGlzdCc7XG5jb25zdCBpc0xpc3ROb2RlID0gbm9kZSA9PiBpc0xpc3RUeXBlKG5vZGUudHlwZSk7XG5jb25zdCB0b2dnbGVMaXN0ID0gKGVkaXRvciwgZm9ybWF0KSA9PiB7XG4gIGNvbnN0IGxpc3RBYm92ZSA9IGdldExpc3RUeXBlQWJvdmUoZWRpdG9yKTtcbiAgY29uc3QgaXNBY3RpdmUgPSBpc0VsZW1lbnRBY3RpdmUoZWRpdG9yLCBmb3JtYXQpICYmIChsaXN0QWJvdmUgPT09ICdub25lJyB8fCBsaXN0QWJvdmUgPT09IGZvcm1hdCk7XG4gIHNsYXRlLkVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgc2xhdGUuVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBpc0xpc3ROb2RlLFxuICAgICAgc3BsaXQ6IHRydWUsXG4gICAgICBtb2RlOiBpc0FjdGl2ZSA/ICdhbGwnIDogJ2xvd2VzdCdcbiAgICB9KTtcblxuICAgIGlmICghaXNBY3RpdmUpIHtcbiAgICAgIHNsYXRlLlRyYW5zZm9ybXMud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICB0eXBlOiBmb3JtYXQsXG4gICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgfSwge1xuICAgICAgICBtYXRjaDogeCA9PiB4LnR5cGUgIT09ICdsaXN0LWl0ZW0tY29udGVudCcgJiYgc2xhdGUuRWRpdG9yLmlzQmxvY2soZWRpdG9yLCB4KVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGdldEFuY2VzdG9yTGlzdChlZGl0b3IpIHtcbiAgaWYgKGVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICBjb25zdCBsaXN0SXRlbSA9IHNsYXRlLkVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBub2RlVHlwZU1hdGNoZXIoJ2xpc3QtaXRlbScpXG4gICAgfSk7XG4gICAgY29uc3QgbGlzdCA9IHNsYXRlLkVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBpc0xpc3ROb2RlXG4gICAgfSk7XG5cbiAgICBpZiAobGlzdEl0ZW0gJiYgbGlzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNJbnNpZGU6IHRydWUsXG4gICAgICAgIGxpc3RJdGVtLFxuICAgICAgICBsaXN0XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaXNJbnNpZGU6IGZhbHNlXG4gIH07XG59XG5cbmZ1bmN0aW9uIHdpdGhMaXN0KGVkaXRvcikge1xuICBjb25zdCB7XG4gICAgaW5zZXJ0QnJlYWssXG4gICAgbm9ybWFsaXplTm9kZSxcbiAgICBkZWxldGVCYWNrd2FyZFxuICB9ID0gZWRpdG9yO1xuXG4gIGVkaXRvci5kZWxldGVCYWNrd2FyZCA9IHVuaXQgPT4ge1xuICAgIGlmIChlZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICBjb25zdCBhbmNlc3Rvckxpc3QgPSBnZXRBbmNlc3Rvckxpc3QoZWRpdG9yKTtcblxuICAgICAgaWYgKGFuY2VzdG9yTGlzdC5pc0luc2lkZSAmJiBzbGF0ZS5SYW5nZS5pc0NvbGxhcHNlZChlZGl0b3Iuc2VsZWN0aW9uKSAmJiBzbGF0ZS5FZGl0b3IuaXNTdGFydChlZGl0b3IsIGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLCBhbmNlc3Rvckxpc3QubGlzdFsxXSkpIHtcbiAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICBtYXRjaDogaXNMaXN0Tm9kZSxcbiAgICAgICAgICBzcGxpdDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGRlbGV0ZUJhY2t3YXJkKHVuaXQpO1xuICB9O1xuXG4gIGVkaXRvci5pbnNlcnRCcmVhayA9ICgpID0+IHtcbiAgICBjb25zdCBbbGlzdEl0ZW1dID0gc2xhdGUuRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAnbGlzdC1pdGVtJyxcbiAgICAgIG1vZGU6ICdsb3dlc3QnXG4gICAgfSk7XG5cbiAgICBpZiAobGlzdEl0ZW0gJiYgc2xhdGUuTm9kZS5zdHJpbmcobGlzdEl0ZW1bMF0pID09PSAnJykge1xuICAgICAgc2xhdGUuVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgbWF0Y2g6IGlzTGlzdE5vZGUsXG4gICAgICAgIHNwbGl0OiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpbnNlcnRCcmVhaygpO1xuICB9O1xuXG4gIGVkaXRvci5ub3JtYWxpemVOb2RlID0gZW50cnkgPT4ge1xuICAgIGNvbnN0IFtub2RlLCBwYXRoXSA9IGVudHJ5O1xuXG4gICAgaWYgKHNsYXRlLkVsZW1lbnQuaXNFbGVtZW50KG5vZGUpIHx8IHNsYXRlLkVkaXRvci5pc0VkaXRvcihub2RlKSkge1xuICAgICAgY29uc3QgaXNFbGVtZW50QmVpbmdOb3JtYWxpemVkQUxpc3QgPSBpc0xpc3ROb2RlKG5vZGUpO1xuXG4gICAgICBmb3IgKGNvbnN0IFtjaGlsZE5vZGUsIGNoaWxkUGF0aF0gb2Ygc2xhdGUuTm9kZS5jaGlsZHJlbihlZGl0b3IsIHBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gY2hpbGRQYXRoW2NoaWxkUGF0aC5sZW5ndGggLSAxXTsgLy8gbWVyZ2Ugc2libGluZyBsaXN0c1xuXG4gICAgICAgIGlmIChpc0xpc3ROb2RlKGNoaWxkTm9kZSkpIHtcbiAgICAgICAgICB2YXIgX25vZGUkY2hpbGRyZW47XG5cbiAgICAgICAgICBpZiAoKChfbm9kZSRjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW5bY2hpbGRQYXRoW2NoaWxkUGF0aC5sZW5ndGggLSAxXSArIDFdKSA9PT0gbnVsbCB8fCBfbm9kZSRjaGlsZHJlbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX25vZGUkY2hpbGRyZW4udHlwZSkgPT09IGNoaWxkTm9kZS50eXBlKSB7XG4gICAgICAgICAgICBjb25zdCBzaWJsaW5nTm9kZVBhdGggPSBzbGF0ZS5QYXRoLm5leHQoY2hpbGRQYXRoKTtcbiAgICAgICAgICAgIG1vdmVDaGlsZHJlbihlZGl0b3IsIHNpYmxpbmdOb2RlUGF0aCwgWy4uLmNoaWxkUGF0aCwgY2hpbGROb2RlLmNoaWxkcmVuLmxlbmd0aF0pO1xuICAgICAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IHNpYmxpbmdOb2RlUGF0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGlzRWxlbWVudEJlaW5nTm9ybWFsaXplZEFMaXN0KSB7XG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c0NoaWxkID0gbm9kZS5jaGlsZHJlbltpbmRleCAtIDFdO1xuXG4gICAgICAgICAgICBpZiAoc2xhdGUuRWxlbWVudC5pc0VsZW1lbnQocHJldmlvdXNDaGlsZCkpIHtcbiAgICAgICAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgYXQ6IGNoaWxkUGF0aCxcbiAgICAgICAgICAgICAgICB0bzogWy4uLnNsYXRlLlBhdGgucHJldmlvdXMoY2hpbGRQYXRoKSwgcHJldmlvdXNDaGlsZC5jaGlsZHJlbi5sZW5ndGggLSAxXVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNsYXRlLlRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgYXQ6IGNoaWxkUGF0aFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChub2RlLnR5cGUgPT09ICdsaXN0LWl0ZW0nICYmIGNoaWxkTm9kZS50eXBlICE9PSAnbGlzdC1pdGVtLWNvbnRlbnQnICYmIGluZGV4ID09PSAwICYmIHNsYXRlLkVkaXRvci5pc0Jsb2NrKGVkaXRvciwgY2hpbGROb2RlKSkge1xuICAgICAgICAgIGlmIChwYXRoW3BhdGgubGVuZ3RoIC0gMV0gIT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzQ2hpbGQgPSBzbGF0ZS5Ob2RlLmdldChlZGl0b3IsIHNsYXRlLlBhdGgucHJldmlvdXMocGF0aCkpO1xuXG4gICAgICAgICAgICBpZiAoc2xhdGUuRWxlbWVudC5pc0VsZW1lbnQocHJldmlvdXNDaGlsZCkpIHtcbiAgICAgICAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgYXQ6IHBhdGgsXG4gICAgICAgICAgICAgICAgdG86IFsuLi5zbGF0ZS5QYXRoLnByZXZpb3VzKHBhdGgpLCBwcmV2aW91c0NoaWxkLmNoaWxkcmVuLmxlbmd0aF1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgYXQ6IGNoaWxkUGF0aFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChub2RlLnR5cGUgPT09ICdsaXN0LWl0ZW0nICYmIGNoaWxkTm9kZS50eXBlID09PSAnbGlzdC1pdGVtLWNvbnRlbnQnICYmIGluZGV4ICE9PSAwKSB7XG4gICAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgYXQ6IGNoaWxkUGF0aFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIG5vcm1hbGl6ZU5vZGUoZW50cnkpO1xuICB9O1xuXG4gIHJldHVybiBlZGl0b3I7XG59XG5jb25zdCBMaXN0QnV0dG9uID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gTGlzdEJ1dHRvbihwcm9wcywgcmVmKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgbGlzdHM6IHtcbiAgICAgIFtwcm9wcy50eXBlID09PSAnb3JkZXJlZC1saXN0JyA/ICdvcmRlcmVkJyA6ICd1bm9yZGVyZWQnXToge1xuICAgICAgICBpc0Rpc2FibGVkLFxuICAgICAgICBpc1NlbGVjdGVkXG4gICAgICB9XG4gICAgfVxuICB9ID0gdXNlVG9vbGJhclN0YXRlKCk7XG4gIHJldHVybiBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICB0eXBlXG4gICAgfSA9IHByb3BzLFxuICAgICAgICAgIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgX2V4Y2x1ZGVkJDEpO1xuXG4gICAgcmV0dXJuIGNvcmUuanN4KHRvb2xiYXIuVG9vbGJhckJ1dHRvbiwgX2V4dGVuZHMoe1xuICAgICAgcmVmOiByZWYsXG4gICAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxuICAgICAgaXNTZWxlY3RlZDogaXNTZWxlY3RlZCxcbiAgICAgIG9uTW91c2VEb3duOiBldmVudCA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRvZ2dsZUxpc3QoZWRpdG9yLCB0eXBlKTtcbiAgICAgIH1cbiAgICB9LCByZXN0UHJvcHMpKTtcbiAgfSwgW3Byb3BzLCByZWYsIGlzRGlzYWJsZWQsIGlzU2VsZWN0ZWQsIGVkaXRvcl0pO1xufSk7XG5mdW5jdGlvbiBuZXN0TGlzdChlZGl0b3IpIHtcbiAgY29uc3QgYmxvY2sgPSBzbGF0ZS5FZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IG4gPT4gc2xhdGUuRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBuKVxuICB9KTtcblxuICBpZiAoIWJsb2NrIHx8IGJsb2NrWzBdLnR5cGUgIT09ICdsaXN0LWl0ZW0tY29udGVudCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBsaXN0SXRlbVBhdGggPSBzbGF0ZS5QYXRoLnBhcmVudChibG9ja1sxXSk7IC8vIHdlJ3JlIHRoZSBmaXJzdCBpdGVtIGluIHRoZSBsaXN0IHRoZXJlZm9yZSB3ZSBjYW4ndCBuZXN0XG5cbiAgaWYgKGxpc3RJdGVtUGF0aFtsaXN0SXRlbVBhdGgubGVuZ3RoIC0gMV0gPT09IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBwcmV2aW91c0xpc3RJdGVtUGF0aCA9IHNsYXRlLlBhdGgucHJldmlvdXMobGlzdEl0ZW1QYXRoKTtcbiAgY29uc3QgcHJldmlvdXNMaXN0SXRlbU5vZGUgPSBzbGF0ZS5Ob2RlLmdldChlZGl0b3IsIHByZXZpb3VzTGlzdEl0ZW1QYXRoKTtcblxuICBpZiAocHJldmlvdXNMaXN0SXRlbU5vZGUuY2hpbGRyZW4ubGVuZ3RoICE9PSAxKSB7XG4gICAgLy8gdGhlcmUncyBhIGxpc3QgbmVzdGVkIGluc2lkZSBvdXIgcHJldmlvdXMgc2libGluZyBsaXN0IGl0ZW0gc28gbW92ZSB0aGVyZVxuICAgIHNsYXRlLlRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgYXQ6IGxpc3RJdGVtUGF0aCxcbiAgICAgIHRvOiBbLi4ucHJldmlvdXNMaXN0SXRlbVBhdGgsIHByZXZpb3VzTGlzdEl0ZW1Ob2RlLmNoaWxkcmVuLmxlbmd0aCAtIDEsIHByZXZpb3VzTGlzdEl0ZW1Ob2RlLmNoaWxkcmVuW3ByZXZpb3VzTGlzdEl0ZW1Ob2RlLmNoaWxkcmVuLmxlbmd0aCAtIDFdLmNoaWxkcmVuLmxlbmd0aF1cbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0IHR5cGUgPSBzbGF0ZS5FZGl0b3IucGFyZW50KGVkaXRvciwgc2xhdGUuUGF0aC5wYXJlbnQoYmxvY2tbMV0pKVswXS50eXBlO1xuICBzbGF0ZS5FZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgdHlwZSxcbiAgICAgIGNoaWxkcmVuOiBbXVxuICAgIH0sIHtcbiAgICAgIGF0OiBsaXN0SXRlbVBhdGhcbiAgICB9KTtcbiAgICBzbGF0ZS5UcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgIHRvOiBbLi4ucHJldmlvdXNMaXN0SXRlbVBhdGgsIHByZXZpb3VzTGlzdEl0ZW1Ob2RlLmNoaWxkcmVuLmxlbmd0aF0sXG4gICAgICBhdDogbGlzdEl0ZW1QYXRoXG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHVubmVzdExpc3QoZWRpdG9yKSB7XG4gIGNvbnN0IGJsb2NrID0gc2xhdGUuRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIG1hdGNoOiBuID0+IHNsYXRlLkVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgfSk7XG5cbiAgaWYgKGJsb2NrICYmIGJsb2NrWzBdLnR5cGUgPT09ICdsaXN0LWl0ZW0tY29udGVudCcpIHtcbiAgICBzbGF0ZS5UcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IGlzTGlzdE5vZGUsXG4gICAgICBzcGxpdDogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5jb25zdCBUb29sYmFyU3RhdGVDb250ZXh0ID0gLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVDb250ZXh0KG51bGwpO1xuZnVuY3Rpb24gdXNlVG9vbGJhclN0YXRlKCkge1xuICBjb25zdCB0b29sYmFyU3RhdGUgPSBSZWFjdC51c2VDb250ZXh0KFRvb2xiYXJTdGF0ZUNvbnRleHQpO1xuXG4gIGlmICghdG9vbGJhclN0YXRlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUb29sYmFyU3RhdGVQcm92aWRlciBtdXN0IGJlIHVzZWQgdG8gdXNlIHVzZVRvb2xiYXJTdGF0ZScpO1xuICB9XG5cbiAgcmV0dXJuIHRvb2xiYXJTdGF0ZTtcbn1cbmZ1bmN0aW9uIGdldEFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMoZWRpdG9yLCBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MpIHtcbiAgY29uc3QgYW5jZXN0b3JDb21wb25lbnRQcm9wID0gc2xhdGUuRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIG1hdGNoOiBub2RlVHlwZU1hdGNoZXIoJ2NvbXBvbmVudC1ibG9jay1wcm9wJywgJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcpXG4gIH0pO1xuXG4gIGlmIChhbmNlc3RvckNvbXBvbmVudFByb3ApIHtcbiAgICBjb25zdCBwcm9wUGF0aCA9IGFuY2VzdG9yQ29tcG9uZW50UHJvcFswXS5wcm9wUGF0aDtcbiAgICBjb25zdCBhbmNlc3RvckNvbXBvbmVudCA9IHNsYXRlLkVkaXRvci5wYXJlbnQoZWRpdG9yLCBhbmNlc3RvckNvbXBvbmVudFByb3BbMV0pO1xuXG4gICAgaWYgKGFuY2VzdG9yQ29tcG9uZW50WzBdLnR5cGUgPT09ICdjb21wb25lbnQtYmxvY2snKSB7XG4gICAgICBjb25zdCBjb21wb25lbnQgPSBhbmNlc3RvckNvbXBvbmVudFswXS5jb21wb25lbnQ7XG4gICAgICBjb25zdCBjb21wb25lbnRCbG9jayA9IGNvbXBvbmVudEJsb2Nrc1tjb21wb25lbnRdO1xuXG4gICAgICBpZiAoY29tcG9uZW50QmxvY2sgJiYgcHJvcFBhdGgpIHtcbiAgICAgICAgdmFyIF9nZXRDaGlsZEZpZWxkQXRQcm9wUDtcblxuICAgICAgICBjb25zdCBvcHRpb25zID0gKF9nZXRDaGlsZEZpZWxkQXRQcm9wUCA9IGdldENoaWxkRmllbGRBdFByb3BQYXRoKHByb3BQYXRoLCBhbmNlc3RvckNvbXBvbmVudFswXS5wcm9wcywgY29tcG9uZW50QmxvY2sucHJvcHMpKSA9PT0gbnVsbCB8fCBfZ2V0Q2hpbGRGaWVsZEF0UHJvcFAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nZXRDaGlsZEZpZWxkQXRQcm9wUC5vcHRpb25zO1xuXG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgcmV0dXJuIGdldERvY3VtZW50RmVhdHVyZXNGb3JDaGlsZEZpZWxkKGVkaXRvckRvY3VtZW50RmVhdHVyZXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5jb25zdCBjcmVhdGVUb29sYmFyU3RhdGUgPSAoZWRpdG9yLCBjb21wb25lbnRCbG9ja3MsIGVkaXRvckRvY3VtZW50RmVhdHVyZXMpID0+IHtcbiAgY29uc3QgbG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzID0gZ2V0QW5jZXN0b3JDb21wb25lbnRDaGlsZEZpZWxkRG9jdW1lbnRGZWF0dXJlcyhlZGl0b3IsIGVkaXRvckRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2NrcykgfHwge1xuICAgIGtpbmQ6ICdibG9jaycsXG4gICAgaW5saW5lTWFya3M6ICdpbmhlcml0JyxcbiAgICBkb2N1bWVudEZlYXR1cmVzOiB7XG4gICAgICBkaXZpZGVyczogdHJ1ZSxcbiAgICAgIGZvcm1hdHRpbmc6IHtcbiAgICAgICAgYWxpZ25tZW50OiB7XG4gICAgICAgICAgY2VudGVyOiB0cnVlLFxuICAgICAgICAgIGVuZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBibG9ja1R5cGVzOiB7XG4gICAgICAgICAgYmxvY2txdW90ZTogdHJ1ZSxcbiAgICAgICAgICBjb2RlOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWRpbmdMZXZlbHM6IFsxLCAyLCAzLCA0LCA1LCA2XSxcbiAgICAgICAgbGlzdFR5cGVzOiB7XG4gICAgICAgICAgb3JkZXJlZDogdHJ1ZSxcbiAgICAgICAgICB1bm9yZGVyZWQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGxheW91dHM6IGVkaXRvckRvY3VtZW50RmVhdHVyZXMubGF5b3V0cyxcbiAgICAgIGxpbmtzOiB0cnVlLFxuICAgICAgcmVsYXRpb25zaGlwczogdHJ1ZVxuICAgIH0sXG4gICAgc29mdEJyZWFrczogdHJ1ZVxuICB9O1xuICBsZXQgW21heWJlQ29kZUJsb2NrRW50cnldID0gc2xhdGUuRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSAhPT0gJ2NvZGUnICYmIHNsYXRlLkVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbm9kZSlcbiAgfSk7XG4gIGNvbnN0IGVkaXRvck1hcmtzID0gc2xhdGUuRWRpdG9yLm1hcmtzKGVkaXRvcikgfHwge307XG4gIGNvbnN0IG1hcmtzID0gT2JqZWN0LmZyb21FbnRyaWVzKGFsbE1hcmtzLm1hcChtYXJrID0+IFttYXJrLCB7XG4gICAgaXNEaXNhYmxlZDogbG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmlubGluZU1hcmtzICE9PSAnaW5oZXJpdCcgJiYgIWxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5pbmxpbmVNYXJrc1ttYXJrXSB8fCAhbWF5YmVDb2RlQmxvY2tFbnRyeSxcbiAgICBpc1NlbGVjdGVkOiAhIWVkaXRvck1hcmtzW21hcmtdXG4gIH1dKSk7IC8vIEVkaXRvci5tYXJrcyBpcyBcIndoYXQgYXJlIHRoZSBtYXJrcyB0aGF0IHdvdWxkIGJlIGFwcGxpZWQgaWYgdGV4dCB3YXMgaW5zZXJ0ZWQgbm93XCJcbiAgLy8gdGhhdCdzIG5vdCByZWFsbHkgdGhlIFVYIHdlIHdhbnQsIGlmIHdlIGhhdmUgc29tZSBhIGRvY3VtZW50IGxpa2UgdGhpc1xuICAvLyA8cGFyYWdyYXBoPlxuICAvLyAgIDx0ZXh0PlxuICAvLyAgICAgPGFuY2hvciAvPlxuICAvLyAgICAgY29udGVudFxuICAvLyAgIDwvdGV4dD5cbiAgLy8gICA8dGV4dCBib2xkPmJvbGQ8L3RleHQ+XG4gIC8vICAgPHRleHQ+XG4gIC8vICAgICBjb250ZW50XG4gIC8vICAgICA8Zm9jdXMgLz5cbiAgLy8gICA8L3RleHQ+XG4gIC8vIDwvcGFyYWdyYXBoPlxuICAvLyB3ZSB3YW50IGJvbGQgdG8gYmUgc2hvd24gYXMgc2VsZWN0ZWQgZXZlbiB0aG91Z2ggaWYgeW91IGluc2VydGVkIHRleHQgZnJvbSB0aGF0IHNlbGVjdGlvbiwgaXQgd291bGRuJ3QgYmUgYm9sZFxuICAvLyBzbyB3ZSBsb29rIGF0IGFsbCB0aGUgdGV4dCBub2RlcyBpbiB0aGUgc2VsZWN0aW9uIHRvIGdldCB0aGVpciBtYXJrc1xuICAvLyBidXQgb25seSBpZiB0aGUgc2VsZWN0aW9uIGlzIGV4cGFuZGVkIGJlY2F1c2UgaWYgeW91J3JlIGluIHRoZSBtaWRkbGUgb2Ygc29tZSB0ZXh0XG4gIC8vIHdpdGggeW91ciBzZWxlY3Rpb24gY29sbGFwc2VkIHdpdGggYSBtYXJrIGJ1dCB5b3UndmUgcmVtb3ZlZCBpdChpLmUuIGVkaXRvci5yZW1vdmVNYXJrKVxuICAvLyB0aGUgdGV4dCBub2RlcyB5b3UncmUgaW4gd2lsbCBoYXZlIHRoZSBtYXJrIGJ1dCB0aGUgdWkgc2hvdWxkIHNob3cgdGhlIG1hcmsgYXMgbm90IGJlaW5nIHNlbGVjdGVkXG5cbiAgaWYgKGVkaXRvci5zZWxlY3Rpb24gJiYgc2xhdGUuUmFuZ2UuaXNFeHBhbmRlZChlZGl0b3Iuc2VsZWN0aW9uKSkge1xuICAgIGZvciAoY29uc3Qgbm9kZSBvZiBzbGF0ZS5FZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgICBtYXRjaDogc2xhdGUuVGV4dC5pc1RleHRcbiAgICB9KSkge1xuICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMobm9kZVswXSkpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ2luc2VydE1lbnUnIHx8IGtleSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoa2V5IGluIG1hcmtzKSB7XG4gICAgICAgICAgbWFya3Nba2V5XS5pc1NlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGxldCBbaGVhZGluZ0VudHJ5XSA9IHNsYXRlLkVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICBtYXRjaDogbm9kZVR5cGVNYXRjaGVyKCdoZWFkaW5nJylcbiAgfSk7XG4gIGxldCBbbGlzdEVudHJ5XSA9IHNsYXRlLkVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICBtYXRjaDogaXNMaXN0Tm9kZVxuICB9KTtcbiAgbGV0IFthbGlnbmFibGVFbnRyeV0gPSBzbGF0ZS5FZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IG5vZGVUeXBlTWF0Y2hlcigncGFyYWdyYXBoJywgJ2hlYWRpbmcnKVxuICB9KTsgLy8gKHdlJ3JlIGdvbm5hIHVzZSBtYXJrZG93biBoZXJlIGJlY2F1c2UgdGhlIGVxdWl2ZWxhbnQgc2xhdGUgc3RydWN0dXJlIGlzIHF1aXRlIGxhcmdlIGFuZCBkb2Vzbid0IGFkZCB2YWx1ZSBoZXJlKVxuICAvLyBsZXQncyBpbWFnaW5lIGEgZG9jdW1lbnQgdGhhdCBsb29rcyBsaWtlIHRoaXM6XG4gIC8vIC0gdGhpbmdcbiAgLy8gICAxLiBzb21ldGhpbmc8Y3Vyc29yIC8+XG4gIC8vIGluIHRoZSB0b29sYmFyLCB5b3UgZG9uJ3Qgd2FudCB0byBzZWUgdGhhdCBib3RoIG9yZGVyZWQgYW5kIHVub3JkZXJlZCBsaXN0cyBhcmUgc2VsZWN0ZWRcbiAgLy8geW91IHdhbnQgdG8gc2VlIG9ubHkgb3JkZXJlZCBsaXN0IHNlbGVjdGVkLCBiZWNhdXNlXG4gIC8vIC0geW91IHdhbnQgdG8ga25vdyB3aGF0IGxpc3QgeW91J3JlIGFjdHVhbGx5IGluLCB5b3UgZG9uJ3QgcmVhbGx5IGNhcmUgYWJvdXQgdGhlIG91dGVyIGxpc3RcbiAgLy8gLSB3aGVuIHlvdSB3YW50IHRvIGNoYW5nZSB0aGUgbGlzdCB0byBhIHVub3JkZXJlZCBsaXN0LCB0aGUgdW5vcmRlcmVkIGxpc3QgYnV0dG9uIHNob3VsZCBiZSBpbmFjdGl2ZSB0byBzaG93IHlvdSBjYW4gY2hhbmdlIHRvIGl0XG5cbiAgY29uc3QgbGlzdFR5cGVBYm92ZSA9IGdldExpc3RUeXBlQWJvdmUoZWRpdG9yKTtcbiAgcmV0dXJuIHtcbiAgICBtYXJrcyxcbiAgICB0ZXh0U3R5bGVzOiB7XG4gICAgICBzZWxlY3RlZDogaGVhZGluZ0VudHJ5ID8gaGVhZGluZ0VudHJ5WzBdLmxldmVsIDogJ25vcm1hbCcsXG4gICAgICBhbGxvd2VkSGVhZGluZ0xldmVsczogbG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmtpbmQgPT09ICdibG9jaycgJiYgIWxpc3RFbnRyeSA/IGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5kb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaGVhZGluZ0xldmVscyA6IFtdXG4gICAgfSxcbiAgICByZWxhdGlvbnNoaXBzOiB7XG4gICAgICBpc0Rpc2FibGVkOiAhbG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmRvY3VtZW50RmVhdHVyZXMucmVsYXRpb25zaGlwc1xuICAgIH0sXG4gICAgY29kZToge1xuICAgICAgaXNTZWxlY3RlZDogaXNFbGVtZW50QWN0aXZlKGVkaXRvciwgJ2NvZGUnKSxcbiAgICAgIGlzRGlzYWJsZWQ6ICEobG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmtpbmQgPT09ICdibG9jaycgJiYgbG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5ibG9ja1R5cGVzLmNvZGUpXG4gICAgfSxcbiAgICBsaXN0czoge1xuICAgICAgb3JkZXJlZDoge1xuICAgICAgICBpc1NlbGVjdGVkOiBpc0VsZW1lbnRBY3RpdmUoZWRpdG9yLCAnb3JkZXJlZC1saXN0JykgJiYgKGxpc3RUeXBlQWJvdmUgPT09ICdub25lJyB8fCBsaXN0VHlwZUFib3ZlID09PSAnb3JkZXJlZC1saXN0JyksXG4gICAgICAgIGlzRGlzYWJsZWQ6ICEobG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmtpbmQgPT09ICdibG9jaycgJiYgbG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5saXN0VHlwZXMub3JkZXJlZCAmJiAhaGVhZGluZ0VudHJ5KVxuICAgICAgfSxcbiAgICAgIHVub3JkZXJlZDoge1xuICAgICAgICBpc1NlbGVjdGVkOiBpc0VsZW1lbnRBY3RpdmUoZWRpdG9yLCAndW5vcmRlcmVkLWxpc3QnKSAmJiAobGlzdFR5cGVBYm92ZSA9PT0gJ25vbmUnIHx8IGxpc3RUeXBlQWJvdmUgPT09ICd1bm9yZGVyZWQtbGlzdCcpLFxuICAgICAgICBpc0Rpc2FibGVkOiAhKGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5raW5kID09PSAnYmxvY2snICYmIGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5kb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcubGlzdFR5cGVzLnVub3JkZXJlZCAmJiAhaGVhZGluZ0VudHJ5KVxuICAgICAgfVxuICAgIH0sXG4gICAgYWxpZ25tZW50OiB7XG4gICAgICBpc0Rpc2FibGVkOiAhYWxpZ25hYmxlRW50cnkgJiYgIShsb2NhdGlvbkRvY3VtZW50RmVhdHVyZXMua2luZCA9PT0gJ2Jsb2NrJyAmJiBsb2NhdGlvbkRvY3VtZW50RmVhdHVyZXMuZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmFsaWdubWVudCksXG4gICAgICBzZWxlY3RlZDogKGFsaWduYWJsZUVudHJ5ID09PSBudWxsIHx8IGFsaWduYWJsZUVudHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhbGlnbmFibGVFbnRyeVswXS50ZXh0QWxpZ24pIHx8ICdzdGFydCdcbiAgICB9LFxuICAgIGJsb2NrcXVvdGU6IHtcbiAgICAgIGlzRGlzYWJsZWQ6ICEobG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmtpbmQgPT09ICdibG9jaycgJiYgbG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5ibG9ja1R5cGVzLmJsb2NrcXVvdGUpLFxuICAgICAgaXNTZWxlY3RlZDogaXNFbGVtZW50QWN0aXZlKGVkaXRvciwgJ2Jsb2NrcXVvdGUnKVxuICAgIH0sXG4gICAgbGF5b3V0czoge1xuICAgICAgaXNTZWxlY3RlZDogaXNFbGVtZW50QWN0aXZlKGVkaXRvciwgJ2xheW91dCcpXG4gICAgfSxcbiAgICBsaW5rczoge1xuICAgICAgaXNEaXNhYmxlZDogIWVkaXRvci5zZWxlY3Rpb24gfHwgc2xhdGUuUmFuZ2UuaXNDb2xsYXBzZWQoZWRpdG9yLnNlbGVjdGlvbikgfHwgIWxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5kb2N1bWVudEZlYXR1cmVzLmxpbmtzLFxuICAgICAgaXNTZWxlY3RlZDogaXNFbGVtZW50QWN0aXZlKGVkaXRvciwgJ2xpbmsnKVxuICAgIH0sXG4gICAgZWRpdG9yLFxuICAgIGRpdmlkZXJzOiB7XG4gICAgICBpc0Rpc2FibGVkOiBsb2NhdGlvbkRvY3VtZW50RmVhdHVyZXMua2luZCA9PT0gJ2lubGluZScgfHwgIWxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5kb2N1bWVudEZlYXR1cmVzLmRpdmlkZXJzXG4gICAgfSxcbiAgICBjbGVhckZvcm1hdHRpbmc6IHtcbiAgICAgIGlzRGlzYWJsZWQ6ICEoT2JqZWN0LnZhbHVlcyhtYXJrcykuc29tZSh4ID0+IHguaXNTZWxlY3RlZCkgfHwgISFoYXNCbG9ja1RoYXRDbGVhcnNPbkNsZWFyRm9ybWF0dGluZyhlZGl0b3IpKVxuICAgIH0sXG4gICAgZWRpdG9yRG9jdW1lbnRGZWF0dXJlc1xuICB9O1xufTtcblxuZnVuY3Rpb24gaGFzQmxvY2tUaGF0Q2xlYXJzT25DbGVhckZvcm1hdHRpbmcoZWRpdG9yKSB7XG4gIGNvbnN0IFtub2RlXSA9IHNsYXRlLkVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICBtYXRjaDogbm9kZSA9PiBub2RlLnR5cGUgPT09ICdoZWFkaW5nJyB8fCBub2RlLnR5cGUgPT09ICdjb2RlJyB8fCBub2RlLnR5cGUgPT09ICdibG9ja3F1b3RlJ1xuICB9KTtcbiAgcmV0dXJuICEhbm9kZTtcbn1cblxuZnVuY3Rpb24gZ2V0TGlzdFR5cGVBYm92ZShlZGl0b3IpIHtcbiAgY29uc3QgbGlzdEFib3ZlID0gc2xhdGUuRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIG1hdGNoOiBpc0xpc3ROb2RlXG4gIH0pO1xuXG4gIGlmICghbGlzdEFib3ZlKSB7XG4gICAgcmV0dXJuICdub25lJztcbiAgfVxuXG4gIHJldHVybiBsaXN0QWJvdmVbMF0udHlwZTtcbn1cbmNvbnN0IFRvb2xiYXJTdGF0ZVByb3ZpZGVyID0gX3JlZiA9PiB7XG4gIGxldCB7XG4gICAgY2hpbGRyZW4sXG4gICAgY29tcG9uZW50QmxvY2tzLFxuICAgIGVkaXRvckRvY3VtZW50RmVhdHVyZXMsXG4gICAgcmVsYXRpb25zaGlwc1xuICB9ID0gX3JlZjtcbiAgY29uc3QgZWRpdG9yID0gc2xhdGVSZWFjdC51c2VTbGF0ZSgpO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KERvY3VtZW50RmllbGRSZWxhdGlvbnNoaXBzUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogcmVsYXRpb25zaGlwc1xuICB9LCAvKiNfX1BVUkVfXyovUmVhY3RfX2RlZmF1bHRbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoTGF5b3V0T3B0aW9uc1Byb3ZpZGVyLCB7XG4gICAgdmFsdWU6IGVkaXRvckRvY3VtZW50RmVhdHVyZXMubGF5b3V0c1xuICB9LCAvKiNfX1BVUkVfXyovUmVhY3RfX2RlZmF1bHRbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50QmxvY2tDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IGNvbXBvbmVudEJsb2Nrc1xuICB9LCAvKiNfX1BVUkVfXyovUmVhY3RfX2RlZmF1bHRbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoVG9vbGJhclN0YXRlQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBjcmVhdGVUb29sYmFyU3RhdGUoZWRpdG9yLCBjb21wb25lbnRCbG9ja3MsIGVkaXRvckRvY3VtZW50RmVhdHVyZXMpXG4gIH0sIGNoaWxkcmVuKSkpKTtcbn07XG5cbmNvbnN0IGlzTGlua0FjdGl2ZSA9IGVkaXRvciA9PiB7XG4gIHJldHVybiBpc0VsZW1lbnRBY3RpdmUoZWRpdG9yLCAnbGluaycpO1xufTtcblxuY29uc3Qgd3JhcExpbmsgPSAoZWRpdG9yLCB1cmwpID0+IHtcbiAgaWYgKGlzTGlua0FjdGl2ZShlZGl0b3IpKSB7XG4gICAgc2xhdGUuVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBuID0+IG4udHlwZSA9PT0gJ2xpbmsnXG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qge1xuICAgIHNlbGVjdGlvblxuICB9ID0gZWRpdG9yO1xuICBjb25zdCBpc0NvbGxhcHNlZCA9IHNlbGVjdGlvbiAmJiBzbGF0ZS5SYW5nZS5pc0NvbGxhcHNlZChzZWxlY3Rpb24pO1xuXG4gIGlmIChpc0NvbGxhcHNlZCkge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICB0eXBlOiAnbGluaycsXG4gICAgICBocmVmOiB1cmwsXG4gICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgdGV4dDogdXJsXG4gICAgICB9XVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgdHlwZTogJ2xpbmsnLFxuICAgICAgaHJlZjogdXJsLFxuICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgIHRleHQ6ICcnXG4gICAgICB9XVxuICAgIH0sIHtcbiAgICAgIHNwbGl0OiB0cnVlXG4gICAgfSk7XG4gIH1cbn07XG5jb25zdCBMaW5rRWxlbWVudCA9IF9yZWYgPT4ge1xuICBsZXQge1xuICAgIGF0dHJpYnV0ZXMsXG4gICAgY2hpbGRyZW4sXG4gICAgZWxlbWVudDogX19lbGVtZW50Rm9yR2V0dGluZ1BhdGhcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHtcbiAgICB0eXBvZ3JhcGh5XG4gIH0gPSBjb3JlLnVzZVRoZW1lKCk7XG4gIGNvbnN0IGVkaXRvciA9IHNsYXRlUmVhY3QudXNlU2xhdGVTdGF0aWMoKTtcbiAgY29uc3QgW2N1cnJlbnRFbGVtZW50LCBzZXROb2RlXSA9IHVzZUVsZW1lbnRXaXRoU2V0Tm9kZXMoZWRpdG9yLCBfX2VsZW1lbnRGb3JHZXR0aW5nUGF0aCk7XG4gIGNvbnN0IGhyZWYgPSBjdXJyZW50RWxlbWVudC5ocmVmO1xuICBjb25zdCBzZWxlY3RlZCA9IHNsYXRlUmVhY3QudXNlU2VsZWN0ZWQoKTtcbiAgY29uc3QgZm9jdXNlZCA9IHNsYXRlUmVhY3QudXNlRm9jdXNlZCgpO1xuICBjb25zdCBbZm9jdXNlZEluSW5saW5lRGlhbG9nLCBzZXRGb2N1c2VkSW5JbmxpbmVEaWFsb2ddID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpOyAvLyB3ZSB3YW50IHRvIHNob3cgdGhlIGxpbmsgZGlhbG9nIHdoZW4gdGhlIGVkaXRvciBpcyBmb2N1c2VkIGFuZCB0aGUgbGluayBlbGVtZW50IGlzIHNlbGVjdGVkXG4gIC8vIG9yIHdoZW4gdGhlIGlucHV0IGluc2lkZSB0aGUgZGlhbG9nIGlzIGZvY3VzZWQgc28geW91IHdvdWxkIHRoaW5rIHRoYXQgd291bGQgbG9vayBsaWtlIHRoaXM6XG4gIC8vIChzZWxlY3RlZCAmJiBmb2N1c2VkKSB8fCBmb2N1c2VkSW5JbmxpbmVEaWFsb2dcbiAgLy8gdGhpcyBkb2Vzbid0IHdvcmsgdGhvdWdoIGJlY2F1c2UgdGhlIGJsdXIgd2lsbCBoYXBwZW4gYmVmb3JlIHRoZSBmb2N1cyBpcyBpbnNpZGUgdGhlIGlubGluZSBkaWFsb2dcbiAgLy8gc28gdGhpcyBjb21wb25lbnQgd291bGQgYmUgcmVuZGVyZWQgYW5kIGZvY3VzZWQgd291bGQgYmUgZmFsc2Ugc28gdGhlIGlucHV0IHdvdWxkIGJlIHJlbW92ZWQgc28gaXQgY291bGRuJ3QgYmUgZm9jdXNlZFxuICAvLyB0byBmaXggdGhpcywgd2UgZGVsYXkgb3VyIHJlYWRpbmcgb2YgdGhlIHVwZGF0ZWQgYGZvY3VzZWRgIHZhbHVlIHNvIHRoYXQgd2UnbGwgc3RpbGwgcmVuZGVyIHRoZSBkaWFsb2dcbiAgLy8gaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIGVkaXRvciBpcyBibHVycmVkIGJ1dCBiZWZvcmUgdGhlIGlucHV0IGhhcyBiZWVuIGZvY3VzZWRcblxuICBjb25zdCBbZGVsYXllZEZvY3VzZWQsIHNldERlbGF5ZWRGb2N1c2VkXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2V0RGVsYXllZEZvY3VzZWQoZm9jdXNlZCk7XG4gICAgfSwgMCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgfTtcbiAgfSwgW2ZvY3VzZWRdKTtcbiAgY29uc3QgW2xvY2FsRm9yY2VWYWxpZGF0aW9uLCBzZXRMb2NhbEZvcmNlVmFsaWRhdGlvbl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHtcbiAgICBkaWFsb2csXG4gICAgdHJpZ2dlclxuICB9ID0gcG9wb3Zlci51c2VDb250cm9sbGVkUG9wb3Zlcih7XG4gICAgaXNPcGVuOiBzZWxlY3RlZCAmJiBmb2N1c2VkIHx8IGZvY3VzZWRJbklubGluZURpYWxvZyxcbiAgICBvbkNsb3NlOiAoKSA9PiB7fVxuICB9LCB7XG4gICAgcGxhY2VtZW50OiAnYm90dG9tLXN0YXJ0JyxcbiAgICBtb2RpZmllcnM6IFt7XG4gICAgICBuYW1lOiAnb2Zmc2V0JyxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgb2Zmc2V0OiBbMCwgOF1cbiAgICAgIH1cbiAgICB9XVxuICB9KTtcbiAgY29uc3QgdW5saW5rID0gdXNlRXZlbnRDYWxsYmFjaygoKSA9PiB7XG4gICAgc2xhdGUuVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgIGF0OiBzbGF0ZVJlYWN0LlJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgX19lbGVtZW50Rm9yR2V0dGluZ1BhdGgpXG4gICAgfSk7XG4gIH0pO1xuICBjb25zdCBmb3JjZVZhbGlkYXRpb24gPSB1c2VGb3JjZVZhbGlkYXRpb24oKTtcbiAgY29uc3Qgc2hvd0ludmFsaWRTdGF0ZSA9IGFwaS5pc1ZhbGlkVVJMKGhyZWYpID8gZmFsc2UgOiBmb3JjZVZhbGlkYXRpb24gfHwgbG9jYWxGb3JjZVZhbGlkYXRpb247XG4gIHJldHVybiBjb3JlLmpzeChcInNwYW5cIiwgX2V4dGVuZHMoe30sIGF0dHJpYnV0ZXMsIHtcbiAgICBjc3M6IHtcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaydcbiAgICB9XG4gIH0pLCBjb3JlLmpzeChcImFcIiwgX2V4dGVuZHMoe30sIHRyaWdnZXIucHJvcHMsIHtcbiAgICBjc3M6IHtcbiAgICAgIGNvbG9yOiBzaG93SW52YWxpZFN0YXRlID8gJ3JlZCcgOiB1bmRlZmluZWRcbiAgICB9LFxuICAgIHJlZjogdHJpZ2dlci5yZWYsXG4gICAgaHJlZjogaHJlZlxuICB9KSwgY2hpbGRyZW4pLCAoc2VsZWN0ZWQgJiYgZGVsYXllZEZvY3VzZWQgfHwgZm9jdXNlZEluSW5saW5lRGlhbG9nKSAmJiBjb3JlLmpzeChjb3JlLlBvcnRhbCwgbnVsbCwgY29yZS5qc3godG9vbGJhci5JbmxpbmVEaWFsb2csIF9leHRlbmRzKHt9LCBkaWFsb2cucHJvcHMsIHtcbiAgICByZWY6IGRpYWxvZy5yZWYsXG4gICAgb25Gb2N1czogKCkgPT4ge1xuICAgICAgc2V0Rm9jdXNlZEluSW5saW5lRGlhbG9nKHRydWUpO1xuICAgIH0sXG4gICAgb25CbHVyOiAoKSA9PiB7XG4gICAgICBzZXRGb2N1c2VkSW5JbmxpbmVEaWFsb2coZmFsc2UpO1xuICAgICAgc2V0TG9jYWxGb3JjZVZhbGlkYXRpb24odHJ1ZSk7XG4gICAgfVxuICB9KSwgY29yZS5qc3goXCJkaXZcIiwge1xuICAgIGNzczoge1xuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbidcbiAgICB9XG4gIH0sIGNvcmUuanN4KHRvb2xiYXIuVG9vbGJhckdyb3VwLCBudWxsLCBjb3JlLmpzeChcImlucHV0XCIsIHtcbiAgICBjc3M6IHtcbiAgICAgIGZvbnRTaXplOiB0eXBvZ3JhcGh5LmZvbnRTaXplLnNtYWxsLFxuICAgICAgd2lkdGg6IDI0MFxuICAgIH0sXG4gICAgdmFsdWU6IGhyZWYsXG4gICAgb25DaGFuZ2U6IGV2ZW50ID0+IHtcbiAgICAgIHNldE5vZGUoe1xuICAgICAgICBocmVmOiBldmVudC50YXJnZXQudmFsdWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSksIGNvcmUuanN4KHRvb2x0aXAuVG9vbHRpcCwge1xuICAgIGNvbnRlbnQ6IFwiT3BlbiBsaW5rIGluIG5ldyB0YWJcIixcbiAgICB3ZWlnaHQ6IFwic3VidGxlXCJcbiAgfSwgYXR0cnMgPT4gY29yZS5qc3godG9vbGJhci5Ub29sYmFyQnV0dG9uLCBfZXh0ZW5kcyh7XG4gICAgYXM6IFwiYVwiLFxuICAgIG9uTW91c2VEb3duOiBldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sXG4gICAgaHJlZjogaHJlZixcbiAgICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gICAgcmVsOiBcIm5vcmVmZXJyZXJcIixcbiAgICB2YXJpYW50OiBcImFjdGlvblwiXG4gIH0sIGF0dHJzKSwgZXh0ZXJuYWxMaW5rSWNvbikpLCBzZXBhcmF0b3IsIGNvcmUuanN4KFVubGlua0J1dHRvbiwge1xuICAgIG9uVW5saW5rOiB1bmxpbmtcbiAgfSkpLCBzaG93SW52YWxpZFN0YXRlICYmIGNvcmUuanN4KFwic3BhblwiLCB7XG4gICAgY3NzOiB7XG4gICAgICBjb2xvcjogJ3JlZCdcbiAgICB9XG4gIH0sIFwiUGxlYXNlIGVudGVyIGEgdmFsaWQgVVJMXCIpKSkpKTtcbn07XG5jb25zdCBzZXBhcmF0b3IgPSBjb3JlLmpzeCh0b29sYmFyLlRvb2xiYXJTZXBhcmF0b3IsIG51bGwpO1xuY29uc3QgZXh0ZXJuYWxMaW5rSWNvbiA9IGNvcmUuanN4KEV4dGVybmFsTGlua0ljb24uRXh0ZXJuYWxMaW5rSWNvbiwge1xuICBzaXplOiBcInNtYWxsXCJcbn0pO1xuY29uc3QgVW5saW5rQnV0dG9uID0gLyojX19QVVJFX18qL1JlYWN0Lm1lbW8oZnVuY3Rpb24gVW5saW5rQnV0dG9uKF9yZWYyKSB7XG4gIGxldCB7XG4gICAgb25VbmxpbmtcbiAgfSA9IF9yZWYyO1xuICByZXR1cm4gY29yZS5qc3godG9vbHRpcC5Ub29sdGlwLCB7XG4gICAgY29udGVudDogXCJVbmxpbmtcIixcbiAgICB3ZWlnaHQ6IFwic3VidGxlXCJcbiAgfSwgYXR0cnMgPT4gY29yZS5qc3godG9vbGJhci5Ub29sYmFyQnV0dG9uLCBfZXh0ZW5kcyh7XG4gICAgdmFyaWFudDogXCJkZXN0cnVjdGl2ZVwiLFxuICAgIG9uTW91c2VEb3duOiBldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgb25VbmxpbmsoKTtcbiAgICB9XG4gIH0sIGF0dHJzKSwgY29yZS5qc3goVHJhc2gySWNvbi5UcmFzaDJJY29uLCB7XG4gICAgc2l6ZTogXCJzbWFsbFwiXG4gIH0pKSk7XG59KTtcbmxldCBsaW5rSWNvbiA9IGNvcmUuanN4KExpbmtJY29uLkxpbmtJY29uLCB7XG4gIHNpemU6IFwic21hbGxcIlxufSk7XG5jb25zdCBMaW5rQnV0dG9uID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gTGlua0J1dHRvbihwcm9wcywgcmVmKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgbGlua3M6IHtcbiAgICAgIGlzRGlzYWJsZWQsXG4gICAgICBpc1NlbGVjdGVkXG4gICAgfVxuICB9ID0gdXNlVG9vbGJhclN0YXRlKCk7XG4gIHJldHVybiBSZWFjdC51c2VNZW1vKCgpID0+IGNvcmUuanN4KHRvb2xiYXIuVG9vbGJhckJ1dHRvbiwgX2V4dGVuZHMoe1xuICAgIHJlZjogcmVmLFxuICAgIGlzRGlzYWJsZWQ6IGlzRGlzYWJsZWQsXG4gICAgaXNTZWxlY3RlZDogaXNTZWxlY3RlZCxcbiAgICBvbk1vdXNlRG93bjogZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHdyYXBMaW5rKGVkaXRvciwgJycpO1xuICAgIH1cbiAgfSwgcHJvcHMpLCBsaW5rSWNvbiksIFtpc1NlbGVjdGVkLCBpc0Rpc2FibGVkLCBlZGl0b3IsIHByb3BzLCByZWZdKTtcbn0pO1xuY29uc3QgbGlua0J1dHRvbiA9IGNvcmUuanN4KHRvb2x0aXAuVG9vbHRpcCwge1xuICBjb250ZW50OiBcIkxpbmtcIixcbiAgd2VpZ2h0OiBcInN1YnRsZVwiXG59LCBhdHRycyA9PiBjb3JlLmpzeChMaW5rQnV0dG9uLCBhdHRycykpO1xuY29uc3QgbWFya2Rvd25MaW5rUGF0dGVybiA9IC8oXnxcXHMpXFxbKC4rPylcXF1cXCgoXFxTKylcXCkkLztcbmZ1bmN0aW9uIHdpdGhMaW5rKGVkaXRvckRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2NrcywgZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBpbnNlcnRUZXh0LFxuICAgIGlzSW5saW5lLFxuICAgIG5vcm1hbGl6ZU5vZGVcbiAgfSA9IGVkaXRvcjtcblxuICBlZGl0b3IuaXNJbmxpbmUgPSBlbGVtZW50ID0+IHtcbiAgICByZXR1cm4gZWxlbWVudC50eXBlID09PSAnbGluaycgPyB0cnVlIDogaXNJbmxpbmUoZWxlbWVudCk7XG4gIH07XG5cbiAgaWYgKGVkaXRvckRvY3VtZW50RmVhdHVyZXMubGlua3MpIHtcbiAgICBlZGl0b3IuaW5zZXJ0VGV4dCA9IHRleHQgPT4ge1xuICAgICAgaW5zZXJ0VGV4dCh0ZXh0KTtcbiAgICAgIGlmICh0ZXh0ICE9PSAnKScgfHwgIWVkaXRvci5zZWxlY3Rpb24pIHJldHVybjtcbiAgICAgIGNvbnN0IHN0YXJ0T2ZCbG9jayA9IHNsYXRlLkVkaXRvci5zdGFydChlZGl0b3IsIHNsYXRlLkVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgICAgbWF0Y2g6IG5vZGUgPT4gc2xhdGUuRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBub2RlKVxuICAgICAgfSlbMV0pO1xuICAgICAgY29uc3Qgc3RhcnRPZkJsb2NrVG9FbmRPZlNob3J0Y3V0U3RyaW5nID0gc2xhdGUuRWRpdG9yLnN0cmluZyhlZGl0b3IsIHtcbiAgICAgICAgYW5jaG9yOiBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvcixcbiAgICAgICAgZm9jdXM6IHN0YXJ0T2ZCbG9ja1xuICAgICAgfSk7XG4gICAgICBjb25zdCBtYXRjaCA9IG1hcmtkb3duTGlua1BhdHRlcm4uZXhlYyhzdGFydE9mQmxvY2tUb0VuZE9mU2hvcnRjdXRTdHJpbmcpO1xuICAgICAgaWYgKCFtYXRjaCkgcmV0dXJuO1xuICAgICAgY29uc3QgYW5jZXN0b3JDb21wb25lbnRDaGlsZEZpZWxkRG9jdW1lbnRGZWF0dXJlcyA9IGdldEFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMoZWRpdG9yLCBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MpO1xuXG4gICAgICBpZiAoKGFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMgPT09IG51bGwgfHwgYW5jZXN0b3JDb21wb25lbnRDaGlsZEZpZWxkRG9jdW1lbnRGZWF0dXJlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYW5jZXN0b3JDb21wb25lbnRDaGlsZEZpZWxkRG9jdW1lbnRGZWF0dXJlcy5kb2N1bWVudEZlYXR1cmVzLmxpbmtzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBbLCBtYXliZVdoaXRlc3BhY2UsIGxpbmtUZXh0LCBocmVmXSA9IG1hdGNoOyAvLyBieSBkb2luZyB0aGlzLCB0aGUgaW5zZXJ0VGV4dCgnKScpIGFib3ZlIHdpbGwgaGFwcGVuIGluIGEgZGlmZmVyZW50IHVuZG8gdGhhbiB0aGUgbGluayByZXBsYWNlbWVudFxuICAgICAgLy8gc28gdGhhdCBtZWFucyB0aGF0IHdoZW4gc29tZW9uZSBkb2VzIGFuIHVuZG8gYWZ0ZXIgdGhpc1xuICAgICAgLy8gaXQgd2lsbCB1bmRvIHRvIHRoZSBzdGF0ZSBvZiBcIltjb250ZW50XShsaW5rKVwiIHJhdGhlciB0aGFuIFwiW2NvbnRlbnRdKGxpbmtcIiAobm90ZSB0aGUgbWlzc2luZyBjbG9zaW5nIGJyYWNrZXQpXG5cbiAgICAgIGVkaXRvci5oaXN0b3J5LnVuZG9zLnB1c2goW10pO1xuICAgICAgY29uc3Qgc3RhcnRPZlNob3J0Y3V0ID0gbWF0Y2guaW5kZXggPT09IDAgPyBzdGFydE9mQmxvY2sgOiBFZGl0b3JBZnRlckJ1dElnbm9yaW5naW5nUG9pbnRzV2l0aE5vQ29udGVudChlZGl0b3IsIHN0YXJ0T2ZCbG9jaywge1xuICAgICAgICBkaXN0YW5jZTogbWF0Y2guaW5kZXhcbiAgICAgIH0pO1xuICAgICAgY29uc3Qgc3RhcnRPZkxpbmtUZXh0ID0gRWRpdG9yQWZ0ZXJCdXRJZ25vcmluZ2luZ1BvaW50c1dpdGhOb0NvbnRlbnQoZWRpdG9yLCBzdGFydE9mU2hvcnRjdXQsIHtcbiAgICAgICAgZGlzdGFuY2U6IG1heWJlV2hpdGVzcGFjZSA9PT0gJycgPyAxIDogMlxuICAgICAgfSk7XG4gICAgICBjb25zdCBlbmRPZkxpbmtUZXh0ID0gRWRpdG9yQWZ0ZXJCdXRJZ25vcmluZ2luZ1BvaW50c1dpdGhOb0NvbnRlbnQoZWRpdG9yLCBzdGFydE9mTGlua1RleHQsIHtcbiAgICAgICAgZGlzdGFuY2U6IGxpbmtUZXh0Lmxlbmd0aFxuICAgICAgfSk7XG4gICAgICBzbGF0ZS5UcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHtcbiAgICAgICAgYXQ6IHtcbiAgICAgICAgICBhbmNob3I6IGVuZE9mTGlua1RleHQsXG4gICAgICAgICAgZm9jdXM6IGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgc2xhdGUuVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7XG4gICAgICAgIGF0OiB7XG4gICAgICAgICAgYW5jaG9yOiBzdGFydE9mU2hvcnRjdXQsXG4gICAgICAgICAgZm9jdXM6IHN0YXJ0T2ZMaW5rVGV4dFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHNsYXRlLlRyYW5zZm9ybXMud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICB0eXBlOiAnbGluaycsXG4gICAgICAgIGhyZWYsXG4gICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgfSwge1xuICAgICAgICBhdDoge1xuICAgICAgICAgIGFuY2hvcjogZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IsXG4gICAgICAgICAgZm9jdXM6IHN0YXJ0T2ZTaG9ydGN1dFxuICAgICAgICB9LFxuICAgICAgICBzcGxpdDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBjb25zdCBuZXh0Tm9kZSA9IHNsYXRlLkVkaXRvci5uZXh0KGVkaXRvcik7XG5cbiAgICAgIGlmIChuZXh0Tm9kZSkge1xuICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIG5leHROb2RlWzFdKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZWRpdG9yLm5vcm1hbGl6ZU5vZGUgPSBfcmVmMyA9PiB7XG4gICAgbGV0IFtub2RlLCBwYXRoXSA9IF9yZWYzO1xuXG4gICAgaWYgKG5vZGUudHlwZSA9PT0gJ2xpbmsnICYmIHNsYXRlLk5vZGUuc3RyaW5nKG5vZGUpID09PSAnJykge1xuICAgICAgc2xhdGUuVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IHBhdGhcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG5vcm1hbGl6ZU5vZGUoW25vZGUsIHBhdGhdKTtcbiAgfTtcblxuICByZXR1cm4gZWRpdG9yO1xufVxuXG5jb25zdCBpbnNlcnRCbG9ja3F1b3RlID0gZWRpdG9yID0+IHtcbiAgY29uc3QgaXNBY3RpdmUgPSBpc0VsZW1lbnRBY3RpdmUoZWRpdG9yLCAnYmxvY2txdW90ZScpO1xuXG4gIGlmIChpc0FjdGl2ZSkge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICBtYXRjaDogbm9kZSA9PiBub2RlLnR5cGUgPT09ICdibG9ja3F1b3RlJ1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgdHlwZTogJ2Jsb2NrcXVvdGUnLFxuICAgICAgY2hpbGRyZW46IFtdXG4gICAgfSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGdldERpcmVjdEJsb2NrcXVvdGVQYXJlbnRGcm9tU2VsZWN0aW9uKGVkaXRvcikge1xuICBpZiAoIWVkaXRvci5zZWxlY3Rpb24pIHJldHVybiB7XG4gICAgaXNJbnNpZGU6IGZhbHNlXG4gIH07XG4gIGNvbnN0IFssIHBhcmVudFBhdGhdID0gc2xhdGUuRWRpdG9yLnBhcmVudChlZGl0b3IsIGVkaXRvci5zZWxlY3Rpb24pO1xuICBjb25zdCBbbWF5YmVCbG9ja3F1b3RlUGFyZW50LCBtYXliZUJsb2NrcXVvdGVQYXJlbnRQYXRoXSA9IHNsYXRlLkVkaXRvci5wYXJlbnQoZWRpdG9yLCBwYXJlbnRQYXRoKTtcbiAgY29uc3QgaXNCbG9ja3F1b3RlID0gbWF5YmVCbG9ja3F1b3RlUGFyZW50LnR5cGUgPT09ICdibG9ja3F1b3RlJztcbiAgcmV0dXJuIGlzQmxvY2txdW90ZSA/IHtcbiAgICBpc0luc2lkZTogdHJ1ZSxcbiAgICBwYXRoOiBtYXliZUJsb2NrcXVvdGVQYXJlbnRQYXRoXG4gIH0gOiB7XG4gICAgaXNJbnNpZGU6IGZhbHNlXG4gIH07XG59XG5cbmZ1bmN0aW9uIHdpdGhCbG9ja3F1b3RlKGVkaXRvcikge1xuICBjb25zdCB7XG4gICAgaW5zZXJ0QnJlYWssXG4gICAgZGVsZXRlQmFja3dhcmRcbiAgfSA9IGVkaXRvcjtcblxuICBlZGl0b3IuZGVsZXRlQmFja3dhcmQgPSB1bml0ID0+IHtcbiAgICBpZiAoZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgY29uc3QgcGFyZW50QmxvY2txdW90ZSA9IGdldERpcmVjdEJsb2NrcXVvdGVQYXJlbnRGcm9tU2VsZWN0aW9uKGVkaXRvcik7XG5cbiAgICAgIGlmIChwYXJlbnRCbG9ja3F1b3RlLmlzSW5zaWRlICYmIHNsYXRlLlJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pICYmIC8vIHRoZSBzZWxlY3Rpb24gaXMgYXQgdGhlIHN0YXJ0IG9mIHRoZSBwYXJhZ3JhcGhcbiAgICAgIGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLm9mZnNldCA9PT0gMCAmJiAvLyBpdCdzIHRoZSBmaXJzdCBwYXJhZ3JhcGggaW4gdGhlIHBhbmVsXG4gICAgICBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvci5wYXRoW2VkaXRvci5zZWxlY3Rpb24uYW5jaG9yLnBhdGgubGVuZ3RoIC0gMl0gPT09IDApIHtcbiAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICBtYXRjaDogbm9kZSA9PiBub2RlLnR5cGUgPT09ICdibG9ja3F1b3RlJyxcbiAgICAgICAgICBzcGxpdDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGRlbGV0ZUJhY2t3YXJkKHVuaXQpO1xuICB9O1xuXG4gIGVkaXRvci5pbnNlcnRCcmVhayA9ICgpID0+IHtcbiAgICBjb25zdCBwYW5lbCA9IGdldERpcmVjdEJsb2NrcXVvdGVQYXJlbnRGcm9tU2VsZWN0aW9uKGVkaXRvcik7XG5cbiAgICBpZiAoZWRpdG9yLnNlbGVjdGlvbiAmJiBwYW5lbC5pc0luc2lkZSkge1xuICAgICAgY29uc3QgW25vZGUsIG5vZGVQYXRoXSA9IHNsYXRlLkVkaXRvci5ub2RlKGVkaXRvciwgZWRpdG9yLnNlbGVjdGlvbik7XG5cbiAgICAgIGlmIChzbGF0ZS5QYXRoLmlzRGVzY2VuZGFudChub2RlUGF0aCwgcGFuZWwucGF0aCkgJiYgc2xhdGUuTm9kZS5zdHJpbmcobm9kZSkgPT09ICcnKSB7XG4gICAgICAgIHNsYXRlLlRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAnYmxvY2txdW90ZScsXG4gICAgICAgICAgc3BsaXQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpbnNlcnRCcmVhaygpO1xuICB9O1xuXG4gIHJldHVybiBlZGl0b3I7XG59XG5jb25zdCBCbG9ja3F1b3RlRWxlbWVudCA9IF9yZWYgPT4ge1xuICBsZXQge1xuICAgIGF0dHJpYnV0ZXMsXG4gICAgY2hpbGRyZW5cbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHtcbiAgICBjb2xvcnMsXG4gICAgc3BhY2luZ1xuICB9ID0gY29yZS51c2VUaGVtZSgpO1xuICByZXR1cm4gY29yZS5qc3goXCJibG9ja3F1b3RlXCIsIF9leHRlbmRzKHtcbiAgICBjc3M6IHtcbiAgICAgIGJvcmRlckxlZnQ6ICczcHggc29saWQgI0NCRDVFMCcsXG4gICAgICBjb2xvcjogY29sb3JzLmZvcmVncm91bmREaW0sXG4gICAgICBtYXJnaW46IDAsXG4gICAgICBwYWRkaW5nOiBgMCAke3NwYWNpbmcueGxhcmdlfXB4YFxuICAgIH1cbiAgfSwgYXR0cmlidXRlcyksIGNoaWxkcmVuKTtcbn07XG5cbmNvbnN0IEJsb2NrcXVvdGVCdXR0b24gPSBfcmVmMiA9PiB7XG4gIGxldCB7XG4gICAgYXR0cnNcbiAgfSA9IF9yZWYyO1xuICBjb25zdCB7XG4gICAgZWRpdG9yLFxuICAgIGJsb2NrcXVvdGU6IHtcbiAgICAgIGlzRGlzYWJsZWQsXG4gICAgICBpc1NlbGVjdGVkXG4gICAgfVxuICB9ID0gdXNlVG9vbGJhclN0YXRlKCk7XG4gIHJldHVybiBSZWFjdC51c2VNZW1vKCgpID0+IGNvcmUuanN4KHRvb2xiYXIuVG9vbGJhckJ1dHRvbiwgX2V4dGVuZHMoe1xuICAgIGlzU2VsZWN0ZWQ6IGlzU2VsZWN0ZWQsXG4gICAgaXNEaXNhYmxlZDogaXNEaXNhYmxlZCxcbiAgICBvbk1vdXNlRG93bjogZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGluc2VydEJsb2NrcXVvdGUoZWRpdG9yKTtcbiAgICB9XG4gIH0sIGF0dHJzKSwgY29yZS5qc3goUXVvdGVJY29uLCBudWxsKSksIFtlZGl0b3IsIGF0dHJzLCBpc0Rpc2FibGVkLCBpc1NlbGVjdGVkXSk7XG59O1xuXG5jb25zdCBibG9ja3F1b3RlQnV0dG9uID0gY29yZS5qc3godG9vbHRpcC5Ub29sdGlwLCB7XG4gIGNvbnRlbnQ6IGNvcmUuanN4KFJlYWN0LkZyYWdtZW50LCBudWxsLCBcIlF1b3RlXCIsIGNvcmUuanN4KHRvb2xiYXIuS2V5Ym9hcmRJblRvb2x0aXAsIG51bGwsICc+ICcpKSxcbiAgd2VpZ2h0OiBcInN1YnRsZVwiXG59LCBhdHRycyA9PiBjb3JlLmpzeChCbG9ja3F1b3RlQnV0dG9uLCB7XG4gIGF0dHJzOiBhdHRyc1xufSkpO1xuXG5jb25zdCBRdW90ZUljb24gPSAoKSA9PiBjb3JlLmpzeChJY29uQmFzZSwgbnVsbCwgY29yZS5qc3goXCJwYXRoXCIsIHtcbiAgZDogXCJNMTEuMzAzMSAyQzkuODM4NDMgMiA4LjY0ODc5IDMuMjIzMjEgOC42NDg3OSA0LjczMTcxQzguNjQ4NzkgNi4yMzkyOCA5LjgzODQzIDcuNDYzNDIgMTEuMzAzMSA3LjQ2MzQyQzEzLjgxOTUgNy40NjM0MiAxMi4zNjEzIDEyLjIwNzEgOS4xODc2NyAxMi43MDEyQzkuMDM3OTMgMTIuNzIzOSA4LjkwMTI3IDEyLjc5OTUgOC44MDI0MyAxMi45MTQzQzguNzAzNTggMTMuMDI5IDguNjQ5MDggMTMuMTc1NCA4LjY0ODc5IDEzLjMyNjhDOC42NDg3OSAxMy43MTQ3IDguOTk1NjEgMTQuMDIxNCA5LjM3OTczIDEzLjk2MjdDMTUuMTQ4IDEzLjA4ODEgMTcuMTk5MSAyLjAwMDkzIDExLjMwMzEgMi4wMDA5M1YyWk0zLjY1NTI2IDJDMi4xODg3MSAyIDEgMy4yMjIyOCAxIDQuNzMxNzFDMSA2LjIzODM1IDIuMTg4NzEgNy40NjE1NSAzLjY1NTI2IDcuNDYxNTVDNi4xNzA2NyA3LjQ2MTU1IDQuNzEyNTIgMTIuMjA3MSAxLjUzODg4IDEyLjcwMTJDMS4zODkzIDEyLjcyMzkgMS4yNTI3NyAxMi43OTkzIDEuMTUzOTQgMTIuOTEzOUMxLjA1NTExIDEzLjAyODUgMS4wMDA1MSAxMy4xNzQ2IDEgMTMuMzI1OUMxIDEzLjcxMzcgMS4zNDY4MiAxNC4wMjA1IDEuNzMwMDEgMTMuOTYxN0M3LjUwMDE2IDEzLjA4NzIgOS41NTEyOCAyIDMuNjU1MjYgMlpcIlxufSkpO1xuXG5mdW5jdGlvbiB3aXRoQ29kZUJsb2NrKGVkaXRvcikge1xuICBjb25zdCB7XG4gICAgaW5zZXJ0QnJlYWssXG4gICAgbm9ybWFsaXplTm9kZVxuICB9ID0gZWRpdG9yO1xuXG4gIGVkaXRvci5pbnNlcnRCcmVhayA9ICgpID0+IHtcbiAgICBjb25zdCBbbm9kZSwgcGF0aF0gPSBzbGF0ZS5FZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICBtYXRjaDogbiA9PiBzbGF0ZS5FZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgfSkgfHwgW2VkaXRvciwgW11dO1xuXG4gICAgaWYgKG5vZGUudHlwZSA9PT0gJ2NvZGUnICYmIHNsYXRlLlRleHQuaXNUZXh0KG5vZGUuY2hpbGRyZW5bMF0pKSB7XG4gICAgICBjb25zdCB0ZXh0ID0gbm9kZS5jaGlsZHJlblswXS50ZXh0O1xuXG4gICAgICBpZiAodGV4dFt0ZXh0Lmxlbmd0aCAtIDFdID09PSAnXFxuJyAmJiBlZGl0b3Iuc2VsZWN0aW9uICYmIHNsYXRlLlJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pICYmIHNsYXRlLlBvaW50LmVxdWFscyhzbGF0ZS5FZGl0b3IuZW5kKGVkaXRvciwgcGF0aCksIGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yKSkge1xuICAgICAgICBpbnNlcnRCcmVhaygpO1xuICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLnNldE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7XG4gICAgICAgICAgZGlzdGFuY2U6IDEsXG4gICAgICAgICAgYXQ6IHtcbiAgICAgICAgICAgIHBhdGg6IFsuLi5wYXRoLCAwXSxcbiAgICAgICAgICAgIG9mZnNldDogdGV4dC5sZW5ndGggLSAxXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBlZGl0b3IuaW5zZXJ0VGV4dCgnXFxuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW5zZXJ0QnJlYWsoKTtcbiAgfTtcblxuICBlZGl0b3Iubm9ybWFsaXplTm9kZSA9IF9yZWYgPT4ge1xuICAgIGxldCBbbm9kZSwgcGF0aF0gPSBfcmVmO1xuXG4gICAgaWYgKG5vZGUudHlwZSA9PT0gJ2NvZGUnICYmIHNsYXRlLkVsZW1lbnQuaXNFbGVtZW50KG5vZGUpKSB7XG4gICAgICBmb3IgKGNvbnN0IFtpbmRleCwgY2hpbGROb2RlXSBvZiBub2RlLmNoaWxkcmVuLmVudHJpZXMoKSkge1xuICAgICAgICBpZiAoIXNsYXRlLlRleHQuaXNUZXh0KGNoaWxkTm9kZSkpIHtcbiAgICAgICAgICBpZiAoZWRpdG9yLmlzVm9pZChjaGlsZE5vZGUpKSB7XG4gICAgICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICBhdDogWy4uLnBhdGgsIGluZGV4XVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNsYXRlLlRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBbLi4ucGF0aCwgaW5kZXhdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtYXJrcyA9IE9iamVjdC5rZXlzKGNoaWxkTm9kZSkuZmlsdGVyKHggPT4geCAhPT0gJ3RleHQnKTtcblxuICAgICAgICBpZiAobWFya3MubGVuZ3RoKSB7XG4gICAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy51bnNldE5vZGVzKGVkaXRvciwgbWFya3MsIHtcbiAgICAgICAgICAgIGF0OiBbLi4ucGF0aCwgaW5kZXhdXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbm9ybWFsaXplTm9kZShbbm9kZSwgcGF0aF0pO1xuICB9O1xuXG4gIHJldHVybiBlZGl0b3I7XG59XG5cbmZ1bmN0aW9uIENvZGVCdXR0b24oX3JlZjIpIHtcbiAgbGV0IHtcbiAgICBhdHRyc1xuICB9ID0gX3JlZjI7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgY29kZToge1xuICAgICAgaXNEaXNhYmxlZCxcbiAgICAgIGlzU2VsZWN0ZWRcbiAgICB9XG4gIH0gPSB1c2VUb29sYmFyU3RhdGUoKTtcbiAgcmV0dXJuIFJlYWN0LnVzZU1lbW8oKCkgPT4gY29yZS5qc3godG9vbGJhci5Ub29sYmFyQnV0dG9uLCBfZXh0ZW5kcyh7XG4gICAgaXNTZWxlY3RlZDogaXNTZWxlY3RlZCxcbiAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxuICAgIG9uTW91c2VEb3duOiBldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ2NvZGUnXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgdHlwZTogJ2NvZGUnLFxuICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIGF0dHJzKSwgY29yZS5qc3goQ29kZUljb24uQ29kZUljb24sIHtcbiAgICBzaXplOiBcInNtYWxsXCJcbiAgfSkpLCBbaXNEaXNhYmxlZCwgaXNTZWxlY3RlZCwgYXR0cnMsIGVkaXRvcl0pO1xufVxuXG5jb25zdCBjb2RlQnV0dG9uID0gY29yZS5qc3godG9vbHRpcC5Ub29sdGlwLCB7XG4gIHdlaWdodDogXCJzdWJ0bGVcIixcbiAgY29udGVudDogY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIG51bGwsIFwiQ29kZSBibG9jayBcIiwgY29yZS5qc3godG9vbGJhci5LZXlib2FyZEluVG9vbHRpcCwgbnVsbCwgXCJgYGBcIikpXG59LCBhdHRycyA9PiBjb3JlLmpzeChDb2RlQnV0dG9uLCB7XG4gIGF0dHJzOiBhdHRyc1xufSkpO1xuXG5jb25zdCBUZXh0QWxpZ25NZW51ID0gX3JlZiA9PiB7XG4gIGxldCB7XG4gICAgYWxpZ25tZW50XG4gIH0gPSBfcmVmO1xuICBjb25zdCBbc2hvd01lbnUsIHNldFNob3dNZW51XSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qge1xuICAgIGRpYWxvZyxcbiAgICB0cmlnZ2VyXG4gIH0gPSBwb3BvdmVyLnVzZUNvbnRyb2xsZWRQb3BvdmVyKHtcbiAgICBpc09wZW46IHNob3dNZW51LFxuICAgIG9uQ2xvc2U6ICgpID0+IHNldFNob3dNZW51KGZhbHNlKVxuICB9LCB7XG4gICAgcGxhY2VtZW50OiAnYm90dG9tLXN0YXJ0JyxcbiAgICBtb2RpZmllcnM6IFt7XG4gICAgICBuYW1lOiAnb2Zmc2V0JyxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgb2Zmc2V0OiBbMCwgOF1cbiAgICAgIH1cbiAgICB9XVxuICB9KTtcbiAgcmV0dXJuIGNvcmUuanN4KFwiZGl2XCIsIHtcbiAgICBjc3M6IHtcbiAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZSdcbiAgICB9XG4gIH0sIGNvcmUuanN4KHRvb2x0aXAuVG9vbHRpcCwge1xuICAgIGNvbnRlbnQ6IFwiVGV4dCBhbGlnbm1lbnRcIixcbiAgICB3ZWlnaHQ6IFwic3VidGxlXCJcbiAgfSwgYXR0cnMgPT4gY29yZS5qc3goVGV4dEFsaWduQnV0dG9uLCB7XG4gICAgYXR0cnM6IGF0dHJzLFxuICAgIG9uVG9nZ2xlOiAoKSA9PiB7XG4gICAgICBzZXRTaG93TWVudSh4ID0+ICF4KTtcbiAgICB9LFxuICAgIHRyaWdnZXI6IHRyaWdnZXIsXG4gICAgc2hvd01lbnU6IHNob3dNZW51XG4gIH0pKSwgc2hvd01lbnUgPyBjb3JlLmpzeCh0b29sYmFyLklubGluZURpYWxvZywgX2V4dGVuZHMoe1xuICAgIHJlZjogZGlhbG9nLnJlZlxuICB9LCBkaWFsb2cucHJvcHMpLCBjb3JlLmpzeChUZXh0QWxpZ25EaWFsb2csIHtcbiAgICBhbGlnbm1lbnQ6IGFsaWdubWVudCxcbiAgICBvbkNsb3NlOiAoKSA9PiB7XG4gICAgICBzZXRTaG93TWVudShmYWxzZSk7XG4gICAgfVxuICB9KSkgOiBudWxsKTtcbn07XG5cbmZ1bmN0aW9uIFRleHRBbGlnbkRpYWxvZyhfcmVmMikge1xuICBsZXQge1xuICAgIGFsaWdubWVudCxcbiAgICBvbkNsb3NlXG4gIH0gPSBfcmVmMjtcbiAgY29uc3Qge1xuICAgIGFsaWdubWVudDoge1xuICAgICAgc2VsZWN0ZWRcbiAgICB9LFxuICAgIGVkaXRvclxuICB9ID0gdXNlVG9vbGJhclN0YXRlKCk7XG4gIGNvbnN0IGFsaWdubWVudHMgPSBbJ3N0YXJ0JywgLi4uT2JqZWN0LmtleXMoYWxpZ25tZW50KS5maWx0ZXIoa2V5ID0+IGFsaWdubWVudFtrZXldKV07XG4gIHJldHVybiBjb3JlLmpzeCh0b29sYmFyLlRvb2xiYXJHcm91cCwgbnVsbCwgYWxpZ25tZW50cy5tYXAoYWxpZ25tZW50ID0+IGNvcmUuanN4KHRvb2x0aXAuVG9vbHRpcCwge1xuICAgIGtleTogYWxpZ25tZW50LFxuICAgIGNvbnRlbnQ6IGBBbGlnbiAke2FsaWdubWVudH1gLFxuICAgIHdlaWdodDogXCJzdWJ0bGVcIlxuICB9LCBhdHRycyA9PiBjb3JlLmpzeCh0b29sYmFyLlRvb2xiYXJCdXR0b24sIF9leHRlbmRzKHtcbiAgICBpc1NlbGVjdGVkOiBzZWxlY3RlZCA9PT0gYWxpZ25tZW50LFxuICAgIG9uTW91c2VEb3duOiBldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBpZiAoYWxpZ25tZW50ID09PSAnc3RhcnQnKSB7XG4gICAgICAgIHNsYXRlLlRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsICd0ZXh0QWxpZ24nLCB7XG4gICAgICAgICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAncGFyYWdyYXBoJyB8fCBub2RlLnR5cGUgPT09ICdoZWFkaW5nJ1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsYXRlLlRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgdGV4dEFsaWduOiBhbGlnbm1lbnRcbiAgICAgICAgfSwge1xuICAgICAgICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ3BhcmFncmFwaCcgfHwgbm9kZS50eXBlID09PSAnaGVhZGluZydcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIG9uQ2xvc2UoKTtcbiAgICB9XG4gIH0sIGF0dHJzKSwgYWxpZ25tZW50SWNvbnNbYWxpZ25tZW50XSkpKSk7XG59XG5cbmNvbnN0IGFsaWdubWVudEljb25zID0ge1xuICBzdGFydDogY29yZS5qc3goQWxpZ25MZWZ0SWNvbi5BbGlnbkxlZnRJY29uLCB7XG4gICAgc2l6ZTogXCJzbWFsbFwiXG4gIH0pLFxuICBjZW50ZXI6IGNvcmUuanN4KEFsaWduQ2VudGVySWNvbi5BbGlnbkNlbnRlckljb24sIHtcbiAgICBzaXplOiBcInNtYWxsXCJcbiAgfSksXG4gIGVuZDogY29yZS5qc3goQWxpZ25SaWdodEljb24uQWxpZ25SaWdodEljb24sIHtcbiAgICBzaXplOiBcInNtYWxsXCJcbiAgfSlcbn07XG5cbmZ1bmN0aW9uIFRleHRBbGlnbkJ1dHRvbihwcm9wcykge1xuICBjb25zdCB7XG4gICAgYWxpZ25tZW50OiB7XG4gICAgICBpc0Rpc2FibGVkLFxuICAgICAgc2VsZWN0ZWRcbiAgICB9XG4gIH0gPSB1c2VUb29sYmFyU3RhdGUoKTtcbiAgcmV0dXJuIFJlYWN0LnVzZU1lbW8oKCkgPT4gY29yZS5qc3godG9vbGJhci5Ub29sYmFyQnV0dG9uLCBfZXh0ZW5kcyh7XG4gICAgaXNEaXNhYmxlZDogaXNEaXNhYmxlZCxcbiAgICBpc1ByZXNzZWQ6IHByb3BzLnNob3dNZW51LFxuICAgIG9uTW91c2VEb3duOiBldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcHJvcHMub25Ub2dnbGUoKTtcbiAgICB9XG4gIH0sIHByb3BzLmF0dHJzLCBwcm9wcy50cmlnZ2VyLnByb3BzLCB7XG4gICAgcmVmOiBhcHBseVJlZi5hcHBseVJlZnMocHJvcHMuYXR0cnMucmVmLCBwcm9wcy50cmlnZ2VyLnJlZilcbiAgfSksIGFsaWdubWVudEljb25zW3NlbGVjdGVkXSwgZG93bkljb24kMSksIFtpc0Rpc2FibGVkLCBzZWxlY3RlZCwgcHJvcHNdKTtcbn1cblxuY29uc3QgZG93bkljb24kMSA9IGNvcmUuanN4KENoZXZyb25Eb3duSWNvbi5DaGV2cm9uRG93bkljb24sIHtcbiAgc2l6ZTogXCJzbWFsbFwiXG59KTtcblxuY29uc3QgbWludXNJY29uID0gLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KE1pbnVzSWNvbi5NaW51c0ljb24sIHtcbiAgc2l6ZTogXCJzbWFsbFwiXG59KTtcbmZ1bmN0aW9uIGluc2VydERpdmlkZXIoZWRpdG9yKSB7XG4gIGluc2VydE5vZGVzQnV0UmVwbGFjZUlmU2VsZWN0aW9uSXNBdEVtcHR5UGFyYWdyYXBoT3JIZWFkaW5nKGVkaXRvciwge1xuICAgIHR5cGU6ICdkaXZpZGVyJyxcbiAgICBjaGlsZHJlbjogW3tcbiAgICAgIHRleHQ6ICcnXG4gICAgfV1cbiAgfSk7XG4gIHNsYXRlLkVkaXRvci5pbnNlcnROb2RlKGVkaXRvciwge1xuICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgIGNoaWxkcmVuOiBbe1xuICAgICAgdGV4dDogJydcbiAgICB9XVxuICB9KTtcbn1cblxuY29uc3QgRGl2aWRlckJ1dHRvbiA9IF9yZWYgPT4ge1xuICBsZXQge1xuICAgIGF0dHJzXG4gIH0gPSBfcmVmO1xuICBjb25zdCB7XG4gICAgZWRpdG9yLFxuICAgIGRpdmlkZXJzOiB7XG4gICAgICBpc0Rpc2FibGVkXG4gICAgfVxuICB9ID0gdXNlVG9vbGJhclN0YXRlKCk7XG4gIHJldHVybiBSZWFjdC51c2VNZW1vKCgpID0+IC8qI19fUFVSRV9fKi9SZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCh0b29sYmFyLlRvb2xiYXJCdXR0b24sIF9leHRlbmRzKHtcbiAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxuICAgIG9uTW91c2VEb3duOiBldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaW5zZXJ0RGl2aWRlcihlZGl0b3IpO1xuICAgIH1cbiAgfSwgYXR0cnMpLCBtaW51c0ljb24pLCBbZWRpdG9yLCBpc0Rpc2FibGVkLCBhdHRyc10pO1xufTtcblxuY29uc3QgZGl2aWRlckJ1dHRvbiA9IC8qI19fUFVSRV9fKi9SZWFjdF9fZGVmYXVsdFtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCh0b29sdGlwLlRvb2x0aXAsIHtcbiAgY29udGVudDogLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBcIkRpdmlkZXJcIiwgLyojX19QVVJFX18qL1JlYWN0X19kZWZhdWx0W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KHRvb2xiYXIuS2V5Ym9hcmRJblRvb2x0aXAsIG51bGwsIFwiLS0tXCIpKSxcbiAgd2VpZ2h0OiBcInN1YnRsZVwiXG59LCBhdHRycyA9PiAvKiNfX1BVUkVfXyovUmVhY3RfX2RlZmF1bHRbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoRGl2aWRlckJ1dHRvbiwge1xuICBhdHRyczogYXR0cnNcbn0pKTtcbmZ1bmN0aW9uIHdpdGhEaXZpZGVyKGVkaXRvcikge1xuICBjb25zdCB7XG4gICAgaXNWb2lkXG4gIH0gPSBlZGl0b3I7XG5cbiAgZWRpdG9yLmlzVm9pZCA9IG5vZGUgPT4ge1xuICAgIHJldHVybiBub2RlLnR5cGUgPT09ICdkaXZpZGVyJyB8fCBpc1ZvaWQobm9kZSk7XG4gIH07XG5cbiAgcmV0dXJuIGVkaXRvcjtcbn1cblxuY29uc3QgX2V4Y2x1ZGVkID0gW1widHlwZVwiXSxcbiAgICAgIF9leGNsdWRlZDIgPSBbXCJyZWZcIl07XG5mdW5jdGlvbiBUb29sYmFyKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBkb2N1bWVudEZlYXR1cmVzLFxuICAgIHZpZXdTdGF0ZVxuICB9ID0gX3JlZjtcbiAgY29uc3QgcmVsYXRpb25zaGlwID0gUmVhY3QudXNlQ29udGV4dChEb2N1bWVudEZpZWxkUmVsYXRpb25zaGlwc0NvbnRleHQpO1xuICBjb25zdCBibG9ja0NvbXBvbmVudCA9IFJlYWN0LnVzZUNvbnRleHQoQ29tcG9uZW50QmxvY2tDb250ZXh0KTtcbiAgY29uc3QgaGFzQmxvY2tJdGVtcyA9IE9iamVjdC5lbnRyaWVzKHJlbGF0aW9uc2hpcCkubGVuZ3RoIHx8IE9iamVjdC5rZXlzKGJsb2NrQ29tcG9uZW50KS5sZW5ndGg7XG4gIHJldHVybiBjb3JlLmpzeChUb29sYmFyQ29udGFpbmVyLCBudWxsLCAhIWRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5oZWFkaW5nTGV2ZWxzLmxlbmd0aCAmJiBjb3JlLmpzeChSZWFjdC5GcmFnbWVudCwgbnVsbCwgY29yZS5qc3goSGVhZGluZ01lbnUsIHtcbiAgICBoZWFkaW5nTGV2ZWxzOiBkb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaGVhZGluZ0xldmVsc1xuICB9KSwgY29yZS5qc3godG9vbGJhci5Ub29sYmFyU2VwYXJhdG9yLCBudWxsKSksIE9iamVjdC52YWx1ZXMoZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmlubGluZU1hcmtzKS5zb21lKHggPT4geCkgJiYgY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIG51bGwsIGNvcmUuanN4KElubGluZU1hcmtzLCB7XG4gICAgbWFya3M6IGRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5pbmxpbmVNYXJrc1xuICB9KSwgY29yZS5qc3godG9vbGJhci5Ub29sYmFyU2VwYXJhdG9yLCBudWxsKSksIChkb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYWxpZ25tZW50LmNlbnRlciB8fCBkb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYWxpZ25tZW50LmVuZCkgJiYgY29yZS5qc3goVGV4dEFsaWduTWVudSwge1xuICAgIGFsaWdubWVudDogZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmFsaWdubWVudFxuICB9KSwgZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmxpc3RUeXBlcy51bm9yZGVyZWQgJiYgY29yZS5qc3godG9vbHRpcC5Ub29sdGlwLCB7XG4gICAgY29udGVudDogY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIG51bGwsIFwiQnVsbGV0IExpc3QgXCIsIGNvcmUuanN4KHRvb2xiYXIuS2V5Ym9hcmRJblRvb2x0aXAsIG51bGwsIFwiLSBcIikpLFxuICAgIHdlaWdodDogXCJzdWJ0bGVcIlxuICB9LCBhdHRycyA9PiBjb3JlLmpzeChMaXN0QnV0dG9uLCBfZXh0ZW5kcyh7XG4gICAgdHlwZTogXCJ1bm9yZGVyZWQtbGlzdFwiXG4gIH0sIGF0dHJzKSwgY29yZS5qc3goQnVsbGV0TGlzdEljb24sIG51bGwpKSksIGRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5saXN0VHlwZXMub3JkZXJlZCAmJiBjb3JlLmpzeCh0b29sdGlwLlRvb2x0aXAsIHtcbiAgICBjb250ZW50OiBjb3JlLmpzeChSZWFjdC5GcmFnbWVudCwgbnVsbCwgXCJOdW1iZXJlZCBMaXN0IFwiLCBjb3JlLmpzeCh0b29sYmFyLktleWJvYXJkSW5Ub29sdGlwLCBudWxsLCBcIjEuIFwiKSksXG4gICAgd2VpZ2h0OiBcInN1YnRsZVwiXG4gIH0sIGF0dHJzID0+IGNvcmUuanN4KExpc3RCdXR0b24sIF9leHRlbmRzKHtcbiAgICB0eXBlOiBcIm9yZGVyZWQtbGlzdFwiXG4gIH0sIGF0dHJzKSwgY29yZS5qc3goTnVtYmVyZWRMaXN0SWNvbiwgbnVsbCkpKSwgKGRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5hbGlnbm1lbnQuY2VudGVyIHx8IGRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5hbGlnbm1lbnQuZW5kIHx8IGRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5saXN0VHlwZXMudW5vcmRlcmVkIHx8IGRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5saXN0VHlwZXMub3JkZXJlZCkgJiYgY29yZS5qc3godG9vbGJhci5Ub29sYmFyU2VwYXJhdG9yLCBudWxsKSwgZG9jdW1lbnRGZWF0dXJlcy5kaXZpZGVycyAmJiBkaXZpZGVyQnV0dG9uLCBkb2N1bWVudEZlYXR1cmVzLmxpbmtzICYmIGxpbmtCdXR0b24sIGRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5ibG9ja1R5cGVzLmJsb2NrcXVvdGUgJiYgYmxvY2txdW90ZUJ1dHRvbiwgISFkb2N1bWVudEZlYXR1cmVzLmxheW91dHMubGVuZ3RoICYmIGNvcmUuanN4KExheW91dHNCdXR0b24sIHtcbiAgICBsYXlvdXRzOiBkb2N1bWVudEZlYXR1cmVzLmxheW91dHNcbiAgfSksIGRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5ibG9ja1R5cGVzLmNvZGUgJiYgY29kZUJ1dHRvbiwgISFoYXNCbG9ja0l0ZW1zICYmIGNvcmUuanN4KEluc2VydEJsb2NrTWVudSwgbnVsbCksIGNvcmUuanN4KHRvb2xiYXIuVG9vbGJhclNlcGFyYXRvciwgbnVsbCksIFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IEV4cGFuZEljb24gPSB2aWV3U3RhdGUgIT09IG51bGwgJiYgdmlld1N0YXRlICE9PSB2b2lkIDAgJiYgdmlld1N0YXRlLmV4cGFuZGVkID8gTWluaW1pemUySWNvbi5NaW5pbWl6ZTJJY29uIDogTWF4aW1pemUySWNvbi5NYXhpbWl6ZTJJY29uO1xuICAgIHJldHVybiB2aWV3U3RhdGUgJiYgY29yZS5qc3godG9vbHRpcC5Ub29sdGlwLCB7XG4gICAgICBjb250ZW50OiB2aWV3U3RhdGUuZXhwYW5kZWQgPyAnQ29sbGFwc2UnIDogJ0V4cGFuZCcsXG4gICAgICB3ZWlnaHQ6IFwic3VidGxlXCJcbiAgICB9LCBhdHRycyA9PiBjb3JlLmpzeCh0b29sYmFyLlRvb2xiYXJCdXR0b24sIF9leHRlbmRzKHtcbiAgICAgIG9uTW91c2VEb3duOiBldmVudCA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZpZXdTdGF0ZS50b2dnbGUoKTtcbiAgICAgIH1cbiAgICB9LCBhdHRycyksIGNvcmUuanN4KEV4cGFuZEljb24sIHtcbiAgICAgIHNpemU6IFwic21hbGxcIlxuICAgIH0pKSk7XG4gIH0sIFt2aWV3U3RhdGVdKSk7XG59XG4vKiBVSSBDb21wb25lbnRzICovXG5cbmNvbnN0IE1hcmtCdXR0b24gPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiBNYXJrQnV0dG9uKHByb3BzLCByZWYpIHtcbiAgY29uc3Qge1xuICAgIGVkaXRvcixcbiAgICBtYXJrczoge1xuICAgICAgW3Byb3BzLnR5cGVdOiB7XG4gICAgICAgIGlzRGlzYWJsZWQsXG4gICAgICAgIGlzU2VsZWN0ZWRcbiAgICAgIH1cbiAgICB9XG4gIH0gPSB1c2VUb29sYmFyU3RhdGUoKTtcbiAgcmV0dXJuIFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgX2V4Y2x1ZGVkKTtcblxuICAgIHJldHVybiBjb3JlLmpzeCh0b29sYmFyLlRvb2xiYXJCdXR0b24sIF9leHRlbmRzKHtcbiAgICAgIHJlZjogcmVmLFxuICAgICAgaXNEaXNhYmxlZDogaXNEaXNhYmxlZCxcbiAgICAgIGlzU2VsZWN0ZWQ6IGlzU2VsZWN0ZWQsXG4gICAgICBvbk1vdXNlRG93bjogZXZlbnQgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgc2xhdGUuRWRpdG9yLnJlbW92ZU1hcmsoZWRpdG9yLCBwcm9wcy50eXBlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzbGF0ZS5FZGl0b3IuYWRkTWFyayhlZGl0b3IsIHByb3BzLnR5cGUsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgcmVzdFByb3BzKSk7XG4gIH0sIFtlZGl0b3IsIGlzRGlzYWJsZWQsIGlzU2VsZWN0ZWQsIHByb3BzLCByZWZdKTtcbn0pO1xuXG5jb25zdCBUb29sYmFyQ29udGFpbmVyID0gX3JlZjIgPT4ge1xuICBsZXQge1xuICAgIGNoaWxkcmVuXG4gIH0gPSBfcmVmMjtcbiAgY29uc3Qge1xuICAgIGNvbG9ycyxcbiAgICBzcGFjaW5nXG4gIH0gPSBjb3JlLnVzZVRoZW1lKCk7XG4gIHJldHVybiBjb3JlLmpzeChcImRpdlwiLCB7XG4gICAgY3NzOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9ycy5iYWNrZ3JvdW5kLFxuICAgICAgYm94U2hhZG93OiBgMCAxcHggJHtjb2xvcnMuYm9yZGVyfSwgMCAtMXB4ICR7Y29sb3JzLmJvcmRlcn1gLFxuICAgICAgcGFkZGluZ0JvdHRvbTogc3BhY2luZy5zbWFsbCxcbiAgICAgIHBhZGRpbmdUb3A6IHNwYWNpbmcuc21hbGwsXG4gICAgICBwb3NpdGlvbjogJ3N0aWNreScsXG4gICAgICB0b3A6IDAsXG4gICAgICB6SW5kZXg6IDJcbiAgICB9XG4gIH0sIGNvcmUuanN4KHRvb2xiYXIuVG9vbGJhckdyb3VwLCBudWxsLCBjaGlsZHJlbikpO1xufTtcblxuY29uc3QgZG93bkljb24gPSBjb3JlLmpzeChDaGV2cm9uRG93bkljb24uQ2hldnJvbkRvd25JY29uLCB7XG4gIHNpemU6IFwic21hbGxcIlxufSk7XG5cbmZ1bmN0aW9uIEhlYWRpbmdCdXR0b24oX3JlZjMpIHtcbiAgbGV0IHtcbiAgICB0cmlnZ2VyLFxuICAgIG9uVG9nZ2xlU2hvd01lbnUsXG4gICAgc2hvd01lbnVcbiAgfSA9IF9yZWYzO1xuICBjb25zdCB7XG4gICAgdGV4dFN0eWxlc1xuICB9ID0gdXNlVG9vbGJhclN0YXRlKCk7XG4gIGxldCBidXR0b25MYWJlbCA9IHRleHRTdHlsZXMuc2VsZWN0ZWQgPT09ICdub3JtYWwnID8gJ05vcm1hbCB0ZXh0JyA6ICdIZWFkaW5nICcgKyB0ZXh0U3R5bGVzLnNlbGVjdGVkO1xuICBjb25zdCBpc0Rpc2FibGVkID0gdGV4dFN0eWxlcy5hbGxvd2VkSGVhZGluZ0xldmVscy5sZW5ndGggPT09IDA7XG4gIHJldHVybiBSZWFjdC51c2VNZW1vKCgpID0+IGNvcmUuanN4KHRvb2xiYXIuVG9vbGJhckJ1dHRvbiwgX2V4dGVuZHMoe1xuICAgIHJlZjogdHJpZ2dlci5yZWYsXG4gICAgaXNQcmVzc2VkOiBzaG93TWVudSxcbiAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxuICAgIG9uTW91c2VEb3duOiBldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgb25Ub2dnbGVTaG93TWVudSgpO1xuICAgIH0sXG4gICAgc3R5bGU6IHtcbiAgICAgIHRleHRBbGlnbjogJ2xlZnQnLFxuICAgICAgd2lkdGg6IDExNlxuICAgIH1cbiAgfSwgdHJpZ2dlci5wcm9wcyksIGNvcmUuanN4KFwic3BhblwiLCB7XG4gICAgY3NzOiB7XG4gICAgICBmbGV4OiAxXG4gICAgfVxuICB9LCBidXR0b25MYWJlbCksIGRvd25JY29uKSwgW2J1dHRvbkxhYmVsLCB0cmlnZ2VyLCBzaG93TWVudSwgb25Ub2dnbGVTaG93TWVudSwgaXNEaXNhYmxlZF0pO1xufVxuXG5jb25zdCBIZWFkaW5nTWVudSA9IF9yZWY0ID0+IHtcbiAgbGV0IHtcbiAgICBoZWFkaW5nTGV2ZWxzXG4gIH0gPSBfcmVmNDtcbiAgY29uc3QgW3Nob3dNZW51LCBzZXRTaG93TWVudV0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHtcbiAgICBkaWFsb2csXG4gICAgdHJpZ2dlclxuICB9ID0gcG9wb3Zlci51c2VDb250cm9sbGVkUG9wb3Zlcih7XG4gICAgaXNPcGVuOiBzaG93TWVudSxcbiAgICBvbkNsb3NlOiAoKSA9PiBzZXRTaG93TWVudShmYWxzZSlcbiAgfSwge1xuICAgIHBsYWNlbWVudDogJ2JvdHRvbS1zdGFydCcsXG4gICAgbW9kaWZpZXJzOiBbe1xuICAgICAgbmFtZTogJ29mZnNldCcsXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIG9mZnNldDogWzAsIDhdXG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG4gIHJldHVybiBjb3JlLmpzeChcImRpdlwiLCB7XG4gICAgY3NzOiB7XG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXG4gICAgfVxuICB9LCBjb3JlLmpzeChIZWFkaW5nQnV0dG9uLCB7XG4gICAgc2hvd01lbnU6IHNob3dNZW51LFxuICAgIHRyaWdnZXI6IHRyaWdnZXIsXG4gICAgb25Ub2dnbGVTaG93TWVudTogKCkgPT4ge1xuICAgICAgc2V0U2hvd01lbnUoeCA9PiAheCk7XG4gICAgfVxuICB9KSwgc2hvd01lbnUgPyBjb3JlLmpzeCh0b29sYmFyLklubGluZURpYWxvZywgX2V4dGVuZHMoe1xuICAgIHJlZjogZGlhbG9nLnJlZlxuICB9LCBkaWFsb2cucHJvcHMpLCBjb3JlLmpzeChIZWFkaW5nRGlhbG9nLCB7XG4gICAgaGVhZGluZ0xldmVsczogaGVhZGluZ0xldmVscyxcbiAgICBvbkNsb3NlTWVudTogKCkgPT4ge1xuICAgICAgc2V0U2hvd01lbnUoZmFsc2UpO1xuICAgIH1cbiAgfSkpIDogbnVsbCk7XG59O1xuXG5mdW5jdGlvbiBIZWFkaW5nRGlhbG9nKF9yZWY1KSB7XG4gIGxldCB7XG4gICAgaGVhZGluZ0xldmVscyxcbiAgICBvbkNsb3NlTWVudVxuICB9ID0gX3JlZjU7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgdGV4dFN0eWxlc1xuICB9ID0gdXNlVG9vbGJhclN0YXRlKCk7XG4gIHJldHVybiBjb3JlLmpzeCh0b29sYmFyLlRvb2xiYXJHcm91cCwge1xuICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIlxuICB9LCBoZWFkaW5nTGV2ZWxzLm1hcChoTnVtID0+IHtcbiAgICBsZXQgVGFnID0gYGgke2hOdW19YDtcbiAgICBjb25zdCBpc1NlbGVjdGVkID0gdGV4dFN0eWxlcy5zZWxlY3RlZCA9PT0gaE51bTtcbiAgICByZXR1cm4gY29yZS5qc3godG9vbGJhci5Ub29sYmFyQnV0dG9uLCB7XG4gICAgICBrZXk6IGhOdW0sXG4gICAgICBpc1NlbGVjdGVkOiBpc1NlbGVjdGVkLFxuICAgICAgb25Nb3VzZURvd246IGV2ZW50ID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICAgIHNsYXRlLlRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBtYXRjaDogbiA9PiBuLnR5cGUgPT09ICdoZWFkaW5nJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNsYXRlLlRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgICAgICAgICBsZXZlbDogaE51bVxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ3BhcmFncmFwaCcgfHwgbm9kZS50eXBlID09PSAnaGVhZGluZydcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9uQ2xvc2VNZW51KCk7XG4gICAgICB9XG4gICAgfSwgY29yZS5qc3goVGFnLCBudWxsLCBcIkhlYWRpbmcgXCIsIGhOdW0pKTtcbiAgfSkpO1xufVxuXG5mdW5jdGlvbiBJbnNlcnRCbG9ja01lbnUoKSB7XG4gIGNvbnN0IFtzaG93TWVudSwgc2V0U2hvd01lbnVdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCB7XG4gICAgZGlhbG9nLFxuICAgIHRyaWdnZXJcbiAgfSA9IHBvcG92ZXIudXNlQ29udHJvbGxlZFBvcG92ZXIoe1xuICAgIGlzT3Blbjogc2hvd01lbnUsXG4gICAgb25DbG9zZTogKCkgPT4gc2V0U2hvd01lbnUoZmFsc2UpXG4gIH0sIHtcbiAgICBwbGFjZW1lbnQ6ICdib3R0b20tc3RhcnQnLFxuICAgIG1vZGlmaWVyczogW3tcbiAgICAgIG5hbWU6ICdvZmZzZXQnLFxuICAgICAgb3B0aW9uczoge1xuICAgICAgICBvZmZzZXQ6IFswLCA4XVxuICAgICAgfVxuICAgIH1dXG4gIH0pO1xuICByZXR1cm4gY29yZS5qc3goXCJkaXZcIiwge1xuICAgIGNzczoge1xuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJ1xuICAgIH1cbiAgfSwgY29yZS5qc3godG9vbHRpcC5Ub29sdGlwLCB7XG4gICAgY29udGVudDogY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIG51bGwsIFwiSW5zZXJ0IFwiLCBjb3JlLmpzeCh0b29sYmFyLktleWJvYXJkSW5Ub29sdGlwLCBudWxsLCBcIi9cIikpLFxuICAgIHdlaWdodDogXCJzdWJ0bGVcIlxuICB9LCBfcmVmNiA9PiB7XG4gICAgbGV0IHtcbiAgICAgIHJlZlxuICAgIH0gPSBfcmVmNixcbiAgICAgICAgYXR0cnMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZjYsIF9leGNsdWRlZDIpO1xuXG4gICAgcmV0dXJuIGNvcmUuanN4KHRvb2xiYXIuVG9vbGJhckJ1dHRvbiwgX2V4dGVuZHMoe1xuICAgICAgcmVmOiBhcHBseVJlZi5hcHBseVJlZnMocmVmLCB0cmlnZ2VyLnJlZiksXG4gICAgICBpc1ByZXNzZWQ6IHNob3dNZW51LFxuICAgICAgb25Nb3VzZURvd246IGV2ZW50ID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2V0U2hvd01lbnUodiA9PiAhdik7XG4gICAgICB9XG4gICAgfSwgdHJpZ2dlci5wcm9wcywgYXR0cnMpLCBjb3JlLmpzeChQbHVzSWNvbi5QbHVzSWNvbiwge1xuICAgICAgc2l6ZTogXCJzbWFsbFwiLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgc3Ryb2tlV2lkdGg6IDNcbiAgICAgIH1cbiAgICB9KSwgY29yZS5qc3goQ2hldnJvbkRvd25JY29uLkNoZXZyb25Eb3duSWNvbiwge1xuICAgICAgc2l6ZTogXCJzbWFsbFwiXG4gICAgfSkpO1xuICB9KSwgc2hvd01lbnUgPyBjb3JlLmpzeCh0b29sYmFyLklubGluZURpYWxvZywgX2V4dGVuZHMoe1xuICAgIHJlZjogZGlhbG9nLnJlZlxuICB9LCBkaWFsb2cucHJvcHMpLCBjb3JlLmpzeCh0b29sYmFyLlRvb2xiYXJHcm91cCwge1xuICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIlxuICB9LCBjb3JlLmpzeChSZWxhdGlvbnNoaXBCdXR0b24sIHtcbiAgICBvbkNsb3NlOiAoKSA9PiBzZXRTaG93TWVudShmYWxzZSlcbiAgfSksIGNvcmUuanN4KEJsb2NrQ29tcG9uZW50c0J1dHRvbnMsIHtcbiAgICBvbkNsb3NlOiAoKSA9PiBzZXRTaG93TWVudShmYWxzZSlcbiAgfSkpKSA6IG51bGwpO1xufVxuXG5mdW5jdGlvbiBJbmxpbmVNYXJrcyhfcmVmNykge1xuICBsZXQge1xuICAgIG1hcmtzXG4gIH0gPSBfcmVmNztcbiAgY29uc3QgW3Nob3dNZW51LCBzZXRTaG93TWVudV0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHtcbiAgICBkaWFsb2csXG4gICAgdHJpZ2dlclxuICB9ID0gcG9wb3Zlci51c2VDb250cm9sbGVkUG9wb3Zlcih7XG4gICAgaXNPcGVuOiBzaG93TWVudSxcbiAgICBvbkNsb3NlOiAoKSA9PiBzZXRTaG93TWVudShmYWxzZSlcbiAgfSwge1xuICAgIHBsYWNlbWVudDogJ2JvdHRvbS1zdGFydCcsXG4gICAgbW9kaWZpZXJzOiBbe1xuICAgICAgbmFtZTogJ29mZnNldCcsXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIG9mZnNldDogWzAsIDhdXG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG4gIHJldHVybiBjb3JlLmpzeChSZWFjdC5GcmFnbWVudCwgbnVsbCwgbWFya3MuYm9sZCAmJiBjb3JlLmpzeCh0b29sdGlwLlRvb2x0aXAsIHtcbiAgICBjb250ZW50OiBjb3JlLmpzeChSZWFjdC5GcmFnbWVudCwgbnVsbCwgXCJCb2xkXCIsIGNvcmUuanN4KHRvb2xiYXIuS2V5Ym9hcmRJblRvb2x0aXAsIG51bGwsIG1vZGlmaWVyS2V5VGV4dCwgXCJCXCIpKSxcbiAgICB3ZWlnaHQ6IFwic3VidGxlXCJcbiAgfSwgYXR0cnMgPT4gY29yZS5qc3goTWFya0J1dHRvbiwgX2V4dGVuZHMoe1xuICAgIHR5cGU6IFwiYm9sZFwiXG4gIH0sIGF0dHJzKSwgY29yZS5qc3goQm9sZEljb24uQm9sZEljb24sIHtcbiAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgc3R5bGU6IHtcbiAgICAgIHN0cm9rZVdpZHRoOiAzXG4gICAgfVxuICB9KSkpLCBtYXJrcy5pdGFsaWMgJiYgY29yZS5qc3godG9vbHRpcC5Ub29sdGlwLCB7XG4gICAgY29udGVudDogY29yZS5qc3goUmVhY3QuRnJhZ21lbnQsIG51bGwsIFwiSXRhbGljXCIsIGNvcmUuanN4KHRvb2xiYXIuS2V5Ym9hcmRJblRvb2x0aXAsIG51bGwsIG1vZGlmaWVyS2V5VGV4dCwgXCJJXCIpKSxcbiAgICB3ZWlnaHQ6IFwic3VidGxlXCJcbiAgfSwgYXR0cnMgPT4gY29yZS5qc3goTWFya0J1dHRvbiwgX2V4dGVuZHMoe1xuICAgIHR5cGU6IFwiaXRhbGljXCJcbiAgfSwgYXR0cnMpLCBjb3JlLmpzeChJdGFsaWNJY29uLkl0YWxpY0ljb24sIHtcbiAgICBzaXplOiBcInNtYWxsXCJcbiAgfSkpKSwgY29yZS5qc3godG9vbHRpcC5Ub29sdGlwLCB7XG4gICAgY29udGVudDogXCJNb3JlIGZvcm1hdHRpbmdcIixcbiAgICB3ZWlnaHQ6IFwic3VidGxlXCJcbiAgfSwgYXR0cnMgPT4gY29yZS5qc3goTW9yZUZvcm1hdHRpbmdCdXR0b24sIHtcbiAgICBpc09wZW46IHNob3dNZW51LFxuICAgIG9uVG9nZ2xlOiAoKSA9PiB7XG4gICAgICBzZXRTaG93TWVudSh2ID0+ICF2KTtcbiAgICB9LFxuICAgIHRyaWdnZXI6IHRyaWdnZXIsXG4gICAgYXR0cnM6IGF0dHJzXG4gIH0pKSwgc2hvd01lbnUgJiYgY29yZS5qc3goTW9yZUZvcm1hdHRpbmdEaWFsb2csIHtcbiAgICBvbkNsb3NlTWVudTogKCkgPT4ge1xuICAgICAgc2V0U2hvd01lbnUoZmFsc2UpO1xuICAgIH0sXG4gICAgZGlhbG9nOiBkaWFsb2csXG4gICAgbWFya3M6IG1hcmtzXG4gIH0pKTtcbn1cblxuZnVuY3Rpb24gTW9yZUZvcm1hdHRpbmdEaWFsb2coX3JlZjgpIHtcbiAgbGV0IHtcbiAgICBkaWFsb2csXG4gICAgbWFya3MsXG4gICAgb25DbG9zZU1lbnVcbiAgfSA9IF9yZWY4O1xuICAvLyBub3QgZG9pbmcgb3B0aW1pc2F0aW9ucyBpbiBoZXJlIGJlY2F1c2UgdGhpcyB3aWxsIG9ubHkgcmVuZGVyIHdoZW4gaXQncyBvcGVuXG4gIC8vIHdoaWNoIHdpbGwgYmUgcmFyZSBhbmQgeW91IHdvbid0IGJlIHR5cGluZyB3aGlsZSBpdCdzIG9wZW5cbiAgY29uc3Qge1xuICAgIGVkaXRvcixcbiAgICBjbGVhckZvcm1hdHRpbmc6IHtcbiAgICAgIGlzRGlzYWJsZWRcbiAgICB9XG4gIH0gPSB1c2VUb29sYmFyU3RhdGUoKTtcbiAgcmV0dXJuIGNvcmUuanN4KHRvb2xiYXIuSW5saW5lRGlhbG9nLCBfZXh0ZW5kcyh7XG4gICAgb25Nb3VzZURvd246IGV2ZW50ID0+IHtcbiAgICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT09ICdCVVRUT04nKSB7XG4gICAgICAgIG9uQ2xvc2VNZW51KCk7XG4gICAgICB9XG4gICAgfSxcbiAgICByZWY6IGRpYWxvZy5yZWZcbiAgfSwgZGlhbG9nLnByb3BzKSwgY29yZS5qc3godG9vbGJhci5Ub29sYmFyR3JvdXAsIHtcbiAgICBkaXJlY3Rpb246IFwiY29sdW1uXCJcbiAgfSwgbWFya3MudW5kZXJsaW5lICYmIGNvcmUuanN4KE1hcmtCdXR0b24sIHtcbiAgICB0eXBlOiBcInVuZGVybGluZVwiXG4gIH0sIGNvcmUuanN4KENvbnRlbnRJbkJ1dHRvbldpdGhTaG9ydGN1dCwge1xuICAgIGNvbnRlbnQ6IFwiVW5kZXJsaW5lXCIsXG4gICAgc2hvcnRjdXQ6IGAke21vZGlmaWVyS2V5VGV4dH1VYFxuICB9KSksIG1hcmtzLnN0cmlrZXRocm91Z2ggJiYgY29yZS5qc3goTWFya0J1dHRvbiwge1xuICAgIHR5cGU6IFwic3RyaWtldGhyb3VnaFwiXG4gIH0sIFwiU3RyaWtldGhyb3VnaFwiKSwgbWFya3MuY29kZSAmJiBjb3JlLmpzeChNYXJrQnV0dG9uLCB7XG4gICAgdHlwZTogXCJjb2RlXCJcbiAgfSwgXCJDb2RlXCIpLCBtYXJrcy5rZXlib2FyZCAmJiBjb3JlLmpzeChNYXJrQnV0dG9uLCB7XG4gICAgdHlwZTogXCJrZXlib2FyZFwiXG4gIH0sIFwiS2V5Ym9hcmRcIiksIG1hcmtzLnN1YnNjcmlwdCAmJiBjb3JlLmpzeChNYXJrQnV0dG9uLCB7XG4gICAgdHlwZTogXCJzdWJzY3JpcHRcIlxuICB9LCBcIlN1YnNjcmlwdFwiKSwgbWFya3Muc3VwZXJzY3JpcHQgJiYgY29yZS5qc3goTWFya0J1dHRvbiwge1xuICAgIHR5cGU6IFwic3VwZXJzY3JpcHRcIlxuICB9LCBcIlN1cGVyc2NyaXB0XCIpLCBjb3JlLmpzeCh0b29sYmFyLlRvb2xiYXJCdXR0b24sIHtcbiAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxuICAgIG9uTW91c2VEb3duOiBldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY2xlYXJGb3JtYXR0aW5nKGVkaXRvcik7XG4gICAgfVxuICB9LCBjb3JlLmpzeChDb250ZW50SW5CdXR0b25XaXRoU2hvcnRjdXQsIHtcbiAgICBjb250ZW50OiBcIkNsZWFyIEZvcm1hdHRpbmdcIixcbiAgICBzaG9ydGN1dDogYCR7bW9kaWZpZXJLZXlUZXh0fVxcXFxgXG4gIH0pKSkpO1xufVxuXG5mdW5jdGlvbiBDb250ZW50SW5CdXR0b25XaXRoU2hvcnRjdXQoX3JlZjkpIHtcbiAgbGV0IHtcbiAgICBjb250ZW50LFxuICAgIHNob3J0Y3V0XG4gIH0gPSBfcmVmOTtcbiAgY29uc3QgdGhlbWUgPSBjb3JlLnVzZVRoZW1lKCk7XG4gIHJldHVybiBjb3JlLmpzeChcInNwYW5cIiwge1xuICAgIGNzczoge1xuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcbiAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgd2lkdGg6ICcxMDAlJ1xuICAgIH1cbiAgfSwgY29yZS5qc3goXCJzcGFuXCIsIG51bGwsIGNvbnRlbnQpLCBjb3JlLmpzeChcImtiZFwiLCB7XG4gICAgY3NzOiB7XG4gICAgICBmb250RmFtaWx5OiAnaW5oZXJpdCcsXG4gICAgICBtYXJnaW5MZWZ0OiB0aGVtZS5zcGFjaW5nLnNtYWxsLFxuICAgICAgcGFkZGluZzogdGhlbWUuc3BhY2luZy54eHNtYWxsLFxuICAgICAgcGFkZGluZ0xlZnQ6IHRoZW1lLnNwYWNpbmcueHNtYWxsLFxuICAgICAgcGFkZGluZ1JpZ2h0OiB0aGVtZS5zcGFjaW5nLnhzbWFsbCxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhlbWUucGFsZXR0ZS5uZXV0cmFsNDAwLFxuICAgICAgYm9yZGVyUmFkaXVzOiB0aGVtZS5yYWRpaS54c21hbGwsXG4gICAgICBjb2xvcjogdGhlbWUuY29sb3JzLmZvcmVncm91bmREaW0sXG4gICAgICB3aGl0ZVNwYWNlOiAncHJlJ1xuICAgIH1cbiAgfSwgc2hvcnRjdXQpKTtcbn1cblxuZnVuY3Rpb24gTW9yZUZvcm1hdHRpbmdCdXR0b24oX3JlZjEwKSB7XG4gIGxldCB7XG4gICAgb25Ub2dnbGUsXG4gICAgaXNPcGVuLFxuICAgIHRyaWdnZXIsXG4gICAgYXR0cnNcbiAgfSA9IF9yZWYxMDtcbiAgY29uc3Qge1xuICAgIG1hcmtzXG4gIH0gPSB1c2VUb29sYmFyU3RhdGUoKTtcbiAgY29uc3QgaXNBY3RpdmUgPSBtYXJrcy5zdHJpa2V0aHJvdWdoLmlzU2VsZWN0ZWQgfHwgbWFya3MudW5kZXJsaW5lLmlzU2VsZWN0ZWQgfHwgbWFya3MuY29kZS5pc1NlbGVjdGVkIHx8IG1hcmtzLmtleWJvYXJkLmlzU2VsZWN0ZWQgfHwgbWFya3Muc3Vic2NyaXB0LmlzU2VsZWN0ZWQgfHwgbWFya3Muc3VwZXJzY3JpcHQuaXNTZWxlY3RlZDtcbiAgcmV0dXJuIFJlYWN0LnVzZU1lbW8oKCkgPT4gY29yZS5qc3godG9vbGJhci5Ub29sYmFyQnV0dG9uLCBfZXh0ZW5kcyh7XG4gICAgaXNQcmVzc2VkOiBpc09wZW4sXG4gICAgaXNTZWxlY3RlZDogaXNBY3RpdmUsXG4gICAgb25Nb3VzZURvd246IGV2ZW50ID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBvblRvZ2dsZSgpO1xuICAgIH1cbiAgfSwgdHJpZ2dlci5wcm9wcywgYXR0cnMsIHtcbiAgICByZWY6IGFwcGx5UmVmLmFwcGx5UmVmcyhhdHRycy5yZWYsIHRyaWdnZXIucmVmKVxuICB9KSwgY29yZS5qc3goTW9yZUhvcml6b250YWxJY29uLk1vcmVIb3Jpem9udGFsSWNvbiwge1xuICAgIHNpemU6IFwic21hbGxcIlxuICB9KSksIFtpc0FjdGl2ZSwgb25Ub2dnbGUsIGlzT3BlbiwgdHJpZ2dlciwgYXR0cnNdKTtcbn0gLy8gQ3VzdG9tIChub24tZmVhdGhlcikgSWNvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbmNvbnN0IEljb25CYXNlID0gcHJvcHMgPT4gY29yZS5qc3goXCJzdmdcIiwgX2V4dGVuZHMoe1xuICBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLFxuICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICBmb2N1c2FibGU6IFwiZmFsc2VcIixcbiAgaGVpZ2h0OiBcIjE2XCIsXG4gIHJvbGU6IFwicHJlc2VudGF0aW9uXCIsXG4gIHZpZXdCb3g6IFwiMCAwIDE2IDE2XCIsXG4gIHdpZHRoOiBcIjE2XCJcbn0sIHByb3BzKSk7XG5cbmNvbnN0IEJ1bGxldExpc3RJY29uID0gKCkgPT4gY29yZS5qc3goSWNvbkJhc2UsIG51bGwsIGNvcmUuanN4KFwicGF0aFwiLCB7XG4gIGQ6IFwiTTIgNGExIDEgMCAxMDAtMiAxIDEgMCAwMDAgMnptMy43NS0xLjVhLjc1Ljc1IDAgMDAwIDEuNWg4LjVhLjc1Ljc1IDAgMDAwLTEuNWgtOC41em0wIDVhLjc1Ljc1IDAgMDAwIDEuNWg4LjVhLjc1Ljc1IDAgMDAwLTEuNWgtOC41em0wIDVhLjc1Ljc1IDAgMDAwIDEuNWg4LjVhLjc1Ljc1IDAgMDAwLTEuNWgtOC41ek0zIDhhMSAxIDAgMTEtMiAwIDEgMSAwIDAxMiAwem0tMSA2YTEgMSAwIDEwMC0yIDEgMSAwIDAwMCAyelwiXG59KSk7XG5cbmNvbnN0IE51bWJlcmVkTGlzdEljb24gPSAoKSA9PiBjb3JlLmpzeChJY29uQmFzZSwgbnVsbCwgY29yZS5qc3goXCJwYXRoXCIsIHtcbiAgZDogXCJNMi4wMDMgMi41YS41LjUgMCAwMC0uNzIzLS40NDdsLTEuMDAzLjVhLjUuNSAwIDAwLjQ0Ni44OTVsLjI4LS4xNFY2SC41YS41LjUgMCAwMDAgMWgyLjAwNmEuNS41IDAgMTAwLTFoLS41MDNWMi41ek01IDMuMjVhLjc1Ljc1IDAgMDEuNzUtLjc1aDguNWEuNzUuNzUgMCAwMTAgMS41aC04LjVBLjc1Ljc1IDAgMDE1IDMuMjV6bTAgNWEuNzUuNzUgMCAwMS43NS0uNzVoOC41YS43NS43NSAwIDAxMCAxLjVoLTguNUEuNzUuNzUgMCAwMTUgOC4yNXptMCA1YS43NS43NSAwIDAxLjc1LS43NWg4LjVhLjc1Ljc1IDAgMDEwIDEuNWgtOC41YS43NS43NSAwIDAxLS43NS0uNzV6TS45MjQgMTAuMzJsLjAwMy0uMDA0YS44NTEuODUxIDAgMDEuMTQ0LS4xNTNBLjY2LjY2IDAgMDExLjUgMTBjLjE5NSAwIC4zMDYuMDY4LjM3NC4xNDZhLjU3LjU3IDAgMDEuMTI4LjM3NmMwIC40NTMtLjI2OS42ODItLjggMS4wNzhsLS4wMzUuMDI1Qy42OTIgMTEuOTggMCAxMi40OTUgMCAxMy41YS41LjUgMCAwMC41LjVoMi4wMDNhLjUuNSAwIDAwMC0xSDEuMTQ2Yy4xMzItLjE5Ny4zNTEtLjM3Mi42NTQtLjU5N2wuMDQ3LS4wMzVjLjQ3LS4zNSAxLjE1Ni0uODU4IDEuMTU2LTEuODQ1IDAtLjM2NS0uMTE4LS43NDQtLjM3Ny0xLjAzOC0uMjY4LS4zMDMtLjY1OC0uNDg0LTEuMTI2LS40ODQtLjQ4IDAtLjg0LjIwMi0xLjA2OC4zOTJhMS44NTggMS44NTggMCAwMC0uMzQ4LjM4NGwtLjAwNy4wMTEtLjAwMi4wMDQtLjAwMS4wMDItLjAwMS4wMDFhLjUuNSAwIDAwLjg1MS41MjV6TS41IDEwLjA1NWwtLjQyNy0uMjYuNDI3LjI2elwiXG59KSk7XG5cbmNvbnN0IGhlYWRpbmdTdHlsZXNNYXAgPSB7XG4gIGgxOiB7XG4gICAgZm9udFNpemU6ICcyLjJyZW0nXG4gIH0sXG4gIGgyOiB7XG4gICAgZm9udFNpemU6ICcxLjhyZW0nXG4gIH0sXG4gIGgzOiB7XG4gICAgZm9udFNpemU6ICcxLjVyZW0nXG4gIH0sXG4gIGg0OiB7XG4gICAgZm9udFNpemU6ICcxLjJyZW0nXG4gIH0sXG4gIGg1OiB7XG4gICAgZm9udFNpemU6ICcwLjgzcmVtJ1xuICB9LFxuICBoNjoge1xuICAgIGZvbnRTaXplOiAnMC42N3JlbSdcbiAgfVxufTtcbmNvbnN0IEhlYWRpbmdFbGVtZW50ID0gX3JlZiA9PiB7XG4gIGxldCB7XG4gICAgYXR0cmlidXRlcyxcbiAgICBjaGlsZHJlbixcbiAgICBlbGVtZW50XG4gIH0gPSBfcmVmO1xuICBjb25zdCBUYWcgPSBgaCR7ZWxlbWVudC5sZXZlbH1gO1xuICBjb25zdCBoZWFkaW5nU3R5bGUgPSBoZWFkaW5nU3R5bGVzTWFwW1RhZ107XG4gIHJldHVybiBjb3JlLmpzeChUYWcsIF9leHRlbmRzKHt9LCBhdHRyaWJ1dGVzLCB7XG4gICAgY3NzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGhlYWRpbmdTdHlsZSksIHt9LCB7XG4gICAgICB0ZXh0QWxpZ246IGVsZW1lbnQudGV4dEFsaWduXG4gICAgfSlcbiAgfSksIGNoaWxkcmVuKTtcbn07XG5mdW5jdGlvbiB3aXRoSGVhZGluZyhlZGl0b3IpIHtcbiAgY29uc3Qge1xuICAgIGluc2VydEJyZWFrXG4gIH0gPSBlZGl0b3I7XG5cbiAgZWRpdG9yLmluc2VydEJyZWFrID0gKCkgPT4ge1xuICAgIGluc2VydEJyZWFrKCk7XG4gICAgY29uc3QgZW50cnkgPSBzbGF0ZS5FZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICBtYXRjaDogbiA9PiBuLnR5cGUgPT09ICdoZWFkaW5nJ1xuICAgIH0pO1xuICAgIGlmICghZW50cnkgfHwgIWVkaXRvci5zZWxlY3Rpb24gfHwgIXNsYXRlLlJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pKSByZXR1cm47XG4gICAgY29uc3QgcGF0aCA9IGVudHJ5WzFdO1xuXG4gICAgaWYgKCAvLyB3ZSB3YW50IHRvIHVud3JhcCB0aGUgaGVhZGluZyB3aGVuIHRoZSB1c2VyIGluc2VydGVkIGEgYnJlYWsgYXQgdGhlIGVuZCBvZiB0aGUgaGVhZGluZ1xuICAgIC8vIHdoZW4gdGhlIHVzZXIgaW5zZXJ0cyBhIGJyZWFrIGF0IHRoZSBlbmQgb2YgYSBoZWFkaW5nLCB0aGUgbmV3IGhlYWRpbmdcbiAgICAvLyB0aGF0IHdlIHdhbnQgdG8gdW53cmFwIHdpbGwgYmUgZW1wdHkgc28gdGhlIGVuZCB3aWxsIGJlIGVxdWFsIHRvIHRoZSBzZWxlY3Rpb25cbiAgICBzbGF0ZS5Qb2ludC5lcXVhbHMoc2xhdGUuRWRpdG9yLmVuZChlZGl0b3IsIHBhdGgpLCBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvcikpIHtcbiAgICAgIHNsYXRlLlRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIGF0OiBwYXRoXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIHdlIGFsc28gd2FudCB0byB1bndyYXAgdGhlIF9wcmV2aW91c18gaGVhZGluZyB3aGVuIHRoZSB1c2VyIGluc2VydGVkIGEgYnJlYWtcbiAgICAvLyBhdCB0aGUgc3RhcnQgb2YgdGhlIGhlYWRpbmcsIGVzc2VudGlhbGx5IGp1c3QgaW5zZXJ0aW5nIGFuIGVtcHR5IHBhcmFncmFwaCBhYm92ZSB0aGUgaGVhZGluZ1xuXG5cbiAgICBpZiAoIXNsYXRlLlBhdGguaGFzUHJldmlvdXMocGF0aCkpIHJldHVybjtcbiAgICBjb25zdCBwcmV2aW91c1BhdGggPSBzbGF0ZS5QYXRoLnByZXZpb3VzKHBhdGgpO1xuICAgIGNvbnN0IHByZXZpb3VzTm9kZSA9IHNsYXRlLk5vZGUuZ2V0KGVkaXRvciwgcHJldmlvdXNQYXRoKTtcblxuICAgIGlmIChwcmV2aW91c05vZGUudHlwZSA9PT0gJ2hlYWRpbmcnICYmIHByZXZpb3VzTm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgc2xhdGUuVGV4dC5pc1RleHQocHJldmlvdXNOb2RlLmNoaWxkcmVuWzBdKSAmJiBwcmV2aW91c05vZGUuY2hpbGRyZW5bMF0udGV4dCA9PT0gJycpIHtcbiAgICAgIHNsYXRlLlRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIGF0OiBwcmV2aW91c1BhdGhcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZWRpdG9yO1xufVxuXG4vLyBhbmQgVFMgZG9lc24ndCB1bmRlcnN0YW5kIHRoZSB0eXBlIG5hcnJvd2luZyB3aGVuIGRvaW5nIGEgc3ByZWFkIGZvciBzb21lIHJlYXNvblxuLy8gc28gdGhhdCdzIHdoeSB0aGluZ3MgYXJlbid0IGJlaW5nIHNwcmVhZCBpbiBzb21lIGNhc2VzXG5cbmNvbnN0IHJlbmRlckVsZW1lbnQgPSBwcm9wcyA9PiB7XG4gIHN3aXRjaCAocHJvcHMuZWxlbWVudC50eXBlKSB7XG4gICAgY2FzZSAnbGF5b3V0JzpcbiAgICAgIHJldHVybiBjb3JlLmpzeChMYXlvdXRDb250YWluZXIsIHtcbiAgICAgICAgYXR0cmlidXRlczogcHJvcHMuYXR0cmlidXRlcyxcbiAgICAgICAgY2hpbGRyZW46IHByb3BzLmNoaWxkcmVuLFxuICAgICAgICBlbGVtZW50OiBwcm9wcy5lbGVtZW50XG4gICAgICB9KTtcblxuICAgIGNhc2UgJ2xheW91dC1hcmVhJzpcbiAgICAgIHJldHVybiBjb3JlLmpzeChMYXlvdXRBcmVhLCBwcm9wcyk7XG5cbiAgICBjYXNlICdjb2RlJzpcbiAgICAgIHJldHVybiBjb3JlLmpzeChDb2RlRWxlbWVudCwgcHJvcHMpO1xuXG4gICAgY2FzZSAnY29tcG9uZW50LWJsb2NrJzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIGNvcmUuanN4KENvbXBvbmVudEJsb2Nrc0VsZW1lbnQsIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzOiBwcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlbixcbiAgICAgICAgICBlbGVtZW50OiBwcm9wcy5lbGVtZW50XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgY2FzZSAnY29tcG9uZW50LWlubGluZS1wcm9wJzpcbiAgICBjYXNlICdjb21wb25lbnQtYmxvY2stcHJvcCc6XG4gICAgICByZXR1cm4gY29yZS5qc3goQ29tcG9uZW50SW5saW5lUHJvcCwgcHJvcHMpO1xuXG4gICAgY2FzZSAnaGVhZGluZyc6XG4gICAgICByZXR1cm4gY29yZS5qc3goSGVhZGluZ0VsZW1lbnQsIHtcbiAgICAgICAgYXR0cmlidXRlczogcHJvcHMuYXR0cmlidXRlcyxcbiAgICAgICAgY2hpbGRyZW46IHByb3BzLmNoaWxkcmVuLFxuICAgICAgICBlbGVtZW50OiBwcm9wcy5lbGVtZW50XG4gICAgICB9KTtcblxuICAgIGNhc2UgJ2xpbmsnOlxuICAgICAgcmV0dXJuIGNvcmUuanN4KExpbmtFbGVtZW50LCB7XG4gICAgICAgIGF0dHJpYnV0ZXM6IHByb3BzLmF0dHJpYnV0ZXMsXG4gICAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlbixcbiAgICAgICAgZWxlbWVudDogcHJvcHMuZWxlbWVudFxuICAgICAgfSk7XG5cbiAgICBjYXNlICdvcmRlcmVkLWxpc3QnOlxuICAgICAgcmV0dXJuIGNvcmUuanN4KFwib2xcIiwgcHJvcHMuYXR0cmlidXRlcywgcHJvcHMuY2hpbGRyZW4pO1xuXG4gICAgY2FzZSAndW5vcmRlcmVkLWxpc3QnOlxuICAgICAgcmV0dXJuIGNvcmUuanN4KFwidWxcIiwgcHJvcHMuYXR0cmlidXRlcywgcHJvcHMuY2hpbGRyZW4pO1xuXG4gICAgY2FzZSAnbGlzdC1pdGVtJzpcbiAgICAgIHJldHVybiBjb3JlLmpzeChcImxpXCIsIHByb3BzLmF0dHJpYnV0ZXMsIHByb3BzLmNoaWxkcmVuKTtcblxuICAgIGNhc2UgJ2xpc3QtaXRlbS1jb250ZW50JzpcbiAgICAgIHJldHVybiBjb3JlLmpzeChcInNwYW5cIiwgcHJvcHMuYXR0cmlidXRlcywgcHJvcHMuY2hpbGRyZW4pO1xuXG4gICAgY2FzZSAnYmxvY2txdW90ZSc6XG4gICAgICByZXR1cm4gY29yZS5qc3goQmxvY2txdW90ZUVsZW1lbnQsIHByb3BzKTtcblxuICAgIGNhc2UgJ3JlbGF0aW9uc2hpcCc6XG4gICAgICByZXR1cm4gY29yZS5qc3goUmVsYXRpb25zaGlwRWxlbWVudCwge1xuICAgICAgICBhdHRyaWJ1dGVzOiBwcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIGVsZW1lbnQ6IHByb3BzLmVsZW1lbnRcbiAgICAgIH0pO1xuXG4gICAgY2FzZSAnZGl2aWRlcic6XG4gICAgICByZXR1cm4gY29yZS5qc3goRGl2aWRlckVsZW1lbnQsIHByb3BzKTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gY29yZS5qc3goXCJwXCIsIF9leHRlbmRzKHtcbiAgICAgICAgY3NzOiB7XG4gICAgICAgICAgdGV4dEFsaWduOiBwcm9wcy5lbGVtZW50LnRleHRBbGlnblxuICAgICAgICB9XG4gICAgICB9LCBwcm9wcy5hdHRyaWJ1dGVzKSwgcHJvcHMuY2hpbGRyZW4pO1xuICB9XG59O1xuLyogQmxvY2sgRWxlbWVudHMgKi9cblxuY29uc3QgQ29kZUVsZW1lbnQgPSBfcmVmID0+IHtcbiAgbGV0IHtcbiAgICBhdHRyaWJ1dGVzLFxuICAgIGNoaWxkcmVuXG4gIH0gPSBfcmVmO1xuICBjb25zdCB7XG4gICAgY29sb3JzLFxuICAgIHJhZGlpLFxuICAgIHNwYWNpbmcsXG4gICAgdHlwb2dyYXBoeVxuICB9ID0gY29yZS51c2VUaGVtZSgpO1xuICByZXR1cm4gY29yZS5qc3goXCJwcmVcIiwgX2V4dGVuZHMoe1xuICAgIHNwZWxsQ2hlY2s6IFwiZmFsc2VcIixcbiAgICBjc3M6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogY29sb3JzLmJhY2tncm91bmREaW0sXG4gICAgICBib3JkZXI6IGAxcHggc29saWQgJHtjb2xvcnMuYm9yZGVyfWAsXG4gICAgICBib3JkZXJSYWRpdXM6IHJhZGlpLnhzbWFsbCxcbiAgICAgIGZvbnRGYW1pbHk6IHR5cG9ncmFwaHkuZm9udEZhbWlseS5tb25vc3BhY2UsXG4gICAgICBmb250U2l6ZTogdHlwb2dyYXBoeS5mb250U2l6ZS5zbWFsbCxcbiAgICAgIHBhZGRpbmc6IGAke3NwYWNpbmcuc21hbGx9cHggJHtzcGFjaW5nLm1lZGl1bX1weGBcbiAgICB9XG4gIH0sIGF0dHJpYnV0ZXMpLCBjb3JlLmpzeChcImNvZGVcIiwge1xuICAgIGNzczoge1xuICAgICAgZm9udEZhbWlseTogJ2luaGVyaXQnXG4gICAgfVxuICB9LCBjaGlsZHJlbikpO1xufTtcblxuY29uc3QgRGl2aWRlckVsZW1lbnQgPSBfcmVmMiA9PiB7XG4gIGxldCB7XG4gICAgYXR0cmlidXRlcyxcbiAgICBjaGlsZHJlblxuICB9ID0gX3JlZjI7XG4gIGNvbnN0IHtcbiAgICBjb2xvcnMsXG4gICAgc3BhY2luZ1xuICB9ID0gY29yZS51c2VUaGVtZSgpO1xuICBjb25zdCBzZWxlY3RlZCA9IHNsYXRlUmVhY3QudXNlU2VsZWN0ZWQoKTtcbiAgcmV0dXJuIGNvcmUuanN4KFwiZGl2XCIsIF9leHRlbmRzKHt9LCBhdHRyaWJ1dGVzLCB7XG4gICAgY3NzOiB7XG4gICAgICBwYWRkaW5nQm90dG9tOiBzcGFjaW5nLm1lZGl1bSxcbiAgICAgIHBhZGRpbmdUb3A6IHNwYWNpbmcubWVkaXVtLFxuICAgICAgbWFyZ2luQm90dG9tOiBzcGFjaW5nLm1lZGl1bSxcbiAgICAgIG1hcmdpblRvcDogc3BhY2luZy5tZWRpdW0sXG4gICAgICBjYXJldENvbG9yOiAndHJhbnNwYXJlbnQnXG4gICAgfVxuICB9KSwgY29yZS5qc3goXCJoclwiLCB7XG4gICAgY3NzOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHNlbGVjdGVkID8gY29sb3JzLmxpbmtDb2xvciA6IGNvbG9ycy5ib3JkZXIsXG4gICAgICBib3JkZXI6IDAsXG4gICAgICBoZWlnaHQ6IDJcbiAgICB9XG4gIH0pLCBjaGlsZHJlbik7XG59O1xuXG5jb25zdCBhbGxNYXJrZG93blNob3J0Y3V0cyA9IHtcbiAgYm9sZDogWycqKicsICdfXyddLFxuICBpdGFsaWM6IFsnKicsICdfJ10sXG4gIHN0cmlrZXRocm91Z2g6IFsnfn4nXSxcbiAgY29kZTogWydgJ11cbn07XG5cbmZ1bmN0aW9uIGFwcGx5TWFyayhlZGl0b3IsIG1hcmssIHNob3J0Y3V0VGV4dCwgc3RhcnRPZlN0YXJ0UG9pbnQpIHtcbiAgLy8gc28gdGhhdCB0aGlzIHN0YXJ0cyBhIG5ldyB1bmRvIGdyb3VwXG4gIGVkaXRvci5oaXN0b3J5LnVuZG9zLnB1c2goW10pO1xuICBjb25zdCBzdGFydFBvaW50UmVmID0gc2xhdGUuRWRpdG9yLnBvaW50UmVmKGVkaXRvciwgc3RhcnRPZlN0YXJ0UG9pbnQpO1xuICBzbGF0ZS5UcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHtcbiAgICBhdDogZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IsXG4gICAgZGlzdGFuY2U6IHNob3J0Y3V0VGV4dC5sZW5ndGgsXG4gICAgcmV2ZXJzZTogdHJ1ZVxuICB9KTtcbiAgc2xhdGUuVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7XG4gICAgYXQ6IHN0YXJ0T2ZTdGFydFBvaW50LFxuICAgIGRpc3RhbmNlOiBzaG9ydGN1dFRleHQubGVuZ3RoXG4gIH0pO1xuICBzbGF0ZS5UcmFuc2Zvcm1zLnNldE5vZGVzKGVkaXRvciwge1xuICAgIFttYXJrXTogdHJ1ZVxuICB9LCB7XG4gICAgbWF0Y2g6IHNsYXRlLlRleHQuaXNUZXh0LFxuICAgIHNwbGl0OiB0cnVlLFxuICAgIGF0OiB7XG4gICAgICBhbmNob3I6IHN0YXJ0UG9pbnRSZWYudW5yZWYoKSxcbiAgICAgIGZvY3VzOiBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvclxuICAgIH1cbiAgfSk7IC8vIG9uY2UgeW91J3ZlIGVuZGVkIHRoZSBzaG9ydGN1dCwgeW91J3JlIGRvbmUgd2l0aCB0aGUgbWFya1xuICAvLyBzbyB3ZSBuZWVkIHRvIHJlbW92ZSBpdCBzbyB0aGUgdGV4dCB5b3UgaW5zZXJ0IGFmdGVyIGRvZXNuJ3QgaGF2ZSBpdFxuXG4gIGVkaXRvci5yZW1vdmVNYXJrKG1hcmspO1xufVxuXG5mdW5jdGlvbiB3aXRoTWFya3MoZWRpdG9yRG9jdW1lbnRGZWF0dXJlcywgY29tcG9uZW50QmxvY2tzLCBlZGl0b3IpIHtcbiAgY29uc3Qge1xuICAgIGluc2VydFRleHQsXG4gICAgaW5zZXJ0QnJlYWtcbiAgfSA9IGVkaXRvcjtcblxuICBlZGl0b3IuaW5zZXJ0QnJlYWsgPSAoKSA9PiB7XG4gICAgaW5zZXJ0QnJlYWsoKTtcbiAgICBjb25zdCBtYXJrc0FmdGVySW5zZXJ0QnJlYWsgPSBzbGF0ZS5FZGl0b3IubWFya3MoZWRpdG9yKTtcbiAgICBpZiAoIW1hcmtzQWZ0ZXJJbnNlcnRCcmVhayB8fCAhZWRpdG9yLnNlbGVjdGlvbikgcmV0dXJuO1xuICAgIGNvbnN0IHBhcmVudEJsb2NrID0gc2xhdGUuRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IG5vZGUgPT4gc2xhdGUuRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBub2RlKVxuICAgIH0pO1xuICAgIGlmICghcGFyZW50QmxvY2spIHJldHVybjtcbiAgICBjb25zdCBwb2ludCA9IEVkaXRvckFmdGVyQnV0SWdub3JpbmdpbmdQb2ludHNXaXRoTm9Db250ZW50KGVkaXRvciwgZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IpO1xuICAgIGNvbnN0IG1hcmtzQWZ0ZXJJbnNlcnRCcmVha0FyciA9IE9iamVjdC5rZXlzKG1hcmtzQWZ0ZXJJbnNlcnRCcmVhayk7XG5cbiAgICBpZiAoIXBvaW50IHx8ICFzbGF0ZS5QYXRoLmlzRGVzY2VuZGFudChwb2ludC5wYXRoLCBwYXJlbnRCbG9ja1sxXSkpIHtcbiAgICAgIGZvciAoY29uc3QgbWFyayBvZiBtYXJrc0FmdGVySW5zZXJ0QnJlYWtBcnIpIHtcbiAgICAgICAgZWRpdG9yLnJlbW92ZU1hcmsobWFyayk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0ZXh0Tm9kZSA9IHNsYXRlLk5vZGUuZ2V0KGVkaXRvciwgcG9pbnQucGF0aCk7XG5cbiAgICBmb3IgKGNvbnN0IG1hcmsgb2YgbWFya3NBZnRlckluc2VydEJyZWFrQXJyKSB7XG4gICAgICBpZiAoIXRleHROb2RlW21hcmtdKSB7XG4gICAgICAgIGVkaXRvci5yZW1vdmVNYXJrKG1hcmspO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCBzZWxlY3RlZE1hcmtkb3duU2hvcnRjdXRzID0ge307XG4gIGNvbnN0IGVuYWJsZWRNYXJrcyA9IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5pbmxpbmVNYXJrcztcbiAgT2JqZWN0LmtleXMoYWxsTWFya2Rvd25TaG9ydGN1dHMpLmZvckVhY2gobWFyayA9PiB7XG4gICAgaWYgKGVuYWJsZWRNYXJrc1ttYXJrXSkge1xuICAgICAgc2VsZWN0ZWRNYXJrZG93blNob3J0Y3V0c1ttYXJrXSA9IGFsbE1hcmtkb3duU2hvcnRjdXRzW21hcmtdO1xuICAgIH1cbiAgfSk7XG4gIGlmIChPYmplY3Qua2V5cyhzZWxlY3RlZE1hcmtkb3duU2hvcnRjdXRzKS5sZW5ndGggPT09IDApIHJldHVybiBlZGl0b3I7XG5cbiAgZWRpdG9yLmluc2VydFRleHQgPSB0ZXh0ID0+IHtcbiAgICBpbnNlcnRUZXh0KHRleHQpO1xuXG4gICAgaWYgKGVkaXRvci5zZWxlY3Rpb24gJiYgc2xhdGUuUmFuZ2UuaXNDb2xsYXBzZWQoZWRpdG9yLnNlbGVjdGlvbikpIHtcbiAgICAgIGZvciAoY29uc3QgW21hcmssIHNob3J0Y3V0c10gb2YgT2JqZWN0LmVudHJpZXMoc2VsZWN0ZWRNYXJrZG93blNob3J0Y3V0cykpIHtcbiAgICAgICAgZm9yIChjb25zdCBzaG9ydGN1dFRleHQgb2Ygc2hvcnRjdXRzKSB7XG4gICAgICAgICAgaWYgKHRleHQgPT09IHNob3J0Y3V0VGV4dFtzaG9ydGN1dFRleHQubGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgbm90IGlubGluZWQgYmVjYXVzZVxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3N3Yy1wcm9qZWN0L3N3Yy9pc3N1ZXMvMjYyMlxuICAgICAgICAgICAgY29uc3Qgc3RhcnRPZkJsb2NrID0gZ2V0U3RhcnRPZkJsb2NrKGVkaXRvcik7XG4gICAgICAgICAgICBsZXQgc3RhcnRPZkJsb2NrVG9FbmRPZlNob3J0Y3V0U3RyaW5nID0gc2xhdGUuRWRpdG9yLnN0cmluZyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYW5jaG9yOiBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvcixcbiAgICAgICAgICAgICAgZm9jdXM6IHN0YXJ0T2ZCbG9ja1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBoYXNXaGl0ZXNwYWNlQmVmb3JlRW5kT2ZTaG9ydGN1dCA9IC9cXHMvLnRlc3Qoc3RhcnRPZkJsb2NrVG9FbmRPZlNob3J0Y3V0U3RyaW5nLnN1YnN0cigtc2hvcnRjdXRUZXh0Lmxlbmd0aCAtIDEsIDEpKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZE9mU2hvcnRjdXRDb250YWluc0V4cGVjdGVkQ29udGVudCA9IHNob3J0Y3V0VGV4dCA9PT0gc3RhcnRPZkJsb2NrVG9FbmRPZlNob3J0Y3V0U3RyaW5nLnNsaWNlKC1zaG9ydGN1dFRleHQubGVuZ3RoKTtcblxuICAgICAgICAgICAgaWYgKGhhc1doaXRlc3BhY2VCZWZvcmVFbmRPZlNob3J0Y3V0IHx8ICFlbmRPZlNob3J0Y3V0Q29udGFpbnNFeHBlY3RlZENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHN0clRvTWF0Y2hPbiA9IHN0YXJ0T2ZCbG9ja1RvRW5kT2ZTaG9ydGN1dFN0cmluZy5zbGljZSgwLCAtc2hvcnRjdXRUZXh0Lmxlbmd0aCAtIDEpOyAvLyBUT0RPOiB1c2UgcmVnZXggcHJvYnNcblxuICAgICAgICAgICAgZm9yIChjb25zdCBbb2Zmc2V0RnJvbVN0YXJ0T2ZCbG9ja10gb2YgWy4uLnN0clRvTWF0Y2hPbl0ucmV2ZXJzZSgpLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICBjb25zdCBleHBlY3RlZFNob3J0Y3V0VGV4dCA9IHN0clRvTWF0Y2hPbi5zdWJzdHIob2Zmc2V0RnJvbVN0YXJ0T2ZCbG9jaywgc2hvcnRjdXRUZXh0Lmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgaWYgKGV4cGVjdGVkU2hvcnRjdXRUZXh0ICE9PSBzaG9ydGN1dFRleHQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNvbnN0IHN0YXJ0T2ZTdGFydE9mU2hvcnRjdXQgPSBvZmZzZXRGcm9tU3RhcnRPZkJsb2NrID09PSAwID8gc3RhcnRPZkJsb2NrIDogRWRpdG9yQWZ0ZXJCdXRJZ25vcmluZ2luZ1BvaW50c1dpdGhOb0NvbnRlbnQoZWRpdG9yLCBzdGFydE9mQmxvY2ssIHtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogb2Zmc2V0RnJvbVN0YXJ0T2ZCbG9ja1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgY29uc3QgZW5kT2ZTdGFydE9mU2hvcnRjdXQgPSBzbGF0ZS5FZGl0b3IuYWZ0ZXIoZWRpdG9yLCBzdGFydE9mU3RhcnRPZlNob3J0Y3V0LCB7XG4gICAgICAgICAgICAgICAgZGlzdGFuY2U6IHNob3J0Y3V0VGV4dC5sZW5ndGhcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgaWYgKG9mZnNldEZyb21TdGFydE9mQmxvY2sgIT09IDAgJiYgIS9cXHMvLnRlc3Qoc2xhdGUuRWRpdG9yLnN0cmluZyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICBhbmNob3I6IHNsYXRlLkVkaXRvci5iZWZvcmUoZWRpdG9yLCBzdGFydE9mU3RhcnRPZlNob3J0Y3V0LCB7XG4gICAgICAgICAgICAgICAgICB1bml0OiAnY2hhcmFjdGVyJ1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGZvY3VzOiBzdGFydE9mU3RhcnRPZlNob3J0Y3V0XG4gICAgICAgICAgICAgIH0pKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY29uc3QgY29udGVudEJldHdlZW5TaG9ydGN1dHMgPSBzbGF0ZS5FZGl0b3Iuc3RyaW5nKGVkaXRvciwge1xuICAgICAgICAgICAgICAgIGFuY2hvcjogZW5kT2ZTdGFydE9mU2hvcnRjdXQsXG4gICAgICAgICAgICAgICAgZm9jdXM6IGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yXG4gICAgICAgICAgICAgIH0pLnNsaWNlKDAsIC1zaG9ydGN1dFRleHQubGVuZ3RoKTtcblxuICAgICAgICAgICAgICBpZiAoY29udGVudEJldHdlZW5TaG9ydGN1dHMgPT09ICcnIHx8IC9cXHMvLnRlc3QoY29udGVudEJldHdlZW5TaG9ydGN1dHNbMF0pKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH0gLy8gdGhpcyBpcyBhIGJpdCBvZiBhIHdlaXJkIG9uZVxuICAgICAgICAgICAgICAvLyBsZXQncyBzYXkgeW91IGhhZCA8dGV4dD5fX3RoaW5nIF88Y3Vyc29yIC8+PC90ZXh0PiBhbmQgeW91IGluc2VydCBgX2AuXG4gICAgICAgICAgICAgIC8vIHdpdGhvdXQgdGhlIGJlbG93LCB0aGF0IHdvdWxkIHR1cm4gaW50byA8dGV4dCBpdGFsaWM+X3RoaW5nIF88Y3Vyc29yIC8+PC90ZXh0PlxuICAgICAgICAgICAgICAvLyBidXQgaXQncyBwcm9iYWJseSBtZWFudCB0byBiZSBib2xkIGJ1dCBpdCdzIG5vdCBiZWNhdXNlIG9mIHRoZSBzcGFjZSBiZWZvcmUgdGhlIGVuZGluZyBfXG4gICAgICAgICAgICAgIC8vIHRoZXJlJ3MgcHJvYmFibHkgYSBiZXR0ZXIgd2F5IHRvIGRvIHRoaXMgYnV0IG1laCwgdGhpcyB3b3Jrc1xuXG5cbiAgICAgICAgICAgICAgaWYgKG1hcmsgPT09ICdpdGFsaWMnICYmIChjb250ZW50QmV0d2VlblNob3J0Y3V0c1swXSA9PT0gJ18nIHx8IGNvbnRlbnRCZXR3ZWVuU2hvcnRjdXRzWzBdID09PSAnKicpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjb25zdCBhbmNlc3RvckNvbXBvbmVudENoaWxkRmllbGREb2N1bWVudEZlYXR1cmVzID0gZ2V0QW5jZXN0b3JDb21wb25lbnRDaGlsZEZpZWxkRG9jdW1lbnRGZWF0dXJlcyhlZGl0b3IsIGVkaXRvckRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2Nrcyk7XG5cbiAgICAgICAgICAgICAgaWYgKGFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMgJiYgYW5jZXN0b3JDb21wb25lbnRDaGlsZEZpZWxkRG9jdW1lbnRGZWF0dXJlcy5pbmxpbmVNYXJrcyAhPT0gJ2luaGVyaXQnICYmIGFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMuaW5saW5lTWFya3NbbWFya10gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBhcHBseU1hcmsoZWRpdG9yLCBtYXJrLCBzaG9ydGN1dFRleHQsIHN0YXJ0T2ZTdGFydE9mU2hvcnRjdXQpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBlZGl0b3I7XG59XG5cbmZ1bmN0aW9uIGdldFN0YXJ0T2ZCbG9jayhlZGl0b3IpIHtcbiAgcmV0dXJuIHNsYXRlLkVkaXRvci5zdGFydChlZGl0b3IsIHNsYXRlLkVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICBtYXRjaDogbm9kZSA9PiBzbGF0ZS5FZGl0b3IuaXNCbG9jayhlZGl0b3IsIG5vZGUpXG4gIH0pWzFdKTtcbn1cblxubGV0IG5vb3AgPSAoKSA9PiB7fTtcblxuZnVuY3Rpb24gZ2V0T3B0aW9ucyh0b29sYmFyU3RhdGUsIGNvbXBvbmVudEJsb2NrcywgcmVsYXRpb25zaGlwcykge1xuICBjb25zdCBvcHRpb25zID0gWy4uLk9iamVjdC5lbnRyaWVzKHJlbGF0aW9uc2hpcHMpLmZpbHRlcih4ID0+IHhbMV0ua2luZCA9PT0gJ2lubGluZScpLm1hcChfcmVmID0+IHtcbiAgICBsZXQgW3JlbGF0aW9uc2hpcCwge1xuICAgICAgbGFiZWxcbiAgICB9XSA9IF9yZWY7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhYmVsLFxuICAgICAgaW5zZXJ0OiBlZGl0b3IgPT4ge1xuICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIHR5cGU6ICdyZWxhdGlvbnNoaXAnLFxuICAgICAgICAgIHJlbGF0aW9uc2hpcCxcbiAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KSwgLi4uT2JqZWN0LmtleXMoY29tcG9uZW50QmxvY2tzKS5tYXAoa2V5ID0+ICh7XG4gICAgbGFiZWw6IGNvbXBvbmVudEJsb2Nrc1trZXldLmxhYmVsLFxuICAgIGluc2VydDogZWRpdG9yID0+IHtcbiAgICAgIGluc2VydENvbXBvbmVudEJsb2NrKGVkaXRvciwgY29tcG9uZW50QmxvY2tzLCBrZXksIHJlbGF0aW9uc2hpcHMpO1xuICAgIH1cbiAgfSkpLCAuLi50b29sYmFyU3RhdGUudGV4dFN0eWxlcy5hbGxvd2VkSGVhZGluZ0xldmVscy5tYXAobGV2ZWwgPT4gKHtcbiAgICBsYWJlbDogYEhlYWRpbmcgJHtsZXZlbH1gLFxuXG4gICAgaW5zZXJ0KGVkaXRvcikge1xuICAgICAgaW5zZXJ0Tm9kZXNCdXRSZXBsYWNlSWZTZWxlY3Rpb25Jc0F0RW1wdHlQYXJhZ3JhcGhPckhlYWRpbmcoZWRpdG9yLCB7XG4gICAgICAgIHR5cGU6ICdoZWFkaW5nJyxcbiAgICAgICAgbGV2ZWwsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSkpLCAhdG9vbGJhclN0YXRlLmJsb2NrcXVvdGUuaXNEaXNhYmxlZCAmJiB0b29sYmFyU3RhdGUuZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmJsb2NrVHlwZXMuYmxvY2txdW90ZSAmJiB7XG4gICAgbGFiZWw6ICdCbG9ja3F1b3RlJyxcblxuICAgIGluc2VydChlZGl0b3IpIHtcbiAgICAgIGluc2VydE5vZGVzQnV0UmVwbGFjZUlmU2VsZWN0aW9uSXNBdEVtcHR5UGFyYWdyYXBoT3JIZWFkaW5nKGVkaXRvciwge1xuICAgICAgICB0eXBlOiAnYmxvY2txdW90ZScsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSwgIXRvb2xiYXJTdGF0ZS5jb2RlLmlzRGlzYWJsZWQgJiYgdG9vbGJhclN0YXRlLmVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5ibG9ja1R5cGVzLmNvZGUgJiYge1xuICAgIGxhYmVsOiAnQ29kZSBibG9jaycsXG5cbiAgICBpbnNlcnQoZWRpdG9yKSB7XG4gICAgICBpbnNlcnROb2Rlc0J1dFJlcGxhY2VJZlNlbGVjdGlvbklzQXRFbXB0eVBhcmFncmFwaE9ySGVhZGluZyhlZGl0b3IsIHtcbiAgICAgICAgdHlwZTogJ2NvZGUnLFxuICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgfVxuXG4gIH0sICF0b29sYmFyU3RhdGUuZGl2aWRlcnMuaXNEaXNhYmxlZCAmJiB0b29sYmFyU3RhdGUuZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5kaXZpZGVycyAmJiB7XG4gICAgbGFiZWw6ICdEaXZpZGVyJyxcblxuICAgIGluc2VydChlZGl0b3IpIHtcbiAgICAgIGluc2VydE5vZGVzQnV0UmVwbGFjZUlmU2VsZWN0aW9uSXNBdEVtcHR5UGFyYWdyYXBoT3JIZWFkaW5nKGVkaXRvciwge1xuICAgICAgICB0eXBlOiAnZGl2aWRlcicsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSwgISF0b29sYmFyU3RhdGUuZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5sYXlvdXRzLmxlbmd0aCAmJiB7XG4gICAgbGFiZWw6ICdMYXlvdXQnLFxuXG4gICAgaW5zZXJ0KGVkaXRvcikge1xuICAgICAgaW5zZXJ0TGF5b3V0KGVkaXRvciwgdG9vbGJhclN0YXRlLmVkaXRvckRvY3VtZW50RmVhdHVyZXMubGF5b3V0c1swXSk7XG4gICAgfVxuXG4gIH0sICF0b29sYmFyU3RhdGUubGlzdHMub3JkZXJlZC5pc0Rpc2FibGVkICYmIHRvb2xiYXJTdGF0ZS5lZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcubGlzdFR5cGVzLm9yZGVyZWQgJiYge1xuICAgIGxhYmVsOiAnTnVtYmVyZWQgTGlzdCcsXG4gICAga2V5d29yZHM6IFsnb3JkZXJlZCBsaXN0J10sXG5cbiAgICBpbnNlcnQoZWRpdG9yKSB7XG4gICAgICBpbnNlcnROb2Rlc0J1dFJlcGxhY2VJZlNlbGVjdGlvbklzQXRFbXB0eVBhcmFncmFwaE9ySGVhZGluZyhlZGl0b3IsIHtcbiAgICAgICAgdHlwZTogJ29yZGVyZWQtbGlzdCcsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSwgIXRvb2xiYXJTdGF0ZS5saXN0cy51bm9yZGVyZWQuaXNEaXNhYmxlZCAmJiB0b29sYmFyU3RhdGUuZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmxpc3RUeXBlcy51bm9yZGVyZWQgJiYge1xuICAgIGxhYmVsOiAnQnVsbGV0IExpc3QnLFxuICAgIGtleXdvcmRzOiBbJ3Vub3JkZXJlZCBsaXN0J10sXG5cbiAgICBpbnNlcnQoZWRpdG9yKSB7XG4gICAgICBpbnNlcnROb2Rlc0J1dFJlcGxhY2VJZlNlbGVjdGlvbklzQXRFbXB0eVBhcmFncmFwaE9ySGVhZGluZyhlZGl0b3IsIHtcbiAgICAgICAgdHlwZTogJ3Vub3JkZXJlZC1saXN0JyxcbiAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgdGV4dDogJydcbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgIH1cblxuICB9XTtcbiAgcmV0dXJuIG9wdGlvbnMuZmlsdGVyKHggPT4gdHlwZW9mIHggIT09ICdib29sZWFuJyk7XG59XG5cbmZ1bmN0aW9uIGluc2VydE9wdGlvbihlZGl0b3IsIHRleHQsIG9wdGlvbikge1xuICBjb25zdCBwYXRoID0gc2xhdGVSZWFjdC5SZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIHRleHQpO1xuICBzbGF0ZS5UcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHtcbiAgICBhdDoge1xuICAgICAgZm9jdXM6IHNsYXRlLkVkaXRvci5zdGFydChlZGl0b3IsIHBhdGgpLFxuICAgICAgYW5jaG9yOiBzbGF0ZS5FZGl0b3IuZW5kKGVkaXRvciwgcGF0aClcbiAgICB9XG4gIH0pO1xuICBvcHRpb24uaW5zZXJ0KGVkaXRvcik7XG59IC8vIFRPRE86IHRoZSBjaGFuZ2luZyB3aWR0aCBvZiB0aGUgbWVudSB3aGVuIHNlYXJjaGluZyBpc24ndCBncmVhdFxuXG5cbmZ1bmN0aW9uIEluc2VydE1lbnUoX3JlZjIpIHtcbiAgbGV0IHtcbiAgICBjaGlsZHJlbixcbiAgICB0ZXh0XG4gIH0gPSBfcmVmMjtcbiAgY29uc3QgdG9vbGJhclN0YXRlID0gdXNlVG9vbGJhclN0YXRlKCk7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgcmVsYXRpb25zaGlwczoge1xuICAgICAgaXNEaXNhYmxlZDogcmVsYXRpb25zaGlwc0Rpc2FibGVkXG4gICAgfVxuICB9ID0gdG9vbGJhclN0YXRlO1xuICBjb25zdCB7XG4gICAgZGlhbG9nLFxuICAgIHRyaWdnZXJcbiAgfSA9IHBvcG92ZXIudXNlQ29udHJvbGxlZFBvcG92ZXIoe1xuICAgIGlzT3BlbjogdHJ1ZSxcbiAgICBvbkNsb3NlOiBub29wXG4gIH0sIHtcbiAgICBwbGFjZW1lbnQ6ICdib3R0b20tc3RhcnQnXG4gIH0pO1xuICBjb25zdCBjb21wb25lbnRCbG9ja3MgPSBSZWFjdC51c2VDb250ZXh0KENvbXBvbmVudEJsb2NrQ29udGV4dCk7XG4gIGNvbnN0IHJlbGF0aW9uc2hpcHMgPSB1c2VEb2N1bWVudEZpZWxkUmVsYXRpb25zaGlwcygpO1xuICBjb25zdCBvcHRpb25zID0gbWF0Y2hTb3J0ZXIubWF0Y2hTb3J0ZXIoZ2V0T3B0aW9ucyh0b29sYmFyU3RhdGUsIGNvbXBvbmVudEJsb2NrcywgcmVsYXRpb25zaGlwc0Rpc2FibGVkID8ge30gOiByZWxhdGlvbnNoaXBzKSwgdGV4dC50ZXh0LnNsaWNlKDEpLCB7XG4gICAga2V5czogWydsYWJlbCcsICdrZXl3b3JkcyddXG4gIH0pO1xuICBjb25zdCBbc2VsZWN0ZWRJbmRleCwgc2V0U2VsZWN0ZWRJbmRleF0gPSBSZWFjdC51c2VTdGF0ZSgwKTtcblxuICBpZiAob3B0aW9ucy5sZW5ndGggJiYgc2VsZWN0ZWRJbmRleCA+PSBvcHRpb25zLmxlbmd0aCkge1xuICAgIHNldFNlbGVjdGVkSW5kZXgoMCk7XG4gIH1cblxuICBjb25zdCBzdGF0ZVJlZiA9IFJlYWN0LnVzZVJlZih7XG4gICAgc2VsZWN0ZWRJbmRleCxcbiAgICBvcHRpb25zLFxuICAgIHRleHRcbiAgfSk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc3RhdGVSZWYuY3VycmVudCA9IHtcbiAgICAgIHNlbGVjdGVkSW5kZXgsXG4gICAgICBvcHRpb25zLFxuICAgICAgdGV4dFxuICAgIH07XG4gIH0pO1xuICBjb25zdCBkaWFsb2dSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIF9kaWFsb2dSZWYkY3VycmVudCwgX2RpYWxvZ1JlZiRjdXJyZW50JGNoO1xuXG4gICAgY29uc3QgZWxlbWVudCA9IChfZGlhbG9nUmVmJGN1cnJlbnQgPSBkaWFsb2dSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX2RpYWxvZ1JlZiRjdXJyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RpYWxvZ1JlZiRjdXJyZW50JGNoID0gX2RpYWxvZ1JlZiRjdXJyZW50LmNoaWxkcmVuKSA9PT0gbnVsbCB8fCBfZGlhbG9nUmVmJGN1cnJlbnQkY2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kaWFsb2dSZWYkY3VycmVudCRjaFtzZWxlY3RlZEluZGV4XTtcblxuICAgIGlmIChkaWFsb2dSZWYuY3VycmVudCAmJiBlbGVtZW50KSB7XG4gICAgICBzY3JvbGxJbnRvVmlld19fZGVmYXVsdFtcImRlZmF1bHRcIl0oZWxlbWVudCwge1xuICAgICAgICBzY3JvbGxNb2RlOiAnaWYtbmVlZGVkJyxcbiAgICAgICAgYm91bmRhcnk6IGRpYWxvZ1JlZi5jdXJyZW50LFxuICAgICAgICBibG9jazogJ25lYXJlc3QnXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtzZWxlY3RlZEluZGV4XSk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZG9tTm9kZSA9IHNsYXRlUmVhY3QuUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgZWRpdG9yKTtcblxuICAgIGxldCBsaXN0ZW5lciA9IGV2ZW50ID0+IHtcbiAgICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG5cbiAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICAgICAge1xuICAgICAgICAgICAgaWYgKHN0YXRlUmVmLmN1cnJlbnQub3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRJbmRleChzdGF0ZVJlZi5jdXJyZW50LnNlbGVjdGVkSW5kZXggPT09IHN0YXRlUmVmLmN1cnJlbnQub3B0aW9ucy5sZW5ndGggLSAxID8gMCA6IHN0YXRlUmVmLmN1cnJlbnQuc2VsZWN0ZWRJbmRleCArIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZVJlZi5jdXJyZW50Lm9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHNldFNlbGVjdGVkSW5kZXgoc3RhdGVSZWYuY3VycmVudC5zZWxlY3RlZEluZGV4ID09PSAwID8gc3RhdGVSZWYuY3VycmVudC5vcHRpb25zLmxlbmd0aCAtIDEgOiBzdGF0ZVJlZi5jdXJyZW50LnNlbGVjdGVkSW5kZXggLSAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICBjYXNlICdFbnRlcic6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gc3RhdGVSZWYuY3VycmVudC5vcHRpb25zW3N0YXRlUmVmLmN1cnJlbnQuc2VsZWN0ZWRJbmRleF07XG5cbiAgICAgICAgICAgIGlmIChvcHRpb24pIHtcbiAgICAgICAgICAgICAgaW5zZXJ0T3B0aW9uKGVkaXRvciwgc3RhdGVSZWYuY3VycmVudC50ZXh0LCBvcHRpb24pO1xuICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ0VzY2FwZSc6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcGF0aCA9IHNsYXRlUmVhY3QuUmVhY3RFZGl0b3IuZmluZFBhdGgoZWRpdG9yLCBzdGF0ZVJlZi5jdXJyZW50LnRleHQpO1xuICAgICAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy51bnNldE5vZGVzKGVkaXRvciwgJ2luc2VydE1lbnUnLCB7XG4gICAgICAgICAgICAgIGF0OiBwYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBkb21Ob2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvbU5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGxpc3RlbmVyKTtcbiAgICB9O1xuICB9LCBbZWRpdG9yXSk7XG4gIGNvbnN0IERJQUxPR19IRUlHSFQgPSAzMDA7XG4gIHJldHVybiBjb3JlLmpzeChSZWFjdC5GcmFnbWVudCwgbnVsbCwgY29yZS5qc3goXCJzcGFuXCIsIF9leHRlbmRzKHt9LCB0cmlnZ2VyLnByb3BzLCB7XG4gICAgY3NzOiB7XG4gICAgICBjb2xvcjogJ2JsdWUnXG4gICAgfSxcbiAgICByZWY6IHRyaWdnZXIucmVmXG4gIH0pLCBjaGlsZHJlbiksIGNvcmUuanN4KGNvcmUuUG9ydGFsLCBudWxsLCBjb3JlLmpzeCh0b29sYmFyLklubGluZURpYWxvZywgX2V4dGVuZHMoe1xuICAgIGNvbnRlbnRFZGl0YWJsZTogZmFsc2VcbiAgfSwgZGlhbG9nLnByb3BzLCB7XG4gICAgY3NzOiB7XG4gICAgICBkaXNwbGF5OiBvcHRpb25zLmxlbmd0aCA/IHVuZGVmaW5lZCA6ICdub25lJyxcbiAgICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcbiAgICAgIG1heEhlaWdodDogRElBTE9HX0hFSUdIVFxuICAgIH0sXG4gICAgcmVmOiBkaWFsb2cucmVmXG4gIH0pLCBjb3JlLmpzeChcImRpdlwiLCB7XG4gICAgcmVmOiBkaWFsb2dSZWYsXG4gICAgY3NzOiB7XG4gICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgIG1heEhlaWdodDogRElBTE9HX0hFSUdIVCAtIDggKiAyXG4gICAgfVxuICB9LCBvcHRpb25zLm1hcCgob3B0aW9uLCBpbmRleCkgPT4gY29yZS5qc3godG9vbGJhci5Ub29sYmFyQnV0dG9uLCB7XG4gICAga2V5OiBvcHRpb24ubGFiZWwsXG4gICAgaXNQcmVzc2VkOiBpbmRleCA9PT0gc2VsZWN0ZWRJbmRleCxcbiAgICBvbk1vdXNlRW50ZXI6ICgpID0+IHtcbiAgICAgIHNldFNlbGVjdGVkSW5kZXgoaW5kZXgpO1xuICAgIH0sXG4gICAgb25Nb3VzZURvd246IGV2ZW50ID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpbnNlcnRPcHRpb24oZWRpdG9yLCB0ZXh0LCBvcHRpb24pO1xuICAgIH1cbiAgfSwgb3B0aW9uLmxhYmVsKSkpKSkpO1xufVxuY29uc3Qgbm9kZUxpc3RzV2l0aG91dEluc2VydE1lbnUgPSBuZXcgV2Vha1NldCgpO1xuY29uc3Qgbm9kZXNXaXRob3V0SW5zZXJ0TWVudSA9IG5ldyBXZWFrU2V0KCk7XG5cbmZ1bmN0aW9uIGZpbmRQYXRoV2l0aEluc2VydE1lbnUobm9kZSwgcGF0aCkge1xuICBpZiAoc2xhdGUuVGV4dC5pc1RleHQobm9kZSkpIHtcbiAgICByZXR1cm4gbm9kZS5pbnNlcnRNZW51ID8gcGF0aCA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmIChub2RlTGlzdHNXaXRob3V0SW5zZXJ0TWVudS5oYXMobm9kZS5jaGlsZHJlbikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKGNvbnN0IFtpbmRleCwgY2hpbGRdIG9mIG5vZGUuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgaWYgKG5vZGVzV2l0aG91dEluc2VydE1lbnUuaGFzKGNoaWxkKSkgY29udGludWU7XG4gICAgbGV0IG1heWJlUGF0aCA9IGZpbmRQYXRoV2l0aEluc2VydE1lbnUoY2hpbGQsIFsuLi5wYXRoLCBpbmRleF0pO1xuXG4gICAgaWYgKG1heWJlUGF0aCkge1xuICAgICAgcmV0dXJuIG1heWJlUGF0aDtcbiAgICB9XG5cbiAgICBub2Rlc1dpdGhvdXRJbnNlcnRNZW51LmFkZChjaGlsZCk7XG4gIH1cblxuICBub2RlTGlzdHNXaXRob3V0SW5zZXJ0TWVudS5hZGQobm9kZS5jaGlsZHJlbik7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUluc2VydE1lbnVNYXJrV2hlbk91dHNpZGVPZlNlbGVjdGlvbihlZGl0b3IpIHtcbiAgdmFyIF9FZGl0b3IkbWFya3M7XG5cbiAgY29uc3QgcGF0aCA9IGZpbmRQYXRoV2l0aEluc2VydE1lbnUoZWRpdG9yLCBbXSk7XG5cbiAgaWYgKHBhdGggJiYgISgoX0VkaXRvciRtYXJrcyA9IHNsYXRlLkVkaXRvci5tYXJrcyhlZGl0b3IpKSAhPT0gbnVsbCAmJiBfRWRpdG9yJG1hcmtzICE9PSB2b2lkIDAgJiYgX0VkaXRvciRtYXJrcy5pbnNlcnRNZW51KSAmJiAoIWVkaXRvci5zZWxlY3Rpb24gfHwgIXNsYXRlLlBhdGguZXF1YWxzKGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLnBhdGgsIHBhdGgpIHx8ICFzbGF0ZS5QYXRoLmVxdWFscyhlZGl0b3Iuc2VsZWN0aW9uLmZvY3VzLnBhdGgsIHBhdGgpKSkge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsICdpbnNlcnRNZW51Jywge1xuICAgICAgYXQ6IHBhdGhcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gd2l0aEluc2VydE1lbnUoZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBub3JtYWxpemVOb2RlLFxuICAgIGFwcGx5LFxuICAgIGluc2VydFRleHRcbiAgfSA9IGVkaXRvcjtcblxuICBlZGl0b3Iubm9ybWFsaXplTm9kZSA9IF9yZWYzID0+IHtcbiAgICBsZXQgW25vZGUsIHBhdGhdID0gX3JlZjM7XG5cbiAgICBpZiAoc2xhdGUuVGV4dC5pc1RleHQobm9kZSkgJiYgbm9kZS5pbnNlcnRNZW51KSB7XG4gICAgICBpZiAobm9kZS50ZXh0WzBdICE9PSAnLycpIHtcbiAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy51bnNldE5vZGVzKGVkaXRvciwgJ2luc2VydE1lbnUnLCB7XG4gICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgd2hpdGVzcGFjZU1hdGNoID0gL1xccy8uZXhlYyhub2RlLnRleHQpO1xuXG4gICAgICBpZiAod2hpdGVzcGFjZU1hdGNoKSB7XG4gICAgICAgIHNsYXRlLlRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsICdpbnNlcnRNZW51Jywge1xuICAgICAgICAgIGF0OiB7XG4gICAgICAgICAgICBhbmNob3I6IHtcbiAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgICAgb2Zmc2V0OiB3aGl0ZXNwYWNlTWF0Y2guaW5kZXhcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb2N1czogc2xhdGUuRWRpdG9yLmVuZChlZGl0b3IsIHBhdGgpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtYXRjaDogc2xhdGUuVGV4dC5pc1RleHQsXG4gICAgICAgICAgc3BsaXQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2xhdGUuRWRpdG9yLmlzRWRpdG9yKGVkaXRvcikgJiYgcmVtb3ZlSW5zZXJ0TWVudU1hcmtXaGVuT3V0c2lkZU9mU2VsZWN0aW9uKGVkaXRvcikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBub3JtYWxpemVOb2RlKFtub2RlLCBwYXRoXSk7XG4gIH07XG5cbiAgZWRpdG9yLmFwcGx5ID0gb3AgPT4ge1xuICAgIGFwcGx5KG9wKTsgLy8gd2UncmUgY2FsbGluZyB0aGlzIGhlcmUgQU5EIGluIG5vcm1hbGl6ZU5vZGVcbiAgICAvLyBiZWNhdXNlIG5vcm1hbGl6ZU5vZGUgd29uJ3QgYmUgY2FsbGVkIG9uIHNlbGVjdGlvbiBjaGFuZ2VzXG4gICAgLy8gYnV0IGFwcGx5IHdpbGxcbiAgICAvLyB3ZSdyZSBzdGlsbCBjYWxsaW5nIHRoaXMgZnJvbSBub3JtYWxpemVOb2RlIHRob3VnaCBiZWNhdXNlIHdlIHdhbnQgaXQgdG8gaGFwcGVuXG4gICAgLy8gd2hlbiBub3JtYWxpemF0aW9uIGhhcHBlbnNcblxuICAgIGlmIChvcC50eXBlID09PSAnc2V0X3NlbGVjdGlvbicpIHtcbiAgICAgIHJlbW92ZUluc2VydE1lbnVNYXJrV2hlbk91dHNpZGVPZlNlbGVjdGlvbihlZGl0b3IpO1xuICAgIH1cbiAgfTtcblxuICBlZGl0b3IuaW5zZXJ0VGV4dCA9IHRleHQgPT4ge1xuICAgIGluc2VydFRleHQodGV4dCk7XG5cbiAgICBpZiAoZWRpdG9yLnNlbGVjdGlvbiAmJiB0ZXh0ID09PSAnLycpIHtcbiAgICAgIGNvbnN0IHN0YXJ0T2ZCbG9jayA9IHNsYXRlLkVkaXRvci5zdGFydChlZGl0b3IsIHNsYXRlLkVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgICAgbWF0Y2g6IG5vZGUgPT4gc2xhdGUuRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBub2RlKVxuICAgICAgfSlbMV0pO1xuICAgICAgY29uc3QgYmVmb3JlID0gc2xhdGUuRWRpdG9yLmJlZm9yZShlZGl0b3IsIGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLCB7XG4gICAgICAgIHVuaXQ6ICdjaGFyYWN0ZXInXG4gICAgICB9KTtcblxuICAgICAgaWYgKGJlZm9yZSAmJiAoc2xhdGUuUG9pbnQuZXF1YWxzKHN0YXJ0T2ZCbG9jaywgYmVmb3JlKSB8fCBiZWZvcmUub2Zmc2V0ICE9PSAwICYmIC9cXHMvLnRlc3Qoc2xhdGUuTm9kZS5nZXQoZWRpdG9yLCBiZWZvcmUucGF0aCkudGV4dFtiZWZvcmUub2Zmc2V0IC0gMV0pKSkge1xuICAgICAgICBzbGF0ZS5UcmFuc2Zvcm1zLnNldE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIGluc2VydE1lbnU6IHRydWVcbiAgICAgICAgfSwge1xuICAgICAgICAgIGF0OiB7XG4gICAgICAgICAgICBhbmNob3I6IGJlZm9yZSxcbiAgICAgICAgICAgIGZvY3VzOiBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvclxuICAgICAgICAgIH0sXG4gICAgICAgICAgbWF0Y2g6IHNsYXRlLlRleHQuaXNUZXh0LFxuICAgICAgICAgIHNwbGl0OiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZWRpdG9yO1xufVxuXG4vKiogQGpzeFJ1bnRpbWUgY2xhc3NpYyAqL1xuXG5mdW5jdGlvbiBQbGFjZWhvbGRlcihfcmVmKSB7XG4gIGxldCB7XG4gICAgcGxhY2Vob2xkZXIsXG4gICAgY2hpbGRyZW5cbiAgfSA9IF9yZWY7XG4gIGNvbnN0IFt3aWR0aCwgc2V0V2lkdGhdID0gUmVhY3QudXNlU3RhdGUoMCk7XG4gIHJldHVybiBjb3JlLmpzeChcInNwYW5cIiwge1xuICAgIGNzczoge1xuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIHdpZHRoXG4gICAgfVxuICB9LCBjb3JlLmpzeChcInNwYW5cIiwge1xuICAgIGNvbnRlbnRFZGl0YWJsZTogZmFsc2UsXG4gICAgc3R5bGU6IHtcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgdG9wOiAwLFxuICAgICAgbWF4V2lkdGg6ICcxMDAlJyxcbiAgICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnLFxuICAgICAgb3BhY2l0eTogJzAuNScsXG4gICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gICAgICBmb250U3R5bGU6ICdub3JtYWwnLFxuICAgICAgZm9udFdlaWdodDogJ25vcm1hbCcsXG4gICAgICB0ZXh0RGVjb3JhdGlvbjogJ25vbmUnLFxuICAgICAgdGV4dEFsaWduOiAnbGVmdCdcbiAgICB9XG4gIH0sIGNvcmUuanN4KFwic3BhblwiLCB7XG4gICAgcmVmOiBub2RlID0+IHtcbiAgICAgIGlmIChub2RlKSB7XG4gICAgICAgIGNvbnN0IG9mZnNldFdpZHRoID0gbm9kZS5vZmZzZXRXaWR0aDtcblxuICAgICAgICBpZiAob2Zmc2V0V2lkdGggIT09IHdpZHRoKSB7XG4gICAgICAgICAgc2V0V2lkdGgob2Zmc2V0V2lkdGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBwbGFjZWhvbGRlcikpLCBjaGlsZHJlbik7XG59XG5cbmNvbnN0IExlYWYgPSBfcmVmMiA9PiB7XG4gIGxldCB7XG4gICAgbGVhZixcbiAgICB0ZXh0LFxuICAgIGNoaWxkcmVuLFxuICAgIGF0dHJpYnV0ZXNcbiAgfSA9IF9yZWYyO1xuICBjb25zdCB7XG4gICAgY29sb3JzLFxuICAgIHJhZGlpLFxuICAgIHNwYWNpbmcsXG4gICAgdHlwb2dyYXBoeVxuICB9ID0gY29yZS51c2VUaGVtZSgpO1xuICBjb25zdCB7XG4gICAgdW5kZXJsaW5lLFxuICAgIHN0cmlrZXRocm91Z2gsXG4gICAgYm9sZCxcbiAgICBpdGFsaWMsXG4gICAgY29kZSxcbiAgICBrZXlib2FyZCxcbiAgICBzdXBlcnNjcmlwdCxcbiAgICBzdWJzY3JpcHQsXG4gICAgcGxhY2Vob2xkZXIsXG4gICAgaW5zZXJ0TWVudVxuICB9ID0gbGVhZjtcblxuICBpZiAocGxhY2Vob2xkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgIGNoaWxkcmVuID0gY29yZS5qc3goUGxhY2Vob2xkZXIsIHtcbiAgICAgIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlclxuICAgIH0sIGNoaWxkcmVuKTtcbiAgfVxuXG4gIGlmIChpbnNlcnRNZW51KSB7XG4gICAgY2hpbGRyZW4gPSBjb3JlLmpzeChJbnNlcnRNZW51LCB7XG4gICAgICB0ZXh0OiB0ZXh0XG4gICAgfSwgY2hpbGRyZW4pO1xuICB9XG5cbiAgaWYgKGNvZGUpIHtcbiAgICBjaGlsZHJlbiA9IGNvcmUuanN4KFwiY29kZVwiLCB7XG4gICAgICBjc3M6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvcnMuYmFja2dyb3VuZERpbSxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiByYWRpaS54c21hbGwsXG4gICAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgICBmb250RmFtaWx5OiB0eXBvZ3JhcGh5LmZvbnRGYW1pbHkubW9ub3NwYWNlLFxuICAgICAgICBmb250U2l6ZTogdHlwb2dyYXBoeS5mb250U2l6ZS5zbWFsbCxcbiAgICAgICAgcGFkZGluZzogYDAgJHtzcGFjaW5nLnh4c21hbGx9cHhgXG4gICAgICB9XG4gICAgfSwgY2hpbGRyZW4pO1xuICB9XG5cbiAgaWYgKGJvbGQpIHtcbiAgICBjaGlsZHJlbiA9IGNvcmUuanN4KFwic3Ryb25nXCIsIG51bGwsIGNoaWxkcmVuKTtcbiAgfVxuXG4gIGlmIChzdHJpa2V0aHJvdWdoKSB7XG4gICAgY2hpbGRyZW4gPSBjb3JlLmpzeChcInNcIiwgbnVsbCwgY2hpbGRyZW4pO1xuICB9XG5cbiAgaWYgKGl0YWxpYykge1xuICAgIGNoaWxkcmVuID0gY29yZS5qc3goXCJlbVwiLCBudWxsLCBjaGlsZHJlbik7XG4gIH1cblxuICBpZiAoa2V5Ym9hcmQpIHtcbiAgICBjaGlsZHJlbiA9IGNvcmUuanN4KFwia2JkXCIsIG51bGwsIGNoaWxkcmVuKTtcbiAgfVxuXG4gIGlmIChzdXBlcnNjcmlwdCkge1xuICAgIGNoaWxkcmVuID0gY29yZS5qc3goXCJzdXBcIiwgbnVsbCwgY2hpbGRyZW4pO1xuICB9XG5cbiAgaWYgKHN1YnNjcmlwdCkge1xuICAgIGNoaWxkcmVuID0gY29yZS5qc3goXCJzdWJcIiwgbnVsbCwgY2hpbGRyZW4pO1xuICB9XG5cbiAgaWYgKHVuZGVybGluZSkge1xuICAgIGNoaWxkcmVuID0gY29yZS5qc3goXCJ1XCIsIG51bGwsIGNoaWxkcmVuKTtcbiAgfVxuXG4gIHJldHVybiBjb3JlLmpzeChcInNwYW5cIiwgYXR0cmlidXRlcywgY2hpbGRyZW4pO1xufTtcblxuY29uc3QgcmVuZGVyTGVhZiA9IHByb3BzID0+IHtcbiAgcmV0dXJuIGNvcmUuanN4KExlYWYsIHByb3BzKTtcbn07XG5cbmZ1bmN0aW9uIHdpdGhTb2Z0QnJlYWtzKGlzU2hpZnRQcmVzc2VkUmVmLCBlZGl0b3IpIHtcbiAgY29uc3Qge1xuICAgIGluc2VydEJyZWFrXG4gIH0gPSBlZGl0b3I7IC8vIFRPRE86IHNob3VsZCBzb2Z0IGJyZWFrcyBvbmx5IHdvcmsgaW4gcGFydGljdWxhciBwbGFjZXNcblxuICBlZGl0b3IuaW5zZXJ0QnJlYWsgPSAoKSA9PiB7XG4gICAgaWYgKGlzU2hpZnRQcmVzc2VkUmVmLmN1cnJlbnQpIHtcbiAgICAgIHNsYXRlLlRyYW5zZm9ybXMuaW5zZXJ0VGV4dChlZGl0b3IsICdcXG4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zZXJ0QnJlYWsoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGVkaXRvcjtcbn1cbmZ1bmN0aW9uIHVzZUtleURvd25SZWYodGFyZ2V0S2V5KSB7XG4gIGNvbnN0IHJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IGUgPT4ge1xuICAgICAgaWYgKGUua2V5ICE9PSB0YXJnZXRLZXkpIHJldHVybjtcbiAgICAgIHJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlS2V5VXAgPSBlID0+IHtcbiAgICAgIGlmIChlLmtleSAhPT0gdGFyZ2V0S2V5KSByZXR1cm47XG4gICAgICByZWYuY3VycmVudCA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93biwge1xuICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaGFuZGxlS2V5VXAsIHtcbiAgICAgIHBhc3NpdmU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBoYW5kbGVLZXlVcCk7XG4gICAgfTtcbiAgfSwgW3RhcmdldEtleV0pO1xuICByZXR1cm4gcmVmO1xufVxuXG5jb25zdCBzaG9ydGN1dHMgPSB7XG4gICcuLi4nOiAn4oCmJyxcbiAgJy0tPic6ICfihpInLFxuICAnLT4nOiAn4oaSJyxcbiAgJzwtJzogJ+KGkCcsXG4gICc8LS0nOiAn4oaQJyxcbiAgJy0tJzogJ+KAkydcbn07XG5mdW5jdGlvbiB3aXRoU2hvcnRjdXRzKGVkaXRvcikge1xuICBjb25zdCB7XG4gICAgaW5zZXJ0VGV4dFxuICB9ID0gZWRpdG9yO1xuXG4gIGVkaXRvci5pbnNlcnRUZXh0ID0gdGV4dCA9PiB7XG4gICAgaW5zZXJ0VGV4dCh0ZXh0KTtcblxuICAgIGlmICh0ZXh0ID09PSAnICcgJiYgZWRpdG9yLnNlbGVjdGlvbiAmJiBzbGF0ZS5SYW5nZS5pc0NvbGxhcHNlZChlZGl0b3Iuc2VsZWN0aW9uKSkge1xuICAgICAgY29uc3Qgc2VsZWN0aW9uUG9pbnQgPSBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvcjtcbiAgICAgIGNvbnN0IGFuY2VzdG9yQmxvY2sgPSBzbGF0ZS5FZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICAgIG1hdGNoOiBub2RlID0+IHNsYXRlLkVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbm9kZSlcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoYW5jZXN0b3JCbG9jaykge1xuICAgICAgICBPYmplY3Qua2V5cyhzaG9ydGN1dHMpLmZvckVhY2goc2hvcnRjdXQgPT4ge1xuICAgICAgICAgIGNvbnN0IHBvaW50QmVmb3JlID0gc2xhdGUuRWRpdG9yLmJlZm9yZShlZGl0b3IsIHNlbGVjdGlvblBvaW50LCB7XG4gICAgICAgICAgICB1bml0OiAnY2hhcmFjdGVyJyxcbiAgICAgICAgICAgIGRpc3RhbmNlOiBzaG9ydGN1dC5sZW5ndGggKyAxXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAocG9pbnRCZWZvcmUgJiYgc2xhdGUuUGF0aC5pc0Rlc2NlbmRhbnQocG9pbnRCZWZvcmUucGF0aCwgYW5jZXN0b3JCbG9ja1sxXSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJhbmdlID0ge1xuICAgICAgICAgICAgICBhbmNob3I6IHNlbGVjdGlvblBvaW50LFxuICAgICAgICAgICAgICBmb2N1czogcG9pbnRCZWZvcmVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBzdHIgPSBzbGF0ZS5FZGl0b3Iuc3RyaW5nKGVkaXRvciwgcmFuZ2UpO1xuXG4gICAgICAgICAgICBpZiAoc3RyLnN1YnN0cigwLCBzaG9ydGN1dC5sZW5ndGgpID09PSBzaG9ydGN1dCkge1xuICAgICAgICAgICAgICBlZGl0b3IuaGlzdG9yeS51bmRvcy5wdXNoKFtdKTtcbiAgICAgICAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCByYW5nZSk7XG4gICAgICAgICAgICAgIGVkaXRvci5pbnNlcnRUZXh0KHNob3J0Y3V0c1tzaG9ydGN1dF0gKyAnICcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBlZGl0b3I7XG59XG5cbmZ1bmN0aW9uIHdpdGhCbG9ja01hcmtkb3duU2hvcnRjdXRzKGRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2NrcywgZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBpbnNlcnRUZXh0XG4gIH0gPSBlZGl0b3I7XG4gIGNvbnN0IHNob3J0Y3V0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgY29uc3QgZWRpdG9yRG9jdW1lbnRGZWF0dXJlc0Zvck5vcm1hbGl6YXRpb25Ub0NoZWNrID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkb2N1bWVudEZlYXR1cmVzKSwge30sIHtcbiAgICByZWxhdGlvbnNoaXBzOiB0cnVlXG4gIH0pO1xuXG4gIGxldCBhZGRTaG9ydGN1dCA9IGZ1bmN0aW9uICh0ZXh0LCBpbnNlcnQsIHNob3VsZEJlRW5hYmxlZEluQ29tcG9uZW50QmxvY2spIHtcbiAgICBsZXQgdHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogJ3BhcmFncmFwaCc7XG4gICAgaWYgKCFzaG91bGRCZUVuYWJsZWRJbkNvbXBvbmVudEJsb2NrKGVkaXRvckRvY3VtZW50RmVhdHVyZXNGb3JOb3JtYWxpemF0aW9uVG9DaGVjaykpIHJldHVybjtcbiAgICBjb25zdCB0cmlnZ2VyID0gdGV4dFt0ZXh0Lmxlbmd0aCAtIDFdO1xuXG4gICAgaWYgKCFzaG9ydGN1dHNbdHJpZ2dlcl0pIHtcbiAgICAgIHNob3J0Y3V0c1t0cmlnZ2VyXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuXG4gICAgc2hvcnRjdXRzW3RyaWdnZXJdW3RleHRdID0ge1xuICAgICAgaW5zZXJ0LFxuICAgICAgdHlwZSxcbiAgICAgIHNob3VsZEJlRW5hYmxlZEluQ29tcG9uZW50QmxvY2tcbiAgICB9O1xuICB9O1xuXG4gIGFkZFNob3J0Y3V0KCcxLiAnLCAoKSA9PiB7XG4gICAgc2xhdGUuVHJhbnNmb3Jtcy53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICB0eXBlOiAnb3JkZXJlZC1saXN0JyxcbiAgICAgIGNoaWxkcmVuOiBbXVxuICAgIH0sIHtcbiAgICAgIG1hdGNoOiBuID0+IHNsYXRlLkVkaXRvci5pc0Jsb2NrKGVkaXRvciwgbilcbiAgICB9KTtcbiAgfSwgZmVhdHVyZXMgPT4gZmVhdHVyZXMuZm9ybWF0dGluZy5saXN0VHlwZXMub3JkZXJlZCk7XG4gIGFkZFNob3J0Y3V0KCctICcsICgpID0+IHtcbiAgICBzbGF0ZS5UcmFuc2Zvcm1zLndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgIHR5cGU6ICd1bm9yZGVyZWQtbGlzdCcsXG4gICAgICBjaGlsZHJlbjogW11cbiAgICB9LCB7XG4gICAgICBtYXRjaDogbiA9PiBzbGF0ZS5FZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgfSk7XG4gIH0sIGZlYXR1cmVzID0+IGZlYXR1cmVzLmZvcm1hdHRpbmcubGlzdFR5cGVzLnVub3JkZXJlZCk7XG4gIGFkZFNob3J0Y3V0KCcqICcsICgpID0+IHtcbiAgICBzbGF0ZS5UcmFuc2Zvcm1zLndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgIHR5cGU6ICd1bm9yZGVyZWQtbGlzdCcsXG4gICAgICBjaGlsZHJlbjogW11cbiAgICB9LCB7XG4gICAgICBtYXRjaDogbiA9PiBzbGF0ZS5FZGl0b3IuaXNCbG9jayhlZGl0b3IsIG4pXG4gICAgfSk7XG4gIH0sIGZlYXR1cmVzID0+IGZlYXR1cmVzLmZvcm1hdHRpbmcubGlzdFR5cGVzLnVub3JkZXJlZCk7XG4gIGRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5oZWFkaW5nTGV2ZWxzLmZvckVhY2gobGV2ZWwgPT4ge1xuICAgIGFkZFNob3J0Y3V0KCcjJy5yZXBlYXQobGV2ZWwpICsgJyAnLCAoKSA9PiB7XG4gICAgICBzbGF0ZS5UcmFuc2Zvcm1zLnNldE5vZGVzKGVkaXRvciwge1xuICAgICAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgICAgIGxldmVsXG4gICAgICB9LCB7XG4gICAgICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ3BhcmFncmFwaCcgfHwgbm9kZS50eXBlID09PSAnaGVhZGluZydcbiAgICAgIH0pO1xuICAgIH0sIGZlYXR1cmVzID0+IGZlYXR1cmVzLmZvcm1hdHRpbmcuaGVhZGluZ0xldmVscy5pbmNsdWRlcyhsZXZlbCksICdoZWFkaW5nLW9yLXBhcmFncmFwaCcpO1xuICB9KTtcbiAgYWRkU2hvcnRjdXQoJz4gJywgKCkgPT4ge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgdHlwZTogJ2Jsb2NrcXVvdGUnLFxuICAgICAgY2hpbGRyZW46IFtdXG4gICAgfSwge1xuICAgICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAncGFyYWdyYXBoJ1xuICAgIH0pO1xuICB9LCBmZWF0dXJlcyA9PiBmZWF0dXJlcy5mb3JtYXR0aW5nLmJsb2NrVHlwZXMuYmxvY2txdW90ZSk7XG4gIGFkZFNob3J0Y3V0KCdgYGAnLCAoKSA9PiB7XG4gICAgc2xhdGUuVHJhbnNmb3Jtcy53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICB0eXBlOiAnY29kZScsXG4gICAgICBjaGlsZHJlbjogW11cbiAgICB9LCB7XG4gICAgICBtYXRjaDogbm9kZSA9PiBub2RlLnR5cGUgPT09ICdwYXJhZ3JhcGgnXG4gICAgfSk7XG4gIH0sIGZlYXR1cmVzID0+IGZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlKTtcbiAgYWRkU2hvcnRjdXQoJy0tLScsICgpID0+IHtcbiAgICBpbnNlcnREaXZpZGVyKGVkaXRvcik7XG4gIH0sIGZlYXR1cmVzID0+IGZlYXR1cmVzLmRpdmlkZXJzKTtcblxuICBlZGl0b3IuaW5zZXJ0VGV4dCA9IHRleHQgPT4ge1xuICAgIGluc2VydFRleHQodGV4dCk7XG4gICAgY29uc3Qgc2hvcnRjdXRzRm9yVHJpZ2dlciA9IHNob3J0Y3V0c1t0ZXh0XTtcblxuICAgIGlmIChzaG9ydGN1dHNGb3JUcmlnZ2VyICYmIGVkaXRvci5zZWxlY3Rpb24gJiYgc2xhdGUuUmFuZ2UuaXNDb2xsYXBzZWQoZWRpdG9yLnNlbGVjdGlvbikpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgYW5jaG9yXG4gICAgICB9ID0gZWRpdG9yLnNlbGVjdGlvbjtcbiAgICAgIGNvbnN0IGJsb2NrID0gc2xhdGUuRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgICBtYXRjaDogbm9kZSA9PiBzbGF0ZS5FZGl0b3IuaXNCbG9jayhlZGl0b3IsIG5vZGUpXG4gICAgICB9KTtcbiAgICAgIGlmICghYmxvY2sgfHwgYmxvY2tbMF0udHlwZSAhPT0gJ3BhcmFncmFwaCcgJiYgYmxvY2tbMF0udHlwZSAhPT0gJ2hlYWRpbmcnKSByZXR1cm47XG4gICAgICBjb25zdCBzdGFydCA9IHNsYXRlLkVkaXRvci5zdGFydChlZGl0b3IsIGJsb2NrWzFdKTtcbiAgICAgIGNvbnN0IHJhbmdlID0ge1xuICAgICAgICBhbmNob3IsXG4gICAgICAgIGZvY3VzOiBzdGFydFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHNob3J0Y3V0VGV4dCA9IHNsYXRlLkVkaXRvci5zdHJpbmcoZWRpdG9yLCByYW5nZSk7XG4gICAgICBjb25zdCBzaG9ydGN1dCA9IHNob3J0Y3V0c0ZvclRyaWdnZXJbc2hvcnRjdXRUZXh0XTtcblxuICAgICAgaWYgKCFzaG9ydGN1dCB8fCBzaG9ydGN1dC50eXBlID09PSAncGFyYWdyYXBoJyAmJiBibG9ja1swXS50eXBlICE9PSAncGFyYWdyYXBoJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcyA9IGdldEFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMoZWRpdG9yLCBkb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MpO1xuXG4gICAgICBpZiAobG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzICYmIChsb2NhdGlvbkRvY3VtZW50RmVhdHVyZXMua2luZCA9PT0gJ2lubGluZScgfHwgIXNob3J0Y3V0LnNob3VsZEJlRW5hYmxlZEluQ29tcG9uZW50QmxvY2sobG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmRvY3VtZW50RmVhdHVyZXMpKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIHNvIHRoYXQgdGhpcyBzdGFydHMgYSBuZXcgdW5kbyBncm91cFxuXG5cbiAgICAgIGVkaXRvci5oaXN0b3J5LnVuZG9zLnB1c2goW10pO1xuICAgICAgc2xhdGUuVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCByYW5nZSk7XG4gICAgICBzbGF0ZS5UcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IpO1xuICAgICAgc2hvcnRjdXQuaW5zZXJ0KCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBlZGl0b3I7XG59XG5cbi8vIGEgdiBpbXBvcnRhbnQgbm90ZVxuLy8gbWFya3MgaW4gdGhlIG1hcmtkb3duIGFzdC9odG1sIGFyZSByZXByZXNlbnRlZCBxdWl0ZSBkaWZmZXJlbnRseSB0byBob3cgdGhleSBhcmUgaW4gc2xhdGVcbi8vIGlmIHlvdSBoYWQgdGhlIG1hcmtkb3duICoqc29tZXRoaW5nIGh0dHBzOi8va2V5c3RvbmVqcy5jb20gc29tZXRoaW5nKipcbi8vIHRoZSBib2xkIG5vZGUgaXMgdGhlIHBhcmVudCBvZiB0aGUgbGluayBub2RlXG4vLyBidXQgaW4gc2xhdGUsIG1hcmtzIGFyZSBvbmx5IHJlcHJlc2VudGVkIG9uIHRleHQgbm9kZXNcbmNvbnN0IGN1cnJlbnRseUFjdGl2ZU1hcmtzID0gbmV3IFNldCgpO1xuY29uc3QgY3VycmVudGx5RGlzYWJsZWRNYXJrcyA9IG5ldyBTZXQoKTtcbmZ1bmN0aW9uIGFkZE1hcmtUb0NoaWxkcmVuKG1hcmssIGNiKSB7XG4gIGNvbnN0IHdhc1ByZXZpb3VzbHlBY3RpdmUgPSBjdXJyZW50bHlBY3RpdmVNYXJrcy5oYXMobWFyayk7XG4gIGN1cnJlbnRseUFjdGl2ZU1hcmtzLmFkZChtYXJrKTtcblxuICB0cnkge1xuICAgIHJldHVybiBjYigpO1xuICB9IGZpbmFsbHkge1xuICAgIGlmICghd2FzUHJldmlvdXNseUFjdGl2ZSkge1xuICAgICAgY3VycmVudGx5QWN0aXZlTWFya3MuZGVsZXRlKG1hcmspO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gYWRkTWFya3NUb0NoaWxkcmVuKG1hcmtzLCBjYikge1xuICBjb25zdCBtYXJrc1RvUmVtb3ZlID0gbmV3IFNldCgpO1xuXG4gIGZvciAoY29uc3QgbWFyayBvZiBtYXJrcykge1xuICAgIGlmICghY3VycmVudGx5QWN0aXZlTWFya3MuaGFzKG1hcmspKSB7XG4gICAgICBtYXJrc1RvUmVtb3ZlLmFkZChtYXJrKTtcbiAgICB9XG5cbiAgICBjdXJyZW50bHlBY3RpdmVNYXJrcy5hZGQobWFyayk7XG4gIH1cblxuICB0cnkge1xuICAgIHJldHVybiBjYigpO1xuICB9IGZpbmFsbHkge1xuICAgIGZvciAoY29uc3QgbWFyayBvZiBtYXJrc1RvUmVtb3ZlKSB7XG4gICAgICBjdXJyZW50bHlBY3RpdmVNYXJrcy5kZWxldGUobWFyayk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBmb3JjZURpc2FibGVNYXJrRm9yQ2hpbGRyZW4obWFyaywgY2IpIHtcbiAgY29uc3Qgd2FzUHJldmlvdXNseURpc2FibGVkID0gY3VycmVudGx5RGlzYWJsZWRNYXJrcy5oYXMobWFyayk7XG4gIGN1cnJlbnRseURpc2FibGVkTWFya3MuYWRkKG1hcmspO1xuXG4gIHRyeSB7XG4gICAgcmV0dXJuIGNiKCk7XG4gIH0gZmluYWxseSB7XG4gICAgaWYgKCF3YXNQcmV2aW91c2x5RGlzYWJsZWQpIHtcbiAgICAgIGN1cnJlbnRseURpc2FibGVkTWFya3MuZGVsZXRlKG1hcmspO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZ2V0VGV4dE5vZGVGb3JDdXJyZW50bHlBY3RpdmVNYXJrcyh0ZXh0KSB7XG4gIGNvbnN0IG5vZGUgPSB7XG4gICAgdGV4dFxuICB9O1xuXG4gIGZvciAoY29uc3QgbWFyayBvZiBjdXJyZW50bHlBY3RpdmVNYXJrcykge1xuICAgIGlmICghY3VycmVudGx5RGlzYWJsZWRNYXJrcy5oYXMobWFyaykpIHtcbiAgICAgIG5vZGVbbWFya10gPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBub2RlO1xufVxuXG5mdW5jdGlvbiBnZXRBbGlnbm1lbnRGcm9tRWxlbWVudChlbGVtZW50KSB7XG4gIGNvbnN0IHBhcmVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDsgLy8gY29uZmx1ZW5jZVxuXG4gIGNvbnN0IGF0dHJpYnV0ZSA9IHBhcmVudCA9PT0gbnVsbCB8fCBwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWxpZ24nKTsgLy8gbm90ZTogd2UgZG9uJ3Qgc2hvdyBodG1sIHRoYXQgY29uZmx1ZW5jZSB3b3VsZCBwYXJzZSBhcyBhbGlnbm1lbnRcbiAgLy8gd2UgY291bGQgY2hhbmdlIHRoYXQgYnV0IG1laFxuICAvLyAodGhleSBtYXRjaCBvbiBkaXYuZmFicmljLWVkaXRvci1ibG9jay1tYXJrIHdpdGggZGF0YS1hbGlnbilcblxuICBpZiAoYXR0cmlidXRlID09PSAnY2VudGVyJyB8fCBhdHRyaWJ1dGUgPT09ICdlbmQnKSB7XG4gICAgcmV0dXJuIGF0dHJpYnV0ZTtcbiAgfVxuXG4gIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBHb29nbGUgZG9jc1xuICAgIGNvbnN0IHRleHRBbGlnbiA9IGVsZW1lbnQuc3R5bGUudGV4dEFsaWduO1xuXG4gICAgaWYgKHRleHRBbGlnbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgIHJldHVybiAnY2VudGVyJztcbiAgICB9IC8vIFRPRE86IFJUTCB0aGluZ3M/XG5cblxuICAgIGlmICh0ZXh0QWxpZ24gPT09ICdyaWdodCcgfHwgdGV4dEFsaWduID09PSAnZW5kJykge1xuICAgICAgcmV0dXJuICdlbmQnO1xuICAgIH1cbiAgfVxufSAvLyBTZWUgaHR0cHM6Ly93d3cudHlwZXNjcmlwdGxhbmcub3JnL2RvY3MvaGFuZGJvb2svcmVsZWFzZS1ub3Rlcy90eXBlc2NyaXB0LTItOC5odG1sI2Rpc3RyaWJ1dGl2ZS1jb25kaXRpb25hbC10eXBlc1xuXG5cbmNvbnN0IEVMRU1FTlRfVEFHUyA9IHtcbiAgQTogZWwgPT4gKHtcbiAgICB0eXBlOiAnbGluaycsXG4gICAgaHJlZjogZWwuZ2V0QXR0cmlidXRlKCdocmVmJyksXG4gICAgLy8gdW5kZXJsaW5lIGlzIG9uIGxpbmtzIGluIEdvb2dsZSBEb2NzXG4gICAgY2hpbGRyZW46IGZvcmNlRGlzYWJsZU1hcmtGb3JDaGlsZHJlbigndW5kZXJsaW5lJywgKCkgPT4gZGVzZXJpYWxpemVDaGlsZHJlbiQxKGVsLmNoaWxkTm9kZXMpKVxuICB9KSxcbiAgQkxPQ0tRVU9URTogKCkgPT4gKHtcbiAgICB0eXBlOiAnYmxvY2txdW90ZSdcbiAgfSksXG4gIEgxOiBlbCA9PiAoe1xuICAgIHR5cGU6ICdoZWFkaW5nJyxcbiAgICBsZXZlbDogMSxcbiAgICB0ZXh0QWxpZ246IGdldEFsaWdubWVudEZyb21FbGVtZW50KGVsKVxuICB9KSxcbiAgSDI6IGVsID0+ICh7XG4gICAgdHlwZTogJ2hlYWRpbmcnLFxuICAgIGxldmVsOiAyLFxuICAgIHRleHRBbGlnbjogZ2V0QWxpZ25tZW50RnJvbUVsZW1lbnQoZWwpXG4gIH0pLFxuICBIMzogZWwgPT4gKHtcbiAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgbGV2ZWw6IDMsXG4gICAgdGV4dEFsaWduOiBnZXRBbGlnbm1lbnRGcm9tRWxlbWVudChlbClcbiAgfSksXG4gIEg0OiBlbCA9PiAoe1xuICAgIHR5cGU6ICdoZWFkaW5nJyxcbiAgICBsZXZlbDogNCxcbiAgICB0ZXh0QWxpZ246IGdldEFsaWdubWVudEZyb21FbGVtZW50KGVsKVxuICB9KSxcbiAgSDU6IGVsID0+ICh7XG4gICAgdHlwZTogJ2hlYWRpbmcnLFxuICAgIGxldmVsOiA1LFxuICAgIHRleHRBbGlnbjogZ2V0QWxpZ25tZW50RnJvbUVsZW1lbnQoZWwpXG4gIH0pLFxuICBINjogZWwgPT4gKHtcbiAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgbGV2ZWw6IDYsXG4gICAgdGV4dEFsaWduOiBnZXRBbGlnbm1lbnRGcm9tRWxlbWVudChlbClcbiAgfSksXG4gIElNRzogZWwgPT4gKHtcbiAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICBjaGlsZHJlbjogW3tcbiAgICAgIHRleHQ6IGA8aW1nIGFsdD0ke0pTT04uc3RyaW5naWZ5KGVsLmdldEF0dHJpYnV0ZSgnYWx0JykgfHwgJycpfSBzcmM9JHtKU09OLnN0cmluZ2lmeShlbC5nZXRBdHRyaWJ1dGUoJ3NyYycpIHx8ICcnKX0+YFxuICAgIH1dXG4gIH0pLFxuICBMSTogKCkgPT4gKHtcbiAgICB0eXBlOiAnbGlzdC1pdGVtJ1xuICB9KSxcbiAgT0w6ICgpID0+ICh7XG4gICAgdHlwZTogJ29yZGVyZWQtbGlzdCdcbiAgfSksXG4gIFA6IGVsID0+ICh7XG4gICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgdGV4dEFsaWduOiBnZXRBbGlnbm1lbnRGcm9tRWxlbWVudChlbClcbiAgfSksXG4gIFBSRTogKCkgPT4gKHtcbiAgICB0eXBlOiAnY29kZSdcbiAgfSksXG4gIFVMOiAoKSA9PiAoe1xuICAgIHR5cGU6ICd1bm9yZGVyZWQtbGlzdCdcbiAgfSksXG4gIEhSOiAoKSA9PiAoe1xuICAgIHR5cGU6ICdkaXZpZGVyJyxcbiAgICBjaGlsZHJlbjogW3tcbiAgICAgIHRleHQ6ICcnXG4gICAgfV1cbiAgfSlcbn07XG5jb25zdCBURVhUX1RBR1MgPSB7XG4gIENPREU6ICdjb2RlJyxcbiAgREVMOiAnc3RyaWtldGhyb3VnaCcsXG4gIFM6ICdzdHJpa2V0aHJvdWdoJyxcbiAgU1RSSUtFOiAnc3RyaWtldGhyb3VnaCcsXG4gIEVNOiAnaXRhbGljJyxcbiAgSTogJ2l0YWxpYycsXG4gIFNUUk9ORzogJ2JvbGQnLFxuICBVOiAndW5kZXJsaW5lJyxcbiAgU1VQOiAnc3VwZXJzY3JpcHQnLFxuICBTVUI6ICdzdWJzY3JpcHQnXG59O1xuXG5mdW5jdGlvbiBtYXJrc0Zyb21FbGVtZW50QXR0cmlidXRlcyhlbGVtZW50KSB7XG4gIGNvbnN0IG1hcmtzID0gbmV3IFNldCgpO1xuXG4gIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBzdHlsZSA9IGVsZW1lbnQuc3R5bGU7XG4gICAgY29uc3Qge1xuICAgICAgbm9kZU5hbWVcbiAgICB9ID0gZWxlbWVudDtcbiAgICBjb25zdCBtYXJrRnJvbU5vZGVOYW1lID0gVEVYVF9UQUdTW25vZGVOYW1lXTtcblxuICAgIGlmIChtYXJrRnJvbU5vZGVOYW1lKSB7XG4gICAgICBtYXJrcy5hZGQobWFya0Zyb21Ob2RlTmFtZSk7XG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgZm9udFdlaWdodCxcbiAgICAgIHRleHREZWNvcmF0aW9uLFxuICAgICAgdmVydGljYWxBbGlnblxuICAgIH0gPSBzdHlsZTtcblxuICAgIGlmICh0ZXh0RGVjb3JhdGlvbiA9PT0gJ3VuZGVybGluZScpIHtcbiAgICAgIG1hcmtzLmFkZCgndW5kZXJsaW5lJyk7XG4gICAgfSBlbHNlIGlmICh0ZXh0RGVjb3JhdGlvbiA9PT0gJ2xpbmUtdGhyb3VnaCcpIHtcbiAgICAgIG1hcmtzLmFkZCgnc3RyaWtldGhyb3VnaCcpO1xuICAgIH0gLy8gY29uZmx1ZW5jZVxuXG5cbiAgICBpZiAobm9kZU5hbWUgPT09ICdTUEFOJyAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnY29kZScpKSB7XG4gICAgICBtYXJrcy5hZGQoJ2NvZGUnKTtcbiAgICB9IC8vIEdvb2dsZSBEb2NzIGRvZXMgd2VpcmQgdGhpbmdzIHdpdGggPGI+XG5cblxuICAgIGlmIChub2RlTmFtZSA9PT0gJ0InICYmIGZvbnRXZWlnaHQgIT09ICdub3JtYWwnKSB7XG4gICAgICBtYXJrcy5hZGQoJ2JvbGQnKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBmb250V2VpZ2h0ID09PSAnc3RyaW5nJyAmJiAoZm9udFdlaWdodCA9PT0gJ2JvbGQnIHx8IGZvbnRXZWlnaHQgPT09ICdib2xkZXInIHx8IGZvbnRXZWlnaHQgPT09ICcxMDAwJyB8fCAvXls1LTldXFxkezJ9JC8udGVzdChmb250V2VpZ2h0KSkpIHtcbiAgICAgIG1hcmtzLmFkZCgnYm9sZCcpO1xuICAgIH1cblxuICAgIGlmIChzdHlsZS5mb250U3R5bGUgPT09ICdpdGFsaWMnKSB7XG4gICAgICBtYXJrcy5hZGQoJ2l0YWxpYycpO1xuICAgIH0gLy8gR29vZ2xlIERvY3MgdXNlcyB2ZXJ0aWNhbCBhbGlnbiBmb3Igc3Vic2NyaXB0IGFuZCBzdXBlcnNjcmlwdCBpbnN0ZWFkIG9mIDxzdXA+IGFuZCA8c3ViPlxuXG5cbiAgICBpZiAodmVydGljYWxBbGlnbiA9PT0gJ3N1cGVyJykge1xuICAgICAgbWFya3MuYWRkKCdzdXBlcnNjcmlwdCcpO1xuICAgIH0gZWxzZSBpZiAodmVydGljYWxBbGlnbiA9PT0gJ3N1YicpIHtcbiAgICAgIG1hcmtzLmFkZCgnc3Vic2NyaXB0Jyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1hcmtzO1xufVxuXG5mdW5jdGlvbiBkZXNlcmlhbGl6ZUhUTUwoaHRtbCkge1xuICBjb25zdCBwYXJzZWQgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGh0bWwsICd0ZXh0L2h0bWwnKTtcbiAgcmV0dXJuIGRlc2VyaWFsaXplSFRNTE5vZGUocGFyc2VkLmJvZHkpO1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVIVE1MTm9kZShlbCkge1xuICBpZiAoZWwubm9kZVR5cGUgPT09IDMpIHtcbiAgICBjb25zdCB0ZXh0ID0gZWwudGV4dENvbnRlbnQ7XG5cbiAgICBpZiAoISh0ZXh0ICE9PSBudWxsICYmIHRleHQgIT09IHZvaWQgMCAmJiB0ZXh0LnRyaW0oKSkpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2dldFRleHROb2RlRm9yQ3VycmVudGx5QWN0aXZlTWFya3ModGV4dCldO1xuICB9XG5cbiAgaWYgKGVsLm5vZGVUeXBlICE9PSAxKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgbGV0IHtcbiAgICBub2RlTmFtZVxuICB9ID0gZWw7XG5cbiAgaWYgKG5vZGVOYW1lID09PSAnQlInKSB7XG4gICAgcmV0dXJuIFtnZXRUZXh0Tm9kZUZvckN1cnJlbnRseUFjdGl2ZU1hcmtzKCdcXG4nKV07XG4gIH1cblxuICBjb25zdCBtYXJrcyA9IG1hcmtzRnJvbUVsZW1lbnRBdHRyaWJ1dGVzKGVsKTsgLy8gRHJvcGJveCBQYXBlciBkaXNwbGF5cyBibG9ja3F1b3RlcyBhcyBsaXN0cyBmb3Igc29tZSByZWFzb25cblxuICBpZiAoZWwgaW5zdGFuY2VvZiBnbG9iYWxUaGlzLkVsZW1lbnQgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdsaXN0dHlwZS1xdW90ZScpKSB7XG4gICAgbWFya3MuZGVsZXRlKCdpdGFsaWMnKTtcbiAgICBub2RlTmFtZSA9ICdCTE9DS1FVT1RFJztcbiAgfVxuXG4gIHJldHVybiBhZGRNYXJrc1RvQ2hpbGRyZW4obWFya3MsICgpID0+IHtcbiAgICBpZiAoRUxFTUVOVF9UQUdTW25vZGVOYW1lXSkge1xuICAgICAgY29uc3QgYXR0cnMgPSBFTEVNRU5UX1RBR1Nbbm9kZU5hbWVdKGVsKTtcblxuICAgICAgaWYgKGF0dHJzLmNoaWxkcmVuKSB7XG4gICAgICAgIHJldHVybiBbYXR0cnNdO1xuICAgICAgfVxuXG4gICAgICBsZXQgY2hpbGRyZW4gPSBkZXNlcmlhbGl6ZUNoaWxkcmVuJDEoZWwuY2hpbGROb2Rlcyk7XG4gICAgICByZXR1cm4gW19vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYXR0cnMpLCB7fSwge1xuICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgICAgIH0pXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVzZXJpYWxpemVDaGlsZHJlbiQxKGVsLmNoaWxkTm9kZXMpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZGVzZXJpYWxpemVDaGlsZHJlbiQxKG5vZGVzKSB7XG4gIGNvbnN0IG91dHB1dE5vZGVzID0gW107XG5cbiAgZm9yIChjb25zdCBub2RlIG9mIG5vZGVzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gZGVzZXJpYWxpemVIVE1MTm9kZShub2RlKTtcblxuICAgIGlmIChyZXN1bHQubGVuZ3RoKSB7XG4gICAgICBvdXRwdXROb2Rlcy5wdXNoKC4uLnJlc3VsdCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFvdXRwdXROb2Rlcy5sZW5ndGgpIHtcbiAgICBvdXRwdXROb2Rlcy5wdXNoKHtcbiAgICAgIHRleHQ6ICcnXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gb3V0cHV0Tm9kZXM7XG59XG5cbmNvbnN0IG1hcmtkb3duQ29uZmlnID0ge1xuICBtZGFzdEV4dGVuc2lvbnM6IFthdXRvTGlua0xpdGVyYWxGcm9tTWFya2Rvd25FeHRlbnNpb25fX2RlZmF1bHRbXCJkZWZhdWx0XCJdLCBnZm1TdHJpa2V0aHJvdWdoRnJvbU1hcmtkb3duRXh0ZW5zaW9uX19kZWZhdWx0W1wiZGVmYXVsdFwiXV0sXG4gIGV4dGVuc2lvbnM6IFthdXRvTGlua0xpdGVyYWxNYXJrZG93blN5bnRheF9fZGVmYXVsdFtcImRlZmF1bHRcIl0sIGdmbVN0cmlrZXRocm91Z2hNYXJrZG93blN5bnRheF9fZGVmYXVsdFtcImRlZmF1bHRcIl0oKV1cbn07XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZU1hcmtkb3duKG1hcmtkb3duKSB7XG4gIGNvbnN0IHJvb3QgPSBtZEFTVFV0aWxGcm9tTWFya2Rvd25fX2RlZmF1bHRbXCJkZWZhdWx0XCJdKG1hcmtkb3duLCBtYXJrZG93bkNvbmZpZyk7XG4gIGNvbnN0IGdldERlZmluaXRpb24gPSBkZWZpbml0aW9uc19fZGVmYXVsdFtcImRlZmF1bHRcIl0ocm9vdCk7XG4gIGxldCBub2RlcyA9IHJvb3QuY2hpbGRyZW47XG5cbiAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMSAmJiBub2Rlc1swXS50eXBlID09PSAncGFyYWdyYXBoJykge1xuICAgIG5vZGVzID0gbm9kZXNbMF0uY2hpbGRyZW47XG4gIH1cblxuICByZXR1cm4gZGVzZXJpYWxpemVDaGlsZHJlbihub2RlcywgZ2V0RGVmaW5pdGlvbik7XG59XG5cbmZ1bmN0aW9uIGRlc2VyaWFsaXplQ2hpbGRyZW4obm9kZXMsIGdldERlZmluaXRpb24pIHtcbiAgY29uc3Qgb3V0cHV0Tm9kZXMgPSBbXTtcblxuICBmb3IgKGNvbnN0IG5vZGUgb2Ygbm9kZXMpIHtcbiAgICBjb25zdCByZXN1bHQgPSBkZXNlcmlhbGl6ZU1hcmtkb3duTm9kZShub2RlLCBnZXREZWZpbml0aW9uKTtcblxuICAgIGlmIChyZXN1bHQubGVuZ3RoKSB7XG4gICAgICBvdXRwdXROb2Rlcy5wdXNoKC4uLnJlc3VsdCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFvdXRwdXROb2Rlcy5sZW5ndGgpIHtcbiAgICBvdXRwdXROb2Rlcy5wdXNoKHtcbiAgICAgIHRleHQ6ICcnXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gb3V0cHV0Tm9kZXM7XG59XG5cbmZ1bmN0aW9uIGRlc2VyaWFsaXplTWFya2Rvd25Ob2RlKG5vZGUsIGdldERlZmluaXRpb24pIHtcbiAgc3dpdGNoIChub2RlLnR5cGUpIHtcbiAgICBjYXNlICdibG9ja3F1b3RlJzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgdHlwZTogJ2Jsb2NrcXVvdGUnLFxuICAgICAgICAgIGNoaWxkcmVuOiBkZXNlcmlhbGl6ZUNoaWxkcmVuKG5vZGUuY2hpbGRyZW4sIGdldERlZmluaXRpb24pXG4gICAgICAgIH1dO1xuICAgICAgfVxuXG4gICAgY2FzZSAnbGlua1JlZmVyZW5jZSc6XG4gICAgICB7XG4gICAgICAgIHZhciBfZ2V0RGVmaW5pdGlvbjtcblxuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICB0eXBlOiAnbGluaycsXG4gICAgICAgICAgaHJlZjogKChfZ2V0RGVmaW5pdGlvbiA9IGdldERlZmluaXRpb24obm9kZS5pZGVudGlmaWVyKSkgPT09IG51bGwgfHwgX2dldERlZmluaXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nZXREZWZpbml0aW9uLnVybCkgfHwgJycsXG4gICAgICAgICAgY2hpbGRyZW46IGRlc2VyaWFsaXplQ2hpbGRyZW4obm9kZS5jaGlsZHJlbiwgZ2V0RGVmaW5pdGlvbilcbiAgICAgICAgfV07XG4gICAgICB9XG5cbiAgICBjYXNlICdsaW5rJzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgdHlwZTogJ2xpbmsnLFxuICAgICAgICAgIGhyZWY6IG5vZGUudXJsLFxuICAgICAgICAgIGNoaWxkcmVuOiBkZXNlcmlhbGl6ZUNoaWxkcmVuKG5vZGUuY2hpbGRyZW4sIGdldERlZmluaXRpb24pXG4gICAgICAgIH1dO1xuICAgICAgfVxuXG4gICAgY2FzZSAnY29kZSc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBbe1xuICAgICAgICAgIHR5cGU6ICdjb2RlJyxcbiAgICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICAgIHRleHQ6IG5vZGUudmFsdWVcbiAgICAgICAgICB9XVxuICAgICAgICB9XTtcbiAgICAgIH1cblxuICAgIGNhc2UgJ3BhcmFncmFwaCc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBbe1xuICAgICAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgICAgIGNoaWxkcmVuOiBkZXNlcmlhbGl6ZUNoaWxkcmVuKG5vZGUuY2hpbGRyZW4sIGdldERlZmluaXRpb24pXG4gICAgICAgIH1dO1xuICAgICAgfVxuXG4gICAgY2FzZSAnaGVhZGluZyc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBbe1xuICAgICAgICAgIHR5cGU6ICdoZWFkaW5nJyxcbiAgICAgICAgICBsZXZlbDogbm9kZS5kZXB0aCxcbiAgICAgICAgICBjaGlsZHJlbjogZGVzZXJpYWxpemVDaGlsZHJlbihub2RlLmNoaWxkcmVuLCBnZXREZWZpbml0aW9uKVxuICAgICAgICB9XTtcbiAgICAgIH1cblxuICAgIGNhc2UgJ2xpc3QnOlxuICAgICAge1xuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICB0eXBlOiBub2RlLm9yZGVyZWQgPyAnb3JkZXJlZC1saXN0JyA6ICd1bm9yZGVyZWQtbGlzdCcsXG4gICAgICAgICAgY2hpbGRyZW46IGRlc2VyaWFsaXplQ2hpbGRyZW4obm9kZS5jaGlsZHJlbiwgZ2V0RGVmaW5pdGlvbilcbiAgICAgICAgfV07XG4gICAgICB9XG5cbiAgICBjYXNlICdpbWFnZVJlZmVyZW5jZSc6XG4gICAgICB7XG4gICAgICAgIHZhciBfZ2V0RGVmaW5pdGlvbjI7XG5cbiAgICAgICAgcmV0dXJuIFtnZXRUZXh0Tm9kZUZvckN1cnJlbnRseUFjdGl2ZU1hcmtzKGAhWyR7bm9kZS5hbHQgfHwgJyd9XSgkeygoX2dldERlZmluaXRpb24yID0gZ2V0RGVmaW5pdGlvbihub2RlLmlkZW50aWZpZXIpKSA9PT0gbnVsbCB8fCBfZ2V0RGVmaW5pdGlvbjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nZXREZWZpbml0aW9uMi51cmwpIHx8ICcnfSlgKV07XG4gICAgICB9XG5cbiAgICBjYXNlICdpbWFnZSc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBbZ2V0VGV4dE5vZGVGb3JDdXJyZW50bHlBY3RpdmVNYXJrcyhgIVske25vZGUuYWx0IHx8ICcnfV0oJHtub2RlLnVybH0pYCldO1xuICAgICAgfVxuXG4gICAgY2FzZSAnbGlzdEl0ZW0nOlxuICAgICAge1xuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICB0eXBlOiAnbGlzdC1pdGVtJyxcbiAgICAgICAgICBjaGlsZHJlbjogZGVzZXJpYWxpemVDaGlsZHJlbihub2RlLmNoaWxkcmVuLCBnZXREZWZpbml0aW9uKVxuICAgICAgICB9XTtcbiAgICAgIH1cblxuICAgIGNhc2UgJ3RoZW1hdGljQnJlYWsnOlxuICAgICAge1xuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICB0eXBlOiAnZGl2aWRlcicsXG4gICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICAgIH1dXG4gICAgICAgIH1dO1xuICAgICAgfVxuXG4gICAgY2FzZSAnYnJlYWsnOlxuICAgICAge1xuICAgICAgICByZXR1cm4gW2dldFRleHROb2RlRm9yQ3VycmVudGx5QWN0aXZlTWFya3MoJ1xcbicpXTtcbiAgICAgIH1cblxuICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBhZGRNYXJrVG9DaGlsZHJlbignc3RyaWtldGhyb3VnaCcsICgpID0+IGRlc2VyaWFsaXplQ2hpbGRyZW4obm9kZS5jaGlsZHJlbiwgZ2V0RGVmaW5pdGlvbikpO1xuICAgICAgfVxuXG4gICAgY2FzZSAnc3Ryb25nJzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdib2xkJywgKCkgPT4gZGVzZXJpYWxpemVDaGlsZHJlbihub2RlLmNoaWxkcmVuLCBnZXREZWZpbml0aW9uKSk7XG4gICAgICB9XG5cbiAgICBjYXNlICdlbXBoYXNpcyc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBhZGRNYXJrVG9DaGlsZHJlbignaXRhbGljJywgKCkgPT4gZGVzZXJpYWxpemVDaGlsZHJlbihub2RlLmNoaWxkcmVuLCBnZXREZWZpbml0aW9uKSk7XG4gICAgICB9XG5cbiAgICBjYXNlICdpbmxpbmVDb2RlJzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdjb2RlJywgKCkgPT4gW2dldFRleHROb2RlRm9yQ3VycmVudGx5QWN0aXZlTWFya3Mobm9kZS52YWx1ZSldKTtcbiAgICAgIH1cbiAgICAvLyB3aGlsZSBpdCB3b3VsZCBiZSBuaWNlIGlmIHdlIHBhcnNlZCB0aGUgaHRtbCBoZXJlXG4gICAgLy8gaXQncyBhIGJpdCBtb3JlIGNvbXBsaWNhdGVkIHRoYW4ganVzdCBwYXJzaW5nIHRoZSBodG1sXG4gICAgLy8gYmVjYXVzZSBhbiBodG1sIG5vZGUgbWlnaHQganVzdCBiZSBhbiBvcGVuaW5nL2Nsb3Npbmcgbm9kZVxuICAgIC8vIGJ1dCB3ZSBqdXN0IGhhdmUgYW4gb3BlbmluZy9jbG9zaW5nIG5vZGUgaGVyZVxuICAgIC8vIG5vdCB0aGUgb3BlbmluZyBhbmQgY2xvc2luZyBhbmQgY2hpbGRyZW5cblxuICAgIGNhc2UgJ2h0bWwnOlxuICAgIGNhc2UgJ3RleHQnOlxuICAgICAge1xuICAgICAgICByZXR1cm4gW2dldFRleHROb2RlRm9yQ3VycmVudGx5QWN0aXZlTWFya3Mobm9kZS52YWx1ZSldO1xuICAgICAgfVxuICB9XG5cbiAgcmV0dXJuIFtdO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRGcmFnbWVudEJ1dERpZmZlcmVudChlZGl0b3IsIG5vZGVzKSB7XG4gIGlmIChzbGF0ZS5FZGl0b3IuaXNCbG9jayhlZGl0b3IsIG5vZGVzWzBdKSkge1xuICAgIGluc2VydE5vZGVzQnV0UmVwbGFjZUlmU2VsZWN0aW9uSXNBdEVtcHR5UGFyYWdyYXBoT3JIZWFkaW5nKGVkaXRvciwgbm9kZXMpO1xuICB9IGVsc2Uge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMuaW5zZXJ0RnJhZ21lbnQoZWRpdG9yLCBub2Rlcyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gd2l0aFBhc3RpbmcoZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBpbnNlcnREYXRhLFxuICAgIHNldEZyYWdtZW50RGF0YVxuICB9ID0gZWRpdG9yO1xuXG4gIGVkaXRvci5zZXRGcmFnbWVudERhdGEgPSBkYXRhID0+IHtcbiAgICBpZiAoZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgZGF0YS5zZXREYXRhKCdhcHBsaWNhdGlvbi94LWtleXN0b25lLWRvY3VtZW50LWVkaXRvcicsICd0cnVlJyk7XG4gICAgfVxuXG4gICAgc2V0RnJhZ21lbnREYXRhKGRhdGEpO1xuICB9O1xuXG4gIGVkaXRvci5pbnNlcnREYXRhID0gZGF0YSA9PiB7XG4gICAgLy8gdGhpcyBleGlzdHMgYmVjYXVzZSBiZWhpbmQgdGhlIHNjZW5lcywgU2xhdGUgc2V0cyB0aGUgc2xhdGUgZG9jdW1lbnRcbiAgICAvLyBvbiB0aGUgZGF0YSB0cmFuc2ZlciwgdGhpcyBpcyBncmVhdCBiZWNhdXNlIGl0IG1lYW5zIHdoZW4geW91IGNvcHkgYW5kIHBhc3RlXG4gICAgLy8gc29tZXRoaW5nIGluIHRoZSBlZGl0b3Igb3IgYmV0d2VlbiBlZGl0b3JzLCBpdCdsbCB1c2UgdGhlIGFjdHVhbCBTbGF0ZSBkYXRhXG4gICAgLy8gcmF0aGVyIHRoYW4gdGhlIHNlcmlhbGl6ZWQgaHRtbCBzbyBjb21wb25lbnQgYmxvY2tzIGFuZCBldGMuIHdpbGwgd29yayBmaW5lXG4gICAgLy8gd2UncmUgc2V0dGluZyBhcHBsaWNhdGlvbi94LWtleXN0b25lLWRvY3VtZW50LWVkaXRvclxuICAgIC8vIHRob3VnaCBzbyB0aGF0IHdlIG9ubHkgYWNjZXB0IHNsYXRlIGRhdGEgZnJvbSBLZXlzdG9uZSdzIGVkaXRvclxuICAgIC8vIGJlY2F1c2Ugb3RoZXIgZWRpdG9ycyB3aWxsIGxpa2VseSBoYXZlIGEgZGlmZmVyZW50IHN0cnVjdHVyZVxuICAgIC8vIHNvIHdlJ2xsIHJlbHkgb24gdGhlIGh0bWwgZGVzZXJpYWxpemF0aW9uIGluc3RlYWRcbiAgICAvLyAobm90ZSB0aGF0IHllcywgd2UgZG8gY2FsbCBpbnNlcnREYXRhIGF0IHRoZSBlbmQgb2YgdGhpcyBmdW5jdGlvblxuICAgIC8vIHdoaWNoIGlzIHdoZXJlIFNsYXRlJ3MgbG9naWMgd2lsbCBydW4sIGl0J2xsIG5ldmVyIGRvIGFueXRoaW5nIHRoZXJlIHRob3VnaFxuICAgIC8vIHNpbmNlIGFueXRoaW5nIHRoYXQgd2lsbCBoYXZlIHNsYXRlIGRhdGEgd2lsbCBhbHNvIGhhdmUgdGV4dC9odG1sIHdoaWNoIHdlIGhhbmRsZVxuICAgIC8vIGJlZm9yZSB3ZSBjYWxsIGluc2VydERhdGEpXG4gICAgLy8gVE9ETzogaGFuZGxlIHRoZSBjYXNlIG9mIGNvcHlpbmcgYmV0d2VlbiBlZGl0b3JzIHdpdGggZGlmZmVyZW50IGNvbXBvbmVudHMgYmxvY2tzXG4gICAgLy8gKHJpZ2h0IG5vdywgdGhpbmdzIHdpbGwgYmxvdyB1cCBpbiBtb3N0IGNhc2VzKVxuICAgIGlmIChkYXRhLmdldERhdGEoJ2FwcGxpY2F0aW9uL3gta2V5c3RvbmUtZG9jdW1lbnQtZWRpdG9yJykgPT09ICd0cnVlJykge1xuICAgICAgaW5zZXJ0RGF0YShkYXRhKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBibG9ja0Fib3ZlID0gc2xhdGUuRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IG5vZGUgPT4gc2xhdGUuRWRpdG9yLmlzQmxvY2soZWRpdG9yLCBub2RlKVxuICAgIH0pO1xuXG4gICAgaWYgKChibG9ja0Fib3ZlID09PSBudWxsIHx8IGJsb2NrQWJvdmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJsb2NrQWJvdmVbMF0udHlwZSkgPT09ICdjb2RlJykge1xuICAgICAgY29uc3QgcGxhaW4gPSBkYXRhLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgICAgIGVkaXRvci5pbnNlcnRUZXh0KHBsYWluKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgdnNDb2RlRWRpdG9yRGF0YSA9IGRhdGEuZ2V0RGF0YSgndnNjb2RlLWVkaXRvci1kYXRhJyk7XG5cbiAgICBpZiAodnNDb2RlRWRpdG9yRGF0YSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdnNDb2RlRGF0YSA9IEpTT04ucGFyc2UodnNDb2RlRWRpdG9yRGF0YSk7XG5cbiAgICAgICAgaWYgKCh2c0NvZGVEYXRhID09PSBudWxsIHx8IHZzQ29kZURhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZzQ29kZURhdGEubW9kZSkgPT09ICdtYXJrZG93bicgfHwgKHZzQ29kZURhdGEgPT09IG51bGwgfHwgdnNDb2RlRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdnNDb2RlRGF0YS5tb2RlKSA9PT0gJ21keCcpIHtcbiAgICAgICAgICBjb25zdCBwbGFpbiA9IGRhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuXG4gICAgICAgICAgaWYgKHBsYWluKSB7XG4gICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IGRlc2VyaWFsaXplTWFya2Rvd24ocGxhaW4pO1xuICAgICAgICAgICAgaW5zZXJ0RnJhZ21lbnRCdXREaWZmZXJlbnQoZWRpdG9yLCBmcmFnbWVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgaHRtbCA9IGRhdGEuZ2V0RGF0YSgndGV4dC9odG1sJyk7XG5cbiAgICBpZiAoaHRtbCkge1xuICAgICAgY29uc3QgZnJhZ21lbnQgPSBkZXNlcmlhbGl6ZUhUTUwoaHRtbCk7XG4gICAgICBpbnNlcnRGcmFnbWVudEJ1dERpZmZlcmVudChlZGl0b3IsIGZyYWdtZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwbGFpbiA9IGRhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuXG4gICAgaWYgKHBsYWluKSB7XG4gICAgICBjb25zdCBmcmFnbWVudCA9IGRlc2VyaWFsaXplTWFya2Rvd24ocGxhaW4pO1xuICAgICAgaW5zZXJ0RnJhZ21lbnRCdXREaWZmZXJlbnQoZWRpdG9yLCBmcmFnbWVudCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW5zZXJ0RGF0YShkYXRhKTtcbiAgfTtcblxuICByZXR1cm4gZWRpdG9yO1xufVxuXG5jb25zdCBIT1RLRVlTID0ge1xuICAnbW9kK2InOiAnYm9sZCcsXG4gICdtb2QraSc6ICdpdGFsaWMnLFxuICAnbW9kK3UnOiAndW5kZXJsaW5lJ1xufTtcblxuZnVuY3Rpb24gaXNNYXJrQWN0aXZlKGVkaXRvciwgbWFyaykge1xuICBjb25zdCBtYXJrcyA9IHNsYXRlLkVkaXRvci5tYXJrcyhlZGl0b3IpO1xuXG4gIGlmIChtYXJrcyAhPT0gbnVsbCAmJiBtYXJrcyAhPT0gdm9pZCAwICYmIG1hcmtzW21hcmtdKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gLy8gc2VlIHRoZSBzdHVmZiBhYm91dCBtYXJrcyBpbiB0b29sYmFyLXN0YXRlIGZvciB3aHkgdGhpcyBpcyBoZXJlXG5cblxuICBmb3IgKGNvbnN0IGVudHJ5IG9mIHNsYXRlLkVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICBtYXRjaDogc2xhdGUuVGV4dC5pc1RleHRcbiAgfSkpIHtcbiAgICBpZiAoZW50cnlbMF1bbWFya10pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuY29uc3QgZ2V0S2V5RG93bkhhbmRsZXIgPSBlZGl0b3IgPT4gZXZlbnQgPT4ge1xuICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuXG4gIGZvciAoY29uc3QgaG90a2V5IGluIEhPVEtFWVMpIHtcbiAgICBpZiAoaXNIb3RrZXlfX2RlZmF1bHRbXCJkZWZhdWx0XCJdKGhvdGtleSwgZXZlbnQubmF0aXZlRXZlbnQpKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgbWFyayA9IEhPVEtFWVNbaG90a2V5XTtcbiAgICAgIGNvbnN0IGlzQWN0aXZlID0gaXNNYXJrQWN0aXZlKGVkaXRvciwgbWFyayk7XG5cbiAgICAgIGlmIChpc0FjdGl2ZSkge1xuICAgICAgICBzbGF0ZS5FZGl0b3IucmVtb3ZlTWFyayhlZGl0b3IsIG1hcmspO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2xhdGUuRWRpdG9yLmFkZE1hcmsoZWRpdG9yLCBtYXJrLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpc0hvdGtleV9fZGVmYXVsdFtcImRlZmF1bHRcIl0oJ21vZCtcXFxcJywgZXZlbnQubmF0aXZlRXZlbnQpKSB7XG4gICAgY2xlYXJGb3JtYXR0aW5nKGVkaXRvcik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGlzSG90a2V5X19kZWZhdWx0W1wiZGVmYXVsdFwiXSgnbW9kK2snLCBldmVudC5uYXRpdmVFdmVudCkpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHdyYXBMaW5rKGVkaXRvciwgJycpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChldmVudC5rZXkgPT09ICdUYWInKSB7XG4gICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICB1bm5lc3RMaXN0KGVkaXRvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5lc3RMaXN0KGVkaXRvcik7XG4gICAgfVxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZXZlbnQua2V5ID09PSAnVGFiJyAmJiBlZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgY29uc3QgbGF5b3V0QXJlYSA9IHNsYXRlLkVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ2xheW91dC1hcmVhJ1xuICAgIH0pO1xuXG4gICAgaWYgKGxheW91dEFyZWEpIHtcbiAgICAgIGNvbnN0IGxheW91dEFyZWFUb0VudGVyID0gZXZlbnQuc2hpZnRLZXkgPyBzbGF0ZS5FZGl0b3IuYmVmb3JlKGVkaXRvciwgbGF5b3V0QXJlYVsxXSwge1xuICAgICAgICB1bml0OiAnYmxvY2snXG4gICAgICB9KSA6IHNsYXRlLkVkaXRvci5hZnRlcihlZGl0b3IsIGxheW91dEFyZWFbMV0sIHtcbiAgICAgICAgdW5pdDogJ2Jsb2NrJ1xuICAgICAgfSk7XG4gICAgICBzbGF0ZS5UcmFuc2Zvcm1zLnNldFNlbGVjdGlvbihlZGl0b3IsIHtcbiAgICAgICAgYW5jaG9yOiBsYXlvdXRBcmVhVG9FbnRlcixcbiAgICAgICAgZm9jdXM6IGxheW91dEFyZWFUb0VudGVyXG4gICAgICB9KTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBjcmVhdGVEb2N1bWVudEVkaXRvcihkb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MsIHJlbGF0aW9uc2hpcHMsIGlzU2hpZnRQcmVzc2VkUmVmKSB7XG4gIHJldHVybiB3aXRoUGFzdGluZyh3aXRoU29mdEJyZWFrcyhpc1NoaWZ0UHJlc3NlZFJlZiwgd2l0aEJsb2Nrc1NjaGVtYSh3aXRoTGluayhkb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MsIHdpdGhMaXN0KHdpdGhIZWFkaW5nKHdpdGhSZWxhdGlvbnNoaXAod2l0aEluc2VydE1lbnUod2l0aENvbXBvbmVudEJsb2Nrcyhjb21wb25lbnRCbG9ja3MsIGRvY3VtZW50RmVhdHVyZXMsIHJlbGF0aW9uc2hpcHMsIHdpdGhQYXJhZ3JhcGhzKHdpdGhTaG9ydGN1dHMod2l0aERpdmlkZXIod2l0aExheW91dHMod2l0aE1hcmtzKGRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2Nrcywgd2l0aENvZGVCbG9jayh3aXRoQmxvY2tNYXJrZG93blNob3J0Y3V0cyhkb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MsIHdpdGhCbG9ja3F1b3RlKHdpdGhEb2N1bWVudEZlYXR1cmVzTm9ybWFsaXphdGlvbihkb2N1bWVudEZlYXR1cmVzLCByZWxhdGlvbnNoaXBzLCBzbGF0ZUhpc3Rvcnkud2l0aEhpc3Rvcnkoc2xhdGVSZWFjdC53aXRoUmVhY3Qoc2xhdGUuY3JlYXRlRWRpdG9yKCkpKSkpKSkpKSkpKSkpKSkpKSkpKTtcbn1cbmZ1bmN0aW9uIERvY3VtZW50RWRpdG9yKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBhdXRvRm9jdXMsXG4gICAgb25DaGFuZ2UsXG4gICAgdmFsdWUsXG4gICAgY29tcG9uZW50QmxvY2tzLFxuICAgIHJlbGF0aW9uc2hpcHMsXG4gICAgZG9jdW1lbnRGZWF0dXJlc1xuICB9ID0gX3JlZjtcbiAgY29uc3QgaXNTaGlmdFByZXNzZWRSZWYgPSB1c2VLZXlEb3duUmVmKCdTaGlmdCcpO1xuICBjb25zdCB7XG4gICAgY29sb3JzLFxuICAgIHNwYWNpbmdcbiAgfSA9IGNvcmUudXNlVGhlbWUoKTtcbiAgY29uc3QgW2V4cGFuZGVkLCBzZXRFeHBhbmRlZF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGVkaXRvciA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gY3JlYXRlRG9jdW1lbnRFZGl0b3IoZG9jdW1lbnRGZWF0dXJlcywgY29tcG9uZW50QmxvY2tzLCByZWxhdGlvbnNoaXBzLCBpc1NoaWZ0UHJlc3NlZFJlZiksIFtkb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MsIHJlbGF0aW9uc2hpcHMsIGlzU2hpZnRQcmVzc2VkUmVmXSk7XG4gIHJldHVybiBjb3JlLmpzeChcImRpdlwiLCB7XG4gICAgY3NzOiBbe1xuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbidcbiAgICB9LCBleHBhbmRlZCAmJiB7XG4gICAgICBiYWNrZ3JvdW5kOiBjb2xvcnMuYmFja2dyb3VuZCxcbiAgICAgIGJvdHRvbTogMCxcbiAgICAgIGxlZnQ6IDAsXG4gICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgIC8vIHJlcXVpcmVkIHRvIGtlZXAgdGhlIHRvb2xiYXIgc3R1Y2sgaW4gcGxhY2VcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgcmlnaHQ6IDAsXG4gICAgICB0b3A6IDAsXG4gICAgICB6SW5kZXg6IDEwMFxuICAgIH1dXG4gIH0sIGNvcmUuanN4KERvY3VtZW50RWRpdG9yUHJvdmlkZXIsIHtcbiAgICBjb21wb25lbnRCbG9ja3M6IGNvbXBvbmVudEJsb2NrcyxcbiAgICBkb2N1bWVudEZlYXR1cmVzOiBkb2N1bWVudEZlYXR1cmVzLFxuICAgIHJlbGF0aW9uc2hpcHM6IHJlbGF0aW9uc2hpcHMsXG4gICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIG9uQ2hhbmdlOiB2YWx1ZSA9PiB7XG4gICAgICBvbkNoYW5nZSA9PT0gbnVsbCB8fCBvbkNoYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25DaGFuZ2UodmFsdWUpOyAvLyB0aGlzIGZpeGVzIGEgc3RyYW5nZSBpc3N1ZSBpbiBTYWZhcmkgd2hlcmUgdGhlIHNlbGVjdGlvbiBzdGF5cyBpbnNpZGUgb2YgdGhlIGVkaXRvclxuICAgICAgLy8gYWZ0ZXIgYSBibHVyIGV2ZW50IGhhcHBlbnMgYnV0IHRoZSBzZWxlY3Rpb24gaXMgc3RpbGwgaW4gdGhlIGVkaXRvclxuICAgICAgLy8gc28gdGhlIGN1cnNvciBpcyB2aXN1YWxseSBpbiB0aGUgd3JvbmcgcGxhY2UgYW5kIGl0IGluc2VydHMgdGV4dCBiYWNrd2FyZHNcblxuICAgICAgY29uc3Qgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuXG4gICAgICBpZiAoc2VsZWN0aW9uICYmICFzbGF0ZVJlYWN0LlJlYWN0RWRpdG9yLmlzRm9jdXNlZChlZGl0b3IpKSB7XG4gICAgICAgIGNvbnN0IGVkaXRvck5vZGUgPSBzbGF0ZVJlYWN0LlJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIGVkaXRvcik7XG5cbiAgICAgICAgaWYgKHNlbGVjdGlvbi5hbmNob3JOb2RlID09PSBlZGl0b3JOb2RlKSB7XG4gICAgICAgICAgc2xhdGVSZWFjdC5SZWFjdEVkaXRvci5mb2N1cyhlZGl0b3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBSZWFjdC51c2VNZW1vKCgpID0+IGNvcmUuanN4KFRvb2xiYXIsIHtcbiAgICBkb2N1bWVudEZlYXR1cmVzOiBkb2N1bWVudEZlYXR1cmVzLFxuICAgIHZpZXdTdGF0ZToge1xuICAgICAgZXhwYW5kZWQsXG4gICAgICB0b2dnbGU6ICgpID0+IHtcbiAgICAgICAgc2V0RXhwYW5kZWQodiA9PiAhdik7XG4gICAgICB9XG4gICAgfVxuICB9KSwgW2V4cGFuZGVkLCBkb2N1bWVudEZlYXR1cmVzXSksIGNvcmUuanN4KERvY3VtZW50RWRpdG9yRWRpdGFibGUsIHtcbiAgICBjc3M6IGV4cGFuZGVkICYmIHtcbiAgICAgIG1hcmdpbkxlZnQ6IHNwYWNpbmcubWVkaXVtLFxuICAgICAgbWFyZ2luUmlnaHQ6IHNwYWNpbmcubWVkaXVtXG4gICAgfSxcbiAgICBhdXRvRm9jdXM6IGF1dG9Gb2N1cyxcbiAgICByZWFkT25seTogb25DaGFuZ2UgPT09IHVuZGVmaW5lZFxuICB9KSwgLy8gZm9yIGRlYnVnZ2luZ1xuICBmYWxzZSApKTtcbn1cbmZ1bmN0aW9uIERvY3VtZW50RWRpdG9yUHJvdmlkZXIoX3JlZjIpIHtcbiAgbGV0IHtcbiAgICBjaGlsZHJlbixcbiAgICBlZGl0b3IsXG4gICAgb25DaGFuZ2UsXG4gICAgdmFsdWUsXG4gICAgY29tcG9uZW50QmxvY2tzLFxuICAgIGRvY3VtZW50RmVhdHVyZXMsXG4gICAgcmVsYXRpb25zaGlwc1xuICB9ID0gX3JlZjI7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgY29uc3QgaWRlbnRpdHkgPSBSZWFjdC51c2VNZW1vKCgpID0+IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLCBbZWRpdG9yXSk7XG4gIHJldHVybiBjb3JlLmpzeChzbGF0ZVJlYWN0LlNsYXRlIC8vIHRoaXMgZml4ZXMgaXNzdWVzIHdpdGggU2xhdGUgY3Jhc2hpbmcgd2hlbiBhIGZhc3QgcmVmcmVzaCBvY2NjdXJzXG4gICwge1xuICAgIGtleTogaWRlbnRpdHksXG4gICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIG9uQ2hhbmdlOiB2YWx1ZSA9PiB7XG4gICAgICBvbkNoYW5nZSh2YWx1ZSk7IC8vIHRoaXMgZml4ZXMgYSBzdHJhbmdlIGlzc3VlIGluIFNhZmFyaSB3aGVyZSB0aGUgc2VsZWN0aW9uIHN0YXlzIGluc2lkZSBvZiB0aGUgZWRpdG9yXG4gICAgICAvLyBhZnRlciBhIGJsdXIgZXZlbnQgaGFwcGVucyBidXQgdGhlIHNlbGVjdGlvbiBpcyBzdGlsbCBpbiB0aGUgZWRpdG9yXG4gICAgICAvLyBzbyB0aGUgY3Vyc29yIGlzIHZpc3VhbGx5IGluIHRoZSB3cm9uZyBwbGFjZSBhbmQgaXQgaW5zZXJ0cyB0ZXh0IGJhY2t3YXJkc1xuXG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG5cbiAgICAgIGlmIChzZWxlY3Rpb24gJiYgIXNsYXRlUmVhY3QuUmVhY3RFZGl0b3IuaXNGb2N1c2VkKGVkaXRvcikpIHtcbiAgICAgICAgY29uc3QgZWRpdG9yTm9kZSA9IHNsYXRlUmVhY3QuUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgZWRpdG9yKTtcblxuICAgICAgICBpZiAoc2VsZWN0aW9uLmFuY2hvck5vZGUgPT09IGVkaXRvck5vZGUpIHtcbiAgICAgICAgICBzbGF0ZVJlYWN0LlJlYWN0RWRpdG9yLmZvY3VzKGVkaXRvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIGNvcmUuanN4KFRvb2xiYXJTdGF0ZVByb3ZpZGVyLCB7XG4gICAgY29tcG9uZW50QmxvY2tzOiBjb21wb25lbnRCbG9ja3MsXG4gICAgZWRpdG9yRG9jdW1lbnRGZWF0dXJlczogZG9jdW1lbnRGZWF0dXJlcyxcbiAgICByZWxhdGlvbnNoaXBzOiByZWxhdGlvbnNoaXBzXG4gIH0sIGNoaWxkcmVuKSk7XG59XG5mdW5jdGlvbiBEb2N1bWVudEVkaXRvckVkaXRhYmxlKHByb3BzKSB7XG4gIGNvbnN0IGVkaXRvciA9IHNsYXRlUmVhY3QudXNlU2xhdGUoKTtcbiAgY29uc3QgY29tcG9uZW50QmxvY2tzID0gUmVhY3QudXNlQ29udGV4dChDb21wb25lbnRCbG9ja0NvbnRleHQpO1xuICBjb25zdCBvbktleURvd24gPSBSZWFjdC51c2VNZW1vKCgpID0+IGdldEtleURvd25IYW5kbGVyKGVkaXRvciksIFtlZGl0b3JdKTtcbiAgcmV0dXJuIGNvcmUuanN4KHNsYXRlUmVhY3QuRWRpdGFibGUsIF9leHRlbmRzKHtcbiAgICBkZWNvcmF0ZTogUmVhY3QudXNlQ2FsbGJhY2soX3JlZjMgPT4ge1xuICAgICAgbGV0IFtub2RlLCBwYXRoXSA9IF9yZWYzO1xuICAgICAgbGV0IGRlY29yYXRpb25zID0gW107XG5cbiAgICAgIGlmIChub2RlLnR5cGUgPT09ICdjb21wb25lbnQtYmxvY2snKSB7XG4gICAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBzbGF0ZS5FbGVtZW50LmlzRWxlbWVudChub2RlLmNoaWxkcmVuWzBdKSAmJiBub2RlLmNoaWxkcmVuWzBdLnR5cGUgPT09ICdjb21wb25lbnQtaW5saW5lLXByb3AnICYmIG5vZGUuY2hpbGRyZW5bMF0ucHJvcFBhdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybiBkZWNvcmF0aW9ucztcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGUuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgaWYgKHNsYXRlLk5vZGUuc3RyaW5nKGNoaWxkKSA9PT0gJycgJiYgc2xhdGUuRWxlbWVudC5pc0VsZW1lbnQoY2hpbGQpICYmIChjaGlsZC50eXBlID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnIHx8IGNoaWxkLnR5cGUgPT09ICdjb21wb25lbnQtaW5saW5lLXByb3AnKSAmJiBjaGlsZC5wcm9wUGF0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IHNsYXRlLkVkaXRvci5zdGFydChlZGl0b3IsIFsuLi5wYXRoLCBpbmRleF0pO1xuICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBnZXRQbGFjZWhvbGRlclRleHRGb3JQcm9wUGF0aChjaGlsZC5wcm9wUGF0aCwgY29tcG9uZW50QmxvY2tzW25vZGUuY29tcG9uZW50XS5wcm9wcywgbm9kZS5wcm9wcyk7XG5cbiAgICAgICAgICAgIGlmIChwbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgICBkZWNvcmF0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcixcbiAgICAgICAgICAgICAgICBhbmNob3I6IHN0YXJ0LFxuICAgICAgICAgICAgICAgIGZvY3VzOiBzdGFydFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGVjb3JhdGlvbnM7XG4gICAgfSwgW2VkaXRvciwgY29tcG9uZW50QmxvY2tzXSksXG4gICAgY3NzOiBzdHlsZXMsXG4gICAgb25LZXlEb3duOiBvbktleURvd24sXG4gICAgcmVuZGVyRWxlbWVudDogcmVuZGVyRWxlbWVudCxcbiAgICByZW5kZXJMZWFmOiByZW5kZXJMZWFmXG4gIH0sIHByb3BzKSk7XG59XG5cbmNvbnN0IG9yZGVyZWRMaXN0U3R5bGVzID0gWydsb3dlci1yb21hbicsICdkZWNpbWFsJywgJ2xvd2VyLWFscGhhJ107XG5jb25zdCB1bm9yZGVyZWRMaXN0U3R5bGVzID0gWydzcXVhcmUnLCAnZGlzYycsICdjaXJjbGUnXTtcbmxldCBzdHlsZXMgPSB7XG4gIGZsZXg6IDFcbn07XG5sZXQgbGlzdERlcHRoID0gMTA7XG5cbndoaWxlIChsaXN0RGVwdGgtLSkge1xuICBsZXQgYXJyID0gQXJyYXkuZnJvbSh7XG4gICAgbGVuZ3RoOiBsaXN0RGVwdGhcbiAgfSk7XG5cbiAgaWYgKGFyci5sZW5ndGgpIHtcbiAgICBzdHlsZXNbYXJyLm1hcCgoKSA9PiBgb2xgKS5qb2luKCcgJyldID0ge1xuICAgICAgbGlzdFN0eWxlOiBvcmRlcmVkTGlzdFN0eWxlc1tsaXN0RGVwdGggJSAzXVxuICAgIH07XG4gICAgc3R5bGVzW2Fyci5tYXAoKCkgPT4gYHVsYCkuam9pbignICcpXSA9IHtcbiAgICAgIGxpc3RTdHlsZTogdW5vcmRlcmVkTGlzdFN0eWxlc1tsaXN0RGVwdGggJSAzXVxuICAgIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gbWFrZUVkaXRvclNjaGVtYShvYmopIHtcbiAgbGV0IHJldCA9IHt9O1xuICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goa2V5ID0+IHtcbiAgICBjb25zdCB2YWwgPSBvYmpba2V5XTtcblxuICAgIGlmICh2YWwua2luZCA9PT0gJ2Jsb2NrcycpIHtcbiAgICAgIHJldFtrZXldID0ge1xuICAgICAgICBraW5kOiAnYmxvY2tzJyxcbiAgICAgICAgYWxsb3dlZENoaWxkcmVuOiBuZXcgU2V0KHZhbC5hbGxvd2VkQ2hpbGRyZW4pLFxuICAgICAgICBibG9ja1RvV3JhcElubGluZXNJbjogdmFsLmFsbG93ZWRDaGlsZHJlblswXSxcbiAgICAgICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogdmFsLmludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGVcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldFtrZXldID0gdmFsO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByZXQ7XG59XG5cbmNvbnN0IGJsb2NrcXVvdGVDaGlsZHJlbiA9IFsncGFyYWdyYXBoJywgJ2NvZGUnLCAnaGVhZGluZycsICdvcmRlcmVkLWxpc3QnLCAndW5vcmRlcmVkLWxpc3QnLCAnZGl2aWRlciddO1xuY29uc3QgcGFyYWdyYXBoTGlrZSA9IFsuLi5ibG9ja3F1b3RlQ2hpbGRyZW4sICdibG9ja3F1b3RlJ107XG5jb25zdCBpbnNpZGVPZkxheW91dHMgPSBbLi4ucGFyYWdyYXBoTGlrZSwgJ2NvbXBvbmVudC1ibG9jayddO1xuY29uc3QgZWRpdG9yU2NoZW1hID0gbWFrZUVkaXRvclNjaGVtYSh7XG4gIGVkaXRvcjoge1xuICAgIGtpbmQ6ICdibG9ja3MnLFxuICAgIGFsbG93ZWRDaGlsZHJlbjogWy4uLmluc2lkZU9mTGF5b3V0cywgJ2xheW91dCddLFxuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICdtb3ZlJ1xuICB9LFxuICBsYXlvdXQ6IHtcbiAgICBraW5kOiAnYmxvY2tzJyxcbiAgICBhbGxvd2VkQ2hpbGRyZW46IFsnbGF5b3V0LWFyZWEnXSxcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAnbW92ZSdcbiAgfSxcbiAgJ2xheW91dC1hcmVhJzoge1xuICAgIGtpbmQ6ICdibG9ja3MnLFxuICAgIGFsbG93ZWRDaGlsZHJlbjogaW5zaWRlT2ZMYXlvdXRzLFxuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICd1bndyYXAnXG4gIH0sXG4gIGJsb2NrcXVvdGU6IHtcbiAgICBraW5kOiAnYmxvY2tzJyxcbiAgICBhbGxvd2VkQ2hpbGRyZW46IGJsb2NrcXVvdGVDaGlsZHJlbixcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAnbW92ZSdcbiAgfSxcbiAgcGFyYWdyYXBoOiB7XG4gICAga2luZDogJ2lubGluZXMnLFxuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICd1bndyYXAnXG4gIH0sXG4gIGNvZGU6IHtcbiAgICBraW5kOiAnaW5saW5lcycsXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ21vdmUnXG4gIH0sXG4gIGRpdmlkZXI6IHtcbiAgICBraW5kOiAnaW5saW5lcycsXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ21vdmUnXG4gIH0sXG4gIGhlYWRpbmc6IHtcbiAgICBraW5kOiAnaW5saW5lcycsXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ3Vud3JhcCdcbiAgfSxcbiAgJ2NvbXBvbmVudC1ibG9jayc6IHtcbiAgICBraW5kOiAnYmxvY2tzJyxcbiAgICBhbGxvd2VkQ2hpbGRyZW46IFsnY29tcG9uZW50LWJsb2NrLXByb3AnLCAnY29tcG9uZW50LWlubGluZS1wcm9wJ10sXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ21vdmUnXG4gIH0sXG4gICdjb21wb25lbnQtaW5saW5lLXByb3AnOiB7XG4gICAga2luZDogJ2lubGluZXMnLFxuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICd1bndyYXAnXG4gIH0sXG4gICdjb21wb25lbnQtYmxvY2stcHJvcCc6IHtcbiAgICBraW5kOiAnYmxvY2tzJyxcbiAgICBhbGxvd2VkQ2hpbGRyZW46IHBhcmFncmFwaExpa2UsXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ3Vud3JhcCdcbiAgfSxcbiAgJ29yZGVyZWQtbGlzdCc6IHtcbiAgICBraW5kOiAnYmxvY2tzJyxcbiAgICBhbGxvd2VkQ2hpbGRyZW46IFsnbGlzdC1pdGVtJ10sXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ21vdmUnXG4gIH0sXG4gICd1bm9yZGVyZWQtbGlzdCc6IHtcbiAgICBraW5kOiAnYmxvY2tzJyxcbiAgICBhbGxvd2VkQ2hpbGRyZW46IFsnbGlzdC1pdGVtJ10sXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ21vdmUnXG4gIH0sXG4gICdsaXN0LWl0ZW0nOiB7XG4gICAga2luZDogJ2Jsb2NrcycsXG4gICAgYWxsb3dlZENoaWxkcmVuOiBbJ2xpc3QtaXRlbS1jb250ZW50JywgJ29yZGVyZWQtbGlzdCcsICd1bm9yZGVyZWQtbGlzdCddLFxuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICd1bndyYXAnXG4gIH0sXG4gICdsaXN0LWl0ZW0tY29udGVudCc6IHtcbiAgICBraW5kOiAnaW5saW5lcycsXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ3Vud3JhcCdcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIHdpdGhCbG9ja3NTY2hlbWEoZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBub3JtYWxpemVOb2RlXG4gIH0gPSBlZGl0b3I7XG5cbiAgZWRpdG9yLm5vcm1hbGl6ZU5vZGUgPSBfcmVmNCA9PiB7XG4gICAgbGV0IFtub2RlLCBwYXRoXSA9IF9yZWY0O1xuXG4gICAgaWYgKCFzbGF0ZS5UZXh0LmlzVGV4dChub2RlKSAmJiBub2RlLnR5cGUgIT09ICdsaW5rJyAmJiBub2RlLnR5cGUgIT09ICdyZWxhdGlvbnNoaXAnKSB7XG4gICAgICBjb25zdCBub2RlVHlwZSA9IHNsYXRlLkVkaXRvci5pc0VkaXRvcihub2RlKSA/ICdlZGl0b3InIDogbm9kZS50eXBlO1xuXG4gICAgICBpZiAodHlwZW9mIG5vZGVUeXBlICE9PSAnc3RyaW5nJyB8fCBlZGl0b3JTY2hlbWFbbm9kZVR5cGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICBhdDogcGF0aFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpbmZvID0gZWRpdG9yU2NoZW1hW25vZGVUeXBlXTtcblxuICAgICAgZm9yIChjb25zdCBbaW5kZXgsIGNoaWxkTm9kZV0gb2Ygbm9kZS5jaGlsZHJlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgY29uc3QgY2hpbGRQYXRoID0gWy4uLnBhdGgsIGluZGV4XTtcblxuICAgICAgICBpZiAoaW5mby5raW5kID09PSAnaW5saW5lcycpIHtcbiAgICAgICAgICBpZiAoIXNsYXRlLlRleHQuaXNUZXh0KGNoaWxkTm9kZSkgJiYgIXNsYXRlLkVkaXRvci5pc0lubGluZShlZGl0b3IsIGNoaWxkTm9kZSkpIHtcbiAgICAgICAgICAgIGhhbmRsZU5vZGVJbkludmFsaWRQb3NpdGlvbihlZGl0b3IsIFtjaGlsZE5vZGUsIGNoaWxkUGF0aF0sIHBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIXNsYXRlLkVkaXRvci5pc0Jsb2NrKGVkaXRvciwgY2hpbGROb2RlKSB8fCAvLyB0aGVzZSBjaGVja3MgYXJlIGltcGxpY2l0IGluIEVkaXRvci5pc0Jsb2NrXG4gICAgICAgICAgLy8gYnV0IHRoYXQgaXNuJ3QgZW5jb2RlZCBpbiB0eXBlcyBzbyB0aGVzZSB3aWxsIG1ha2UgVFMgaGFwcHlcbiAgICAgICAgICBjaGlsZE5vZGUudHlwZSA9PT0gJ2xpbmsnIHx8IGNoaWxkTm9kZS50eXBlID09PSAncmVsYXRpb25zaGlwJykge1xuICAgICAgICAgICAgc2xhdGUuVHJhbnNmb3Jtcy53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIHR5cGU6IGluZm8uYmxvY2tUb1dyYXBJbmxpbmVzSW4sXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBhdDogY2hpbGRQYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWluZm8uYWxsb3dlZENoaWxkcmVuLmhhcyhjaGlsZE5vZGUudHlwZSkpIHtcbiAgICAgICAgICAgIGhhbmRsZU5vZGVJbkludmFsaWRQb3NpdGlvbihlZGl0b3IsIFtjaGlsZE5vZGUsIGNoaWxkUGF0aF0sIHBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIG5vcm1hbGl6ZU5vZGUoW25vZGUsIHBhdGhdKTtcbiAgfTtcblxuICByZXR1cm4gZWRpdG9yO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVOb2RlSW5JbnZhbGlkUG9zaXRpb24oZWRpdG9yLCBfcmVmNSwgcGFyZW50UGF0aCkge1xuICBsZXQgW25vZGUsIHBhdGhdID0gX3JlZjU7XG4gIGNvbnN0IG5vZGVUeXBlID0gbm9kZS50eXBlO1xuICBjb25zdCBjaGlsZE5vZGVJbmZvID0gZWRpdG9yU2NoZW1hW25vZGVUeXBlXTtcblxuICBpZiAoIWNoaWxkTm9kZUluZm8gfHwgY2hpbGROb2RlSW5mby5pbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlID09PSAndW53cmFwJykge1xuICAgIHNsYXRlLlRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICBhdDogcGF0aFxuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfSAvLyB0aGUgcGFyZW50IG9mIGEgYmxvY2sgd2lsbCBuZXZlciBiZSBhbiBpbmxpbmUgc28gdGhpcyBjYXN0aW5nIGlzIG9rYXlcblxuXG4gIGNvbnN0IHBhcmVudE5vZGUgPSBzbGF0ZS5Ob2RlLmdldChlZGl0b3IsIHBhcmVudFBhdGgpO1xuICBjb25zdCBpbmZvID0gZWRpdG9yU2NoZW1hW3BhcmVudE5vZGUudHlwZSB8fCAnZWRpdG9yJ107XG5cbiAgaWYgKChpbmZvID09PSBudWxsIHx8IGluZm8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGluZm8ua2luZCkgPT09ICdibG9ja3MnICYmIGluZm8uYWxsb3dlZENoaWxkcmVuLmhhcyhub2RlVHlwZSkpIHtcbiAgICBpZiAocGFyZW50UGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgIHNsYXRlLlRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICBhdDogcGF0aCxcbiAgICAgICAgdG86IFtwYXRoWzBdICsgMV1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzbGF0ZS5UcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IHBhdGgsXG4gICAgICAgIHRvOiBzbGF0ZS5QYXRoLm5leHQocGFyZW50UGF0aClcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChzbGF0ZS5FZGl0b3IuaXNFZGl0b3IocGFyZW50Tm9kZSkpIHtcbiAgICBzbGF0ZS5UcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgIGF0OiBwYXRoLFxuICAgICAgdG86IFtwYXRoWzBdICsgMV1cbiAgICB9KTtcbiAgICBzbGF0ZS5UcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgYXQ6IFtwYXRoWzBdICsgMV1cbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBoYW5kbGVOb2RlSW5JbnZhbGlkUG9zaXRpb24oZWRpdG9yLCBbbm9kZSwgcGF0aF0sIHBhcmVudFBhdGguc2xpY2UoMCwgLTEpKTtcbn0gLy8gdG8gcHJpbnQgdGhlIGVkaXRvciBzY2hlbWEgaW4gR3JhcGh2aXogaWYgeW91IHdhbnQgdG8gdmlzdWFsaXplIGl0XG4vLyBmdW5jdGlvbiBwcmludEVkaXRvclNjaGVtYShlZGl0b3JTY2hlbWE6IEVkaXRvclNjaGVtYSkge1xuLy8gICByZXR1cm4gYGRpZ3JhcGggRyB7XG4vLyAgIGNvbmNlbnRyYXRlPXRydWU7XG4vLyAgICR7T2JqZWN0LmtleXMoZWRpdG9yU2NoZW1hKVxuLy8gICAgIC5tYXAoa2V5ID0+IHtcbi8vICAgICAgIGxldCB2YWwgPSBlZGl0b3JTY2hlbWFba2V5XTtcbi8vICAgICAgIGlmICh2YWwua2luZCA9PT0gJ2lubGluZXMnKSB7XG4vLyAgICAgICAgIHJldHVybiBgXCIke2tleX1cIiAtPiBpbmxpbmVzYDtcbi8vICAgICAgIH1cbi8vICAgICAgIGlmICh2YWwua2luZCA9PT0gJ2Jsb2NrcycpIHtcbi8vICAgICAgICAgcmV0dXJuIGBcIiR7a2V5fVwiIC0+IHske1suLi52YWwuYWxsb3dlZENoaWxkcmVuXS5tYXAoeCA9PiBKU09OLnN0cmluZ2lmeSh4KSkuam9pbignICcpfX1gO1xuLy8gICAgICAgfVxuLy8gICAgIH0pXG4vLyAgICAgLmpvaW4oJ1xcbiAgJyl9XG4vLyB9YDtcbi8vIH1cblxuZXhwb3J0cy5Eb2N1bWVudEVkaXRvciA9IERvY3VtZW50RWRpdG9yO1xuZXhwb3J0cy5Gb3JjZVZhbGlkYXRpb25Qcm92aWRlciA9IEZvcmNlVmFsaWRhdGlvblByb3ZpZGVyO1xuZXhwb3J0cy5hc3NlcnROZXZlciA9IGFzc2VydE5ldmVyO1xuZXhwb3J0cy5jbGllbnRTaWRlVmFsaWRhdGVQcm9wID0gY2xpZW50U2lkZVZhbGlkYXRlUHJvcDtcbmV4cG9ydHMuY3JlYXRlRG9jdW1lbnRFZGl0b3IgPSBjcmVhdGVEb2N1bWVudEVkaXRvcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/fields-document/dist/index-5c992a04.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/fields-document/dist/toolbar-7e0e994e.cjs.dev.js":
/*!***************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/fields-document/dist/toolbar-7e0e994e.cjs.dev.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar _extends = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"../../node_modules/@babel/runtime/helpers/extends.js\");\nvar _objectSpread = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"../../node_modules/@babel/runtime/helpers/objectSpread2.js\");\nvar _objectWithoutProperties = __webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar React = __webpack_require__(/*! react */ \"react\");\n\nconst _excluded$1 = [\"isRelative\"];\nconst InlineDialog = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  let {\n    isRelative\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded$1);\n\n  const {\n    radii,\n    spacing\n  } = core.useTheme();\n  const relativeStyles = isRelative ? {\n    left: '50%',\n    margin: spacing.small,\n    transform: 'translateX(-50%)'\n  } : {};\n  return core.jsx(\"div\", _extends({\n    ref: ref,\n    contentEditable: false,\n    css: _objectSpread({\n      background: 'white',\n      borderRadius: radii.small,\n      boxShadow: `rgba(9, 30, 66, 0.31) 0px 0px 1px, rgba(9, 30, 66, 0.25) 0px 4px 8px -2px`,\n      padding: spacing.small,\n      position: 'absolute',\n      userSelect: 'none',\n      zIndex: 1\n    }, relativeStyles)\n  }, props));\n});\n\nconst _excluded = [\"children\", \"direction\"],\n      _excluded2 = [\"as\", \"isDisabled\", \"isPressed\", \"isSelected\", \"variant\"];\n// ------------------------------\n\nconst ToolbarSpacer = () => {\n  const {\n    spacing\n  } = core.useTheme();\n  return core.jsx(\"span\", {\n    css: {\n      display: 'inline-block',\n      width: spacing.large\n    }\n  });\n};\nconst ToolbarSeparator = () => {\n  const {\n    colors,\n    spacing\n  } = core.useTheme();\n  return core.jsx(\"span\", {\n    css: {\n      alignSelf: 'stretch',\n      background: colors.border,\n      display: 'inline-block',\n      marginLeft: spacing.xsmall,\n      marginRight: spacing.xsmall,\n      width: 1\n    }\n  });\n}; // Groups\n// ------------------------------\n\nconst autoFlowDirection = {\n  column: 'row',\n  row: 'column'\n};\nconst ToolbarGroupContext = /*#__PURE__*/React.createContext({\n  direction: 'row'\n});\n\nconst useToolbarGroupContext = () => React.useContext(ToolbarGroupContext);\n\nconst ToolbarGroup = core.forwardRefWithAs((_ref, ref) => {\n  let {\n    children,\n    direction = 'row'\n  } = _ref,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  const {\n    spacing\n  } = core.useTheme();\n  return core.jsx(ToolbarGroupContext.Provider, {\n    value: {\n      direction\n    }\n  }, core.jsx(core.Box, _extends({\n    ref: ref,\n    css: {\n      display: 'inline-grid',\n      gap: spacing.xxsmall,\n      gridAutoFlow: autoFlowDirection[direction]\n    }\n  }, props), children));\n}); // Buttons\n// ------------------------------\n\nconst ToolbarButton = core.forwardRefWithAs(function ToolbarButton(_ref2, ref) {\n  let {\n    as: Tag = 'button',\n    isDisabled,\n    isPressed,\n    isSelected,\n    variant = 'default'\n  } = _ref2,\n      props = _objectWithoutProperties(_ref2, _excluded2);\n\n  const extraProps = {};\n  const {\n    direction: groupDirection\n  } = useToolbarGroupContext();\n  const {\n    colors,\n    palette,\n    radii,\n    sizing,\n    spacing,\n    typography\n  } = core.useTheme();\n\n  if (Tag === 'button') {\n    extraProps.type = 'button';\n  }\n\n  const variants = {\n    default: {\n      bgHover: palette.neutral200,\n      bgActive: palette.neutral300,\n      fg: palette.neutral800\n    },\n    action: {\n      bgHover: palette.blue50,\n      bgActive: palette.blue100,\n      fg: palette.blue600\n    },\n    destructive: {\n      bgHover: palette.red50,\n      bgActive: palette.red100,\n      fg: palette.red600\n    }\n  };\n  const style = variants[variant];\n  return core.jsx(Tag, _extends({}, extraProps, {\n    ref: ref,\n    disabled: isDisabled,\n    \"data-pressed\": isPressed,\n    \"data-selected\": isSelected,\n    \"data-display-mode\": groupDirection,\n    css: {\n      alignItems: 'center',\n      background: 0,\n      border: 0,\n      borderRadius: radii.xsmall,\n      color: style.fg,\n      cursor: 'pointer',\n      display: 'flex',\n      fontSize: typography.fontSize.small,\n      fontWeight: typography.fontWeight.medium,\n      height: sizing.medium,\n      whiteSpace: 'nowrap',\n      ':hover': {\n        background: style.bgHover\n      },\n      ':active': {\n        background: style.bgActive\n      },\n      '&:disabled': {\n        color: colors.foregroundDisabled,\n        pointerEvents: 'none'\n      },\n      '&[data-pressed=true]': {\n        background: style.bgActive\n      },\n      '&[data-selected=true]': {\n        background: colors.foregroundMuted,\n        color: colors.background\n      },\n      // alternate styles within button group\n      '&[data-display-mode=row]': {\n        paddingLeft: spacing.small,\n        paddingRight: spacing.small\n      },\n      '&[data-display-mode=column]': {\n        paddingLeft: spacing.medium,\n        paddingRight: spacing.medium\n      }\n    }\n  }, props));\n});\nfunction KeyboardInTooltip(_ref3) {\n  let {\n    children\n  } = _ref3;\n  const theme = core.useTheme();\n  return core.jsx(\"kbd\", {\n    css: {\n      margin: 2,\n      padding: theme.spacing.xxsmall,\n      fontFamily: 'inherit',\n      backgroundColor: theme.colors.foreground,\n      borderRadius: theme.radii.xsmall,\n      color: theme.colors.background,\n      whiteSpace: 'pre'\n    }\n  }, children);\n}\n\nexports.InlineDialog = InlineDialog;\nexports.KeyboardInTooltip = KeyboardInTooltip;\nexports.ToolbarButton = ToolbarButton;\nexports.ToolbarGroup = ToolbarGroup;\nexports.ToolbarSeparator = ToolbarSeparator;\nexports.ToolbarSpacer = ToolbarSpacer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2ZpZWxkcy1kb2N1bWVudC9kaXN0L3Rvb2xiYXItN2UwZTk5NGUuY2pzLmRldi5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixlQUFlLG1CQUFPLENBQUMsNEZBQWdDO0FBQ3ZELG9CQUFvQixtQkFBTyxDQUFDLHdHQUFzQztBQUNsRSwrQkFBK0IsbUJBQU8sQ0FBQyw0SEFBZ0Q7QUFDdkYsV0FBVyxtQkFBTyxDQUFDLDRDQUFtQjtBQUN0QyxZQUFZLG1CQUFPLENBQUMsb0JBQU87O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDLEdBQUc7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBLG9CQUFvQjtBQUNwQix5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCLG9CQUFvQjtBQUNwQix3QkFBd0I7QUFDeEIscUJBQXFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9maWVsZHMtZG9jdW1lbnQvZGlzdC90b29sYmFyLTdlMGU5OTRlLmNqcy5kZXYuanM/NDUwZiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBfZXh0ZW5kcyA9IHJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xudmFyIF9vYmplY3RTcHJlYWQgPSByZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZDInKTtcbnZhciBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgPSByZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzJyk7XG52YXIgY29yZSA9IHJlcXVpcmUoJ0BrZXlzdG9uZS11aS9jb3JlJyk7XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG5jb25zdCBfZXhjbHVkZWQkMSA9IFtcImlzUmVsYXRpdmVcIl07XG5jb25zdCBJbmxpbmVEaWFsb2cgPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZigoX3JlZiwgcmVmKSA9PiB7XG4gIGxldCB7XG4gICAgaXNSZWxhdGl2ZVxuICB9ID0gX3JlZixcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIF9leGNsdWRlZCQxKTtcblxuICBjb25zdCB7XG4gICAgcmFkaWksXG4gICAgc3BhY2luZ1xuICB9ID0gY29yZS51c2VUaGVtZSgpO1xuICBjb25zdCByZWxhdGl2ZVN0eWxlcyA9IGlzUmVsYXRpdmUgPyB7XG4gICAgbGVmdDogJzUwJScsXG4gICAgbWFyZ2luOiBzcGFjaW5nLnNtYWxsLFxuICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTUwJSknXG4gIH0gOiB7fTtcbiAgcmV0dXJuIGNvcmUuanN4KFwiZGl2XCIsIF9leHRlbmRzKHtcbiAgICByZWY6IHJlZixcbiAgICBjb250ZW50RWRpdGFibGU6IGZhbHNlLFxuICAgIGNzczogX29iamVjdFNwcmVhZCh7XG4gICAgICBiYWNrZ3JvdW5kOiAnd2hpdGUnLFxuICAgICAgYm9yZGVyUmFkaXVzOiByYWRpaS5zbWFsbCxcbiAgICAgIGJveFNoYWRvdzogYHJnYmEoOSwgMzAsIDY2LCAwLjMxKSAwcHggMHB4IDFweCwgcmdiYSg5LCAzMCwgNjYsIDAuMjUpIDBweCA0cHggOHB4IC0ycHhgLFxuICAgICAgcGFkZGluZzogc3BhY2luZy5zbWFsbCxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgekluZGV4OiAxXG4gICAgfSwgcmVsYXRpdmVTdHlsZXMpXG4gIH0sIHByb3BzKSk7XG59KTtcblxuY29uc3QgX2V4Y2x1ZGVkID0gW1wiY2hpbGRyZW5cIiwgXCJkaXJlY3Rpb25cIl0sXG4gICAgICBfZXhjbHVkZWQyID0gW1wiYXNcIiwgXCJpc0Rpc2FibGVkXCIsIFwiaXNQcmVzc2VkXCIsIFwiaXNTZWxlY3RlZFwiLCBcInZhcmlhbnRcIl07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3QgVG9vbGJhclNwYWNlciA9ICgpID0+IHtcbiAgY29uc3Qge1xuICAgIHNwYWNpbmdcbiAgfSA9IGNvcmUudXNlVGhlbWUoKTtcbiAgcmV0dXJuIGNvcmUuanN4KFwic3BhblwiLCB7XG4gICAgY3NzOiB7XG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIHdpZHRoOiBzcGFjaW5nLmxhcmdlXG4gICAgfVxuICB9KTtcbn07XG5jb25zdCBUb29sYmFyU2VwYXJhdG9yID0gKCkgPT4ge1xuICBjb25zdCB7XG4gICAgY29sb3JzLFxuICAgIHNwYWNpbmdcbiAgfSA9IGNvcmUudXNlVGhlbWUoKTtcbiAgcmV0dXJuIGNvcmUuanN4KFwic3BhblwiLCB7XG4gICAgY3NzOiB7XG4gICAgICBhbGlnblNlbGY6ICdzdHJldGNoJyxcbiAgICAgIGJhY2tncm91bmQ6IGNvbG9ycy5ib3JkZXIsXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIG1hcmdpbkxlZnQ6IHNwYWNpbmcueHNtYWxsLFxuICAgICAgbWFyZ2luUmlnaHQ6IHNwYWNpbmcueHNtYWxsLFxuICAgICAgd2lkdGg6IDFcbiAgICB9XG4gIH0pO1xufTsgLy8gR3JvdXBzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3QgYXV0b0Zsb3dEaXJlY3Rpb24gPSB7XG4gIGNvbHVtbjogJ3JvdycsXG4gIHJvdzogJ2NvbHVtbidcbn07XG5jb25zdCBUb29sYmFyR3JvdXBDb250ZXh0ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUNvbnRleHQoe1xuICBkaXJlY3Rpb246ICdyb3cnXG59KTtcblxuY29uc3QgdXNlVG9vbGJhckdyb3VwQ29udGV4dCA9ICgpID0+IFJlYWN0LnVzZUNvbnRleHQoVG9vbGJhckdyb3VwQ29udGV4dCk7XG5cbmNvbnN0IFRvb2xiYXJHcm91cCA9IGNvcmUuZm9yd2FyZFJlZldpdGhBcygoX3JlZiwgcmVmKSA9PiB7XG4gIGxldCB7XG4gICAgY2hpbGRyZW4sXG4gICAgZGlyZWN0aW9uID0gJ3JvdydcbiAgfSA9IF9yZWYsXG4gICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBfZXhjbHVkZWQpO1xuXG4gIGNvbnN0IHtcbiAgICBzcGFjaW5nXG4gIH0gPSBjb3JlLnVzZVRoZW1lKCk7XG4gIHJldHVybiBjb3JlLmpzeChUb29sYmFyR3JvdXBDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHtcbiAgICAgIGRpcmVjdGlvblxuICAgIH1cbiAgfSwgY29yZS5qc3goY29yZS5Cb3gsIF9leHRlbmRzKHtcbiAgICByZWY6IHJlZixcbiAgICBjc3M6IHtcbiAgICAgIGRpc3BsYXk6ICdpbmxpbmUtZ3JpZCcsXG4gICAgICBnYXA6IHNwYWNpbmcueHhzbWFsbCxcbiAgICAgIGdyaWRBdXRvRmxvdzogYXV0b0Zsb3dEaXJlY3Rpb25bZGlyZWN0aW9uXVxuICAgIH1cbiAgfSwgcHJvcHMpLCBjaGlsZHJlbikpO1xufSk7IC8vIEJ1dHRvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5jb25zdCBUb29sYmFyQnV0dG9uID0gY29yZS5mb3J3YXJkUmVmV2l0aEFzKGZ1bmN0aW9uIFRvb2xiYXJCdXR0b24oX3JlZjIsIHJlZikge1xuICBsZXQge1xuICAgIGFzOiBUYWcgPSAnYnV0dG9uJyxcbiAgICBpc0Rpc2FibGVkLFxuICAgIGlzUHJlc3NlZCxcbiAgICBpc1NlbGVjdGVkLFxuICAgIHZhcmlhbnQgPSAnZGVmYXVsdCdcbiAgfSA9IF9yZWYyLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZjIsIF9leGNsdWRlZDIpO1xuXG4gIGNvbnN0IGV4dHJhUHJvcHMgPSB7fTtcbiAgY29uc3Qge1xuICAgIGRpcmVjdGlvbjogZ3JvdXBEaXJlY3Rpb25cbiAgfSA9IHVzZVRvb2xiYXJHcm91cENvbnRleHQoKTtcbiAgY29uc3Qge1xuICAgIGNvbG9ycyxcbiAgICBwYWxldHRlLFxuICAgIHJhZGlpLFxuICAgIHNpemluZyxcbiAgICBzcGFjaW5nLFxuICAgIHR5cG9ncmFwaHlcbiAgfSA9IGNvcmUudXNlVGhlbWUoKTtcblxuICBpZiAoVGFnID09PSAnYnV0dG9uJykge1xuICAgIGV4dHJhUHJvcHMudHlwZSA9ICdidXR0b24nO1xuICB9XG5cbiAgY29uc3QgdmFyaWFudHMgPSB7XG4gICAgZGVmYXVsdDoge1xuICAgICAgYmdIb3ZlcjogcGFsZXR0ZS5uZXV0cmFsMjAwLFxuICAgICAgYmdBY3RpdmU6IHBhbGV0dGUubmV1dHJhbDMwMCxcbiAgICAgIGZnOiBwYWxldHRlLm5ldXRyYWw4MDBcbiAgICB9LFxuICAgIGFjdGlvbjoge1xuICAgICAgYmdIb3ZlcjogcGFsZXR0ZS5ibHVlNTAsXG4gICAgICBiZ0FjdGl2ZTogcGFsZXR0ZS5ibHVlMTAwLFxuICAgICAgZmc6IHBhbGV0dGUuYmx1ZTYwMFxuICAgIH0sXG4gICAgZGVzdHJ1Y3RpdmU6IHtcbiAgICAgIGJnSG92ZXI6IHBhbGV0dGUucmVkNTAsXG4gICAgICBiZ0FjdGl2ZTogcGFsZXR0ZS5yZWQxMDAsXG4gICAgICBmZzogcGFsZXR0ZS5yZWQ2MDBcbiAgICB9XG4gIH07XG4gIGNvbnN0IHN0eWxlID0gdmFyaWFudHNbdmFyaWFudF07XG4gIHJldHVybiBjb3JlLmpzeChUYWcsIF9leHRlbmRzKHt9LCBleHRyYVByb3BzLCB7XG4gICAgcmVmOiByZWYsXG4gICAgZGlzYWJsZWQ6IGlzRGlzYWJsZWQsXG4gICAgXCJkYXRhLXByZXNzZWRcIjogaXNQcmVzc2VkLFxuICAgIFwiZGF0YS1zZWxlY3RlZFwiOiBpc1NlbGVjdGVkLFxuICAgIFwiZGF0YS1kaXNwbGF5LW1vZGVcIjogZ3JvdXBEaXJlY3Rpb24sXG4gICAgY3NzOiB7XG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgIGJhY2tncm91bmQ6IDAsXG4gICAgICBib3JkZXI6IDAsXG4gICAgICBib3JkZXJSYWRpdXM6IHJhZGlpLnhzbWFsbCxcbiAgICAgIGNvbG9yOiBzdHlsZS5mZyxcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgZm9udFNpemU6IHR5cG9ncmFwaHkuZm9udFNpemUuc21hbGwsXG4gICAgICBmb250V2VpZ2h0OiB0eXBvZ3JhcGh5LmZvbnRXZWlnaHQubWVkaXVtLFxuICAgICAgaGVpZ2h0OiBzaXppbmcubWVkaXVtLFxuICAgICAgd2hpdGVTcGFjZTogJ25vd3JhcCcsXG4gICAgICAnOmhvdmVyJzoge1xuICAgICAgICBiYWNrZ3JvdW5kOiBzdHlsZS5iZ0hvdmVyXG4gICAgICB9LFxuICAgICAgJzphY3RpdmUnOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IHN0eWxlLmJnQWN0aXZlXG4gICAgICB9LFxuICAgICAgJyY6ZGlzYWJsZWQnOiB7XG4gICAgICAgIGNvbG9yOiBjb2xvcnMuZm9yZWdyb3VuZERpc2FibGVkLFxuICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZSdcbiAgICAgIH0sXG4gICAgICAnJltkYXRhLXByZXNzZWQ9dHJ1ZV0nOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IHN0eWxlLmJnQWN0aXZlXG4gICAgICB9LFxuICAgICAgJyZbZGF0YS1zZWxlY3RlZD10cnVlXSc6IHtcbiAgICAgICAgYmFja2dyb3VuZDogY29sb3JzLmZvcmVncm91bmRNdXRlZCxcbiAgICAgICAgY29sb3I6IGNvbG9ycy5iYWNrZ3JvdW5kXG4gICAgICB9LFxuICAgICAgLy8gYWx0ZXJuYXRlIHN0eWxlcyB3aXRoaW4gYnV0dG9uIGdyb3VwXG4gICAgICAnJltkYXRhLWRpc3BsYXktbW9kZT1yb3ddJzoge1xuICAgICAgICBwYWRkaW5nTGVmdDogc3BhY2luZy5zbWFsbCxcbiAgICAgICAgcGFkZGluZ1JpZ2h0OiBzcGFjaW5nLnNtYWxsXG4gICAgICB9LFxuICAgICAgJyZbZGF0YS1kaXNwbGF5LW1vZGU9Y29sdW1uXSc6IHtcbiAgICAgICAgcGFkZGluZ0xlZnQ6IHNwYWNpbmcubWVkaXVtLFxuICAgICAgICBwYWRkaW5nUmlnaHQ6IHNwYWNpbmcubWVkaXVtXG4gICAgICB9XG4gICAgfVxuICB9LCBwcm9wcykpO1xufSk7XG5mdW5jdGlvbiBLZXlib2FyZEluVG9vbHRpcChfcmVmMykge1xuICBsZXQge1xuICAgIGNoaWxkcmVuXG4gIH0gPSBfcmVmMztcbiAgY29uc3QgdGhlbWUgPSBjb3JlLnVzZVRoZW1lKCk7XG4gIHJldHVybiBjb3JlLmpzeChcImtiZFwiLCB7XG4gICAgY3NzOiB7XG4gICAgICBtYXJnaW46IDIsXG4gICAgICBwYWRkaW5nOiB0aGVtZS5zcGFjaW5nLnh4c21hbGwsXG4gICAgICBmb250RmFtaWx5OiAnaW5oZXJpdCcsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLmNvbG9ycy5mb3JlZ3JvdW5kLFxuICAgICAgYm9yZGVyUmFkaXVzOiB0aGVtZS5yYWRpaS54c21hbGwsXG4gICAgICBjb2xvcjogdGhlbWUuY29sb3JzLmJhY2tncm91bmQsXG4gICAgICB3aGl0ZVNwYWNlOiAncHJlJ1xuICAgIH1cbiAgfSwgY2hpbGRyZW4pO1xufVxuXG5leHBvcnRzLklubGluZURpYWxvZyA9IElubGluZURpYWxvZztcbmV4cG9ydHMuS2V5Ym9hcmRJblRvb2x0aXAgPSBLZXlib2FyZEluVG9vbHRpcDtcbmV4cG9ydHMuVG9vbGJhckJ1dHRvbiA9IFRvb2xiYXJCdXR0b247XG5leHBvcnRzLlRvb2xiYXJHcm91cCA9IFRvb2xiYXJHcm91cDtcbmV4cG9ydHMuVG9vbGJhclNlcGFyYXRvciA9IFRvb2xiYXJTZXBhcmF0b3I7XG5leHBvcnRzLlRvb2xiYXJTcGFjZXIgPSBUb29sYmFyU3BhY2VyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/fields-document/dist/toolbar-7e0e994e.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/fields-document/views/dist/keystone-6-fields-document-views.cjs.dev.js":
/*!*************************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/fields-document/views/dist/keystone-6-fields-document-views.cjs.dev.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar core = __webpack_require__(/*! @keystone-ui/core */ \"@keystone-ui/core\");\nvar fields = __webpack_require__(/*! @keystone-ui/fields */ \"@keystone-ui/fields\");\nvar slate = __webpack_require__(/*! slate */ \"slate\");\nvar documentRenderer = __webpack_require__(/*! @keystone-6/document-renderer */ \"@keystone-6/document-renderer\");\nvar weakMemoize = __webpack_require__(/*! @emotion/weak-memoize */ \"@emotion/weak-memoize\");\nvar components = __webpack_require__(/*! @keystone-6/core/admin-ui/components */ \"@keystone-6/core/admin-ui/components\");\nvar index = __webpack_require__(/*! ../../dist/index-5c992a04.cjs.dev.js */ \"../../node_modules/@keystone-6/fields-document/dist/index-5c992a04.cjs.dev.js\");\nvar api = __webpack_require__(/*! ../../dist/api-fdd916d1.cjs.dev.js */ \"../../node_modules/@keystone-6/fields-document/dist/api-fdd916d1.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/extends */ \"../../node_modules/@babel/runtime/helpers/extends.js\");\n__webpack_require__(/*! react */ \"react\");\n__webpack_require__(/*! is-hotkey */ \"is-hotkey\");\n__webpack_require__(/*! slate-react */ \"slate-react\");\n__webpack_require__(/*! slate-history */ \"slate-history\");\n__webpack_require__(/*! @keystone-ui/popover */ \"@keystone-ui/popover\");\n__webpack_require__(/*! @keystone-ui/tooltip */ \"@keystone-ui/tooltip\");\n__webpack_require__(/*! @keystone-ui/icons/icons/LinkIcon */ \"@keystone-ui/icons/icons/LinkIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/Trash2Icon */ \"@keystone-ui/icons/icons/Trash2Icon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/ExternalLinkIcon */ \"@keystone-ui/icons/icons/ExternalLinkIcon\");\n__webpack_require__(/*! ../../dist/toolbar-7e0e994e.cjs.dev.js */ \"../../node_modules/@keystone-6/fields-document/dist/toolbar-7e0e994e.cjs.dev.js\");\n__webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"../../node_modules/@babel/runtime/helpers/objectSpread2.js\");\n__webpack_require__(/*! @babel/runtime/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js\");\n__webpack_require__(/*! @keystone-6/core/admin-ui/context */ \"@keystone-6/core/admin-ui/context\");\n__webpack_require__(/*! @keystone-6/core/fields/types/relationship/views/RelationshipSelect */ \"@keystone-6/core/fields/types/relationship/views/RelationshipSelect\");\n__webpack_require__(/*! @keystone-ui/button */ \"@keystone-ui/button\");\n__webpack_require__(/*! @keystone-ui/icons/icons/ColumnsIcon */ \"@keystone-ui/icons/icons/ColumnsIcon\");\n__webpack_require__(/*! apply-ref */ \"apply-ref\");\n__webpack_require__(/*! @keystone-ui/icons/icons/BoldIcon */ \"@keystone-ui/icons/icons/BoldIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/ItalicIcon */ \"@keystone-ui/icons/icons/ItalicIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/PlusIcon */ \"@keystone-ui/icons/icons/PlusIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/ChevronDownIcon */ \"@keystone-ui/icons/icons/ChevronDownIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/Maximize2Icon */ \"@keystone-ui/icons/icons/Maximize2Icon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/Minimize2Icon */ \"@keystone-ui/icons/icons/Minimize2Icon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/MoreHorizontalIcon */ \"@keystone-ui/icons/icons/MoreHorizontalIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/CodeIcon */ \"@keystone-ui/icons/icons/CodeIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/AlignLeftIcon */ \"@keystone-ui/icons/icons/AlignLeftIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/AlignRightIcon */ \"@keystone-ui/icons/icons/AlignRightIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/AlignCenterIcon */ \"@keystone-ui/icons/icons/AlignCenterIcon\");\n__webpack_require__(/*! @keystone-ui/icons/icons/MinusIcon */ \"@keystone-ui/icons/icons/MinusIcon\");\n__webpack_require__(/*! match-sorter */ \"match-sorter\");\n__webpack_require__(/*! scroll-into-view-if-needed */ \"scroll-into-view-if-needed\");\n__webpack_require__(/*! mdast-util-from-markdown */ \"mdast-util-from-markdown\");\n__webpack_require__(/*! mdast-util-gfm-autolink-literal/from-markdown */ \"mdast-util-gfm-autolink-literal/from-markdown\");\n__webpack_require__(/*! micromark-extension-gfm-autolink-literal */ \"micromark-extension-gfm-autolink-literal\");\n__webpack_require__(/*! mdast-util-gfm-strikethrough/from-markdown */ \"mdast-util-gfm-strikethrough/from-markdown\");\n__webpack_require__(/*! micromark-extension-gfm-strikethrough */ \"micromark-extension-gfm-strikethrough\");\n__webpack_require__(/*! mdast-util-definitions */ \"mdast-util-definitions\");\n__webpack_require__(/*! @braintree/sanitize-url */ \"@braintree/sanitize-url\");\n\nfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\nvar weakMemoize__default = /*#__PURE__*/_interopDefault(weakMemoize);\n\n/** @jsxRuntime classic */\nconst Field = _ref => {\n  let {\n    field,\n    value,\n    onChange,\n    autoFocus,\n    forceValidation\n  } = _ref;\n  return core.jsx(fields.FieldContainer, null, core.jsx(fields.FieldLabel, null, field.label), core.jsx(index.ForceValidationProvider, {\n    value: !!forceValidation\n  }, core.jsx(index.DocumentEditor, {\n    autoFocus: autoFocus,\n    value: value,\n    onChange: onChange,\n    componentBlocks: field.componentBlocks,\n    relationships: field.relationships,\n    documentFeatures: field.documentFeatures\n  })));\n};\n\nconst serialize = nodes => {\n  return nodes.map(n => slate.Node.string(n)).join('\\n');\n};\n\nconst Cell = _ref2 => {\n  var _item$field$path;\n\n  let {\n    item,\n    field,\n    linkTo\n  } = _ref2;\n  const value = (_item$field$path = item[field.path]) === null || _item$field$path === void 0 ? void 0 : _item$field$path.document;\n  if (!value) return null;\n  const plainText = serialize(value);\n  const cutText = plainText.length > 100 ? plainText.slice(0, 100) + '...' : plainText;\n  return linkTo ? core.jsx(components.CellLink, linkTo, cutText) : core.jsx(components.CellContainer, null, cutText);\n};\nCell.supportsLinkTo = true;\nconst CardValue = _ref3 => {\n  var _item$field$path2;\n\n  let {\n    item,\n    field\n  } = _ref3;\n  return core.jsx(fields.FieldContainer, null, core.jsx(fields.FieldLabel, null, field.label), core.jsx(documentRenderer.DocumentRenderer, {\n    document: ((_item$field$path2 = item[field.path]) === null || _item$field$path2 === void 0 ? void 0 : _item$field$path2.document) || []\n  }));\n};\nconst allowedExportsOnCustomViews = ['componentBlocks'];\nconst controller = config => {\n  const memoizedIsComponentBlockValid = weakMemoize__default[\"default\"](componentBlock => weakMemoize__default[\"default\"](props => index.clientSideValidateProp({\n    kind: 'object',\n    value: componentBlock.props\n  }, props)));\n  const componentBlocks = config.customViews.componentBlocks || {};\n  const serverSideComponentBlocksSet = new Set(config.fieldMeta.componentBlocksPassedOnServer);\n  const componentBlocksOnlyBeingPassedOnTheClient = Object.keys(componentBlocks).filter(x => !serverSideComponentBlocksSet.has(x));\n\n  if (componentBlocksOnlyBeingPassedOnTheClient.length) {\n    throw new Error(`(${config.listKey}:${config.path}) The following component blocks are being passed in the custom view but not in the server-side field config: ${JSON.stringify(componentBlocksOnlyBeingPassedOnTheClient)}`);\n  }\n\n  const clientSideComponentBlocksSet = new Set(Object.keys(componentBlocks));\n  const componentBlocksOnlyBeingPassedOnTheServer = config.fieldMeta.componentBlocksPassedOnServer.filter(x => !clientSideComponentBlocksSet.has(x));\n\n  if (componentBlocksOnlyBeingPassedOnTheServer.length) {\n    throw new Error(`(${config.listKey}:${config.path}) The following component blocks are being passed in the server-side field config but not in the custom view: ${JSON.stringify(componentBlocksOnlyBeingPassedOnTheServer)}`);\n  }\n\n  const validateNode = weakMemoize__default[\"default\"](node => {\n    if (slate.Text.isText(node)) {\n      return true;\n    }\n\n    if (node.type === 'component-block') {\n      const componentBlock = componentBlocks[node.component];\n\n      if (componentBlock) {\n        if (!memoizedIsComponentBlockValid(componentBlock)(node.props)) {\n          return false;\n        }\n      }\n    }\n\n    if (node.type === 'link' && (typeof node.href !== 'string' || !api.isValidURL(node.href))) {\n      return false;\n    }\n\n    return node.children.every(node => validateNode(node));\n  });\n  return {\n    path: config.path,\n    label: config.label,\n    graphqlSelection: `${config.path} {document(hydrateRelationships: true)}`,\n    componentBlocks: config.customViews.componentBlocks || {},\n    documentFeatures: config.fieldMeta.documentFeatures,\n    relationships: config.fieldMeta.relationships,\n    defaultValue: [{\n      type: 'paragraph',\n      children: [{\n        text: ''\n      }]\n    }],\n    deserialize: data => {\n      var _data$config$path;\n\n      return ((_data$config$path = data[config.path]) === null || _data$config$path === void 0 ? void 0 : _data$config$path.document) || [{\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      }];\n    },\n    serialize: value => ({\n      [config.path]: value\n    }),\n\n    validate(value) {\n      return value.every(node => validateNode(node));\n    }\n\n  };\n};\n\nexports.CardValue = CardValue;\nexports.Cell = Cell;\nexports.Field = Field;\nexports.allowedExportsOnCustomViews = allowedExportsOnCustomViews;\nexports.controller = controller;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2ZpZWxkcy1kb2N1bWVudC92aWV3cy9kaXN0L2tleXN0b25lLTYtZmllbGRzLWRvY3VtZW50LXZpZXdzLmNqcy5kZXYuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsOENBQTZDLEVBQUUsYUFBYSxFQUFDOztBQUU3RCxXQUFXLG1CQUFPLENBQUMsNENBQW1CO0FBQ3RDLGFBQWEsbUJBQU8sQ0FBQyxnREFBcUI7QUFDMUMsWUFBWSxtQkFBTyxDQUFDLG9CQUFPO0FBQzNCLHVCQUF1QixtQkFBTyxDQUFDLG9FQUErQjtBQUM5RCxrQkFBa0IsbUJBQU8sQ0FBQyxvREFBdUI7QUFDakQsaUJBQWlCLG1CQUFPLENBQUMsa0ZBQXNDO0FBQy9ELFlBQVksbUJBQU8sQ0FBQywySEFBc0M7QUFDMUQsVUFBVSxtQkFBTyxDQUFDLHVIQUFvQztBQUN0RCxtQkFBTyxDQUFDLDRGQUFnQztBQUN4QyxtQkFBTyxDQUFDLG9CQUFPO0FBQ2YsbUJBQU8sQ0FBQyw0QkFBVztBQUNuQixtQkFBTyxDQUFDLGdDQUFhO0FBQ3JCLG1CQUFPLENBQUMsb0NBQWU7QUFDdkIsbUJBQU8sQ0FBQyxrREFBc0I7QUFDOUIsbUJBQU8sQ0FBQyxrREFBc0I7QUFDOUIsbUJBQU8sQ0FBQyw0RUFBbUM7QUFDM0MsbUJBQU8sQ0FBQyxnRkFBcUM7QUFDN0MsbUJBQU8sQ0FBQyw0RkFBMkM7QUFDbkQsbUJBQU8sQ0FBQywrSEFBd0M7QUFDaEQsbUJBQU8sQ0FBQyx3R0FBc0M7QUFDOUMsbUJBQU8sQ0FBQyw0SEFBZ0Q7QUFDeEQsbUJBQU8sQ0FBQyw0RUFBbUM7QUFDM0MsbUJBQU8sQ0FBQyxnSkFBcUU7QUFDN0UsbUJBQU8sQ0FBQyxnREFBcUI7QUFDN0IsbUJBQU8sQ0FBQyxrRkFBc0M7QUFDOUMsbUJBQU8sQ0FBQyw0QkFBVztBQUNuQixtQkFBTyxDQUFDLDRFQUFtQztBQUMzQyxtQkFBTyxDQUFDLGdGQUFxQztBQUM3QyxtQkFBTyxDQUFDLDRFQUFtQztBQUMzQyxtQkFBTyxDQUFDLDBGQUEwQztBQUNsRCxtQkFBTyxDQUFDLHNGQUF3QztBQUNoRCxtQkFBTyxDQUFDLHNGQUF3QztBQUNoRCxtQkFBTyxDQUFDLGdHQUE2QztBQUNyRCxtQkFBTyxDQUFDLDRFQUFtQztBQUMzQyxtQkFBTyxDQUFDLHNGQUF3QztBQUNoRCxtQkFBTyxDQUFDLHdGQUF5QztBQUNqRCxtQkFBTyxDQUFDLDBGQUEwQztBQUNsRCxtQkFBTyxDQUFDLDhFQUFvQztBQUM1QyxtQkFBTyxDQUFDLGtDQUFjO0FBQ3RCLG1CQUFPLENBQUMsOERBQTRCO0FBQ3BDLG1CQUFPLENBQUMsMERBQTBCO0FBQ2xDLG1CQUFPLENBQUMsb0dBQStDO0FBQ3ZELG1CQUFPLENBQUMsMEZBQTBDO0FBQ2xELG1CQUFPLENBQUMsOEZBQTRDO0FBQ3BELG1CQUFPLENBQUMsb0ZBQXVDO0FBQy9DLG1CQUFPLENBQUMsc0RBQXdCO0FBQ2hDLG1CQUFPLENBQUMsd0RBQXlCOztBQUVqQywrQkFBK0IsaUNBQWlDOztBQUVoRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCLGVBQWUsR0FBRyxZQUFZLGdIQUFnSCwwREFBMEQ7QUFDaE87O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHdCQUF3QixlQUFlLEdBQUcsWUFBWSxnSEFBZ0gsMERBQTBEO0FBQ2hPOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsY0FBYyxxQ0FBcUM7QUFDNUUsNkRBQTZEO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGlCQUFpQjtBQUNqQixZQUFZO0FBQ1osYUFBYTtBQUNiLG1DQUFtQztBQUNuQyxrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2ZpZWxkcy1kb2N1bWVudC92aWV3cy9kaXN0L2tleXN0b25lLTYtZmllbGRzLWRvY3VtZW50LXZpZXdzLmNqcy5kZXYuanM/MmVlNSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciBjb3JlID0gcmVxdWlyZSgnQGtleXN0b25lLXVpL2NvcmUnKTtcbnZhciBmaWVsZHMgPSByZXF1aXJlKCdAa2V5c3RvbmUtdWkvZmllbGRzJyk7XG52YXIgc2xhdGUgPSByZXF1aXJlKCdzbGF0ZScpO1xudmFyIGRvY3VtZW50UmVuZGVyZXIgPSByZXF1aXJlKCdAa2V5c3RvbmUtNi9kb2N1bWVudC1yZW5kZXJlcicpO1xudmFyIHdlYWtNZW1vaXplID0gcmVxdWlyZSgnQGVtb3Rpb24vd2Vhay1tZW1vaXplJyk7XG52YXIgY29tcG9uZW50cyA9IHJlcXVpcmUoJ0BrZXlzdG9uZS02L2NvcmUvYWRtaW4tdWkvY29tcG9uZW50cycpO1xudmFyIGluZGV4ID0gcmVxdWlyZSgnLi4vLi4vZGlzdC9pbmRleC01Yzk5MmEwNC5janMuZGV2LmpzJyk7XG52YXIgYXBpID0gcmVxdWlyZSgnLi4vLi4vZGlzdC9hcGktZmRkOTE2ZDEuY2pzLmRldi5qcycpO1xucmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzJyk7XG5yZXF1aXJlKCdyZWFjdCcpO1xucmVxdWlyZSgnaXMtaG90a2V5Jyk7XG5yZXF1aXJlKCdzbGF0ZS1yZWFjdCcpO1xucmVxdWlyZSgnc2xhdGUtaGlzdG9yeScpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL3BvcG92ZXInKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS90b29sdGlwJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvTGlua0ljb24nKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9UcmFzaDJJY29uJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvRXh0ZXJuYWxMaW5rSWNvbicpO1xucmVxdWlyZSgnLi4vLi4vZGlzdC90b29sYmFyLTdlMGU5OTRlLmNqcy5kZXYuanMnKTtcbnJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0U3ByZWFkMicpO1xucmVxdWlyZSgnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RXaXRob3V0UHJvcGVydGllcycpO1xucmVxdWlyZSgnQGtleXN0b25lLTYvY29yZS9hZG1pbi11aS9jb250ZXh0Jyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtNi9jb3JlL2ZpZWxkcy90eXBlcy9yZWxhdGlvbnNoaXAvdmlld3MvUmVsYXRpb25zaGlwU2VsZWN0Jyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvYnV0dG9uJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvQ29sdW1uc0ljb24nKTtcbnJlcXVpcmUoJ2FwcGx5LXJlZicpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL0JvbGRJY29uJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvSXRhbGljSWNvbicpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL1BsdXNJY29uJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvQ2hldnJvbkRvd25JY29uJyk7XG5yZXF1aXJlKCdAa2V5c3RvbmUtdWkvaWNvbnMvaWNvbnMvTWF4aW1pemUySWNvbicpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL01pbmltaXplMkljb24nKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9Nb3JlSG9yaXpvbnRhbEljb24nKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9Db2RlSWNvbicpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL0FsaWduTGVmdEljb24nKTtcbnJlcXVpcmUoJ0BrZXlzdG9uZS11aS9pY29ucy9pY29ucy9BbGlnblJpZ2h0SWNvbicpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL0FsaWduQ2VudGVySWNvbicpO1xucmVxdWlyZSgnQGtleXN0b25lLXVpL2ljb25zL2ljb25zL01pbnVzSWNvbicpO1xucmVxdWlyZSgnbWF0Y2gtc29ydGVyJyk7XG5yZXF1aXJlKCdzY3JvbGwtaW50by12aWV3LWlmLW5lZWRlZCcpO1xucmVxdWlyZSgnbWRhc3QtdXRpbC1mcm9tLW1hcmtkb3duJyk7XG5yZXF1aXJlKCdtZGFzdC11dGlsLWdmbS1hdXRvbGluay1saXRlcmFsL2Zyb20tbWFya2Rvd24nKTtcbnJlcXVpcmUoJ21pY3JvbWFyay1leHRlbnNpb24tZ2ZtLWF1dG9saW5rLWxpdGVyYWwnKTtcbnJlcXVpcmUoJ21kYXN0LXV0aWwtZ2ZtLXN0cmlrZXRocm91Z2gvZnJvbS1tYXJrZG93bicpO1xucmVxdWlyZSgnbWljcm9tYXJrLWV4dGVuc2lvbi1nZm0tc3RyaWtldGhyb3VnaCcpO1xucmVxdWlyZSgnbWRhc3QtdXRpbC1kZWZpbml0aW9ucycpO1xucmVxdWlyZSgnQGJyYWludHJlZS9zYW5pdGl6ZS11cmwnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BEZWZhdWx0IChlKSB7IHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7ICdkZWZhdWx0JzogZSB9OyB9XG5cbnZhciB3ZWFrTWVtb2l6ZV9fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9faW50ZXJvcERlZmF1bHQod2Vha01lbW9pemUpO1xuXG4vKiogQGpzeFJ1bnRpbWUgY2xhc3NpYyAqL1xuY29uc3QgRmllbGQgPSBfcmVmID0+IHtcbiAgbGV0IHtcbiAgICBmaWVsZCxcbiAgICB2YWx1ZSxcbiAgICBvbkNoYW5nZSxcbiAgICBhdXRvRm9jdXMsXG4gICAgZm9yY2VWYWxpZGF0aW9uXG4gIH0gPSBfcmVmO1xuICByZXR1cm4gY29yZS5qc3goZmllbGRzLkZpZWxkQ29udGFpbmVyLCBudWxsLCBjb3JlLmpzeChmaWVsZHMuRmllbGRMYWJlbCwgbnVsbCwgZmllbGQubGFiZWwpLCBjb3JlLmpzeChpbmRleC5Gb3JjZVZhbGlkYXRpb25Qcm92aWRlciwge1xuICAgIHZhbHVlOiAhIWZvcmNlVmFsaWRhdGlvblxuICB9LCBjb3JlLmpzeChpbmRleC5Eb2N1bWVudEVkaXRvciwge1xuICAgIGF1dG9Gb2N1czogYXV0b0ZvY3VzLFxuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBvbkNoYW5nZTogb25DaGFuZ2UsXG4gICAgY29tcG9uZW50QmxvY2tzOiBmaWVsZC5jb21wb25lbnRCbG9ja3MsXG4gICAgcmVsYXRpb25zaGlwczogZmllbGQucmVsYXRpb25zaGlwcyxcbiAgICBkb2N1bWVudEZlYXR1cmVzOiBmaWVsZC5kb2N1bWVudEZlYXR1cmVzXG4gIH0pKSk7XG59O1xuXG5jb25zdCBzZXJpYWxpemUgPSBub2RlcyA9PiB7XG4gIHJldHVybiBub2Rlcy5tYXAobiA9PiBzbGF0ZS5Ob2RlLnN0cmluZyhuKSkuam9pbignXFxuJyk7XG59O1xuXG5jb25zdCBDZWxsID0gX3JlZjIgPT4ge1xuICB2YXIgX2l0ZW0kZmllbGQkcGF0aDtcblxuICBsZXQge1xuICAgIGl0ZW0sXG4gICAgZmllbGQsXG4gICAgbGlua1RvXG4gIH0gPSBfcmVmMjtcbiAgY29uc3QgdmFsdWUgPSAoX2l0ZW0kZmllbGQkcGF0aCA9IGl0ZW1bZmllbGQucGF0aF0pID09PSBudWxsIHx8IF9pdGVtJGZpZWxkJHBhdGggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJGZpZWxkJHBhdGguZG9jdW1lbnQ7XG4gIGlmICghdmFsdWUpIHJldHVybiBudWxsO1xuICBjb25zdCBwbGFpblRleHQgPSBzZXJpYWxpemUodmFsdWUpO1xuICBjb25zdCBjdXRUZXh0ID0gcGxhaW5UZXh0Lmxlbmd0aCA+IDEwMCA/IHBsYWluVGV4dC5zbGljZSgwLCAxMDApICsgJy4uLicgOiBwbGFpblRleHQ7XG4gIHJldHVybiBsaW5rVG8gPyBjb3JlLmpzeChjb21wb25lbnRzLkNlbGxMaW5rLCBsaW5rVG8sIGN1dFRleHQpIDogY29yZS5qc3goY29tcG9uZW50cy5DZWxsQ29udGFpbmVyLCBudWxsLCBjdXRUZXh0KTtcbn07XG5DZWxsLnN1cHBvcnRzTGlua1RvID0gdHJ1ZTtcbmNvbnN0IENhcmRWYWx1ZSA9IF9yZWYzID0+IHtcbiAgdmFyIF9pdGVtJGZpZWxkJHBhdGgyO1xuXG4gIGxldCB7XG4gICAgaXRlbSxcbiAgICBmaWVsZFxuICB9ID0gX3JlZjM7XG4gIHJldHVybiBjb3JlLmpzeChmaWVsZHMuRmllbGRDb250YWluZXIsIG51bGwsIGNvcmUuanN4KGZpZWxkcy5GaWVsZExhYmVsLCBudWxsLCBmaWVsZC5sYWJlbCksIGNvcmUuanN4KGRvY3VtZW50UmVuZGVyZXIuRG9jdW1lbnRSZW5kZXJlciwge1xuICAgIGRvY3VtZW50OiAoKF9pdGVtJGZpZWxkJHBhdGgyID0gaXRlbVtmaWVsZC5wYXRoXSkgPT09IG51bGwgfHwgX2l0ZW0kZmllbGQkcGF0aDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJGZpZWxkJHBhdGgyLmRvY3VtZW50KSB8fCBbXVxuICB9KSk7XG59O1xuY29uc3QgYWxsb3dlZEV4cG9ydHNPbkN1c3RvbVZpZXdzID0gWydjb21wb25lbnRCbG9ja3MnXTtcbmNvbnN0IGNvbnRyb2xsZXIgPSBjb25maWcgPT4ge1xuICBjb25zdCBtZW1vaXplZElzQ29tcG9uZW50QmxvY2tWYWxpZCA9IHdlYWtNZW1vaXplX19kZWZhdWx0W1wiZGVmYXVsdFwiXShjb21wb25lbnRCbG9jayA9PiB3ZWFrTWVtb2l6ZV9fZGVmYXVsdFtcImRlZmF1bHRcIl0ocHJvcHMgPT4gaW5kZXguY2xpZW50U2lkZVZhbGlkYXRlUHJvcCh7XG4gICAga2luZDogJ29iamVjdCcsXG4gICAgdmFsdWU6IGNvbXBvbmVudEJsb2NrLnByb3BzXG4gIH0sIHByb3BzKSkpO1xuICBjb25zdCBjb21wb25lbnRCbG9ja3MgPSBjb25maWcuY3VzdG9tVmlld3MuY29tcG9uZW50QmxvY2tzIHx8IHt9O1xuICBjb25zdCBzZXJ2ZXJTaWRlQ29tcG9uZW50QmxvY2tzU2V0ID0gbmV3IFNldChjb25maWcuZmllbGRNZXRhLmNvbXBvbmVudEJsb2Nrc1Bhc3NlZE9uU2VydmVyKTtcbiAgY29uc3QgY29tcG9uZW50QmxvY2tzT25seUJlaW5nUGFzc2VkT25UaGVDbGllbnQgPSBPYmplY3Qua2V5cyhjb21wb25lbnRCbG9ja3MpLmZpbHRlcih4ID0+ICFzZXJ2ZXJTaWRlQ29tcG9uZW50QmxvY2tzU2V0Lmhhcyh4KSk7XG5cbiAgaWYgKGNvbXBvbmVudEJsb2Nrc09ubHlCZWluZ1Bhc3NlZE9uVGhlQ2xpZW50Lmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgKCR7Y29uZmlnLmxpc3RLZXl9OiR7Y29uZmlnLnBhdGh9KSBUaGUgZm9sbG93aW5nIGNvbXBvbmVudCBibG9ja3MgYXJlIGJlaW5nIHBhc3NlZCBpbiB0aGUgY3VzdG9tIHZpZXcgYnV0IG5vdCBpbiB0aGUgc2VydmVyLXNpZGUgZmllbGQgY29uZmlnOiAke0pTT04uc3RyaW5naWZ5KGNvbXBvbmVudEJsb2Nrc09ubHlCZWluZ1Bhc3NlZE9uVGhlQ2xpZW50KX1gKTtcbiAgfVxuXG4gIGNvbnN0IGNsaWVudFNpZGVDb21wb25lbnRCbG9ja3NTZXQgPSBuZXcgU2V0KE9iamVjdC5rZXlzKGNvbXBvbmVudEJsb2NrcykpO1xuICBjb25zdCBjb21wb25lbnRCbG9ja3NPbmx5QmVpbmdQYXNzZWRPblRoZVNlcnZlciA9IGNvbmZpZy5maWVsZE1ldGEuY29tcG9uZW50QmxvY2tzUGFzc2VkT25TZXJ2ZXIuZmlsdGVyKHggPT4gIWNsaWVudFNpZGVDb21wb25lbnRCbG9ja3NTZXQuaGFzKHgpKTtcblxuICBpZiAoY29tcG9uZW50QmxvY2tzT25seUJlaW5nUGFzc2VkT25UaGVTZXJ2ZXIubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAoJHtjb25maWcubGlzdEtleX06JHtjb25maWcucGF0aH0pIFRoZSBmb2xsb3dpbmcgY29tcG9uZW50IGJsb2NrcyBhcmUgYmVpbmcgcGFzc2VkIGluIHRoZSBzZXJ2ZXItc2lkZSBmaWVsZCBjb25maWcgYnV0IG5vdCBpbiB0aGUgY3VzdG9tIHZpZXc6ICR7SlNPTi5zdHJpbmdpZnkoY29tcG9uZW50QmxvY2tzT25seUJlaW5nUGFzc2VkT25UaGVTZXJ2ZXIpfWApO1xuICB9XG5cbiAgY29uc3QgdmFsaWRhdGVOb2RlID0gd2Vha01lbW9pemVfX2RlZmF1bHRbXCJkZWZhdWx0XCJdKG5vZGUgPT4ge1xuICAgIGlmIChzbGF0ZS5UZXh0LmlzVGV4dChub2RlKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKG5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jaycpIHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudEJsb2NrID0gY29tcG9uZW50QmxvY2tzW25vZGUuY29tcG9uZW50XTtcblxuICAgICAgaWYgKGNvbXBvbmVudEJsb2NrKSB7XG4gICAgICAgIGlmICghbWVtb2l6ZWRJc0NvbXBvbmVudEJsb2NrVmFsaWQoY29tcG9uZW50QmxvY2spKG5vZGUucHJvcHMpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5vZGUudHlwZSA9PT0gJ2xpbmsnICYmICh0eXBlb2Ygbm9kZS5ocmVmICE9PSAnc3RyaW5nJyB8fCAhYXBpLmlzVmFsaWRVUkwobm9kZS5ocmVmKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZS5jaGlsZHJlbi5ldmVyeShub2RlID0+IHZhbGlkYXRlTm9kZShub2RlKSk7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIHBhdGg6IGNvbmZpZy5wYXRoLFxuICAgIGxhYmVsOiBjb25maWcubGFiZWwsXG4gICAgZ3JhcGhxbFNlbGVjdGlvbjogYCR7Y29uZmlnLnBhdGh9IHtkb2N1bWVudChoeWRyYXRlUmVsYXRpb25zaGlwczogdHJ1ZSl9YCxcbiAgICBjb21wb25lbnRCbG9ja3M6IGNvbmZpZy5jdXN0b21WaWV3cy5jb21wb25lbnRCbG9ja3MgfHwge30sXG4gICAgZG9jdW1lbnRGZWF0dXJlczogY29uZmlnLmZpZWxkTWV0YS5kb2N1bWVudEZlYXR1cmVzLFxuICAgIHJlbGF0aW9uc2hpcHM6IGNvbmZpZy5maWVsZE1ldGEucmVsYXRpb25zaGlwcyxcbiAgICBkZWZhdWx0VmFsdWU6IFt7XG4gICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICB0ZXh0OiAnJ1xuICAgICAgfV1cbiAgICB9XSxcbiAgICBkZXNlcmlhbGl6ZTogZGF0YSA9PiB7XG4gICAgICB2YXIgX2RhdGEkY29uZmlnJHBhdGg7XG5cbiAgICAgIHJldHVybiAoKF9kYXRhJGNvbmZpZyRwYXRoID0gZGF0YVtjb25maWcucGF0aF0pID09PSBudWxsIHx8IF9kYXRhJGNvbmZpZyRwYXRoID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF0YSRjb25maWckcGF0aC5kb2N1bWVudCkgfHwgW3tcbiAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9XTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZTogdmFsdWUgPT4gKHtcbiAgICAgIFtjb25maWcucGF0aF06IHZhbHVlXG4gICAgfSksXG5cbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlLmV2ZXJ5KG5vZGUgPT4gdmFsaWRhdGVOb2RlKG5vZGUpKTtcbiAgICB9XG5cbiAgfTtcbn07XG5cbmV4cG9ydHMuQ2FyZFZhbHVlID0gQ2FyZFZhbHVlO1xuZXhwb3J0cy5DZWxsID0gQ2VsbDtcbmV4cG9ydHMuRmllbGQgPSBGaWVsZDtcbmV4cG9ydHMuYWxsb3dlZEV4cG9ydHNPbkN1c3RvbVZpZXdzID0gYWxsb3dlZEV4cG9ydHNPbkN1c3RvbVZpZXdzO1xuZXhwb3J0cy5jb250cm9sbGVyID0gY29udHJvbGxlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/fields-document/views/dist/keystone-6-fields-document-views.cjs.dev.js\n");

/***/ }),

/***/ "../../node_modules/@keystone-6/fields-document/views/dist/keystone-6-fields-document-views.cjs.js":
/*!*********************************************************************************************************!*\
  !*** ../../node_modules/@keystone-6/fields-document/views/dist/keystone-6-fields-document-views.cjs.js ***!
  \*********************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./keystone-6-fields-document-views.cjs.dev.js */ \"../../node_modules/@keystone-6/fields-document/views/dist/keystone-6-fields-document-views.cjs.dev.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2ZpZWxkcy1kb2N1bWVudC92aWV3cy9kaXN0L2tleXN0b25lLTYtZmllbGRzLWRvY3VtZW50LXZpZXdzLmNqcy5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixJQUFJLEtBQXFDLEVBQUUsRUFFMUMsQ0FBQztBQUNGLEVBQUUsa01BQXlFO0FBQzNFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9maWVsZHMtZG9jdW1lbnQvdmlld3MvZGlzdC9rZXlzdG9uZS02LWZpZWxkcy1kb2N1bWVudC12aWV3cy5janMuanM/ZjY0NSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9rZXlzdG9uZS02LWZpZWxkcy1kb2N1bWVudC12aWV3cy5janMucHJvZC5qc1wiKTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4va2V5c3RvbmUtNi1maWVsZHMtZG9jdW1lbnQtdmlld3MuY2pzLmRldi5qc1wiKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/@keystone-6/fields-document/views/dist/keystone-6-fields-document-views.cjs.js\n");

/***/ }),

/***/ "./pages/_app.js":
/*!***********************!*\
  !*** ./pages/_app.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _keystone_6_core_internal_do_not_use_will_break_in_patch_admin_ui_pages_App__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/pages/App */ \"@keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/pages/App\");\n/* harmony import */ var _keystone_6_core_internal_do_not_use_will_break_in_patch_admin_ui_pages_App__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_keystone_6_core_internal_do_not_use_will_break_in_patch_admin_ui_pages_App__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_keystone_6_core_internal_do_not_use_will_break_in_patch_admin_ui_id_field_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/@keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/id-field-view */ \"../../node_modules/@keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/id-field-view/dist/keystone-6-core-___internal-do-not-use-will-break-in-patch-admin-ui-id-field-view.cjs.js\");\n/* harmony import */ var _node_modules_keystone_6_core_internal_do_not_use_will_break_in_patch_admin_ui_id_field_view__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_keystone_6_core_internal_do_not_use_will_break_in_patch_admin_ui_id_field_view__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_keystone_6_core_fields_types_text_views__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../node_modules/@keystone-6/core/fields/types/text/views */ \"../../node_modules/@keystone-6/core/fields/types/text/views/dist/keystone-6-core-fields-types-text-views.cjs.js\");\n/* harmony import */ var _node_modules_keystone_6_core_fields_types_text_views__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_keystone_6_core_fields_types_text_views__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_keystone_6_core_fields_types_password_views__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../node_modules/@keystone-6/core/fields/types/password/views */ \"../../node_modules/@keystone-6/core/fields/types/password/views/dist/keystone-6-core-fields-types-password-views.cjs.js\");\n/* harmony import */ var _node_modules_keystone_6_core_fields_types_password_views__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_keystone_6_core_fields_types_password_views__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_keystone_6_core_fields_types_relationship_views__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../node_modules/@keystone-6/core/fields/types/relationship/views */ \"../../node_modules/@keystone-6/core/fields/types/relationship/views/dist/keystone-6-core-fields-types-relationship-views.cjs.js\");\n/* harmony import */ var _node_modules_keystone_6_core_fields_types_relationship_views__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_keystone_6_core_fields_types_relationship_views__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_keystone_6_core_fields_types_select_views__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../node_modules/@keystone-6/core/fields/types/select/views */ \"../../node_modules/@keystone-6/core/fields/types/select/views/dist/keystone-6-core-fields-types-select-views.cjs.js\");\n/* harmony import */ var _node_modules_keystone_6_core_fields_types_select_views__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_keystone_6_core_fields_types_select_views__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_keystone_6_fields_document_views__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../node_modules/@keystone-6/fields-document/views */ \"../../node_modules/@keystone-6/fields-document/views/dist/keystone-6-fields-document-views.cjs.js\");\n/* harmony import */ var _node_modules_keystone_6_fields_document_views__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_node_modules_keystone_6_fields_document_views__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _node_modules_keystone_6_core_fields_types_timestamp_views__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../node_modules/@keystone-6/core/fields/types/timestamp/views */ \"../../node_modules/@keystone-6/core/fields/types/timestamp/views/dist/keystone-6-core-fields-types-timestamp-views.cjs.js\");\n/* harmony import */ var _node_modules_keystone_6_core_fields_types_timestamp_views__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_node_modules_keystone_6_core_fields_types_timestamp_views__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\nvar adminConfig = {\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_keystone_6_core_internal_do_not_use_will_break_in_patch_admin_ui_pages_App__WEBPACK_IMPORTED_MODULE_0__.getApp)({\n    lazyMetadataQuery: {\n        \"kind\": \"Document\",\n        \"definitions\": [\n            {\n                \"kind\": \"OperationDefinition\",\n                \"operation\": \"query\",\n                \"selectionSet\": {\n                    \"kind\": \"SelectionSet\",\n                    \"selections\": [\n                        {\n                            \"kind\": \"Field\",\n                            \"name\": {\n                                \"kind\": \"Name\",\n                                \"value\": \"keystone\",\n                                \"loc\": {\n                                    \"start\": 22,\n                                    \"end\": 30\n                                }\n                            },\n                            \"arguments\": [],\n                            \"directives\": [],\n                            \"selectionSet\": {\n                                \"kind\": \"SelectionSet\",\n                                \"selections\": [\n                                    {\n                                        \"kind\": \"Field\",\n                                        \"name\": {\n                                            \"kind\": \"Name\",\n                                            \"value\": \"adminMeta\",\n                                            \"loc\": {\n                                                \"start\": 39,\n                                                \"end\": 48\n                                            }\n                                        },\n                                        \"arguments\": [],\n                                        \"directives\": [],\n                                        \"selectionSet\": {\n                                            \"kind\": \"SelectionSet\",\n                                            \"selections\": [\n                                                {\n                                                    \"kind\": \"Field\",\n                                                    \"name\": {\n                                                        \"kind\": \"Name\",\n                                                        \"value\": \"lists\",\n                                                        \"loc\": {\n                                                            \"start\": 59,\n                                                            \"end\": 64\n                                                        }\n                                                    },\n                                                    \"arguments\": [],\n                                                    \"directives\": [],\n                                                    \"selectionSet\": {\n                                                        \"kind\": \"SelectionSet\",\n                                                        \"selections\": [\n                                                            {\n                                                                \"kind\": \"Field\",\n                                                                \"name\": {\n                                                                    \"kind\": \"Name\",\n                                                                    \"value\": \"key\",\n                                                                    \"loc\": {\n                                                                        \"start\": 77,\n                                                                        \"end\": 80\n                                                                    }\n                                                                },\n                                                                \"arguments\": [],\n                                                                \"directives\": [],\n                                                                \"loc\": {\n                                                                    \"start\": 77,\n                                                                    \"end\": 80\n                                                                }\n                                                            },\n                                                            {\n                                                                \"kind\": \"Field\",\n                                                                \"name\": {\n                                                                    \"kind\": \"Name\",\n                                                                    \"value\": \"isHidden\",\n                                                                    \"loc\": {\n                                                                        \"start\": 91,\n                                                                        \"end\": 99\n                                                                    }\n                                                                },\n                                                                \"arguments\": [],\n                                                                \"directives\": [],\n                                                                \"loc\": {\n                                                                    \"start\": 91,\n                                                                    \"end\": 99\n                                                                }\n                                                            },\n                                                            {\n                                                                \"kind\": \"Field\",\n                                                                \"name\": {\n                                                                    \"kind\": \"Name\",\n                                                                    \"value\": \"fields\",\n                                                                    \"loc\": {\n                                                                        \"start\": 110,\n                                                                        \"end\": 116\n                                                                    }\n                                                                },\n                                                                \"arguments\": [],\n                                                                \"directives\": [],\n                                                                \"selectionSet\": {\n                                                                    \"kind\": \"SelectionSet\",\n                                                                    \"selections\": [\n                                                                        {\n                                                                            \"kind\": \"Field\",\n                                                                            \"name\": {\n                                                                                \"kind\": \"Name\",\n                                                                                \"value\": \"path\",\n                                                                                \"loc\": {\n                                                                                    \"start\": 131,\n                                                                                    \"end\": 135\n                                                                                }\n                                                                            },\n                                                                            \"arguments\": [],\n                                                                            \"directives\": [],\n                                                                            \"loc\": {\n                                                                                \"start\": 131,\n                                                                                \"end\": 135\n                                                                            }\n                                                                        },\n                                                                        {\n                                                                            \"kind\": \"Field\",\n                                                                            \"name\": {\n                                                                                \"kind\": \"Name\",\n                                                                                \"value\": \"createView\",\n                                                                                \"loc\": {\n                                                                                    \"start\": 148,\n                                                                                    \"end\": 158\n                                                                                }\n                                                                            },\n                                                                            \"arguments\": [],\n                                                                            \"directives\": [],\n                                                                            \"selectionSet\": {\n                                                                                \"kind\": \"SelectionSet\",\n                                                                                \"selections\": [\n                                                                                    {\n                                                                                        \"kind\": \"Field\",\n                                                                                        \"name\": {\n                                                                                            \"kind\": \"Name\",\n                                                                                            \"value\": \"fieldMode\",\n                                                                                            \"loc\": {\n                                                                                                \"start\": 175,\n                                                                                                \"end\": 184\n                                                                                            }\n                                                                                        },\n                                                                                        \"arguments\": [],\n                                                                                        \"directives\": [],\n                                                                                        \"loc\": {\n                                                                                            \"start\": 175,\n                                                                                            \"end\": 184\n                                                                                        }\n                                                                                    }\n                                                                                ],\n                                                                                \"loc\": {\n                                                                                    \"start\": 159,\n                                                                                    \"end\": 198\n                                                                                }\n                                                                            },\n                                                                            \"loc\": {\n                                                                                \"start\": 148,\n                                                                                \"end\": 198\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"loc\": {\n                                                                        \"start\": 117,\n                                                                        \"end\": 210\n                                                                    }\n                                                                },\n                                                                \"loc\": {\n                                                                    \"start\": 110,\n                                                                    \"end\": 210\n                                                                }\n                                                            }\n                                                        ],\n                                                        \"loc\": {\n                                                            \"start\": 65,\n                                                            \"end\": 220\n                                                        }\n                                                    },\n                                                    \"loc\": {\n                                                        \"start\": 59,\n                                                        \"end\": 220\n                                                    }\n                                                }\n                                            ],\n                                            \"loc\": {\n                                                \"start\": 49,\n                                                \"end\": 228\n                                            }\n                                        },\n                                        \"loc\": {\n                                            \"start\": 39,\n                                            \"end\": 228\n                                        }\n                                    }\n                                ],\n                                \"loc\": {\n                                    \"start\": 31,\n                                    \"end\": 234\n                                }\n                            },\n                            \"loc\": {\n                                \"start\": 22,\n                                \"end\": 234\n                            }\n                        },\n                        {\n                            \"kind\": \"Field\",\n                            \"name\": {\n                                \"kind\": \"Name\",\n                                \"value\": \"authenticatedItem\"\n                            },\n                            \"selectionSet\": {\n                                \"kind\": \"SelectionSet\",\n                                \"selections\": [\n                                    {\n                                        \"kind\": \"InlineFragment\",\n                                        \"typeCondition\": {\n                                            \"kind\": \"NamedType\",\n                                            \"name\": {\n                                                \"kind\": \"Name\",\n                                                \"value\": \"User\"\n                                            }\n                                        },\n                                        \"selectionSet\": {\n                                            \"kind\": \"SelectionSet\",\n                                            \"selections\": [\n                                                {\n                                                    \"kind\": \"Field\",\n                                                    \"name\": {\n                                                        \"kind\": \"Name\",\n                                                        \"value\": \"id\"\n                                                    }\n                                                },\n                                                {\n                                                    \"kind\": \"Field\",\n                                                    \"name\": {\n                                                        \"kind\": \"Name\",\n                                                        \"value\": \"name\"\n                                                    }\n                                                }\n                                            ]\n                                        }\n                                    }\n                                ]\n                            }\n                        }\n                    ]\n                }\n            }\n        ]\n    },\n    fieldViews: [\n        _node_modules_keystone_6_core_internal_do_not_use_will_break_in_patch_admin_ui_id_field_view__WEBPACK_IMPORTED_MODULE_1__,\n        _node_modules_keystone_6_core_fields_types_text_views__WEBPACK_IMPORTED_MODULE_2__,\n        _node_modules_keystone_6_core_fields_types_password_views__WEBPACK_IMPORTED_MODULE_3__,\n        _node_modules_keystone_6_core_fields_types_relationship_views__WEBPACK_IMPORTED_MODULE_4__,\n        _node_modules_keystone_6_core_fields_types_select_views__WEBPACK_IMPORTED_MODULE_5__,\n        _node_modules_keystone_6_fields_document_views__WEBPACK_IMPORTED_MODULE_6__,\n        _node_modules_keystone_6_core_fields_types_timestamp_views__WEBPACK_IMPORTED_MODULE_7__\n    ],\n    adminMetaHash: \"10imwax\",\n    adminConfig: adminConfig,\n    apiPath: \"/api/graphql\"\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJO29EQUFBLENBQUM7Z0RBQUEsQ0FBQztnREFBQyxDQUFDO29EQUFBLENBQU0sT0FBQyxDQUFPO29EQUFDLENBQU0sT0FBQyxDQUFDO3dEQUFBLENBQU0sT0FBQyxDQUFNO3dEQUFDLENBQU8sUUFBQyxDQUFNO29EQUFBLENBQUM7Z0RBQUEsQ0FBQzs0Q0FBQSxDQUFDO3dDQUFBLENBQUM7b0NBQUEsQ0FBQztnQ0FBQSxDQUFDOzRCQUFBLENBQUM7d0JBQUEsQ0FBQztvQkFBQSxDQUFDO2dCQUFBLENBQUM7WUFBQSxDQUFDO1FBQUEsQ0FBQztJQUFBLENBQUM7SUFDNXVFQyxVQUFVLEVBQUUsQ0FBQ1Q7UUFBQUEseUhBQUs7UUFBQ0Msa0ZBQUs7UUFBQ0Msc0ZBQUs7UUFBQ0MsMEZBQUs7UUFBQ0Msb0ZBQUs7UUFBQ0MsMkVBQUs7UUFBQ0MsdUZBQUs7SUFBQSxDQUFDO0lBQ3ZESSxhQUFhLEVBQUUsQ0FBUztJQUN4QkgsV0FBVyxFQUFFQSxXQUFXO0lBQ3hCSSxPQUFPLEVBQUUsQ0FBYztBQUN6QixDQUFDLENBQUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL19hcHAuanM/ZTBhZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRBcHAgfSBmcm9tICdAa2V5c3RvbmUtNi9jb3JlL19fX2ludGVybmFsLWRvLW5vdC11c2Utd2lsbC1icmVhay1pbi1wYXRjaC9hZG1pbi11aS9wYWdlcy9BcHAnO1xuXG5pbXBvcnQgKiBhcyB2aWV3MCBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2NvcmUvX19faW50ZXJuYWwtZG8tbm90LXVzZS13aWxsLWJyZWFrLWluLXBhdGNoL2FkbWluLXVpL2lkLWZpZWxkLXZpZXdcIjtcbmltcG9ydCAqIGFzIHZpZXcxIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGtleXN0b25lLTYvY29yZS9maWVsZHMvdHlwZXMvdGV4dC92aWV3c1wiO1xuaW1wb3J0ICogYXMgdmlldzIgZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2ZpZWxkcy90eXBlcy9wYXNzd29yZC92aWV3c1wiO1xuaW1wb3J0ICogYXMgdmlldzMgZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2ZpZWxkcy90eXBlcy9yZWxhdGlvbnNoaXAvdmlld3NcIjtcbmltcG9ydCAqIGFzIHZpZXc0IGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGtleXN0b25lLTYvY29yZS9maWVsZHMvdHlwZXMvc2VsZWN0L3ZpZXdzXCI7XG5pbXBvcnQgKiBhcyB2aWV3NSBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BrZXlzdG9uZS02L2ZpZWxkcy1kb2N1bWVudC92aWV3c1wiO1xuaW1wb3J0ICogYXMgdmlldzYgZnJvbSBcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9Aa2V5c3RvbmUtNi9jb3JlL2ZpZWxkcy90eXBlcy90aW1lc3RhbXAvdmlld3NcIjtcblxudmFyIGFkbWluQ29uZmlnID0ge307XG5cbmV4cG9ydCBkZWZhdWx0IGdldEFwcCh7XG4gIGxhenlNZXRhZGF0YVF1ZXJ5OiB7XCJraW5kXCI6XCJEb2N1bWVudFwiLFwiZGVmaW5pdGlvbnNcIjpbe1wia2luZFwiOlwiT3BlcmF0aW9uRGVmaW5pdGlvblwiLFwib3BlcmF0aW9uXCI6XCJxdWVyeVwiLFwic2VsZWN0aW9uU2V0XCI6e1wia2luZFwiOlwiU2VsZWN0aW9uU2V0XCIsXCJzZWxlY3Rpb25zXCI6W3tcImtpbmRcIjpcIkZpZWxkXCIsXCJuYW1lXCI6e1wia2luZFwiOlwiTmFtZVwiLFwidmFsdWVcIjpcImtleXN0b25lXCIsXCJsb2NcIjp7XCJzdGFydFwiOjIyLFwiZW5kXCI6MzB9fSxcImFyZ3VtZW50c1wiOltdLFwiZGlyZWN0aXZlc1wiOltdLFwic2VsZWN0aW9uU2V0XCI6e1wia2luZFwiOlwiU2VsZWN0aW9uU2V0XCIsXCJzZWxlY3Rpb25zXCI6W3tcImtpbmRcIjpcIkZpZWxkXCIsXCJuYW1lXCI6e1wia2luZFwiOlwiTmFtZVwiLFwidmFsdWVcIjpcImFkbWluTWV0YVwiLFwibG9jXCI6e1wic3RhcnRcIjozOSxcImVuZFwiOjQ4fX0sXCJhcmd1bWVudHNcIjpbXSxcImRpcmVjdGl2ZXNcIjpbXSxcInNlbGVjdGlvblNldFwiOntcImtpbmRcIjpcIlNlbGVjdGlvblNldFwiLFwic2VsZWN0aW9uc1wiOlt7XCJraW5kXCI6XCJGaWVsZFwiLFwibmFtZVwiOntcImtpbmRcIjpcIk5hbWVcIixcInZhbHVlXCI6XCJsaXN0c1wiLFwibG9jXCI6e1wic3RhcnRcIjo1OSxcImVuZFwiOjY0fX0sXCJhcmd1bWVudHNcIjpbXSxcImRpcmVjdGl2ZXNcIjpbXSxcInNlbGVjdGlvblNldFwiOntcImtpbmRcIjpcIlNlbGVjdGlvblNldFwiLFwic2VsZWN0aW9uc1wiOlt7XCJraW5kXCI6XCJGaWVsZFwiLFwibmFtZVwiOntcImtpbmRcIjpcIk5hbWVcIixcInZhbHVlXCI6XCJrZXlcIixcImxvY1wiOntcInN0YXJ0XCI6NzcsXCJlbmRcIjo4MH19LFwiYXJndW1lbnRzXCI6W10sXCJkaXJlY3RpdmVzXCI6W10sXCJsb2NcIjp7XCJzdGFydFwiOjc3LFwiZW5kXCI6ODB9fSx7XCJraW5kXCI6XCJGaWVsZFwiLFwibmFtZVwiOntcImtpbmRcIjpcIk5hbWVcIixcInZhbHVlXCI6XCJpc0hpZGRlblwiLFwibG9jXCI6e1wic3RhcnRcIjo5MSxcImVuZFwiOjk5fX0sXCJhcmd1bWVudHNcIjpbXSxcImRpcmVjdGl2ZXNcIjpbXSxcImxvY1wiOntcInN0YXJ0XCI6OTEsXCJlbmRcIjo5OX19LHtcImtpbmRcIjpcIkZpZWxkXCIsXCJuYW1lXCI6e1wia2luZFwiOlwiTmFtZVwiLFwidmFsdWVcIjpcImZpZWxkc1wiLFwibG9jXCI6e1wic3RhcnRcIjoxMTAsXCJlbmRcIjoxMTZ9fSxcImFyZ3VtZW50c1wiOltdLFwiZGlyZWN0aXZlc1wiOltdLFwic2VsZWN0aW9uU2V0XCI6e1wia2luZFwiOlwiU2VsZWN0aW9uU2V0XCIsXCJzZWxlY3Rpb25zXCI6W3tcImtpbmRcIjpcIkZpZWxkXCIsXCJuYW1lXCI6e1wia2luZFwiOlwiTmFtZVwiLFwidmFsdWVcIjpcInBhdGhcIixcImxvY1wiOntcInN0YXJ0XCI6MTMxLFwiZW5kXCI6MTM1fX0sXCJhcmd1bWVudHNcIjpbXSxcImRpcmVjdGl2ZXNcIjpbXSxcImxvY1wiOntcInN0YXJ0XCI6MTMxLFwiZW5kXCI6MTM1fX0se1wia2luZFwiOlwiRmllbGRcIixcIm5hbWVcIjp7XCJraW5kXCI6XCJOYW1lXCIsXCJ2YWx1ZVwiOlwiY3JlYXRlVmlld1wiLFwibG9jXCI6e1wic3RhcnRcIjoxNDgsXCJlbmRcIjoxNTh9fSxcImFyZ3VtZW50c1wiOltdLFwiZGlyZWN0aXZlc1wiOltdLFwic2VsZWN0aW9uU2V0XCI6e1wia2luZFwiOlwiU2VsZWN0aW9uU2V0XCIsXCJzZWxlY3Rpb25zXCI6W3tcImtpbmRcIjpcIkZpZWxkXCIsXCJuYW1lXCI6e1wia2luZFwiOlwiTmFtZVwiLFwidmFsdWVcIjpcImZpZWxkTW9kZVwiLFwibG9jXCI6e1wic3RhcnRcIjoxNzUsXCJlbmRcIjoxODR9fSxcImFyZ3VtZW50c1wiOltdLFwiZGlyZWN0aXZlc1wiOltdLFwibG9jXCI6e1wic3RhcnRcIjoxNzUsXCJlbmRcIjoxODR9fV0sXCJsb2NcIjp7XCJzdGFydFwiOjE1OSxcImVuZFwiOjE5OH19LFwibG9jXCI6e1wic3RhcnRcIjoxNDgsXCJlbmRcIjoxOTh9fV0sXCJsb2NcIjp7XCJzdGFydFwiOjExNyxcImVuZFwiOjIxMH19LFwibG9jXCI6e1wic3RhcnRcIjoxMTAsXCJlbmRcIjoyMTB9fV0sXCJsb2NcIjp7XCJzdGFydFwiOjY1LFwiZW5kXCI6MjIwfX0sXCJsb2NcIjp7XCJzdGFydFwiOjU5LFwiZW5kXCI6MjIwfX1dLFwibG9jXCI6e1wic3RhcnRcIjo0OSxcImVuZFwiOjIyOH19LFwibG9jXCI6e1wic3RhcnRcIjozOSxcImVuZFwiOjIyOH19XSxcImxvY1wiOntcInN0YXJ0XCI6MzEsXCJlbmRcIjoyMzR9fSxcImxvY1wiOntcInN0YXJ0XCI6MjIsXCJlbmRcIjoyMzR9fSx7XCJraW5kXCI6XCJGaWVsZFwiLFwibmFtZVwiOntcImtpbmRcIjpcIk5hbWVcIixcInZhbHVlXCI6XCJhdXRoZW50aWNhdGVkSXRlbVwifSxcInNlbGVjdGlvblNldFwiOntcImtpbmRcIjpcIlNlbGVjdGlvblNldFwiLFwic2VsZWN0aW9uc1wiOlt7XCJraW5kXCI6XCJJbmxpbmVGcmFnbWVudFwiLFwidHlwZUNvbmRpdGlvblwiOntcImtpbmRcIjpcIk5hbWVkVHlwZVwiLFwibmFtZVwiOntcImtpbmRcIjpcIk5hbWVcIixcInZhbHVlXCI6XCJVc2VyXCJ9fSxcInNlbGVjdGlvblNldFwiOntcImtpbmRcIjpcIlNlbGVjdGlvblNldFwiLFwic2VsZWN0aW9uc1wiOlt7XCJraW5kXCI6XCJGaWVsZFwiLFwibmFtZVwiOntcImtpbmRcIjpcIk5hbWVcIixcInZhbHVlXCI6XCJpZFwifX0se1wia2luZFwiOlwiRmllbGRcIixcIm5hbWVcIjp7XCJraW5kXCI6XCJOYW1lXCIsXCJ2YWx1ZVwiOlwibmFtZVwifX1dfX1dfX1dfX1dfSxcbiAgZmllbGRWaWV3czogW3ZpZXcwLHZpZXcxLHZpZXcyLHZpZXczLHZpZXc0LHZpZXc1LHZpZXc2XSxcbiAgYWRtaW5NZXRhSGFzaDogXCIxMGltd2F4XCIsXG4gIGFkbWluQ29uZmlnOiBhZG1pbkNvbmZpZyxcbiAgYXBpUGF0aDogXCIvYXBpL2dyYXBocWxcIixcbn0pO1xuIl0sIm5hbWVzIjpbImdldEFwcCIsInZpZXcwIiwidmlldzEiLCJ2aWV3MiIsInZpZXczIiwidmlldzQiLCJ2aWV3NSIsInZpZXc2IiwiYWRtaW5Db25maWciLCJsYXp5TWV0YWRhdGFRdWVyeSIsImZpZWxkVmlld3MiLCJhZG1pbk1ldGFIYXNoIiwiYXBpUGF0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/_app.js\n");

/***/ }),

/***/ "../../node_modules/next/dist/client/link.js":
/*!***************************************************!*\
  !*** ../../node_modules/next/dist/client/link.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports[\"default\"] = void 0;\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"react\"));\nvar _router = __webpack_require__(/*! ../shared/lib/router/router */ \"../../node_modules/next/dist/shared/lib/router/router.js\");\nvar _router1 = __webpack_require__(/*! ./router */ \"../../node_modules/next/dist/client/router.js\");\nvar _useIntersection = __webpack_require__(/*! ./use-intersection */ \"../../node_modules/next/dist/client/use-intersection.js\");\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\nconst prefetched = {\n};\nfunction prefetch(router, href, as, options) {\n    if (true) return;\n    if (!(0, _router).isLocalURL(href)) return;\n    // Prefetch the JSON page if asked (only in the client)\n    // We need to handle a prefetch error here since we may be\n    // loading with priority which can reject but we don't\n    // want to force navigation since this is only a prefetch\n    router.prefetch(href, as, options).catch((err)=>{\n        if (true) {\n            // rethrow to show invalid URL errors\n            throw err;\n        }\n    });\n    const curLocale = options && typeof options.locale !== 'undefined' ? options.locale : router && router.locale;\n    // Join on an invalid URI character\n    prefetched[href + '%' + as + (curLocale ? '%' + curLocale : '')] = true;\n}\nfunction isModifiedEvent(event) {\n    const { target  } = event.currentTarget;\n    return target && target !== '_self' || event.metaKey || event.ctrlKey || event.shiftKey || event.altKey || event.nativeEvent && event.nativeEvent.which === 2;\n}\nfunction linkClicked(e, router, href, as, replace, shallow, scroll, locale) {\n    const { nodeName  } = e.currentTarget;\n    if (nodeName === 'A' && (isModifiedEvent(e) || !(0, _router).isLocalURL(href))) {\n        // ignore click for browser’s default behavior\n        return;\n    }\n    e.preventDefault();\n    //  avoid scroll for urls with anchor refs\n    if (scroll == null && as.indexOf('#') >= 0) {\n        scroll = false;\n    }\n    // replace state instead of push if prop is present\n    router[replace ? 'replace' : 'push'](href, as, {\n        shallow,\n        locale,\n        scroll\n    });\n}\nfunction Link(props) {\n    if (true) {\n        function createPropError(args) {\n            return new Error(`Failed prop type: The prop \\`${args.key}\\` expects a ${args.expected} in \\`<Link>\\`, but got \\`${args.actual}\\` instead.` + ( false ? 0 : ''));\n        }\n        // TypeScript trick for type-guarding:\n        const requiredPropsGuard = {\n            href: true\n        };\n        const requiredProps = Object.keys(requiredPropsGuard);\n        requiredProps.forEach((key)=>{\n            if (key === 'href') {\n                if (props[key] == null || typeof props[key] !== 'string' && typeof props[key] !== 'object') {\n                    throw createPropError({\n                        key,\n                        expected: '`string` or `object`',\n                        actual: props[key] === null ? 'null' : typeof props[key]\n                    });\n                }\n            } else {\n                // TypeScript trick for type-guarding:\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                const _ = key;\n            }\n        });\n        // TypeScript trick for type-guarding:\n        const optionalPropsGuard = {\n            as: true,\n            replace: true,\n            scroll: true,\n            shallow: true,\n            passHref: true,\n            prefetch: true,\n            locale: true\n        };\n        const optionalProps = Object.keys(optionalPropsGuard);\n        optionalProps.forEach((key)=>{\n            const valType = typeof props[key];\n            if (key === 'as') {\n                if (props[key] && valType !== 'string' && valType !== 'object') {\n                    throw createPropError({\n                        key,\n                        expected: '`string` or `object`',\n                        actual: valType\n                    });\n                }\n            } else if (key === 'locale') {\n                if (props[key] && valType !== 'string') {\n                    throw createPropError({\n                        key,\n                        expected: '`string`',\n                        actual: valType\n                    });\n                }\n            } else if (key === 'replace' || key === 'scroll' || key === 'shallow' || key === 'passHref' || key === 'prefetch') {\n                if (props[key] != null && valType !== 'boolean') {\n                    throw createPropError({\n                        key,\n                        expected: '`boolean`',\n                        actual: valType\n                    });\n                }\n            } else {\n                // TypeScript trick for type-guarding:\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                const _ = key;\n            }\n        });\n        // This hook is in a conditional but that is ok because `process.env.NODE_ENV` never changes\n        // eslint-disable-next-line react-hooks/rules-of-hooks\n        const hasWarned = _react.default.useRef(false);\n        if (props.prefetch && !hasWarned.current) {\n            hasWarned.current = true;\n            console.warn('Next.js auto-prefetches automatically based on viewport. The prefetch attribute is no longer needed. More: https://nextjs.org/docs/messages/prefetch-true-deprecated');\n        }\n    }\n    const p = props.prefetch !== false;\n    const router = (0, _router1).useRouter();\n    const { href , as  } = _react.default.useMemo(()=>{\n        const [resolvedHref, resolvedAs] = (0, _router).resolveHref(router, props.href, true);\n        return {\n            href: resolvedHref,\n            as: props.as ? (0, _router).resolveHref(router, props.as) : resolvedAs || resolvedHref\n        };\n    }, [\n        router,\n        props.href,\n        props.as\n    ]);\n    let { children , replace , shallow , scroll , locale  } = props;\n    if (typeof children === 'string') {\n        children = /*#__PURE__*/ _react.default.createElement(\"a\", null, children);\n    }\n    // This will return the first child, if multiple are provided it will throw an error\n    let child;\n    if (true) {\n        try {\n            child = _react.default.Children.only(children);\n        } catch (err) {\n            throw new Error(`Multiple children were passed to <Link> with \\`href\\` of \\`${props.href}\\` but only one child is supported https://nextjs.org/docs/messages/link-multiple-children` + ( false ? 0 : ''));\n        }\n    } else {}\n    const childRef = child && typeof child === 'object' && child.ref;\n    const [setIntersectionRef, isVisible] = (0, _useIntersection).useIntersection({\n        rootMargin: '200px'\n    });\n    const setRef = _react.default.useCallback((el)=>{\n        setIntersectionRef(el);\n        if (childRef) {\n            if (typeof childRef === 'function') childRef(el);\n            else if (typeof childRef === 'object') {\n                childRef.current = el;\n            }\n        }\n    }, [\n        childRef,\n        setIntersectionRef\n    ]);\n    _react.default.useEffect(()=>{\n        const shouldPrefetch = isVisible && p && (0, _router).isLocalURL(href);\n        const curLocale = typeof locale !== 'undefined' ? locale : router && router.locale;\n        const isPrefetched = prefetched[href + '%' + as + (curLocale ? '%' + curLocale : '')];\n        if (shouldPrefetch && !isPrefetched) {\n            prefetch(router, href, as, {\n                locale: curLocale\n            });\n        }\n    }, [\n        as,\n        href,\n        isVisible,\n        locale,\n        p,\n        router\n    ]);\n    const childProps = {\n        ref: setRef,\n        onClick: (e)=>{\n            if (child.props && typeof child.props.onClick === 'function') {\n                child.props.onClick(e);\n            }\n            if (!e.defaultPrevented) {\n                linkClicked(e, router, href, as, replace, shallow, scroll, locale);\n            }\n        }\n    };\n    childProps.onMouseEnter = (e)=>{\n        if (child.props && typeof child.props.onMouseEnter === 'function') {\n            child.props.onMouseEnter(e);\n        }\n        if ((0, _router).isLocalURL(href)) {\n            prefetch(router, href, as, {\n                priority: true\n            });\n        }\n    };\n    // If child is an <a> tag and doesn't have a href attribute, or if the 'passHref' property is\n    // defined, we specify the current 'href', so that repetition is not needed by the user\n    if (props.passHref || child.type === 'a' && !('href' in child.props)) {\n        const curLocale = typeof locale !== 'undefined' ? locale : router && router.locale;\n        // we only render domain locales if we are currently on a domain locale\n        // so that locale links are still visitable in development/preview envs\n        const localeDomain = router && router.isLocaleDomain && (0, _router).getDomainLocale(as, curLocale, router && router.locales, router && router.domainLocales);\n        childProps.href = localeDomain || (0, _router).addBasePath((0, _router).addLocale(as, curLocale, router && router.defaultLocale));\n    }\n    return(/*#__PURE__*/ _react.default.cloneElement(child, childProps));\n}\nvar _default = Link;\nexports[\"default\"] = _default; //# sourceMappingURL=link.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvbGluay5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBWTtBQUNaQSw4Q0FBNkMsQ0FBQztJQUMxQ0csS0FBSyxFQUFFLElBQUk7QUFDZixDQUFDLEVBQUM7QUFDRkQsa0JBQWUsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUN4QixHQUFHLENBQUNHLE1BQU0sR0FBR0Msc0JBQXNCLENBQUNDLG1CQUFPLENBQUMsb0JBQU87QUFDbkQsR0FBRyxDQUFDQyxPQUFPLEdBQUdELG1CQUFPLENBQUMsNkZBQTZCO0FBQ25ELEdBQUcsQ0FBQ0UsUUFBUSxHQUFHRixtQkFBTyxDQUFDLCtEQUFVO0FBQ2pDLEdBQUcsQ0FBQ0csZ0JBQWdCLEdBQUdILG1CQUFPLENBQUMsbUZBQW9CO1NBQzFDRCxzQkFBc0IsQ0FBQ0ssR0FBRyxFQUFFLENBQUM7SUFDbEMsTUFBTSxDQUFDQSxHQUFHLElBQUlBLEdBQUcsQ0FBQ0MsVUFBVSxHQUFHRCxHQUFHLEdBQUcsQ0FBQztRQUNsQ1AsT0FBTyxFQUFFTyxHQUFHO0lBQ2hCLENBQUM7QUFDTCxDQUFDO0FBQ0QsS0FBSyxDQUFDRSxVQUFVLEdBQUcsQ0FBQztBQUNwQixDQUFDO1NBQ1FDLFFBQVEsQ0FBQ0MsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsRUFBRUMsT0FBTyxFQUFFLENBQUM7SUFDMUMsRUFBRSxFQUFFLElBQXdDLEVBQUUsTUFBTTtJQUNwRCxFQUFFLElBQUksQ0FBQyxFQUFFVixPQUFPLEVBQUVXLFVBQVUsQ0FBQ0gsSUFBSSxHQUFHLE1BQU07SUFDMUMsRUFBdUQ7SUFDdkQsRUFBMEQ7SUFDMUQsRUFBc0Q7SUFDdEQsRUFBeUQ7SUFDekRELE1BQU0sQ0FBQ0QsUUFBUSxDQUFDRSxJQUFJLEVBQUVDLEVBQUUsRUFBRUMsT0FBTyxFQUFFRSxLQUFLLEVBQUVDLEdBQUcsR0FBRyxDQUFDO1FBQzdDLEVBQUUsRUF4QlYsSUF3QmlELEVBQUUsQ0FBQztZQUN4QyxFQUFxQztZ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LElBQUlBLE1BQU0sQ0FBQ2tGLGFBQWE7UUFDNUpWLFVBQVUsQ0FBQ3ZFLElBQUksR0FBRzZFLFlBQVksS0FBSyxDQUFDLEVBQUVyRixPQUFPLEVBQUUwRixXQUFXLEVBQUUsQ0FBQyxFQUFFMUYsT0FBTyxFQUFFMkYsU0FBUyxDQUFDbEYsRUFBRSxFQUFFSyxTQUFTLEVBQUVQLE1BQU0sSUFBSUEsTUFBTSxDQUFDcUYsYUFBYTtJQUNuSSxDQUFDO0lBQ0QsTUFBTSxDQUFDLEVBQWEsWUFBQy9GLE1BQU0sQ0FBQ0QsT0FBTyxDQUFDaUcsWUFBWSxDQUFDN0IsS0FBSyxFQUFFZSxVQUFVO0FBQ3RFLENBQUM7QUFDRCxHQUFHLENBQUNlLFFBQVEsR0FBRzVELElBQUk7QUFDbkJ4QyxrQkFBZSxHQUFHb0csUUFBUSxDQUUxQixDQUFnQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9saW5rLmpzP2MxNDciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG52YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpO1xudmFyIF9yb3V0ZXIgPSByZXF1aXJlKFwiLi4vc2hhcmVkL2xpYi9yb3V0ZXIvcm91dGVyXCIpO1xudmFyIF9yb3V0ZXIxID0gcmVxdWlyZShcIi4vcm91dGVyXCIpO1xudmFyIF91c2VJbnRlcnNlY3Rpb24gPSByZXF1aXJlKFwiLi91c2UtaW50ZXJzZWN0aW9uXCIpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgICAgICBkZWZhdWx0OiBvYmpcbiAgICB9O1xufVxuY29uc3QgcHJlZmV0Y2hlZCA9IHtcbn07XG5mdW5jdGlvbiBwcmVmZXRjaChyb3V0ZXIsIGhyZWYsIGFzLCBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8ICFyb3V0ZXIpIHJldHVybjtcbiAgICBpZiAoISgwLCBfcm91dGVyKS5pc0xvY2FsVVJMKGhyZWYpKSByZXR1cm47XG4gICAgLy8gUHJlZmV0Y2ggdGhlIEpTT04gcGFnZSBpZiBhc2tlZCAob25seSBpbiB0aGUgY2xpZW50KVxuICAgIC8vIFdlIG5lZWQgdG8gaGFuZGxlIGEgcHJlZmV0Y2ggZXJyb3IgaGVyZSBzaW5jZSB3ZSBtYXkgYmVcbiAgICAvLyBsb2FkaW5nIHdpdGggcHJpb3JpdHkgd2hpY2ggY2FuIHJlamVjdCBidXQgd2UgZG9uJ3RcbiAgICAvLyB3YW50IHRvIGZvcmNlIG5hdmlnYXRpb24gc2luY2UgdGhpcyBpcyBvbmx5IGEgcHJlZmV0Y2hcbiAgICByb3V0ZXIucHJlZmV0Y2goaHJlZiwgYXMsIG9wdGlvbnMpLmNhdGNoKChlcnIpPT57XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAvLyByZXRocm93IHRvIHNob3cgaW52YWxpZCBVUkwgZXJyb3JzXG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjdXJMb2NhbGUgPSBvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLmxvY2FsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmxvY2FsZSA6IHJvdXRlciAmJiByb3V0ZXIubG9jYWxlO1xuICAgIC8vIEpvaW4gb24gYW4gaW52YWxpZCBVUkkgY2hhcmFjdGVyXG4gICAgcHJlZmV0Y2hlZFtocmVmICsgJyUnICsgYXMgKyAoY3VyTG9jYWxlID8gJyUnICsgY3VyTG9jYWxlIDogJycpXSA9IHRydWU7XG59XG5mdW5jdGlvbiBpc01vZGlmaWVkRXZlbnQoZXZlbnQpIHtcbiAgICBjb25zdCB7IHRhcmdldCAgfSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgcmV0dXJuIHRhcmdldCAmJiB0YXJnZXQgIT09ICdfc2VsZicgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5jdHJsS2V5IHx8IGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LmFsdEtleSB8fCBldmVudC5uYXRpdmVFdmVudCAmJiBldmVudC5uYXRpdmVFdmVudC53aGljaCA9PT0gMjtcbn1cbmZ1bmN0aW9uIGxpbmtDbGlja2VkKGUsIHJvdXRlciwgaHJlZiwgYXMsIHJlcGxhY2UsIHNoYWxsb3csIHNjcm9sbCwgbG9jYWxlKSB7XG4gICAgY29uc3QgeyBub2RlTmFtZSAgfSA9IGUuY3VycmVudFRhcmdldDtcbiAgICBpZiAobm9kZU5hbWUgPT09ICdBJyAmJiAoaXNNb2RpZmllZEV2ZW50KGUpIHx8ICEoMCwgX3JvdXRlcikuaXNMb2NhbFVSTChocmVmKSkpIHtcbiAgICAgICAgLy8gaWdub3JlIGNsaWNrIGZvciBicm93c2Vy4oCZcyBkZWZhdWx0IGJlaGF2aW9yXG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIC8vICBhdm9pZCBzY3JvbGwgZm9yIHVybHMgd2l0aCBhbmNob3IgcmVmc1xuICAgIGlmIChzY3JvbGwgPT0gbnVsbCAmJiBhcy5pbmRleE9mKCcjJykgPj0gMCkge1xuICAgICAgICBzY3JvbGwgPSBmYWxzZTtcbiAgICB9XG4gICAgLy8gcmVwbGFjZSBzdGF0ZSBpbnN0ZWFkIG9mIHB1c2ggaWYgcHJvcCBpcyBwcmVzZW50XG4gICAgcm91dGVyW3JlcGxhY2UgPyAncmVwbGFjZScgOiAncHVzaCddKGhyZWYsIGFzLCB7XG4gICAgICAgIHNoYWxsb3csXG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgc2Nyb2xsXG4gICAgfSk7XG59XG5mdW5jdGlvbiBMaW5rKHByb3BzKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlUHJvcEVycm9yKGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoYEZhaWxlZCBwcm9wIHR5cGU6IFRoZSBwcm9wIFxcYCR7YXJncy5rZXl9XFxgIGV4cGVjdHMgYSAke2FyZ3MuZXhwZWN0ZWR9IGluIFxcYDxMaW5rPlxcYCwgYnV0IGdvdCBcXGAke2FyZ3MuYWN0dWFsfVxcYCBpbnN0ZWFkLmAgKyAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyBcIlxcbk9wZW4geW91ciBicm93c2VyJ3MgY29uc29sZSB0byB2aWV3IHRoZSBDb21wb25lbnQgc3RhY2sgdHJhY2UuXCIgOiAnJykpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFR5cGVTY3JpcHQgdHJpY2sgZm9yIHR5cGUtZ3VhcmRpbmc6XG4gICAgICAgIGNvbnN0IHJlcXVpcmVkUHJvcHNHdWFyZCA9IHtcbiAgICAgICAgICAgIGhyZWY6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVxdWlyZWRQcm9wcyA9IE9iamVjdC5rZXlzKHJlcXVpcmVkUHJvcHNHdWFyZCk7XG4gICAgICAgIHJlcXVpcmVkUHJvcHMuZm9yRWFjaCgoa2V5KT0+e1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2hyZWYnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BzW2tleV0gPT0gbnVsbCB8fCB0eXBlb2YgcHJvcHNba2V5XSAhPT0gJ3N0cmluZycgJiYgdHlwZW9mIHByb3BzW2tleV0gIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZVByb3BFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogJ2BzdHJpbmdgIG9yIGBvYmplY3RgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbDogcHJvcHNba2V5XSA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBwcm9wc1trZXldXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVHlwZVNjcmlwdCB0cmljayBmb3IgdHlwZS1ndWFyZGluZzpcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICAgICAgICAgICAgY29uc3QgXyA9IGtleTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFR5cGVTY3JpcHQgdHJpY2sgZm9yIHR5cGUtZ3VhcmRpbmc6XG4gICAgICAgIGNvbnN0IG9wdGlvbmFsUHJvcHNHdWFyZCA9IHtcbiAgICAgICAgICAgIGFzOiB0cnVlLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHNjcm9sbDogdHJ1ZSxcbiAgICAgICAgICAgIHNoYWxsb3c6IHRydWUsXG4gICAgICAgICAgICBwYXNzSHJlZjogdHJ1ZSxcbiAgICAgICAgICAgIHByZWZldGNoOiB0cnVlLFxuICAgICAgICAgICAgbG9jYWxlOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG9wdGlvbmFsUHJvcHMgPSBPYmplY3Qua2V5cyhvcHRpb25hbFByb3BzR3VhcmQpO1xuICAgICAgICBvcHRpb25hbFByb3BzLmZvckVhY2goKGtleSk9PntcbiAgICAgICAgICAgIGNvbnN0IHZhbFR5cGUgPSB0eXBlb2YgcHJvcHNba2V5XTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdhcycpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcHNba2V5XSAmJiB2YWxUeXBlICE9PSAnc3RyaW5nJyAmJiB2YWxUeXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVQcm9wRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQ6ICdgc3RyaW5nYCBvciBgb2JqZWN0YCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWw6IHZhbFR5cGVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdsb2NhbGUnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BzW2tleV0gJiYgdmFsVHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlUHJvcEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiAnYHN0cmluZ2AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsOiB2YWxUeXBlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncmVwbGFjZScgfHwga2V5ID09PSAnc2Nyb2xsJyB8fCBrZXkgPT09ICdzaGFsbG93JyB8fCBrZXkgPT09ICdwYXNzSHJlZicgfHwga2V5ID09PSAncHJlZmV0Y2gnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BzW2tleV0gIT0gbnVsbCAmJiB2YWxUeXBlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgY3JlYXRlUHJvcEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiAnYGJvb2xlYW5gJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbDogdmFsVHlwZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFR5cGVTY3JpcHQgdHJpY2sgZm9yIHR5cGUtZ3VhcmRpbmc6XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICAgICAgICAgIGNvbnN0IF8gPSBrZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBUaGlzIGhvb2sgaXMgaW4gYSBjb25kaXRpb25hbCBidXQgdGhhdCBpcyBvayBiZWNhdXNlIGBwcm9jZXNzLmVudi5OT0RFX0VOVmAgbmV2ZXIgY2hhbmdlc1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvcnVsZXMtb2YtaG9va3NcbiAgICAgICAgY29uc3QgaGFzV2FybmVkID0gX3JlYWN0LmRlZmF1bHQudXNlUmVmKGZhbHNlKTtcbiAgICAgICAgaWYgKHByb3BzLnByZWZldGNoICYmICFoYXNXYXJuZWQuY3VycmVudCkge1xuICAgICAgICAgICAgaGFzV2FybmVkLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdOZXh0LmpzIGF1dG8tcHJlZmV0Y2hlcyBhdXRvbWF0aWNhbGx5IGJhc2VkIG9uIHZpZXdwb3J0LiBUaGUgcHJlZmV0Y2ggYXR0cmlidXRlIGlzIG5vIGxvbmdlciBuZWVkZWQuIE1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL3ByZWZldGNoLXRydWUtZGVwcmVjYXRlZCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHAgPSBwcm9wcy5wcmVmZXRjaCAhPT0gZmFsc2U7XG4gICAgY29uc3Qgcm91dGVyID0gKDAsIF9yb3V0ZXIxKS51c2VSb3V0ZXIoKTtcbiAgICBjb25zdCB7IGhyZWYgLCBhcyAgfSA9IF9yZWFjdC5kZWZhdWx0LnVzZU1lbW8oKCk9PntcbiAgICAgICAgY29uc3QgW3Jlc29sdmVkSHJlZiwgcmVzb2x2ZWRBc10gPSAoMCwgX3JvdXRlcikucmVzb2x2ZUhyZWYocm91dGVyLCBwcm9wcy5ocmVmLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhyZWY6IHJlc29sdmVkSHJlZixcbiAgICAgICAgICAgIGFzOiBwcm9wcy5hcyA/ICgwLCBfcm91dGVyKS5yZXNvbHZlSHJlZihyb3V0ZXIsIHByb3BzLmFzKSA6IHJlc29sdmVkQXMgfHwgcmVzb2x2ZWRIcmVmXG4gICAgICAgIH07XG4gICAgfSwgW1xuICAgICAgICByb3V0ZXIsXG4gICAgICAgIHByb3BzLmhyZWYsXG4gICAgICAgIHByb3BzLmFzXG4gICAgXSk7XG4gICAgbGV0IHsgY2hpbGRyZW4gLCByZXBsYWNlICwgc2hhbGxvdyAsIHNjcm9sbCAsIGxvY2FsZSAgfSA9IHByb3BzO1xuICAgIGlmICh0eXBlb2YgY2hpbGRyZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNoaWxkcmVuID0gLyojX19QVVJFX18qLyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYVwiLCBudWxsLCBjaGlsZHJlbik7XG4gICAgfVxuICAgIC8vIFRoaXMgd2lsbCByZXR1cm4gdGhlIGZpcnN0IGNoaWxkLCBpZiBtdWx0aXBsZSBhcmUgcHJvdmlkZWQgaXQgd2lsbCB0aHJvdyBhbiBlcnJvclxuICAgIGxldCBjaGlsZDtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNoaWxkID0gX3JlYWN0LmRlZmF1bHQuQ2hpbGRyZW4ub25seShjaGlsZHJlbik7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNdWx0aXBsZSBjaGlsZHJlbiB3ZXJlIHBhc3NlZCB0byA8TGluaz4gd2l0aCBcXGBocmVmXFxgIG9mIFxcYCR7cHJvcHMuaHJlZn1cXGAgYnV0IG9ubHkgb25lIGNoaWxkIGlzIHN1cHBvcnRlZCBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9saW5rLW11bHRpcGxlLWNoaWxkcmVuYCArICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IFwiIFxcbk9wZW4geW91ciBicm93c2VyJ3MgY29uc29sZSB0byB2aWV3IHRoZSBDb21wb25lbnQgc3RhY2sgdHJhY2UuXCIgOiAnJykpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2hpbGQgPSBfcmVhY3QuZGVmYXVsdC5DaGlsZHJlbi5vbmx5KGNoaWxkcmVuKTtcbiAgICB9XG4gICAgY29uc3QgY2hpbGRSZWYgPSBjaGlsZCAmJiB0eXBlb2YgY2hpbGQgPT09ICdvYmplY3QnICYmIGNoaWxkLnJlZjtcbiAgICBjb25zdCBbc2V0SW50ZXJzZWN0aW9uUmVmLCBpc1Zpc2libGVdID0gKDAsIF91c2VJbnRlcnNlY3Rpb24pLnVzZUludGVyc2VjdGlvbih7XG4gICAgICAgIHJvb3RNYXJnaW46ICcyMDBweCdcbiAgICB9KTtcbiAgICBjb25zdCBzZXRSZWYgPSBfcmVhY3QuZGVmYXVsdC51c2VDYWxsYmFjaygoZWwpPT57XG4gICAgICAgIHNldEludGVyc2VjdGlvblJlZihlbCk7XG4gICAgICAgIGlmIChjaGlsZFJlZikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjaGlsZFJlZiA9PT0gJ2Z1bmN0aW9uJykgY2hpbGRSZWYoZWwpO1xuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGNoaWxkUmVmID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGNoaWxkUmVmLmN1cnJlbnQgPSBlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIFtcbiAgICAgICAgY2hpbGRSZWYsXG4gICAgICAgIHNldEludGVyc2VjdGlvblJlZlxuICAgIF0pO1xuICAgIF9yZWFjdC5kZWZhdWx0LnVzZUVmZmVjdCgoKT0+e1xuICAgICAgICBjb25zdCBzaG91bGRQcmVmZXRjaCA9IGlzVmlzaWJsZSAmJiBwICYmICgwLCBfcm91dGVyKS5pc0xvY2FsVVJMKGhyZWYpO1xuICAgICAgICBjb25zdCBjdXJMb2NhbGUgPSB0eXBlb2YgbG9jYWxlICE9PSAndW5kZWZpbmVkJyA/IGxvY2FsZSA6IHJvdXRlciAmJiByb3V0ZXIubG9jYWxlO1xuICAgICAgICBjb25zdCBpc1ByZWZldGNoZWQgPSBwcmVmZXRjaGVkW2hyZWYgKyAnJScgKyBhcyArIChjdXJMb2NhbGUgPyAnJScgKyBjdXJMb2NhbGUgOiAnJyldO1xuICAgICAgICBpZiAoc2hvdWxkUHJlZmV0Y2ggJiYgIWlzUHJlZmV0Y2hlZCkge1xuICAgICAgICAgICAgcHJlZmV0Y2gocm91dGVyLCBocmVmLCBhcywge1xuICAgICAgICAgICAgICAgIGxvY2FsZTogY3VyTG9jYWxlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIFtcbiAgICAgICAgYXMsXG4gICAgICAgIGhyZWYsXG4gICAgICAgIGlzVmlzaWJsZSxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICBwLFxuICAgICAgICByb3V0ZXJcbiAgICBdKTtcbiAgICBjb25zdCBjaGlsZFByb3BzID0ge1xuICAgICAgICByZWY6IHNldFJlZixcbiAgICAgICAgb25DbGljazogKGUpPT57XG4gICAgICAgICAgICBpZiAoY2hpbGQucHJvcHMgJiYgdHlwZW9mIGNoaWxkLnByb3BzLm9uQ2xpY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5wcm9wcy5vbkNsaWNrKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgICAgICBsaW5rQ2xpY2tlZChlLCByb3V0ZXIsIGhyZWYsIGFzLCByZXBsYWNlLCBzaGFsbG93LCBzY3JvbGwsIGxvY2FsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNoaWxkUHJvcHMub25Nb3VzZUVudGVyID0gKGUpPT57XG4gICAgICAgIGlmIChjaGlsZC5wcm9wcyAmJiB0eXBlb2YgY2hpbGQucHJvcHMub25Nb3VzZUVudGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjaGlsZC5wcm9wcy5vbk1vdXNlRW50ZXIoZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCgwLCBfcm91dGVyKS5pc0xvY2FsVVJMKGhyZWYpKSB7XG4gICAgICAgICAgICBwcmVmZXRjaChyb3V0ZXIsIGhyZWYsIGFzLCB7XG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBJZiBjaGlsZCBpcyBhbiA8YT4gdGFnIGFuZCBkb2Vzbid0IGhhdmUgYSBocmVmIGF0dHJpYnV0ZSwgb3IgaWYgdGhlICdwYXNzSHJlZicgcHJvcGVydHkgaXNcbiAgICAvLyBkZWZpbmVkLCB3ZSBzcGVjaWZ5IHRoZSBjdXJyZW50ICdocmVmJywgc28gdGhhdCByZXBldGl0aW9uIGlzIG5vdCBuZWVkZWQgYnkgdGhlIHVzZXJcbiAgICBpZiAocHJvcHMucGFzc0hyZWYgfHwgY2hpbGQudHlwZSA9PT0gJ2EnICYmICEoJ2hyZWYnIGluIGNoaWxkLnByb3BzKSkge1xuICAgICAgICBjb25zdCBjdXJMb2NhbGUgPSB0eXBlb2YgbG9jYWxlICE9PSAndW5kZWZpbmVkJyA/IGxvY2FsZSA6IHJvdXRlciAmJiByb3V0ZXIubG9jYWxlO1xuICAgICAgICAvLyB3ZSBvbmx5IHJlbmRlciBkb21haW4gbG9jYWxlcyBpZiB3ZSBhcmUgY3VycmVudGx5IG9uIGEgZG9tYWluIGxvY2FsZVxuICAgICAgICAvLyBzbyB0aGF0IGxvY2FsZSBsaW5rcyBhcmUgc3RpbGwgdmlzaXRhYmxlIGluIGRldmVsb3BtZW50L3ByZXZpZXcgZW52c1xuICAgICAgICBjb25zdCBsb2NhbGVEb21haW4gPSByb3V0ZXIgJiYgcm91dGVyLmlzTG9jYWxlRG9tYWluICYmICgwLCBfcm91dGVyKS5nZXREb21haW5Mb2NhbGUoYXMsIGN1ckxvY2FsZSwgcm91dGVyICYmIHJvdXRlci5sb2NhbGVzLCByb3V0ZXIgJiYgcm91dGVyLmRvbWFpbkxvY2FsZXMpO1xuICAgICAgICBjaGlsZFByb3BzLmhyZWYgPSBsb2NhbGVEb21haW4gfHwgKDAsIF9yb3V0ZXIpLmFkZEJhc2VQYXRoKCgwLCBfcm91dGVyKS5hZGRMb2NhbGUoYXMsIGN1ckxvY2FsZSwgcm91dGVyICYmIHJvdXRlci5kZWZhdWx0TG9jYWxlKSk7XG4gICAgfVxuICAgIHJldHVybigvKiNfX1BVUkVfXyovIF9yZWFjdC5kZWZhdWx0LmNsb25lRWxlbWVudChjaGlsZCwgY2hpbGRQcm9wcykpO1xufVxudmFyIF9kZWZhdWx0ID0gTGluaztcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1saW5rLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yb3V0ZXIiLCJfcm91dGVyMSIsIl91c2VJbnRlcnNlY3Rpb24iLCJvYmoiLCJfX2VzTW9kdWxlIiwicHJlZmV0Y2hlZCIsInByZWZldGNoIiwicm91dGVyIiwiaHJlZiIsImFzIiwib3B0aW9ucyIsImlzTG9jYWxVUkwiLCJjYXRjaCIsImVyciIsImN1ckxvY2FsZSIsImxvY2FsZSIsImlzTW9kaWZpZWRFdmVudCIsImV2ZW50IiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIm1ldGFLZXkiLCJjdHJsS2V5Iiwic2hpZnRLZXkiLCJhbHRLZXkiLCJuYXRpdmVFdmVudCIsIndoaWNoIiwibGlua0NsaWNrZWQiLCJlIiwicmVwbGFjZSIsInNoYWxsb3ciLCJzY3JvbGwiLCJub2RlTmFtZSIsInByZXZlbnREZWZhdWx0IiwiaW5kZXhPZiIsIkxpbmsiLCJwcm9wcyIsImNyZWF0ZVByb3BFcnJvciIsImFyZ3MiLCJFcnJvciIsImtleSIsImV4cGVjdGVkIiwiYWN0dWFsIiwicmVxdWlyZWRQcm9wc0d1YXJkIiwicmVxdWlyZWRQcm9wcyIsImtleXMiLCJmb3JFYWNoIiwiXyIsIm9wdGlvbmFsUHJvcHNHdWFyZCIsInBhc3NIcmVmIiwib3B0aW9uYWxQcm9wcyIsInZhbFR5cGUiLCJoYXNXYXJuZWQiLCJ1c2VSZWYiLCJjdXJyZW50IiwiY29uc29sZSIsIndhcm4iLCJwIiwidXNlUm91dGVyIiwidXNlTWVtbyIsInJlc29sdmVkSHJlZiIsInJlc29sdmVkQXMiLCJyZXNvbHZlSHJlZiIsImNoaWxkcmVuIiwiY3JlYXRlRWxlbWVudCIsImNoaWxkIiwiQ2hpbGRyZW4iLCJvbmx5IiwiY2hpbGRSZWYiLCJyZWYiLCJzZXRJbnRlcnNlY3Rpb25SZWYiLCJpc1Zpc2libGUiLCJ1c2VJbnRlcnNlY3Rpb24iLCJyb290TWFyZ2luIiwic2V0UmVmIiwidXNlQ2FsbGJhY2siLCJlbCIsInVzZUVmZmVjdCIsInNob3VsZFByZWZldGNoIiwiaXNQcmVmZXRjaGVkIiwiY2hpbGRQcm9wcyIsIm9uQ2xpY2siLCJkZWZhdWx0UHJldmVudGVkIiwib25Nb3VzZUVudGVyIiwicHJpb3JpdHkiLCJ0eXBlIiwibG9jYWxlRG9tYWluIiwiaXNMb2NhbGVEb21haW4iLCJnZXREb21haW5Mb2NhbGUiLCJsb2NhbGVzIiwiZG9tYWluTG9jYWxlcyIsImFkZEJhc2VQYXRoIiwiYWRkTG9jYWxlIiwiZGVmYXVsdExvY2FsZSIsImNsb25lRWxlbWVudCIsIl9kZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/next/dist/client/link.js\n");

/***/ }),

/***/ "../../node_modules/next/dist/client/normalize-trailing-slash.js":
/*!***********************************************************************!*\
  !*** ../../node_modules/next/dist/client/normalize-trailing-slash.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.removePathTrailingSlash = removePathTrailingSlash;\nexports.normalizePathTrailingSlash = void 0;\nfunction removePathTrailingSlash(path) {\n    return path.endsWith('/') && path !== '/' ? path.slice(0, -1) : path;\n}\nconst normalizePathTrailingSlash =  false ? 0 : removePathTrailingSlash;\nexports.normalizePathTrailingSlash = normalizePathTrailingSlash; //# sourceMappingURL=normalize-trailing-slash.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvbm9ybWFsaXplLXRyYWlsaW5nLXNsYXNoLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFZO0FBQ1pBLDhDQUE2QyxDQUFDO0lBQzFDRyxLQUFLLEVBQUUsSUFBSTtBQUNmLENBQUMsRUFBQztBQUNGRCwrQkFBK0IsR0FBR0UsdUJBQXVCO0FBQ3pERixrQ0FBa0MsR0FBRyxJQUFJLENBQUMsQ0FBQztTQUNsQ0UsdUJBQXVCLENBQUNFLElBQUksRUFBRSxDQUFDO0lBQ3BDLE1BQU0sQ0FBQ0EsSUFBSSxDQUFDQyxRQUFRLENBQUMsQ0FBRyxPQUFLRCxJQUFJLEtBQUssQ0FBRyxLQUFHQSxJQUFJLENBQUNFLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJRixJQUFJO0FBQ3hFLENBQUM7QUFDRCxLQUFLLENBQUNELDBCQUEwQixHQUFHSSxNQUFpQyxHQUFHLENBUXRFLEdBQUdMLHVCQUF1QjtBQUMzQkYsa0NBQWtDLEdBQUdHLDBCQUEwQixDQUUvRCxDQUFvRCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9ub3JtYWxpemUtdHJhaWxpbmctc2xhc2guanM/ZWQwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMucmVtb3ZlUGF0aFRyYWlsaW5nU2xhc2ggPSByZW1vdmVQYXRoVHJhaWxpbmdTbGFzaDtcbmV4cG9ydHMubm9ybWFsaXplUGF0aFRyYWlsaW5nU2xhc2ggPSB2b2lkIDA7XG5mdW5jdGlvbiByZW1vdmVQYXRoVHJhaWxpbmdTbGFzaChwYXRoKSB7XG4gICAgcmV0dXJuIHBhdGguZW5kc1dpdGgoJy8nKSAmJiBwYXRoICE9PSAnLycgPyBwYXRoLnNsaWNlKDAsIC0xKSA6IHBhdGg7XG59XG5jb25zdCBub3JtYWxpemVQYXRoVHJhaWxpbmdTbGFzaCA9IHByb2Nlc3MuZW52Ll9fTkVYVF9UUkFJTElOR19TTEFTSCA/IChwYXRoKT0+e1xuICAgIGlmICgvXFwuW14vXStcXC8/JC8udGVzdChwYXRoKSkge1xuICAgICAgICByZXR1cm4gcmVtb3ZlUGF0aFRyYWlsaW5nU2xhc2gocGF0aCk7XG4gICAgfSBlbHNlIGlmIChwYXRoLmVuZHNXaXRoKCcvJykpIHtcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBhdGggKyAnLyc7XG4gICAgfVxufSA6IHJlbW92ZVBhdGhUcmFpbGluZ1NsYXNoO1xuZXhwb3J0cy5ub3JtYWxpemVQYXRoVHJhaWxpbmdTbGFzaCA9IG5vcm1hbGl6ZVBhdGhUcmFpbGluZ1NsYXNoO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub3JtYWxpemUtdHJhaWxpbmctc2xhc2guanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwicmVtb3ZlUGF0aFRyYWlsaW5nU2xhc2giLCJub3JtYWxpemVQYXRoVHJhaWxpbmdTbGFzaCIsInBhdGgiLCJlbmRzV2l0aCIsInNsaWNlIiwicHJvY2VzcyIsImVudiIsIl9fTkVYVF9UUkFJTElOR19TTEFTSCIsInRlc3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/next/dist/client/normalize-trailing-slash.js\n");

/***/ }),

/***/ "../../node_modules/next/dist/client/request-idle-callback.js":
/*!********************************************************************!*\
  !*** ../../node_modules/next/dist/client/request-idle-callback.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.cancelIdleCallback = exports.requestIdleCallback = void 0;\nconst requestIdleCallback = typeof self !== 'undefined' && self.requestIdleCallback && self.requestIdleCallback.bind(window) || function(cb) {\n    let start = Date.now();\n    return setTimeout(function() {\n        cb({\n            didTimeout: false,\n            timeRemaining: function() {\n                return Math.max(0, 50 - (Date.now() - start));\n            }\n        });\n    }, 1);\n};\nexports.requestIdleCallback = requestIdleCallback;\nconst cancelIdleCallback = typeof self !== 'undefined' && self.cancelIdleCallback && self.cancelIdleCallback.bind(window) || function(id) {\n    return clearTimeout(id);\n};\nexports.cancelIdleCallback = cancelIdleCallback; //# sourceMappingURL=request-idle-callback.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvcmVxdWVzdC1pZGxlLWNhbGxiYWNrLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFZO0FBQ1pBLDhDQUE2QyxDQUFDO0lBQzFDRyxLQUFLLEVBQUUsSUFBSTtBQUNmLENBQUMsRUFBQztBQUNGRCwwQkFBMEIsR0FBR0EsMkJBQTJCLEdBQUcsSUFBSSxDQUFDLENBQUM7QUFDakUsS0FBSyxDQUFDRyxtQkFBbUIsR0FBRyxNQUFNLENBQUNDLElBQUksS0FBSyxDQUFXLGNBQUlBLElBQUksQ0FBQ0QsbUJBQW1CLElBQUlDLElBQUksQ0FBQ0QsbUJBQW1CLENBQUNFLElBQUksQ0FBQ0MsTUFBTSxLQUFLLFFBQVEsQ0FBQ0MsRUFBRSxFQUFFLENBQUM7SUFDMUksR0FBRyxDQUFDQyxLQUFLLEdBQUdDLElBQUksQ0FBQ0MsR0FBRztJQUNwQixNQUFNLENBQUNDLFVBQVUsQ0FBQyxRQUFRLEdBQUcsQ0FBQztRQUMxQkosRUFBRSxDQUFDLENBQUM7WUFDQUssVUFBVSxFQUFFLEtBQUs7WUFDakJDLGFBQWEsRUFBRSxRQUFRLEdBQUcsQ0FBQztnQkFDdkIsTUFBTSxDQUFDQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJTixJQUFJLENBQUNDLEdBQUcsS0FBS0YsS0FBSztZQUMvQyxDQUFDO1FBQ0wsQ0FBQztJQUNMLENBQUMsRUFBRSxDQUFDO0FBQ1IsQ0FBQztBQUNEUiwyQkFBMkIsR0FBR0csbUJBQW1CO0FBQ2pELEtBQUssQ0FBQ0Qsa0JBQWtCLEdBQUcsTUFBTSxDQUFDRSxJQUFJLEtBQUssQ0FBVyxjQUFJQSxJQUFJLENBQUNGLGtCQUFrQixJQUFJRSxJQUFJLENBQUNGLGtCQUFrQixDQUFDRyxJQUFJLENBQUNDLE1BQU0sS0FBSyxRQUFRLENBQUNVLEVBQUUsRUFBRSxDQUFDO0lBQ3ZJLE1BQU0sQ0FBQ0MsWUFBWSxDQUFDRCxFQUFFO0FBQzFCLENBQUM7QUFDRGhCLDBCQUEwQixHQUFHRSxrQkFBa0IsQ0FFL0MsQ0FBaUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvcmVxdWVzdC1pZGxlLWNhbGxiYWNrLmpzP2U5NzAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmNhbmNlbElkbGVDYWxsYmFjayA9IGV4cG9ydHMucmVxdWVzdElkbGVDYWxsYmFjayA9IHZvaWQgMDtcbmNvbnN0IHJlcXVlc3RJZGxlQ2FsbGJhY2sgPSB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5yZXF1ZXN0SWRsZUNhbGxiYWNrICYmIHNlbGYucmVxdWVzdElkbGVDYWxsYmFjay5iaW5kKHdpbmRvdykgfHwgZnVuY3Rpb24oY2IpIHtcbiAgICBsZXQgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBjYih7XG4gICAgICAgICAgICBkaWRUaW1lb3V0OiBmYWxzZSxcbiAgICAgICAgICAgIHRpbWVSZW1haW5pbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCA1MCAtIChEYXRlLm5vdygpIC0gc3RhcnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSwgMSk7XG59O1xuZXhwb3J0cy5yZXF1ZXN0SWRsZUNhbGxiYWNrID0gcmVxdWVzdElkbGVDYWxsYmFjaztcbmNvbnN0IGNhbmNlbElkbGVDYWxsYmFjayA9IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmLmNhbmNlbElkbGVDYWxsYmFjayAmJiBzZWxmLmNhbmNlbElkbGVDYWxsYmFjay5iaW5kKHdpbmRvdykgfHwgZnVuY3Rpb24oaWQpIHtcbiAgICByZXR1cm4gY2xlYXJUaW1lb3V0KGlkKTtcbn07XG5leHBvcnRzLmNhbmNlbElkbGVDYWxsYmFjayA9IGNhbmNlbElkbGVDYWxsYmFjaztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVxdWVzdC1pZGxlLWNhbGxiYWNrLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNhbmNlbElkbGVDYWxsYmFjayIsInJlcXVlc3RJZGxlQ2FsbGJhY2siLCJzZWxmIiwiYmluZCIsIndpbmRvdyIsImNiIiwic3RhcnQiLCJEYXRlIiwibm93Iiwic2V0VGltZW91dCIsImRpZFRpbWVvdXQiLCJ0aW1lUmVtYWluaW5nIiwiTWF0aCIsIm1heCIsImlkIiwiY2xlYXJUaW1lb3V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/next/dist/client/request-idle-callback.js\n");

/***/ }),

/***/ "../../node_modules/next/dist/client/route-loader.js":
/*!***********************************************************!*\
  !*** ../../node_modules/next/dist/client/route-loader.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.markAssetError = markAssetError;\nexports.isAssetError = isAssetError;\nexports.getClientBuildManifest = getClientBuildManifest;\nexports.getMiddlewareManifest = getMiddlewareManifest;\nexports.createRouteLoader = createRouteLoader;\nvar _getAssetPathFromRoute = _interopRequireDefault(__webpack_require__(/*! ../shared/lib/router/utils/get-asset-path-from-route */ \"../shared/lib/router/utils/get-asset-path-from-route\"));\nvar _requestIdleCallback = __webpack_require__(/*! ./request-idle-callback */ \"../../node_modules/next/dist/client/request-idle-callback.js\");\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n// 3.8s was arbitrarily chosen as it's what https://web.dev/interactive\n// considers as \"Good\" time-to-interactive. We must assume something went\n// wrong beyond this point, and then fall-back to a full page transition to\n// show the user something of value.\nconst MS_MAX_IDLE_DELAY = 3800;\nfunction withFuture(key, map, generator) {\n    let entry = map.get(key);\n    if (entry) {\n        if ('future' in entry) {\n            return entry.future;\n        }\n        return Promise.resolve(entry);\n    }\n    let resolver;\n    const prom = new Promise((resolve)=>{\n        resolver = resolve;\n    });\n    map.set(key, entry = {\n        resolve: resolver,\n        future: prom\n    });\n    return generator ? generator() // eslint-disable-next-line no-sequences\n    .then((value)=>(resolver(value), value)\n    ).catch((err)=>{\n        map.delete(key);\n        throw err;\n    }) : prom;\n}\nfunction hasPrefetch(link) {\n    try {\n        link = document.createElement('link');\n        return(// with relList.support\n        (!!window.MSInputMethodContext && !!document.documentMode) || link.relList.supports('prefetch'));\n    } catch (e) {\n        return false;\n    }\n}\nconst canPrefetch = hasPrefetch();\nfunction prefetchViaDom(href, as, link) {\n    return new Promise((res, rej)=>{\n        const selector = `\n      link[rel=\"prefetch\"][href^=\"${href}\"],\n      link[rel=\"preload\"][href^=\"${href}\"],\n      script[src^=\"${href}\"]`;\n        if (document.querySelector(selector)) {\n            return res();\n        }\n        link = document.createElement('link');\n        // The order of property assignment here is intentional:\n        if (as) link.as = as;\n        link.rel = `prefetch`;\n        link.crossOrigin = undefined;\n        link.onload = res;\n        link.onerror = rej;\n        // `href` should always be last:\n        link.href = href;\n        document.head.appendChild(link);\n    });\n}\nconst ASSET_LOAD_ERROR = Symbol('ASSET_LOAD_ERROR');\nfunction markAssetError(err) {\n    return Object.defineProperty(err, ASSET_LOAD_ERROR, {\n    });\n}\nfunction isAssetError(err) {\n    return err && ASSET_LOAD_ERROR in err;\n}\nfunction appendScript(src, script) {\n    return new Promise((resolve, reject)=>{\n        script = document.createElement('script');\n        // The order of property assignment here is intentional.\n        // 1. Setup success/failure hooks in case the browser synchronously\n        //    executes when `src` is set.\n        script.onload = resolve;\n        script.onerror = ()=>reject(markAssetError(new Error(`Failed to load script: ${src}`)))\n        ;\n        // 2. Configure the cross-origin attribute before setting `src` in case the\n        //    browser begins to fetch.\n        script.crossOrigin = undefined;\n        // 3. Finally, set the source and inject into the DOM in case the child\n        //    must be appended for fetching to start.\n        script.src = src;\n        document.body.appendChild(script);\n    });\n}\n// We wait for pages to be built in dev before we start the route transition\n// timeout to prevent an un-necessary hard navigation in development.\nlet devBuildPromise;\n// Resolve a promise that times out after given amount of milliseconds.\nfunction resolvePromiseWithTimeout(p, ms, err) {\n    return new Promise((resolve, reject)=>{\n        let cancelled = false;\n        p.then((r)=>{\n            // Resolved, cancel the timeout\n            cancelled = true;\n            resolve(r);\n        }).catch(reject);\n        // We wrap these checks separately for better dead-code elimination in\n        // production bundles.\n        if (true) {\n            (devBuildPromise || Promise.resolve()).then(()=>{\n                (0, _requestIdleCallback).requestIdleCallback(()=>setTimeout(()=>{\n                        if (!cancelled) {\n                            reject(err);\n                        }\n                    }, ms)\n                );\n            });\n        }\n        if (false) {}\n    });\n}\nfunction getClientBuildManifest() {\n    if (self.__BUILD_MANIFEST) {\n        return Promise.resolve(self.__BUILD_MANIFEST);\n    }\n    const onBuildManifest = new Promise((resolve)=>{\n        // Mandatory because this is not concurrent safe:\n        const cb = self.__BUILD_MANIFEST_CB;\n        self.__BUILD_MANIFEST_CB = ()=>{\n            resolve(self.__BUILD_MANIFEST);\n            cb && cb();\n        };\n    });\n    return resolvePromiseWithTimeout(onBuildManifest, MS_MAX_IDLE_DELAY, markAssetError(new Error('Failed to load client build manifest')));\n}\nfunction getMiddlewareManifest() {\n    if (self.__MIDDLEWARE_MANIFEST) {\n        return Promise.resolve(self.__MIDDLEWARE_MANIFEST);\n    }\n    const onMiddlewareManifest = new Promise((resolve)=>{\n        const cb = self.__MIDDLEWARE_MANIFEST_CB;\n        self.__MIDDLEWARE_MANIFEST_CB = ()=>{\n            resolve(self.__MIDDLEWARE_MANIFEST);\n            cb && cb();\n        };\n    });\n    return resolvePromiseWithTimeout(onMiddlewareManifest, MS_MAX_IDLE_DELAY, markAssetError(new Error('Failed to load client middleware manifest')));\n}\nfunction getFilesForRoute(assetPrefix, route) {\n    if (true) {\n        return Promise.resolve({\n            scripts: [\n                assetPrefix + '/_next/static/chunks/pages' + encodeURI((0, _getAssetPathFromRoute).default(route, '.js')), \n            ],\n            // Styles are handled by `style-loader` in development:\n            css: []\n        });\n    }\n    return getClientBuildManifest().then((manifest)=>{\n        if (!(route in manifest)) {\n            throw markAssetError(new Error(`Failed to lookup route: ${route}`));\n        }\n        const allFiles = manifest[route].map((entry)=>assetPrefix + '/_next/' + encodeURI(entry)\n        );\n        return {\n            scripts: allFiles.filter((v)=>v.endsWith('.js')\n            ),\n            css: allFiles.filter((v)=>v.endsWith('.css')\n            )\n        };\n    });\n}\nfunction createRouteLoader(assetPrefix) {\n    const entrypoints = new Map();\n    const loadedScripts = new Map();\n    const styleSheets = new Map();\n    const routes = new Map();\n    function maybeExecuteScript(src) {\n        // With HMR we might need to \"reload\" scripts when they are\n        // disposed and readded. Executing scripts twice has no functional\n        // differences\n        if (false) {} else {\n            return appendScript(src);\n        }\n    }\n    function fetchStyleSheet(href) {\n        let prom = styleSheets.get(href);\n        if (prom) {\n            return prom;\n        }\n        styleSheets.set(href, prom = fetch(href).then((res)=>{\n            if (!res.ok) {\n                throw new Error(`Failed to load stylesheet: ${href}`);\n            }\n            return res.text().then((text)=>({\n                    href: href,\n                    content: text\n                })\n            );\n        }).catch((err)=>{\n            throw markAssetError(err);\n        }));\n        return prom;\n    }\n    return {\n        whenEntrypoint (route) {\n            return withFuture(route, entrypoints);\n        },\n        onEntrypoint (route, execute) {\n            (execute ? Promise.resolve().then(()=>execute()\n            ).then((exports)=>({\n                    component: exports && exports.default || exports,\n                    exports: exports\n                })\n            , (err)=>({\n                    error: err\n                })\n            ) : Promise.resolve(undefined)).then((input)=>{\n                const old = entrypoints.get(route);\n                if (old && 'resolve' in old) {\n                    if (input) {\n                        entrypoints.set(route, input);\n                        old.resolve(input);\n                    }\n                } else {\n                    if (input) {\n                        entrypoints.set(route, input);\n                    } else {\n                        entrypoints.delete(route);\n                    }\n                    // when this entrypoint has been resolved before\n                    // the route is outdated and we want to invalidate\n                    // this cache entry\n                    routes.delete(route);\n                }\n            });\n        },\n        loadRoute (route, prefetch) {\n            return withFuture(route, routes, ()=>{\n                let devBuildPromiseResolve;\n                if (true) {\n                    devBuildPromise = new Promise((resolve)=>{\n                        devBuildPromiseResolve = resolve;\n                    });\n                }\n                return resolvePromiseWithTimeout(getFilesForRoute(assetPrefix, route).then(({ scripts , css  })=>{\n                    return Promise.all([\n                        entrypoints.has(route) ? [] : Promise.all(scripts.map(maybeExecuteScript)),\n                        Promise.all(css.map(fetchStyleSheet)), \n                    ]);\n                }).then((res)=>{\n                    return this.whenEntrypoint(route).then((entrypoint)=>({\n                            entrypoint,\n                            styles: res[1]\n                        })\n                    );\n                }), MS_MAX_IDLE_DELAY, markAssetError(new Error(`Route did not complete loading: ${route}`))).then(({ entrypoint , styles  })=>{\n                    const res = Object.assign({\n                        styles: styles\n                    }, entrypoint);\n                    return 'error' in entrypoint ? entrypoint : res;\n                }).catch((err)=>{\n                    if (prefetch) {\n                        // we don't want to cache errors during prefetch\n                        throw err;\n                    }\n                    return {\n                        error: err\n                    };\n                }).finally(()=>{\n                    return devBuildPromiseResolve === null || devBuildPromiseResolve === void 0 ? void 0 : devBuildPromiseResolve();\n                });\n            });\n        },\n        prefetch (route) {\n            // https://github.com/GoogleChromeLabs/quicklink/blob/453a661fa1fa940e2d2e044452398e38c67a98fb/src/index.mjs#L115-L118\n            // License: Apache 2.0\n            let cn;\n            if (cn = navigator.connection) {\n                // Don't prefetch if using 2G or if Save-Data is enabled.\n                if (cn.saveData || /2g/.test(cn.effectiveType)) return Promise.resolve();\n            }\n            return getFilesForRoute(assetPrefix, route).then((output)=>Promise.all(canPrefetch ? output.scripts.map((script)=>prefetchViaDom(script, 'script')\n                ) : [])\n            ).then(()=>{\n                (0, _requestIdleCallback).requestIdleCallback(()=>this.loadRoute(route, true).catch(()=>{\n                    })\n                );\n            }).catch(()=>{\n            });\n        }\n    };\n} //# sourceMappingURL=route-loader.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvcm91dGUtbG9hZGVyLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFZO0FBQ1pBLDhDQUE2QyxDQUFDO0lBQzFDRyxLQUFLLEVBQUUsSUFBSTtBQUNmLENBQUMsRUFBQztBQUNGRCxzQkFBc0IsR0FBR0UsY0FBYztBQUN2Q0Ysb0JBQW9CLEdBQUdHLFlBQVk7QUFDbkNILDhCQUE4QixHQUFHSSxzQkFBc0I7QUFDdkRKLDZCQUE2QixHQUFHSyxxQkFBcUI7QUFDckRMLHlCQUF5QixHQUFHTSxpQkFBaUI7QUFDN0MsR0FBRyxDQUFDQyxzQkFBc0IsR0FBR0Msc0JBQXNCLENBQUNDLG1CQUFPLENBQUMsa0hBQXNEO0FBQ2xILEdBQUcsQ0FBQ0Msb0JBQW9CLEdBQUdELG1CQUFPLENBQUMsNkZBQXlCO1NBQ25ERCxzQkFBc0IsQ0FBQ0csR0FBRyxFQUFFLENBQUM7SUFDbEMsTUFBTSxDQUFDQSxHQUFHLElBQUlBLEdBQUcsQ0FBQ0MsVUFBVSxHQUFHRCxHQUFHLEdBQUcsQ0FBQztRQUNsQ0UsT0FBTyxFQUFFRixHQUFHO0lBQ2hCLENBQUM7QUFDTCxDQUFDO0FBQ0QsRUFBdUU7QUFDdkUsRUFBeUU7QUFDekUsRUFBMkU7QUFDM0UsRUFBb0M7QUFDcEMsS0FBSyxDQUFDRyxpQkFBaUIsR0FBRyxJQUFJO1NBQ3JCQyxVQUFVLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxTQUFTLEVBQUUsQ0FBQztJQUN0QyxHQUFHLENBQUNDLEtBQUssR0FBR0YsR0FBRyxDQUFDRyxHQUFHLENBQUNKLEdBQUc7SUFDdkIsRUFBRSxFQUFFRyxLQUFLLEVBQUUsQ0FBQztRQUNSLEVBQUUsRUFBRSxDQUFRLFdBQUlBLEtBQUssRUFBRSxDQUFDO1lBQ3BCLE1BQU0sQ0FBQ0EsS0FBSyxDQUFDRSxNQUFNO1FBQ3ZCLENBQUM7UUFDRCxNQUFNLENBQUNDLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDSixLQUFLO0lBQ2hDLENBQUM7SUFDRCxH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QUFLLEVBQUUsSUFBSSxFQUFFeEQsS0FBSyxLQUFLLENBQUM7b0JBQ3JGLENBQUM7O1lBRVQsQ0FBQyxFQUFFQSxLQUFLLEtBQ0osQ0FBQztZQUNMLENBQUM7UUFDTCxDQUFDO0lBQ0wsQ0FBQztBQUNMLENBQUMsQ0FFdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvcm91dGUtbG9hZGVyLmpzPzdkOTQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLm1hcmtBc3NldEVycm9yID0gbWFya0Fzc2V0RXJyb3I7XG5leHBvcnRzLmlzQXNzZXRFcnJvciA9IGlzQXNzZXRFcnJvcjtcbmV4cG9ydHMuZ2V0Q2xpZW50QnVpbGRNYW5pZmVzdCA9IGdldENsaWVudEJ1aWxkTWFuaWZlc3Q7XG5leHBvcnRzLmdldE1pZGRsZXdhcmVNYW5pZmVzdCA9IGdldE1pZGRsZXdhcmVNYW5pZmVzdDtcbmV4cG9ydHMuY3JlYXRlUm91dGVMb2FkZXIgPSBjcmVhdGVSb3V0ZUxvYWRlcjtcbnZhciBfZ2V0QXNzZXRQYXRoRnJvbVJvdXRlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvZ2V0LWFzc2V0LXBhdGgtZnJvbS1yb3V0ZVwiKSk7XG52YXIgX3JlcXVlc3RJZGxlQ2FsbGJhY2sgPSByZXF1aXJlKFwiLi9yZXF1ZXN0LWlkbGUtY2FsbGJhY2tcIik7XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7XG4gICAgICAgIGRlZmF1bHQ6IG9ialxuICAgIH07XG59XG4vLyAzLjhzIHdhcyBhcmJpdHJhcmlseSBjaG9zZW4gYXMgaXQncyB3aGF0IGh0dHBzOi8vd2ViLmRldi9pbnRlcmFjdGl2ZVxuLy8gY29uc2lkZXJzIGFzIFwiR29vZFwiIHRpbWUtdG8taW50ZXJhY3RpdmUuIFdlIG11c3QgYXNzdW1lIHNvbWV0aGluZyB3ZW50XG4vLyB3cm9uZyBiZXlvbmQgdGhpcyBwb2ludCwgYW5kIHRoZW4gZmFsbC1iYWNrIHRvIGEgZnVsbCBwYWdlIHRyYW5zaXRpb24gdG9cbi8vIHNob3cgdGhlIHVzZXIgc29tZXRoaW5nIG9mIHZhbHVlLlxuY29uc3QgTVNfTUFYX0lETEVfREVMQVkgPSAzODAwO1xuZnVuY3Rpb24gd2l0aEZ1dHVyZShrZXksIG1hcCwgZ2VuZXJhdG9yKSB7XG4gICAgbGV0IGVudHJ5ID0gbWFwLmdldChrZXkpO1xuICAgIGlmIChlbnRyeSkge1xuICAgICAgICBpZiAoJ2Z1dHVyZScgaW4gZW50cnkpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRyeS5mdXR1cmU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlbnRyeSk7XG4gICAgfVxuICAgIGxldCByZXNvbHZlcjtcbiAgICBjb25zdCBwcm9tID0gbmV3IFByb21pc2UoKHJlc29sdmUpPT57XG4gICAgICAgIHJlc29sdmVyID0gcmVzb2x2ZTtcbiAgICB9KTtcbiAgICBtYXAuc2V0KGtleSwgZW50cnkgPSB7XG4gICAgICAgIHJlc29sdmU6IHJlc29sdmVyLFxuICAgICAgICBmdXR1cmU6IHByb21cbiAgICB9KTtcbiAgICByZXR1cm4gZ2VuZXJhdG9yID8gZ2VuZXJhdG9yKCkvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VxdWVuY2VzXG4gICAgLnRoZW4oKHZhbHVlKT0+KHJlc29sdmVyKHZhbHVlKSwgdmFsdWUpXG4gICAgKS5jYXRjaCgoZXJyKT0+e1xuICAgICAgICBtYXAuZGVsZXRlKGtleSk7XG4gICAgICAgIHRocm93IGVycjtcbiAgICB9KSA6IHByb207XG59XG5mdW5jdGlvbiBoYXNQcmVmZXRjaChsaW5rKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICAgICAgcmV0dXJuKC8vIGRldGVjdCBJRTExIHNpbmNlIGl0IHN1cHBvcnRzIHByZWZldGNoIGJ1dCBpc24ndCBkZXRlY3RlZFxuICAgICAgICAvLyB3aXRoIHJlbExpc3Quc3VwcG9ydFxuICAgICAgICAoISF3aW5kb3cuTVNJbnB1dE1ldGhvZENvbnRleHQgJiYgISFkb2N1bWVudC5kb2N1bWVudE1vZGUpIHx8IGxpbmsucmVsTGlzdC5zdXBwb3J0cygncHJlZmV0Y2gnKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuY29uc3QgY2FuUHJlZmV0Y2ggPSBoYXNQcmVmZXRjaCgpO1xuZnVuY3Rpb24gcHJlZmV0Y2hWaWFEb20oaHJlZiwgYXMsIGxpbmspIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKT0+e1xuICAgICAgICBjb25zdCBzZWxlY3RvciA9IGBcbiAgICAgIGxpbmtbcmVsPVwicHJlZmV0Y2hcIl1baHJlZl49XCIke2hyZWZ9XCJdLFxuICAgICAgbGlua1tyZWw9XCJwcmVsb2FkXCJdW2hyZWZePVwiJHtocmVmfVwiXSxcbiAgICAgIHNjcmlwdFtzcmNePVwiJHtocmVmfVwiXWA7XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcygpO1xuICAgICAgICB9XG4gICAgICAgIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG4gICAgICAgIC8vIFRoZSBvcmRlciBvZiBwcm9wZXJ0eSBhc3NpZ25tZW50IGhlcmUgaXMgaW50ZW50aW9uYWw6XG4gICAgICAgIGlmIChhcykgbGluay5hcyA9IGFzO1xuICAgICAgICBsaW5rLnJlbCA9IGBwcmVmZXRjaGA7XG4gICAgICAgIGxpbmsuY3Jvc3NPcmlnaW4gPSBwcm9jZXNzLmVudi5fX05FWFRfQ1JPU1NfT1JJR0lOO1xuICAgICAgICBsaW5rLm9ubG9hZCA9IHJlcztcbiAgICAgICAgbGluay5vbmVycm9yID0gcmVqO1xuICAgICAgICAvLyBgaHJlZmAgc2hvdWxkIGFsd2F5cyBiZSBsYXN0OlxuICAgICAgICBsaW5rLmhyZWYgPSBocmVmO1xuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspO1xuICAgIH0pO1xufVxuY29uc3QgQVNTRVRfTE9BRF9FUlJPUiA9IFN5bWJvbCgnQVNTRVRfTE9BRF9FUlJPUicpO1xuZnVuY3Rpb24gbWFya0Fzc2V0RXJyb3IoZXJyKSB7XG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlcnIsIEFTU0VUX0xPQURfRVJST1IsIHtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGlzQXNzZXRFcnJvcihlcnIpIHtcbiAgICByZXR1cm4gZXJyICYmIEFTU0VUX0xPQURfRVJST1IgaW4gZXJyO1xufVxuZnVuY3Rpb24gYXBwZW5kU2NyaXB0KHNyYywgc2NyaXB0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XG4gICAgICAgIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICAvLyBUaGUgb3JkZXIgb2YgcHJvcGVydHkgYXNzaWdubWVudCBoZXJlIGlzIGludGVudGlvbmFsLlxuICAgICAgICAvLyAxLiBTZXR1cCBzdWNjZXNzL2ZhaWx1cmUgaG9va3MgaW4gY2FzZSB0aGUgYnJvd3NlciBzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vICAgIGV4ZWN1dGVzIHdoZW4gYHNyY2AgaXMgc2V0LlxuICAgICAgICBzY3JpcHQub25sb2FkID0gcmVzb2x2ZTtcbiAgICAgICAgc2NyaXB0Lm9uZXJyb3IgPSAoKT0+cmVqZWN0KG1hcmtBc3NldEVycm9yKG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgc2NyaXB0OiAke3NyY31gKSkpXG4gICAgICAgIDtcbiAgICAgICAgLy8gMi4gQ29uZmlndXJlIHRoZSBjcm9zcy1vcmlnaW4gYXR0cmlidXRlIGJlZm9yZSBzZXR0aW5nIGBzcmNgIGluIGNhc2UgdGhlXG4gICAgICAgIC8vICAgIGJyb3dzZXIgYmVnaW5zIHRvIGZldGNoLlxuICAgICAgICBzY3JpcHQuY3Jvc3NPcmlnaW4gPSBwcm9jZXNzLmVudi5fX05FWFRfQ1JPU1NfT1JJR0lOO1xuICAgICAgICAvLyAzLiBGaW5hbGx5LCBzZXQgdGhlIHNvdXJjZSBhbmQgaW5qZWN0IGludG8gdGhlIERPTSBpbiBjYXNlIHRoZSBjaGlsZFxuICAgICAgICAvLyAgICBtdXN0IGJlIGFwcGVuZGVkIGZvciBmZXRjaGluZyB0byBzdGFydC5cbiAgICAgICAgc2NyaXB0LnNyYyA9IHNyYztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIH0pO1xufVxuLy8gV2Ugd2FpdCBmb3IgcGFnZXMgdG8gYmUgYnVpbHQgaW4gZGV2IGJlZm9yZSB3ZSBzdGFydCB0aGUgcm91dGUgdHJhbnNpdGlvblxuLy8gdGltZW91dCB0byBwcmV2ZW50IGFuIHVuLW5lY2Vzc2FyeSBoYXJkIG5hdmlnYXRpb24gaW4gZGV2ZWxvcG1lbnQuXG5sZXQgZGV2QnVpbGRQcm9taXNlO1xuLy8gUmVzb2x2ZSBhIHByb21pc2UgdGhhdCB0aW1lcyBvdXQgYWZ0ZXIgZ2l2ZW4gYW1vdW50IG9mIG1pbGxpc2Vjb25kcy5cbmZ1bmN0aW9uIHJlc29sdmVQcm9taXNlV2l0aFRpbWVvdXQocCwgbXMsIGVycikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xuICAgICAgICBsZXQgY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgICAgIHAudGhlbigocik9PntcbiAgICAgICAgICAgIC8vIFJlc29sdmVkLCBjYW5jZWwgdGhlIHRpbWVvdXRcbiAgICAgICAgICAgIGNhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgICAgICByZXNvbHZlKHIpO1xuICAgICAgICB9KS5jYXRjaChyZWplY3QpO1xuICAgICAgICAvLyBXZSB3cmFwIHRoZXNlIGNoZWNrcyBzZXBhcmF0ZWx5IGZvciBiZXR0ZXIgZGVhZC1jb2RlIGVsaW1pbmF0aW9uIGluXG4gICAgICAgIC8vIHByb2R1Y3Rpb24gYnVuZGxlcy5cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgICAoZGV2QnVpbGRQcm9taXNlIHx8IFByb21pc2UucmVzb2x2ZSgpKS50aGVuKCgpPT57XG4gICAgICAgICAgICAgICAgKDAsIF9yZXF1ZXN0SWRsZUNhbGxiYWNrKS5yZXF1ZXN0SWRsZUNhbGxiYWNrKCgpPT5zZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCBtcylcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgICAoMCwgX3JlcXVlc3RJZGxlQ2FsbGJhY2spLnJlcXVlc3RJZGxlQ2FsbGJhY2soKCk9PnNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgbXMpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5mdW5jdGlvbiBnZXRDbGllbnRCdWlsZE1hbmlmZXN0KCkge1xuICAgIGlmIChzZWxmLl9fQlVJTERfTUFOSUZFU1QpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzZWxmLl9fQlVJTERfTUFOSUZFU1QpO1xuICAgIH1cbiAgICBjb25zdCBvbkJ1aWxkTWFuaWZlc3QgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSk9PntcbiAgICAgICAgLy8gTWFuZGF0b3J5IGJlY2F1c2UgdGhpcyBpcyBub3QgY29uY3VycmVudCBzYWZlOlxuICAgICAgICBjb25zdCBjYiA9IHNlbGYuX19CVUlMRF9NQU5JRkVTVF9DQjtcbiAgICAgICAgc2VsZi5fX0JVSUxEX01BTklGRVNUX0NCID0gKCk9PntcbiAgICAgICAgICAgIHJlc29sdmUoc2VsZi5fX0JVSUxEX01BTklGRVNUKTtcbiAgICAgICAgICAgIGNiICYmIGNiKCk7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc29sdmVQcm9taXNlV2l0aFRpbWVvdXQob25CdWlsZE1hbmlmZXN0LCBNU19NQVhfSURMRV9ERUxBWSwgbWFya0Fzc2V0RXJyb3IobmV3IEVycm9yKCdGYWlsZWQgdG8gbG9hZCBjbGllbnQgYnVpbGQgbWFuaWZlc3QnKSkpO1xufVxuZnVuY3Rpb24gZ2V0TWlkZGxld2FyZU1hbmlmZXN0KCkge1xuICAgIGlmIChzZWxmLl9fTUlERExFV0FSRV9NQU5JRkVTVCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHNlbGYuX19NSURETEVXQVJFX01BTklGRVNUKTtcbiAgICB9XG4gICAgY29uc3Qgb25NaWRkbGV3YXJlTWFuaWZlc3QgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSk9PntcbiAgICAgICAgY29uc3QgY2IgPSBzZWxmLl9fTUlERExFV0FSRV9NQU5JRkVTVF9DQjtcbiAgICAgICAgc2VsZi5fX01JRERMRVdBUkVfTUFOSUZFU1RfQ0IgPSAoKT0+e1xuICAgICAgICAgICAgcmVzb2x2ZShzZWxmLl9fTUlERExFV0FSRV9NQU5JRkVTVCk7XG4gICAgICAgICAgICBjYiAmJiBjYigpO1xuICAgICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiByZXNvbHZlUHJvbWlzZVdpdGhUaW1lb3V0KG9uTWlkZGxld2FyZU1hbmlmZXN0LCBNU19NQVhfSURMRV9ERUxBWSwgbWFya0Fzc2V0RXJyb3IobmV3IEVycm9yKCdGYWlsZWQgdG8gbG9hZCBjbGllbnQgbWlkZGxld2FyZSBtYW5pZmVzdCcpKSk7XG59XG5mdW5jdGlvbiBnZXRGaWxlc0ZvclJvdXRlKGFzc2V0UHJlZml4LCByb3V0ZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIHNjcmlwdHM6IFtcbiAgICAgICAgICAgICAgICBhc3NldFByZWZpeCArICcvX25leHQvc3RhdGljL2NodW5rcy9wYWdlcycgKyBlbmNvZGVVUkkoKDAsIF9nZXRBc3NldFBhdGhGcm9tUm91dGUpLmRlZmF1bHQocm91dGUsICcuanMnKSksIFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIC8vIFN0eWxlcyBhcmUgaGFuZGxlZCBieSBgc3R5bGUtbG9hZGVyYCBpbiBkZXZlbG9wbWVudDpcbiAgICAgICAgICAgIGNzczogW11cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBnZXRDbGllbnRCdWlsZE1hbmlmZXN0KCkudGhlbigobWFuaWZlc3QpPT57XG4gICAgICAgIGlmICghKHJvdXRlIGluIG1hbmlmZXN0KSkge1xuICAgICAgICAgICAgdGhyb3cgbWFya0Fzc2V0RXJyb3IobmV3IEVycm9yKGBGYWlsZWQgdG8gbG9va3VwIHJvdXRlOiAke3JvdXRlfWApKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbGxGaWxlcyA9IG1hbmlmZXN0W3JvdXRlXS5tYXAoKGVudHJ5KT0+YXNzZXRQcmVmaXggKyAnL19uZXh0LycgKyBlbmNvZGVVUkkoZW50cnkpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzY3JpcHRzOiBhbGxGaWxlcy5maWx0ZXIoKHYpPT52LmVuZHNXaXRoKCcuanMnKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNzczogYWxsRmlsZXMuZmlsdGVyKCh2KT0+di5lbmRzV2l0aCgnLmNzcycpXG4gICAgICAgICAgICApXG4gICAgICAgIH07XG4gICAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVSb3V0ZUxvYWRlcihhc3NldFByZWZpeCkge1xuICAgIGNvbnN0IGVudHJ5cG9pbnRzID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IGxvYWRlZFNjcmlwdHMgPSBuZXcgTWFwKCk7XG4gICAgY29uc3Qgc3R5bGVTaGVldHMgPSBuZXcgTWFwKCk7XG4gICAgY29uc3Qgcm91dGVzID0gbmV3IE1hcCgpO1xuICAgIGZ1bmN0aW9uIG1heWJlRXhlY3V0ZVNjcmlwdChzcmMpIHtcbiAgICAgICAgLy8gV2l0aCBITVIgd2UgbWlnaHQgbmVlZCB0byBcInJlbG9hZFwiIHNjcmlwdHMgd2hlbiB0aGV5IGFyZVxuICAgICAgICAvLyBkaXNwb3NlZCBhbmQgcmVhZGRlZC4gRXhlY3V0aW5nIHNjcmlwdHMgdHdpY2UgaGFzIG5vIGZ1bmN0aW9uYWxcbiAgICAgICAgLy8gZGlmZmVyZW5jZXNcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgICBsZXQgcHJvbSA9IGxvYWRlZFNjcmlwdHMuZ2V0KHNyYyk7XG4gICAgICAgICAgICBpZiAocHJvbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2tpcCBleGVjdXRpbmcgc2NyaXB0IGlmIGl0J3MgYWxyZWFkeSBpbiB0aGUgRE9NOlxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFtzcmNePVwiJHtzcmN9XCJdYCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2FkZWRTY3JpcHRzLnNldChzcmMsIHByb20gPSBhcHBlbmRTY3JpcHQoc3JjKSk7XG4gICAgICAgICAgICByZXR1cm4gcHJvbTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhcHBlbmRTY3JpcHQoc3JjKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBmZXRjaFN0eWxlU2hlZXQoaHJlZikge1xuICAgICAgICBsZXQgcHJvbSA9IHN0eWxlU2hlZXRzLmdldChocmVmKTtcbiAgICAgICAgaWYgKHByb20pIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9tO1xuICAgICAgICB9XG4gICAgICAgIHN0eWxlU2hlZXRzLnNldChocmVmLCBwcm9tID0gZmV0Y2goaHJlZikudGhlbigocmVzKT0+e1xuICAgICAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIHN0eWxlc2hlZXQ6ICR7aHJlZn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXMudGV4dCgpLnRoZW4oKHRleHQpPT4oe1xuICAgICAgICAgICAgICAgICAgICBocmVmOiBocmVmLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB0ZXh0XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pLmNhdGNoKChlcnIpPT57XG4gICAgICAgICAgICB0aHJvdyBtYXJrQXNzZXRFcnJvcihlcnIpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBwcm9tO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB3aGVuRW50cnlwb2ludCAocm91dGUpIHtcbiAgICAgICAgICAgIHJldHVybiB3aXRoRnV0dXJlKHJvdXRlLCBlbnRyeXBvaW50cyk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRW50cnlwb2ludCAocm91dGUsIGV4ZWN1dGUpIHtcbiAgICAgICAgICAgIChleGVjdXRlID8gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKT0+ZXhlY3V0ZSgpXG4gICAgICAgICAgICApLnRoZW4oKGV4cG9ydHMpPT4oe1xuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ6IGV4cG9ydHMgJiYgZXhwb3J0cy5kZWZhdWx0IHx8IGV4cG9ydHMsXG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydHM6IGV4cG9ydHNcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgLCAoZXJyKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVyclxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApIDogUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCkpLnRoZW4oKGlucHV0KT0+e1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZCA9IGVudHJ5cG9pbnRzLmdldChyb3V0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG9sZCAmJiAncmVzb2x2ZScgaW4gb2xkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50cnlwb2ludHMuc2V0KHJvdXRlLCBpbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbGQucmVzb2x2ZShpbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5cG9pbnRzLnNldChyb3V0ZSwgaW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50cnlwb2ludHMuZGVsZXRlKHJvdXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoaXMgZW50cnlwb2ludCBoYXMgYmVlbiByZXNvbHZlZCBiZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJvdXRlIGlzIG91dGRhdGVkIGFuZCB3ZSB3YW50IHRvIGludmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBjYWNoZSBlbnRyeVxuICAgICAgICAgICAgICAgICAgICByb3V0ZXMuZGVsZXRlKHJvdXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgbG9hZFJvdXRlIChyb3V0ZSwgcHJlZmV0Y2gpIHtcbiAgICAgICAgICAgIHJldHVybiB3aXRoRnV0dXJlKHJvdXRlLCByb3V0ZXMsICgpPT57XG4gICAgICAgICAgICAgICAgbGV0IGRldkJ1aWxkUHJvbWlzZVJlc29sdmU7XG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRldkJ1aWxkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV2QnVpbGRQcm9taXNlUmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZVByb21pc2VXaXRoVGltZW91dChnZXRGaWxlc0ZvclJvdXRlKGFzc2V0UHJlZml4LCByb3V0ZSkudGhlbigoeyBzY3JpcHRzICwgY3NzICB9KT0+e1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50cnlwb2ludHMuaGFzKHJvdXRlKSA/IFtdIDogUHJvbWlzZS5hbGwoc2NyaXB0cy5tYXAobWF5YmVFeGVjdXRlU2NyaXB0KSksXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChjc3MubWFwKGZldGNoU3R5bGVTaGVldCkpLCBcbiAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgfSkudGhlbigocmVzKT0+e1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53aGVuRW50cnlwb2ludChyb3V0ZSkudGhlbigoZW50cnlwb2ludCk9Pih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnlwb2ludCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IHJlc1sxXVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KSwgTVNfTUFYX0lETEVfREVMQVksIG1hcmtBc3NldEVycm9yKG5ldyBFcnJvcihgUm91dGUgZGlkIG5vdCBjb21wbGV0ZSBsb2FkaW5nOiAke3JvdXRlfWApKSkudGhlbigoeyBlbnRyeXBvaW50ICwgc3R5bGVzICB9KT0+e1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlczogc3R5bGVzXG4gICAgICAgICAgICAgICAgICAgIH0sIGVudHJ5cG9pbnQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2Vycm9yJyBpbiBlbnRyeXBvaW50ID8gZW50cnlwb2ludCA6IHJlcztcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyKT0+e1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJlZmV0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGRvbid0IHdhbnQgdG8gY2FjaGUgZXJyb3JzIGR1cmluZyBwcmVmZXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGV2QnVpbGRQcm9taXNlUmVzb2x2ZSA9PT0gbnVsbCB8fCBkZXZCdWlsZFByb21pc2VSZXNvbHZlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZXZCdWlsZFByb21pc2VSZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcHJlZmV0Y2ggKHJvdXRlKSB7XG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vR29vZ2xlQ2hyb21lTGFicy9xdWlja2xpbmsvYmxvYi80NTNhNjYxZmExZmE5NDBlMmQyZTA0NDQ1MjM5OGUzOGM2N2E5OGZiL3NyYy9pbmRleC5tanMjTDExNS1MMTE4XG4gICAgICAgICAgICAvLyBMaWNlbnNlOiBBcGFjaGUgMi4wXG4gICAgICAgICAgICBsZXQgY247XG4gICAgICAgICAgICBpZiAoY24gPSBuYXZpZ2F0b3IuY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgIC8vIERvbid0IHByZWZldGNoIGlmIHVzaW5nIDJHIG9yIGlmIFNhdmUtRGF0YSBpcyBlbmFibGVkLlxuICAgICAgICAgICAgICAgIGlmIChjbi5zYXZlRGF0YSB8fCAvMmcvLnRlc3QoY24uZWZmZWN0aXZlVHlwZSkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBnZXRGaWxlc0ZvclJvdXRlKGFzc2V0UHJlZml4LCByb3V0ZSkudGhlbigob3V0cHV0KT0+UHJvbWlzZS5hbGwoY2FuUHJlZmV0Y2ggPyBvdXRwdXQuc2NyaXB0cy5tYXAoKHNjcmlwdCk9PnByZWZldGNoVmlhRG9tKHNjcmlwdCwgJ3NjcmlwdCcpXG4gICAgICAgICAgICAgICAgKSA6IFtdKVxuICAgICAgICAgICAgKS50aGVuKCgpPT57XG4gICAgICAgICAgICAgICAgKDAsIF9yZXF1ZXN0SWRsZUNhbGxiYWNrKS5yZXF1ZXN0SWRsZUNhbGxiYWNrKCgpPT50aGlzLmxvYWRSb3V0ZShyb3V0ZSwgdHJ1ZSkuY2F0Y2goKCk9PntcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSkuY2F0Y2goLy8gc3dhbGxvdyBwcmVmZXRjaCBlcnJvcnNcbiAgICAgICAgICAgICgpPT57XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvdXRlLWxvYWRlci5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJtYXJrQXNzZXRFcnJvciIsImlzQXNzZXRFcnJvciIsImdldENsaWVudEJ1aWxkTWFuaWZlc3QiLCJnZXRNaWRkbGV3YXJlTWFuaWZlc3QiLCJjcmVhdGVSb3V0ZUxvYWRlciIsIl9nZXRBc3NldFBhdGhGcm9tUm91dGUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZXF1ZXN0SWRsZUNhbGxiYWNrIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJNU19NQVhfSURMRV9ERUxBWSIsIndpdGhGdXR1cmUiLCJrZXkiLCJtYXAiLCJnZW5lcmF0b3IiLCJlbnRyeSIsImdldCIsImZ1dHVyZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVzb2x2ZXIiLCJwcm9tIiwic2V0IiwidGhlbiIsImNhdGNoIiwiZXJyIiwiZGVsZXRlIiwiaGFzUHJlZmV0Y2giLCJsaW5rIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2luZG93IiwiTVNJbnB1dE1ldGhvZENvbnRleHQiLCJkb2N1bWVudE1vZGUiLCJyZWxMaXN0Iiwic3VwcG9ydHMiLCJlIiwiY2FuUHJlZmV0Y2giLCJwcmVmZXRjaFZpYURvbSIsImhyZWYiLCJhcyIsInJlcyIsInJlaiIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsInJlbCIsImNyb3NzT3JpZ2luIiwicHJvY2VzcyIsImVudiIsIl9fTkVYVF9DUk9TU19PUklHSU4iLCJvbmxvYWQiLCJvbmVycm9yIiwiaGVhZCIsImFwcGVuZENoaWxkIiwiQVNTRVRfTE9BRF9FUlJPUiIsIlN5bWJvbCIsImFwcGVuZFNjcmlwdCIsInNyYyIsInNjcmlwdCIsInJlamVjdCIsIkVycm9yIiwiYm9keSIsImRldkJ1aWxkUHJvbWlzZSIsInJlc29sdmVQcm9taXNlV2l0aFRpbWVvdXQiLCJwIiwibXMiLCJjYW5jZWxsZWQiLCJyIiwicmVxdWVzdElkbGVDYWxsYmFjayIsInNldFRpbWVvdXQiLCJzZWxmIiwiX19CVUlMRF9NQU5JRkVTVCIsIm9uQnVpbGRNYW5pZmVzdCIsImNiIiwiX19CVUlMRF9NQU5JRkVTVF9DQiIsIl9fTUlERExFV0FSRV9NQU5JRkVTVCIsIm9uTWlkZGxld2FyZU1hbmlmZXN0IiwiX19NSURETEVXQVJFX01BTklGRVNUX0NCIiwiZ2V0RmlsZXNGb3JSb3V0ZSIsImFzc2V0UHJlZml4Iiwicm91dGUiLCJzY3JpcHRzIiwiZW5jb2RlVVJJIiwiY3NzIiwibWFuaWZlc3QiLCJhbGxGaWxlcyIsImZpbHRlciIsInYiLCJlbmRzV2l0aCIsImVudHJ5cG9pbnRzIiwiTWFwIiwibG9hZGVkU2NyaXB0cyIsInN0eWxlU2hlZXRzIiwicm91dGVzIiwibWF5YmVFeGVjdXRlU2NyaXB0IiwiZmV0Y2hTdHlsZVNoZWV0IiwiZmV0Y2giLCJvayIsInRleHQiLCJjb250ZW50Iiwid2hlbkVudHJ5cG9pbnQiLCJvbkVudHJ5cG9pbnQiLCJleGVjdXRlIiwiY29tcG9uZW50IiwiZXJyb3IiLCJ1bmRlZmluZWQiLCJpbnB1dCIsIm9sZCIsImxvYWRSb3V0ZSIsInByZWZldGNoIiwiZGV2QnVpbGRQcm9taXNlUmVzb2x2ZSIsImFsbCIsImhhcyIsImVudHJ5cG9pbnQiLCJzdHlsZXMiLCJhc3NpZ24iLCJmaW5hbGx5IiwiY24iLCJuYXZpZ2F0b3IiLCJjb25uZWN0aW9uIiwic2F2ZURhdGEiLCJ0ZXN0IiwiZWZmZWN0aXZlVHlwZSIsIm91dHB1dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/next/dist/client/route-loader.js\n");

/***/ }),

/***/ "../../node_modules/next/dist/client/router.js":
/*!*****************************************************!*\
  !*** ../../node_modules/next/dist/client/router.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"Router\", ({\n    enumerable: true,\n    get: function() {\n        return _router.default;\n    }\n}));\nObject.defineProperty(exports, \"withRouter\", ({\n    enumerable: true,\n    get: function() {\n        return _withRouter.default;\n    }\n}));\nexports.useRouter = useRouter;\nexports.createRouter = createRouter;\nexports.makePublicRouterInstance = makePublicRouterInstance;\nexports[\"default\"] = void 0;\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"react\"));\nvar _router = _interopRequireDefault(__webpack_require__(/*! ../shared/lib/router/router */ \"../../node_modules/next/dist/shared/lib/router/router.js\"));\nvar _routerContext = __webpack_require__(/*! ../shared/lib/router-context */ \"../shared/lib/router-context\");\nvar _isError = _interopRequireDefault(__webpack_require__(/*! ../lib/is-error */ \"../../node_modules/next/dist/lib/is-error.js\"));\nvar _withRouter = _interopRequireDefault(__webpack_require__(/*! ./with-router */ \"../../node_modules/next/dist/client/with-router.js\"));\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\nconst singletonRouter = {\n    router: null,\n    readyCallbacks: [],\n    ready (cb) {\n        if (this.router) return cb();\n        if (false) {}\n    }\n};\n// Create public properties and methods of the router in the singletonRouter\nconst urlPropertyFields = [\n    'pathname',\n    'route',\n    'query',\n    'asPath',\n    'components',\n    'isFallback',\n    'basePath',\n    'locale',\n    'locales',\n    'defaultLocale',\n    'isReady',\n    'isPreview',\n    'isLocaleDomain',\n    'domainLocales', \n];\nconst routerEvents = [\n    'routeChangeStart',\n    'beforeHistoryChange',\n    'routeChangeComplete',\n    'routeChangeError',\n    'hashChangeStart',\n    'hashChangeComplete', \n];\nconst coreMethodFields = [\n    'push',\n    'replace',\n    'reload',\n    'back',\n    'prefetch',\n    'beforePopState', \n];\n// Events is a static property on the router, the router doesn't have to be initialized to use it\nObject.defineProperty(singletonRouter, 'events', {\n    get () {\n        return _router.default.events;\n    }\n});\nurlPropertyFields.forEach((field)=>{\n    // Here we need to use Object.defineProperty because we need to return\n    // the property assigned to the actual router\n    // The value might get changed as we change routes and this is the\n    // proper way to access it\n    Object.defineProperty(singletonRouter, field, {\n        get () {\n            const router = getRouter();\n            return router[field];\n        }\n    });\n});\ncoreMethodFields.forEach((field)=>{\n    singletonRouter[field] = (...args)=>{\n        const router = getRouter();\n        return router[field](...args);\n    };\n});\nrouterEvents.forEach((event)=>{\n    singletonRouter.ready(()=>{\n        _router.default.events.on(event, (...args)=>{\n            const eventField = `on${event.charAt(0).toUpperCase()}${event.substring(1)}`;\n            const _singletonRouter = singletonRouter;\n            if (_singletonRouter[eventField]) {\n                try {\n                    _singletonRouter[eventField](...args);\n                } catch (err) {\n                    console.error(`Error when running the Router event: ${eventField}`);\n                    console.error((0, _isError).default(err) ? `${err.message}\\n${err.stack}` : err + '');\n                }\n            }\n        });\n    });\n});\nfunction getRouter() {\n    if (!singletonRouter.router) {\n        const message = 'No router instance found.\\n' + 'You should only use \"next/router\" on the client side of your app.\\n';\n        throw new Error(message);\n    }\n    return singletonRouter.router;\n}\nvar _default = singletonRouter;\nexports[\"default\"] = _default;\nfunction useRouter() {\n    return _react.default.useContext(_routerContext.RouterContext);\n}\nfunction createRouter(...args) {\n    singletonRouter.router = new _router.default(...args);\n    singletonRouter.readyCallbacks.forEach((cb)=>cb()\n    );\n    singletonRouter.readyCallbacks = [];\n    return singletonRouter.router;\n}\nfunction makePublicRouterInstance(router) {\n    const scopedRouter = router;\n    const instance = {\n    };\n    for (const property of urlPropertyFields){\n        if (typeof scopedRouter[property] === 'object') {\n            instance[property] = Object.assign(Array.isArray(scopedRouter[property]) ? [] : {\n            }, scopedRouter[property]) // makes sure query is not stateful\n            ;\n            continue;\n        }\n        instance[property] = scopedRouter[property];\n    }\n    // Events is a static property on the router, the router doesn't have to be initialized to use it\n    instance.events = _router.default.events;\n    coreMethodFields.forEach((field)=>{\n        instance[field] = (...args)=>{\n            return scopedRouter[field](...args);\n        };\n    });\n    return instance;\n} //# sourceMappingURL=router.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvcm91dGVyLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFZO0FBQ1pBLDhDQUE2QyxDQUFDO0lBQzFDRyxLQUFLLEVBQUUsSUFBSTtBQUNmLENBQUMsRUFBQztBQUNGSCwwQ0FBeUMsQ0FBQztJQUN0Q0ksVUFBVSxFQUFFLElBQUk7SUFDaEJDLEdBQUcsRUFBRSxRQUFRLEdBQUcsQ0FBQztRQUNiLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDQyxPQUFPO0lBQzFCLENBQUM7QUFDTCxDQUFDLEVBQUM7QUFDRlAsOENBQTZDLENBQUM7SUFDMUNJLFVBQVUsRUFBRSxJQUFJO0lBQ2hCQyxHQUFHLEVBQUUsUUFBUSxHQUFHLENBQUM7UUFDYixNQUFNLENBQUNHLFdBQVcsQ0FBQ0QsT0FBTztJQUM5QixDQUFDO0FBQ0wsQ0FBQyxFQUFDO0FBQ0ZMLGlCQUFpQixHQUFHTyxTQUFTO0FBQzdCUCxvQkFBb0IsR0FBR1EsWUFBWTtBQUNuQ1IsZ0NBQWdDLEdBQUdTLHdCQUF3QjtBQUMzRFQsa0JBQWUsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUN4QixHQUFHLENBQUNVLE1BQU0sR0FBR0Msc0JBQXNCLENBQUNDLG1CQUFPLENBQUMsb0JBQU87QUFDbkQsR0FBRyxDQUFDUixPQUFPLEdBQUdPLHNCQUFzQixDQUFDQyxtQkFBTyxDQUFDLDZGQUE2QjtBQUMxRSxHQUFHLENBQUNDLGNBQWMsR0FBR0QsbUJBQU8sQ0FBQyxrRUFBOEI7QUFDM0QsR0FBRyxDQUFDRSxRQUFRLEdBQUdILHNCQUFzQixDQUFDQyxtQkFBTyxDQUFDLHFFQUFpQjtBQUMvRCxHQUFHLENBQUNOLFdBQVcsR0FBR0ssc0JBQXNCLENBQUNDLG1CQUFPLENBQUMseUVBQWU7U0FDdkRELHNCQUFzQixDQUFDSSxHQUFHLEVBQUUsQ0FBQztJQUNsQyxNQUFNLENBQUNBLEdBQUcsSUFBSUEsR0FBRyxDQUFDQyxVQUFVLEdBQUdELEdBQUcsR0FBRyxDQUFDO1FBQ2xDVixP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QUcsRUFBRSxLQUFLLENBQUNDLFFBQVEsSUFBSTFCLGlCQUFpQixDQUFDLENBQUM7UUFDdEMsRUFBRSxFQUFFLE1BQU0sQ0FBQ3dCLFlBQVksQ0FBQ0UsUUFBUSxNQUFNLENBQVEsU0FBRSxDQUFDO1lBQzdDRCxRQUFRLENBQUNDLFFBQVEsSUFBSW5ELE1BQU0sQ0FBQ29ELE1BQU0sQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUNMLFlBQVksQ0FBQ0UsUUFBUSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUM7WUFDakYsQ0FBQyxFQUFFRixZQUFZLENBQUNFLFFBQVEsRUFBRyxDQUFtQzs7WUFFOUQsUUFBUTtRQUNaLENBQUM7UUFDREQsUUFBUSxDQUFDQyxRQUFRLElBQUlGLFlBQVksQ0FBQ0UsUUFBUTtJQUM5QyxDQUFDO0lBQ0QsRUFBaUc7SUFDakdELFFBQVEsQ0FBQ3RCLE1BQU0sR0FBR3RCLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDcUIsTUFBTTtJQUN4Q0QsZ0JBQWdCLENBQUNFLE9BQU8sRUFBRUMsS0FBSyxHQUFHLENBQUM7UUFDL0JvQixRQUFRLENBQUNwQixLQUFLLFFBQVFFLElBQUksR0FBRyxDQUFDO1lBQzFCLE1BQU0sQ0FBQ2lCLFlBQVksQ0FBQ25CLEtBQUssS0FBS0UsSUFBSTtRQUN0QyxDQUFDO0lBQ0wsQ0FBQztJQUNELE1BQU0sQ0FBQ2tCLFFBQVE7QUFDbkIsQ0FBQyxDQUVpQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9yb3V0ZXIuanM/OTY2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIlJvdXRlclwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3JvdXRlci5kZWZhdWx0O1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwid2l0aFJvdXRlclwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3dpdGhSb3V0ZXIuZGVmYXVsdDtcbiAgICB9XG59KTtcbmV4cG9ydHMudXNlUm91dGVyID0gdXNlUm91dGVyO1xuZXhwb3J0cy5jcmVhdGVSb3V0ZXIgPSBjcmVhdGVSb3V0ZXI7XG5leHBvcnRzLm1ha2VQdWJsaWNSb3V0ZXJJbnN0YW5jZSA9IG1ha2VQdWJsaWNSb3V0ZXJJbnN0YW5jZTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSk7XG52YXIgX3JvdXRlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL3NoYXJlZC9saWIvcm91dGVyL3JvdXRlclwiKSk7XG52YXIgX3JvdXRlckNvbnRleHQgPSByZXF1aXJlKFwiLi4vc2hhcmVkL2xpYi9yb3V0ZXItY29udGV4dFwiKTtcbnZhciBfaXNFcnJvciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2xpYi9pcy1lcnJvclwiKSk7XG52YXIgX3dpdGhSb3V0ZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3dpdGgtcm91dGVyXCIpKTtcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHtcbiAgICAgICAgZGVmYXVsdDogb2JqXG4gICAgfTtcbn1cbmNvbnN0IHNpbmdsZXRvblJvdXRlciA9IHtcbiAgICByb3V0ZXI6IG51bGwsXG4gICAgcmVhZHlDYWxsYmFja3M6IFtdLFxuICAgIHJlYWR5IChjYikge1xuICAgICAgICBpZiAodGhpcy5yb3V0ZXIpIHJldHVybiBjYigpO1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMucmVhZHlDYWxsYmFja3MucHVzaChjYik7XG4gICAgICAgIH1cbiAgICB9XG59O1xuLy8gQ3JlYXRlIHB1YmxpYyBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIG9mIHRoZSByb3V0ZXIgaW4gdGhlIHNpbmdsZXRvblJvdXRlclxuY29uc3QgdXJsUHJvcGVydHlGaWVsZHMgPSBbXG4gICAgJ3BhdGhuYW1lJyxcbiAgICAncm91dGUnLFxuICAgICdxdWVyeScsXG4gICAgJ2FzUGF0aCcsXG4gICAgJ2NvbXBvbmVudHMnLFxuICAgICdpc0ZhbGxiYWNrJyxcbiAgICAnYmFzZVBhdGgnLFxuICAgICdsb2NhbGUnLFxuICAgICdsb2NhbGVzJyxcbiAgICAnZGVmYXVsdExvY2FsZScsXG4gICAgJ2lzUmVhZHknLFxuICAgICdpc1ByZXZpZXcnLFxuICAgICdpc0xvY2FsZURvbWFpbicsXG4gICAgJ2RvbWFpbkxvY2FsZXMnLCBcbl07XG5jb25zdCByb3V0ZXJFdmVudHMgPSBbXG4gICAgJ3JvdXRlQ2hhbmdlU3RhcnQnLFxuICAgICdiZWZvcmVIaXN0b3J5Q2hhbmdlJyxcbiAgICAncm91dGVDaGFuZ2VDb21wbGV0ZScsXG4gICAgJ3JvdXRlQ2hhbmdlRXJyb3InLFxuICAgICdoYXNoQ2hhbmdlU3RhcnQnLFxuICAgICdoYXNoQ2hhbmdlQ29tcGxldGUnLCBcbl07XG5jb25zdCBjb3JlTWV0aG9kRmllbGRzID0gW1xuICAgICdwdXNoJyxcbiAgICAncmVwbGFjZScsXG4gICAgJ3JlbG9hZCcsXG4gICAgJ2JhY2snLFxuICAgICdwcmVmZXRjaCcsXG4gICAgJ2JlZm9yZVBvcFN0YXRlJywgXG5dO1xuLy8gRXZlbnRzIGlzIGEgc3RhdGljIHByb3BlcnR5IG9uIHRoZSByb3V0ZXIsIHRoZSByb3V0ZXIgZG9lc24ndCBoYXZlIHRvIGJlIGluaXRpYWxpemVkIHRvIHVzZSBpdFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KHNpbmdsZXRvblJvdXRlciwgJ2V2ZW50cycsIHtcbiAgICBnZXQgKCkge1xuICAgICAgICByZXR1cm4gX3JvdXRlci5kZWZhdWx0LmV2ZW50cztcbiAgICB9XG59KTtcbnVybFByb3BlcnR5RmllbGRzLmZvckVhY2goKGZpZWxkKT0+e1xuICAgIC8vIEhlcmUgd2UgbmVlZCB0byB1c2UgT2JqZWN0LmRlZmluZVByb3BlcnR5IGJlY2F1c2Ugd2UgbmVlZCB0byByZXR1cm5cbiAgICAvLyB0aGUgcHJvcGVydHkgYXNzaWduZWQgdG8gdGhlIGFjdHVhbCByb3V0ZXJcbiAgICAvLyBUaGUgdmFsdWUgbWlnaHQgZ2V0IGNoYW5nZWQgYXMgd2UgY2hhbmdlIHJvdXRlcyBhbmQgdGhpcyBpcyB0aGVcbiAgICAvLyBwcm9wZXIgd2F5IHRvIGFjY2VzcyBpdFxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzaW5nbGV0b25Sb3V0ZXIsIGZpZWxkLCB7XG4gICAgICAgIGdldCAoKSB7XG4gICAgICAgICAgICBjb25zdCByb3V0ZXIgPSBnZXRSb3V0ZXIoKTtcbiAgICAgICAgICAgIHJldHVybiByb3V0ZXJbZmllbGRdO1xuICAgICAgICB9XG4gICAgfSk7XG59KTtcbmNvcmVNZXRob2RGaWVsZHMuZm9yRWFjaCgoZmllbGQpPT57XG4gICAgc2luZ2xldG9uUm91dGVyW2ZpZWxkXSA9ICguLi5hcmdzKT0+e1xuICAgICAgICBjb25zdCByb3V0ZXIgPSBnZXRSb3V0ZXIoKTtcbiAgICAgICAgcmV0dXJuIHJvdXRlcltmaWVsZF0oLi4uYXJncyk7XG4gICAgfTtcbn0pO1xucm91dGVyRXZlbnRzLmZvckVhY2goKGV2ZW50KT0+e1xuICAgIHNpbmdsZXRvblJvdXRlci5yZWFkeSgoKT0+e1xuICAgICAgICBfcm91dGVyLmRlZmF1bHQuZXZlbnRzLm9uKGV2ZW50LCAoLi4uYXJncyk9PntcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50RmllbGQgPSBgb24ke2V2ZW50LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpfSR7ZXZlbnQuc3Vic3RyaW5nKDEpfWA7XG4gICAgICAgICAgICBjb25zdCBfc2luZ2xldG9uUm91dGVyID0gc2luZ2xldG9uUm91dGVyO1xuICAgICAgICAgICAgaWYgKF9zaW5nbGV0b25Sb3V0ZXJbZXZlbnRGaWVsZF0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBfc2luZ2xldG9uUm91dGVyW2V2ZW50RmllbGRdKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciB3aGVuIHJ1bm5pbmcgdGhlIFJvdXRlciBldmVudDogJHtldmVudEZpZWxkfWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCgwLCBfaXNFcnJvcikuZGVmYXVsdChlcnIpID8gYCR7ZXJyLm1lc3NhZ2V9XFxuJHtlcnIuc3RhY2t9YCA6IGVyciArICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5mdW5jdGlvbiBnZXRSb3V0ZXIoKSB7XG4gICAgaWYgKCFzaW5nbGV0b25Sb3V0ZXIucm91dGVyKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnTm8gcm91dGVyIGluc3RhbmNlIGZvdW5kLlxcbicgKyAnWW91IHNob3VsZCBvbmx5IHVzZSBcIm5leHQvcm91dGVyXCIgb24gdGhlIGNsaWVudCBzaWRlIG9mIHlvdXIgYXBwLlxcbic7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpbmdsZXRvblJvdXRlci5yb3V0ZXI7XG59XG52YXIgX2RlZmF1bHQgPSBzaW5nbGV0b25Sb3V0ZXI7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbmZ1bmN0aW9uIHVzZVJvdXRlcigpIHtcbiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQudXNlQ29udGV4dChfcm91dGVyQ29udGV4dC5Sb3V0ZXJDb250ZXh0KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlciguLi5hcmdzKSB7XG4gICAgc2luZ2xldG9uUm91dGVyLnJvdXRlciA9IG5ldyBfcm91dGVyLmRlZmF1bHQoLi4uYXJncyk7XG4gICAgc2luZ2xldG9uUm91dGVyLnJlYWR5Q2FsbGJhY2tzLmZvckVhY2goKGNiKT0+Y2IoKVxuICAgICk7XG4gICAgc2luZ2xldG9uUm91dGVyLnJlYWR5Q2FsbGJhY2tzID0gW107XG4gICAgcmV0dXJuIHNpbmdsZXRvblJvdXRlci5yb3V0ZXI7XG59XG5mdW5jdGlvbiBtYWtlUHVibGljUm91dGVySW5zdGFuY2Uocm91dGVyKSB7XG4gICAgY29uc3Qgc2NvcGVkUm91dGVyID0gcm91dGVyO1xuICAgIGNvbnN0IGluc3RhbmNlID0ge1xuICAgIH07XG4gICAgZm9yIChjb25zdCBwcm9wZXJ0eSBvZiB1cmxQcm9wZXJ0eUZpZWxkcyl7XG4gICAgICAgIGlmICh0eXBlb2Ygc2NvcGVkUm91dGVyW3Byb3BlcnR5XSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGluc3RhbmNlW3Byb3BlcnR5XSA9IE9iamVjdC5hc3NpZ24oQXJyYXkuaXNBcnJheShzY29wZWRSb3V0ZXJbcHJvcGVydHldKSA/IFtdIDoge1xuICAgICAgICAgICAgfSwgc2NvcGVkUm91dGVyW3Byb3BlcnR5XSkgLy8gbWFrZXMgc3VyZSBxdWVyeSBpcyBub3Qgc3RhdGVmdWxcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGluc3RhbmNlW3Byb3BlcnR5XSA9IHNjb3BlZFJvdXRlcltwcm9wZXJ0eV07XG4gICAgfVxuICAgIC8vIEV2ZW50cyBpcyBhIHN0YXRpYyBwcm9wZXJ0eSBvbiB0aGUgcm91dGVyLCB0aGUgcm91dGVyIGRvZXNuJ3QgaGF2ZSB0byBiZSBpbml0aWFsaXplZCB0byB1c2UgaXRcbiAgICBpbnN0YW5jZS5ldmVudHMgPSBfcm91dGVyLmRlZmF1bHQuZXZlbnRzO1xuICAgIGNvcmVNZXRob2RGaWVsZHMuZm9yRWFjaCgoZmllbGQpPT57XG4gICAgICAgIGluc3RhbmNlW2ZpZWxkXSA9ICguLi5hcmdzKT0+e1xuICAgICAgICAgICAgcmV0dXJuIHNjb3BlZFJvdXRlcltmaWVsZF0oLi4uYXJncyk7XG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yb3V0ZXIuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZW51bWVyYWJsZSIsImdldCIsIl9yb3V0ZXIiLCJkZWZhdWx0IiwiX3dpdGhSb3V0ZXIiLCJ1c2VSb3V0ZXIiLCJjcmVhdGVSb3V0ZXIiLCJtYWtlUHVibGljUm91dGVySW5zdGFuY2UiLCJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yb3V0ZXJDb250ZXh0IiwiX2lzRXJyb3IiLCJvYmoiLCJfX2VzTW9kdWxlIiwic2luZ2xldG9uUm91dGVyIiwicm91dGVyIiwicmVhZHlDYWxsYmFja3MiLCJyZWFkeSIsImNiIiwicHVzaCIsInVybFByb3BlcnR5RmllbGRzIiwicm91dGVyRXZlbnRzIiwiY29yZU1ldGhvZEZpZWxkcyIsImV2ZW50cyIsImZvckVhY2giLCJmaWVsZCIsImdldFJvdXRlciIsImFyZ3MiLCJldmVudCIsIm9uIiwiZXZlbnRGaWVsZCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic3Vic3RyaW5nIiwiX3NpbmdsZXRvblJvdXRlciIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsIm1lc3NhZ2UiLCJzdGFjayIsIkVycm9yIiwiX2RlZmF1bHQiLCJ1c2VDb250ZXh0IiwiUm91dGVyQ29udGV4dCIsInNjb3BlZFJvdXRlciIsImluc3RhbmNlIiwicHJvcGVydHkiLCJhc3NpZ24iLCJBcnJheSIsImlzQXJyYXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/next/dist/client/router.js\n");

/***/ }),

/***/ "../../node_modules/next/dist/client/use-intersection.js":
/*!***************************************************************!*\
  !*** ../../node_modules/next/dist/client/use-intersection.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.useIntersection = useIntersection;\nvar _react = __webpack_require__(/*! react */ \"react\");\nvar _requestIdleCallback = __webpack_require__(/*! ./request-idle-callback */ \"../../node_modules/next/dist/client/request-idle-callback.js\");\nconst hasIntersectionObserver = typeof IntersectionObserver !== 'undefined';\nfunction useIntersection({ rootMargin , disabled  }) {\n    const isDisabled = disabled || !hasIntersectionObserver;\n    const unobserve = (0, _react).useRef();\n    const [visible, setVisible] = (0, _react).useState(false);\n    const setRef = (0, _react).useCallback((el)=>{\n        if (unobserve.current) {\n            unobserve.current();\n            unobserve.current = undefined;\n        }\n        if (isDisabled || visible) return;\n        if (el && el.tagName) {\n            unobserve.current = observe(el, (isVisible)=>isVisible && setVisible(isVisible)\n            , {\n                rootMargin\n            });\n        }\n    }, [\n        isDisabled,\n        rootMargin,\n        visible\n    ]);\n    (0, _react).useEffect(()=>{\n        if (!hasIntersectionObserver) {\n            if (!visible) {\n                const idleCallback = (0, _requestIdleCallback).requestIdleCallback(()=>setVisible(true)\n                );\n                return ()=>(0, _requestIdleCallback).cancelIdleCallback(idleCallback)\n                ;\n            }\n        }\n    }, [\n        visible\n    ]);\n    return [\n        setRef,\n        visible\n    ];\n}\nfunction observe(element, callback, options) {\n    const { id , observer , elements  } = createObserver(options);\n    elements.set(element, callback);\n    observer.observe(element);\n    return function unobserve() {\n        elements.delete(element);\n        observer.unobserve(element);\n        // Destroy observer when there's nothing left to watch:\n        if (elements.size === 0) {\n            observer.disconnect();\n            observers.delete(id);\n        }\n    };\n}\nconst observers = new Map();\nfunction createObserver(options) {\n    const id = options.rootMargin || '';\n    let instance = observers.get(id);\n    if (instance) {\n        return instance;\n    }\n    const elements = new Map();\n    const observer = new IntersectionObserver((entries)=>{\n        entries.forEach((entry)=>{\n            const callback = elements.get(entry.target);\n            const isVisible = entry.isIntersecting || entry.intersectionRatio > 0;\n            if (callback && isVisible) {\n                callback(isVisible);\n            }\n        });\n    }, options);\n    observers.set(id, instance = {\n        id,\n        observer,\n        elements\n    });\n    return instance;\n} //# sourceMappingURL=use-intersection.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvdXNlLWludGVyc2VjdGlvbi5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBWTtBQUNaQSw4Q0FBNkMsQ0FBQztJQUMxQ0csS0FBSyxFQUFFLElBQUk7QUFDZixDQUFDLEVBQUM7QUFDRkQsdUJBQXVCLEdBQUdFLGVBQWU7QUFDekMsR0FBRyxDQUFDQyxNQUFNLEdBQUdDLG1CQUFPLENBQUMsb0JBQU87QUFDNUIsR0FBRyxDQUFDQyxvQkFBb0IsR0FBR0QsbUJBQU8sQ0FBQyw2RkFBeUI7QUFDNUQsS0FBSyxDQUFDRSx1QkFBdUIsR0FBRyxNQUFNLENBQUNDLG9CQUFvQixLQUFLLENBQVc7U0FDbEVMLGVBQWUsQ0FBQyxDQUFDLENBQUNNLFVBQVUsR0FBR0MsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDO0lBQ2xELEtBQUssQ0FBQ0MsVUFBVSxHQUFHRCxRQUFRLEtBQUtILHVCQUF1QjtJQUN2RCxLQUFLLENBQUNLLFNBQVMsSUFBSSxDQUFDLEVBQUVSLE1BQU0sRUFBRVMsTUFBTTtJQUNwQyxLQUFLLEVBQUVDLE9BQU8sRUFBRUMsVUFBVSxLQUFLLENBQUMsRUFBRVgsTUFBTSxFQUFFWSxRQUFRLENBQUMsS0FBSztJQUN4RCxLQUFLLENBQUNDLE1BQU0sSUFBSSxDQUFDLEVBQUViLE1BQU0sRUFBRWMsV0FBVyxFQUFFQyxFQUFFLEdBQUcsQ0FBQztRQUMxQyxFQUFFLEVBQUVQLFNBQVMsQ0FBQ1EsT0FBTyxFQUFFLENBQUM7WUFDcEJSLFNBQVMsQ0FBQ1EsT0FBTztZQUNqQlIsU0FBUyxDQUFDUSxPQUFPLEdBQUdDLFNBQVM7UUFDakMsQ0FBQztRQUNELEVBQUUsRUFBRVYsVUFBVSxJQUFJRyxPQUFPLEVBQUUsTUFBTTtRQUNqQyxFQUFFLEVBQUVLLEVBQUUsSUFBSUEsRUFBRSxDQUFDRyxPQUFPLEVBQUUsQ0FBQztZQUNuQlYsU0FBUyxDQUFDUSxPQUFPLEdBQUdHLE9BQU8sQ0FBQ0osRUFBRSxHQUFHSyxT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MkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvdXNlLWludGVyc2VjdGlvbi5qcz8zMGFiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy51c2VJbnRlcnNlY3Rpb24gPSB1c2VJbnRlcnNlY3Rpb247XG52YXIgX3JlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xudmFyIF9yZXF1ZXN0SWRsZUNhbGxiYWNrID0gcmVxdWlyZShcIi4vcmVxdWVzdC1pZGxlLWNhbGxiYWNrXCIpO1xuY29uc3QgaGFzSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSB0eXBlb2YgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnO1xuZnVuY3Rpb24gdXNlSW50ZXJzZWN0aW9uKHsgcm9vdE1hcmdpbiAsIGRpc2FibGVkICB9KSB7XG4gICAgY29uc3QgaXNEaXNhYmxlZCA9IGRpc2FibGVkIHx8ICFoYXNJbnRlcnNlY3Rpb25PYnNlcnZlcjtcbiAgICBjb25zdCB1bm9ic2VydmUgPSAoMCwgX3JlYWN0KS51c2VSZWYoKTtcbiAgICBjb25zdCBbdmlzaWJsZSwgc2V0VmlzaWJsZV0gPSAoMCwgX3JlYWN0KS51c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3Qgc2V0UmVmID0gKDAsIF9yZWFjdCkudXNlQ2FsbGJhY2soKGVsKT0+e1xuICAgICAgICBpZiAodW5vYnNlcnZlLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHVub2JzZXJ2ZS5jdXJyZW50KCk7XG4gICAgICAgICAgICB1bm9ic2VydmUuY3VycmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNEaXNhYmxlZCB8fCB2aXNpYmxlKSByZXR1cm47XG4gICAgICAgIGlmIChlbCAmJiBlbC50YWdOYW1lKSB7XG4gICAgICAgICAgICB1bm9ic2VydmUuY3VycmVudCA9IG9ic2VydmUoZWwsIChpc1Zpc2libGUpPT5pc1Zpc2libGUgJiYgc2V0VmlzaWJsZShpc1Zpc2libGUpXG4gICAgICAgICAgICAsIHtcbiAgICAgICAgICAgICAgICByb290TWFyZ2luXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIFtcbiAgICAgICAgaXNEaXNhYmxlZCxcbiAgICAgICAgcm9vdE1hcmdpbixcbiAgICAgICAgdmlzaWJsZVxuICAgIF0pO1xuICAgICgwLCBfcmVhY3QpLnVzZUVmZmVjdCgoKT0+e1xuICAgICAgICBpZiAoIWhhc0ludGVyc2VjdGlvbk9ic2VydmVyKSB7XG4gICAgICAgICAgICBpZiAoIXZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZGxlQ2FsbGJhY2sgPSAoMCwgX3JlcXVlc3RJZGxlQ2FsbGJhY2spLnJlcXVlc3RJZGxlQ2FsbGJhY2soKCk9PnNldFZpc2libGUodHJ1ZSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybiAoKT0+KDAsIF9yZXF1ZXN0SWRsZUNhbGxiYWNrKS5jYW5jZWxJZGxlQ2FsbGJhY2soaWRsZUNhbGxiYWNrKVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIFtcbiAgICAgICAgdmlzaWJsZVxuICAgIF0pO1xuICAgIHJldHVybiBbXG4gICAgICAgIHNldFJlZixcbiAgICAgICAgdmlzaWJsZVxuICAgIF07XG59XG5mdW5jdGlvbiBvYnNlcnZlKGVsZW1lbnQsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgY29uc3QgeyBpZCAsIG9ic2VydmVyICwgZWxlbWVudHMgIH0gPSBjcmVhdGVPYnNlcnZlcihvcHRpb25zKTtcbiAgICBlbGVtZW50cy5zZXQoZWxlbWVudCwgY2FsbGJhY2spO1xuICAgIG9ic2VydmVyLm9ic2VydmUoZWxlbWVudCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVub2JzZXJ2ZSgpIHtcbiAgICAgICAgZWxlbWVudHMuZGVsZXRlKGVsZW1lbnQpO1xuICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoZWxlbWVudCk7XG4gICAgICAgIC8vIERlc3Ryb3kgb2JzZXJ2ZXIgd2hlbiB0aGVyZSdzIG5vdGhpbmcgbGVmdCB0byB3YXRjaDpcbiAgICAgICAgaWYgKGVsZW1lbnRzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIG9ic2VydmVycy5kZWxldGUoaWQpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmNvbnN0IG9ic2VydmVycyA9IG5ldyBNYXAoKTtcbmZ1bmN0aW9uIGNyZWF0ZU9ic2VydmVyKG9wdGlvbnMpIHtcbiAgICBjb25zdCBpZCA9IG9wdGlvbnMucm9vdE1hcmdpbiB8fCAnJztcbiAgICBsZXQgaW5zdGFuY2UgPSBvYnNlcnZlcnMuZ2V0KGlkKTtcbiAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH1cbiAgICBjb25zdCBlbGVtZW50cyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcyk9PntcbiAgICAgICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSk9PntcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gZWxlbWVudHMuZ2V0KGVudHJ5LnRhcmdldCk7XG4gICAgICAgICAgICBjb25zdCBpc1Zpc2libGUgPSBlbnRyeS5pc0ludGVyc2VjdGluZyB8fCBlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA+IDA7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgaXNWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaXNWaXNpYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSwgb3B0aW9ucyk7XG4gICAgb2JzZXJ2ZXJzLnNldChpZCwgaW5zdGFuY2UgPSB7XG4gICAgICAgIGlkLFxuICAgICAgICBvYnNlcnZlcixcbiAgICAgICAgZWxlbWVudHNcbiAgICB9KTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZS1pbnRlcnNlY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwidXNlSW50ZXJzZWN0aW9uIiwiX3JlYWN0IiwicmVxdWlyZSIsIl9yZXF1ZXN0SWRsZUNhbGxiYWNrIiwiaGFzSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsInJvb3RNYXJnaW4iLCJkaXNhYmxlZCIsImlzRGlzYWJsZWQiLCJ1bm9ic2VydmUiLCJ1c2VSZWYiLCJ2aXNpYmxlIiwic2V0VmlzaWJsZSIsInVzZVN0YXRlIiwic2V0UmVmIiwidXNlQ2FsbGJhY2siLCJlbCIsImN1cnJlbnQiLCJ1bmRlZmluZWQiLCJ0YWdOYW1lIiwib2JzZXJ2ZSIsImlzVmlzaWJsZSIsInVzZUVmZmVjdCIsImlkbGVDYWxsYmFjayIsInJlcXVlc3RJZGxlQ2FsbGJhY2siLCJjYW5jZWxJZGxlQ2FsbGJhY2siLCJlbGVtZW50IiwiY2FsbGJhY2siLCJvcHRpb25zIiwiaWQiLCJvYnNlcnZlciIsImVsZW1lbnRzIiwiY3JlYXRlT2JzZXJ2ZXIiLCJzZXQiLCJkZWxldGUiLCJzaXplIiwiZGlzY29ubmVjdCIsIm9ic2VydmVycyIsIk1hcCIsImluc3RhbmNlIiwiZ2V0IiwiZW50cmllcyIsImZvckVhY2giLCJlbnRyeSIsInRhcmdldCIsImlzSW50ZXJzZWN0aW5nIiwiaW50ZXJzZWN0aW9uUmF0aW8iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/next/dist/client/use-intersection.js\n");

/***/ }),

/***/ "../../node_modules/next/dist/client/with-router.js":
/*!**********************************************************!*\
  !*** ../../node_modules/next/dist/client/with-router.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports[\"default\"] = withRouter;\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"react\"));\nvar _router = __webpack_require__(/*! ./router */ \"../../node_modules/next/dist/client/router.js\");\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\nfunction withRouter(ComposedComponent) {\n    function WithRouterWrapper(props) {\n        return(/*#__PURE__*/ _react.default.createElement(ComposedComponent, Object.assign({\n            router: (0, _router).useRouter()\n        }, props)));\n    }\n    WithRouterWrapper.getInitialProps = ComposedComponent.getInitialProps;\n    WithRouterWrapper.origGetInitialProps = ComposedComponent.origGetInitialProps;\n    if (true) {\n        const name = ComposedComponent.displayName || ComposedComponent.name || 'Unknown';\n        WithRouterWrapper.displayName = `withRouter(${name})`;\n    }\n    return WithRouterWrapper;\n} //# sourceMappingURL=with-router.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvd2l0aC1yb3V0ZXIuanMuanMiLCJtYXBwaW5ncyI6IkFBQVk7QUFDWkEsOENBQTZDLENBQUM7SUFDMUNHLEtBQUssRUFBRSxJQUFJO0FBQ2YsQ0FBQyxFQUFDO0FBQ0ZELGtCQUFlLEdBQUdHLFVBQVU7QUFDNUIsR0FBRyxDQUFDQyxNQUFNLEdBQUdDLHNCQUFzQixDQUFDQyxtQkFBTyxDQUFDLG9CQUFPO0FBQ25ELEdBQUcsQ0FBQ0MsT0FBTyxHQUFHRCxtQkFBTyxDQUFDLCtEQUFVO1NBQ3ZCRCxzQkFBc0IsQ0FBQ0csR0FBRyxFQUFFLENBQUM7SUFDbEMsTUFBTSxDQUFDQSxHQUFHLElBQUlBLEdBQUcsQ0FBQ0MsVUFBVSxHQUFHRCxHQUFHLEdBQUcsQ0FBQztRQUNsQ04sT0FBTyxFQUFFTSxHQUFHO0lBQ2hCLENBQUM7QUFDTCxDQUFDO1NBQ1FMLFVBQVUsQ0FBQ08saUJBQWlCLEVBQUUsQ0FBQzthQUMzQkMsaUJBQWlCLENBQUNDLEtBQUssRUFBRSxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxFQUFhLFlBQUNSLE1BQU0sQ0FBQ0YsT0FBTyxDQUFDVyxhQUFhLENBQUNILGlCQUFpQixFQUFFWixNQUFNLENBQUNnQixNQUFNLENBQUMsQ0FBQztZQUNoRkMsTUFBTSxHQUFHLENBQUMsRUFBRVIsT0FBTyxFQUFFUyxTQUFTO1FBQ2xDLENBQUMsRUFBRUosS0FBSztJQUNaLENBQUM7SUFDREQsaUJBQWlCLENBQUNNLGVBQWUsR0FBR1AsaUJBQWlCLENBQUNPLGVBQWU7SUFDckVOLGlCQUFpQixDQUFDTyxtQkFBbUIsR0FBR1IsaUJBQWlCLENBQUNRLG1CQUFtQjtJQUM3RSxFQUFFLEVBcEJOLElBb0I2QyxFQUFFLENBQUM7UUFDeEMsS0FBSyxDQUFDQyxJQUFJLEdBQUdULGlCQUFpQixDQUFDVSxXQUFXLElBQUlWLGlCQUFpQixDQUFDUyxJQUFJLElBQUksQ0FBUztRQUNqRlIsaUJBQWlCLENBQUNTLFdBQVcsSUFBSSxXQUFXLEVBQUVELElBQUksQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFDRCxNQUFNLENBQUNSLGlCQUFpQjtBQUM1QixDQUFDLENBRXNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L3dpdGgtcm91dGVyLmpzPzk3NmQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB3aXRoUm91dGVyO1xudmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKTtcbnZhciBfcm91dGVyID0gcmVxdWlyZShcIi4vcm91dGVyXCIpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgICAgICBkZWZhdWx0OiBvYmpcbiAgICB9O1xufVxuZnVuY3Rpb24gd2l0aFJvdXRlcihDb21wb3NlZENvbXBvbmVudCkge1xuICAgIGZ1bmN0aW9uIFdpdGhSb3V0ZXJXcmFwcGVyKHByb3BzKSB7XG4gICAgICAgIHJldHVybigvKiNfX1BVUkVfXyovIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQ29tcG9zZWRDb21wb25lbnQsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgcm91dGVyOiAoMCwgX3JvdXRlcikudXNlUm91dGVyKClcbiAgICAgICAgfSwgcHJvcHMpKSk7XG4gICAgfVxuICAgIFdpdGhSb3V0ZXJXcmFwcGVyLmdldEluaXRpYWxQcm9wcyA9IENvbXBvc2VkQ29tcG9uZW50LmdldEluaXRpYWxQcm9wcztcbiAgICBXaXRoUm91dGVyV3JhcHBlci5vcmlnR2V0SW5pdGlhbFByb3BzID0gQ29tcG9zZWRDb21wb25lbnQub3JpZ0dldEluaXRpYWxQcm9wcztcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBjb25zdCBuYW1lID0gQ29tcG9zZWRDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9zZWRDb21wb25lbnQubmFtZSB8fCAnVW5rbm93bic7XG4gICAgICAgIFdpdGhSb3V0ZXJXcmFwcGVyLmRpc3BsYXlOYW1lID0gYHdpdGhSb3V0ZXIoJHtuYW1lfSlgO1xuICAgIH1cbiAgICByZXR1cm4gV2l0aFJvdXRlcldyYXBwZXI7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpdGgtcm91dGVyLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJ3aXRoUm91dGVyIiwiX3JlYWN0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfcm91dGVyIiwib2JqIiwiX19lc01vZHVsZSIsIkNvbXBvc2VkQ29tcG9uZW50IiwiV2l0aFJvdXRlcldyYXBwZXIiLCJwcm9wcyIsImNyZWF0ZUVsZW1lbnQiLCJhc3NpZ24iLCJyb3V0ZXIiLCJ1c2VSb3V0ZXIiLCJnZXRJbml0aWFsUHJvcHMiLCJvcmlnR2V0SW5pdGlhbFByb3BzIiwibmFtZSIsImRpc3BsYXlOYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/next/dist/client/with-router.js\n");

/***/ }),

/***/ "../../node_modules/next/dist/shared/lib/router/router.js":
/*!****************************************************************!*\
  !*** ../../node_modules/next/dist/shared/lib/router/router.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getDomainLocale = getDomainLocale;\nexports.addLocale = addLocale;\nexports.delLocale = delLocale;\nexports.hasBasePath = hasBasePath;\nexports.addBasePath = addBasePath;\nexports.delBasePath = delBasePath;\nexports.isLocalURL = isLocalURL;\nexports.interpolateAs = interpolateAs;\nexports.resolveHref = resolveHref;\nexports[\"default\"] = void 0;\nvar _normalizeTrailingSlash = __webpack_require__(/*! ../../../client/normalize-trailing-slash */ \"../../node_modules/next/dist/client/normalize-trailing-slash.js\");\nvar _routeLoader = __webpack_require__(/*! ../../../client/route-loader */ \"../../node_modules/next/dist/client/route-loader.js\");\nvar _isError = _interopRequireDefault(__webpack_require__(/*! ../../../lib/is-error */ \"../../node_modules/next/dist/lib/is-error.js\"));\nvar _denormalizePagePath = __webpack_require__(/*! ../../../server/denormalize-page-path */ \"../../../server/denormalize-page-path\");\nvar _normalizeLocalePath = __webpack_require__(/*! ../i18n/normalize-locale-path */ \"../i18n/normalize-locale-path\");\nvar _mitt = _interopRequireDefault(__webpack_require__(/*! ../mitt */ \"../mitt\"));\nvar _utils = __webpack_require__(/*! ../utils */ \"../shared/lib/utils\");\nvar _isDynamic = __webpack_require__(/*! ./utils/is-dynamic */ \"./utils/is-dynamic\");\nvar _parseRelativeUrl = __webpack_require__(/*! ./utils/parse-relative-url */ \"./utils/parse-relative-url\");\nvar _querystring = __webpack_require__(/*! ./utils/querystring */ \"./utils/querystring\");\nvar _resolveRewrites = _interopRequireDefault(__webpack_require__(/*! ./utils/resolve-rewrites */ \"./utils/resolve-rewrites\"));\nvar _routeMatcher = __webpack_require__(/*! ./utils/route-matcher */ \"./utils/route-matcher\");\nvar _routeRegex = __webpack_require__(/*! ./utils/route-regex */ \"./utils/route-regex\");\nvar _getMiddlewareRegex = __webpack_require__(/*! ./utils/get-middleware-regex */ \"./utils/get-middleware-regex\");\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\nlet detectDomainLocale;\nif (false) {}\nconst basePath =  false || '';\nfunction buildCancellationError() {\n    return Object.assign(new Error('Route Cancelled'), {\n        cancelled: true\n    });\n}\nfunction addPathPrefix(path, prefix) {\n    if (!path.startsWith('/') || !prefix) {\n        return path;\n    }\n    const pathname = pathNoQueryHash(path);\n    return (0, _normalizeTrailingSlash).normalizePathTrailingSlash(`${prefix}${pathname}`) + path.substr(pathname.length);\n}\nfunction getDomainLocale(path, locale, locales, domainLocales) {\n    if (false) {} else {\n        return false;\n    }\n}\nfunction addLocale(path, locale, defaultLocale) {\n    if (false) {}\n    return path;\n}\nfunction delLocale(path, locale) {\n    if (false) {}\n    return path;\n}\nfunction pathNoQueryHash(path) {\n    const queryIndex = path.indexOf('?');\n    const hashIndex = path.indexOf('#');\n    if (queryIndex > -1 || hashIndex > -1) {\n        path = path.substring(0, queryIndex > -1 ? queryIndex : hashIndex);\n    }\n    return path;\n}\nfunction hasBasePath(path) {\n    path = pathNoQueryHash(path);\n    return path === basePath || path.startsWith(basePath + '/');\n}\nfunction addBasePath(path) {\n    // we only add the basepath on relative urls\n    return addPathPrefix(path, basePath);\n}\nfunction delBasePath(path) {\n    path = path.slice(basePath.length);\n    if (!path.startsWith('/')) path = `/${path}`;\n    return path;\n}\nfunction isLocalURL(url) {\n    // prevent a hydration mismatch on href for url with anchor refs\n    if (url.startsWith('/') || url.startsWith('#') || url.startsWith('?')) return true;\n    try {\n        // absolute urls can be local if they are on the same origin\n        const locationOrigin = (0, _utils).getLocationOrigin();\n        const resolved = new URL(url, locationOrigin);\n        return resolved.origin === locationOrigin && hasBasePath(resolved.pathname);\n    } catch (_) {\n        return false;\n    }\n}\nfunction interpolateAs(route, asPathname, query) {\n    let interpolatedRoute = '';\n    const dynamicRegex = (0, _routeRegex).getRouteRegex(route);\n    const dynamicGroups = dynamicRegex.groups;\n    const dynamicMatches = (asPathname !== route ? (0, _routeMatcher).getRouteMatcher(dynamicRegex)(asPathname) : '') || // TODO: should this take priority; also need to change in the router.\n    query;\n    interpolatedRoute = route;\n    const params = Object.keys(dynamicGroups);\n    if (!params.every((param)=>{\n        let value = dynamicMatches[param] || '';\n        const { repeat , optional  } = dynamicGroups[param];\n        // support single-level catch-all\n        // TODO: more robust handling for user-error (passing `/`)\n        let replaced = `[${repeat ? '...' : ''}${param}]`;\n        if (optional) {\n            replaced = `${!value ? '/' : ''}[${replaced}]`;\n        }\n        if (repeat && !Array.isArray(value)) value = [\n            value\n        ];\n        return (optional || param in dynamicMatches) && (interpolatedRoute = interpolatedRoute.replace(replaced, repeat ? value.map(// path delimiter escaped since they are being inserted\n        // into the URL and we expect URL encoded segments\n        // when parsing dynamic route params\n        (segment)=>encodeURIComponent(segment)\n        ).join('/') : encodeURIComponent(value)) || '/');\n    })) {\n        interpolatedRoute = '' // did not satisfy all requirements\n        ;\n    // n.b. We ignore this error because we handle warning for this case in\n    // development in the `<Link>` component directly.\n    }\n    return {\n        params,\n        result: interpolatedRoute\n    };\n}\nfunction omitParmsFromQuery(query, params) {\n    const filteredQuery = {\n    };\n    Object.keys(query).forEach((key)=>{\n        if (!params.includes(key)) {\n            filteredQuery[key] = query[key];\n        }\n    });\n    return filteredQuery;\n}\nfunction resolveHref(router, href, resolveAs) {\n    // we use a dummy base url for relative urls\n    let base;\n    let urlAsString = typeof href === 'string' ? href : (0, _utils).formatWithValidation(href);\n    // repeated slashes and backslashes in the URL are considered\n    // invalid and will never match a Next.js page/file\n    const urlProtoMatch = urlAsString.match(/^[a-zA-Z]{1,}:\\/\\//);\n    const urlAsStringNoProto = urlProtoMatch ? urlAsString.substr(urlProtoMatch[0].length) : urlAsString;\n    const urlParts = urlAsStringNoProto.split('?');\n    if ((urlParts[0] || '').match(/(\\/\\/|\\\\)/)) {\n        console.error(`Invalid href passed to next/router: ${urlAsString}, repeated forward-slashes (//) or backslashes \\\\ are not valid in the href`);\n        const normalizedUrl = (0, _utils).normalizeRepeatedSlashes(urlAsStringNoProto);\n        urlAsString = (urlProtoMatch ? urlProtoMatch[0] : '') + normalizedUrl;\n    }\n    // Return because it cannot be routed by the Next.js router\n    if (!isLocalURL(urlAsString)) {\n        return resolveAs ? [\n            urlAsString\n        ] : urlAsString;\n    }\n    try {\n        base = new URL(urlAsString.startsWith('#') ? router.asPath : router.pathname, 'http://n');\n    } catch (_) {\n        // fallback to / for invalid asPath values e.g. //\n        base = new URL('/', 'http://n');\n    }\n    try {\n        const finalUrl = new URL(urlAsString, base);\n        finalUrl.pathname = (0, _normalizeTrailingSlash).normalizePathTrailingSlash(finalUrl.pathname);\n        let interpolatedAs = '';\n        if ((0, _isDynamic).isDynamicRoute(finalUrl.pathname) && finalUrl.searchParams && resolveAs) {\n            const query = (0, _querystring).searchParamsToUrlQuery(finalUrl.searchParams);\n            const { result , params  } = interpolateAs(finalUrl.pathname, finalUrl.pathname, query);\n            if (result) {\n                interpolatedAs = (0, _utils).formatWithValidation({\n                    pathname: result,\n                    hash: finalUrl.hash,\n                    query: omitParmsFromQuery(query, params)\n                });\n            }\n        }\n        // if the origin didn't change, it means we received a relative href\n        const resolvedHref = finalUrl.origin === base.origin ? finalUrl.href.slice(finalUrl.origin.length) : finalUrl.href;\n        return resolveAs ? [\n            resolvedHref,\n            interpolatedAs || resolvedHref\n        ] : resolvedHref;\n    } catch (_1) {\n        return resolveAs ? [\n            urlAsString\n        ] : urlAsString;\n    }\n}\nfunction stripOrigin(url) {\n    const origin = (0, _utils).getLocationOrigin();\n    return url.startsWith(origin) ? url.substring(origin.length) : url;\n}\nfunction prepareUrlAs(router, url, as) {\n    // If url and as provided as an object representation,\n    // we'll format them into the string version here.\n    let [resolvedHref, resolvedAs] = resolveHref(router, url, true);\n    const origin = (0, _utils).getLocationOrigin();\n    const hrefHadOrigin = resolvedHref.startsWith(origin);\n    const asHadOrigin = resolvedAs && resolvedAs.startsWith(origin);\n    resolvedHref = stripOrigin(resolvedHref);\n    resolvedAs = resolvedAs ? stripOrigin(resolvedAs) : resolvedAs;\n    const preparedUrl = hrefHadOrigin ? resolvedHref : addBasePath(resolvedHref);\n    const preparedAs = as ? stripOrigin(resolveHref(router, as)) : resolvedAs || resolvedHref;\n    return {\n        url: preparedUrl,\n        as: asHadOrigin ? preparedAs : addBasePath(preparedAs)\n    };\n}\nfunction resolveDynamicRoute(pathname, pages) {\n    const cleanPathname = (0, _normalizeTrailingSlash).removePathTrailingSlash((0, _denormalizePagePath).denormalizePagePath(pathname));\n    if (cleanPathname === '/404' || cleanPathname === '/_error') {\n        return pathname;\n    }\n    // handle resolving href for dynamic routes\n    if (!pages.includes(cleanPathname)) {\n        // eslint-disable-next-line array-callback-return\n        pages.some((page)=>{\n            if ((0, _isDynamic).isDynamicRoute(page) && (0, _routeRegex).getRouteRegex(page).re.test(cleanPathname)) {\n                pathname = page;\n                return true;\n            }\n        });\n    }\n    return (0, _normalizeTrailingSlash).removePathTrailingSlash(pathname);\n}\nconst manualScrollRestoration =  false && 0;\nconst SSG_DATA_NOT_FOUND = Symbol('SSG_DATA_NOT_FOUND');\nfunction fetchRetry(url, attempts, opts) {\n    return fetch(url, {\n        // Cookies are required to be present for Next.js' SSG \"Preview Mode\".\n        // Cookies may also be required for `getServerSideProps`.\n        //\n        // > `fetch` won’t send cookies, unless you set the credentials init\n        // > option.\n        // https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\n        //\n        // > For maximum browser compatibility when it comes to sending &\n        // > receiving cookies, always supply the `credentials: 'same-origin'`\n        // > option instead of relying on the default.\n        // https://github.com/github/fetch#caveats\n        credentials: 'same-origin'\n    }).then((res)=>{\n        if (!res.ok) {\n            if (attempts > 1 && res.status >= 500) {\n                return fetchRetry(url, attempts - 1, opts);\n            }\n            if (res.status === 404) {\n                return res.json().then((data)=>{\n                    if (data.notFound) {\n                        return {\n                            notFound: SSG_DATA_NOT_FOUND\n                        };\n                    }\n                    throw new Error(`Failed to load static props`);\n                });\n            }\n            throw new Error(`Failed to load static props`);\n        }\n        return opts.text ? res.text() : res.json();\n    });\n}\nfunction fetchNextData(dataHref, isServerRender, text, inflightCache, persistCache) {\n    const { href: cacheKey  } = new URL(dataHref, window.location.href);\n    if (inflightCache[cacheKey] !== undefined) {\n        return inflightCache[cacheKey];\n    }\n    return inflightCache[cacheKey] = fetchRetry(dataHref, isServerRender ? 3 : 1, {\n        text\n    }).catch((err)=>{\n        // We should only trigger a server-side transition if this was caused\n        // on a client-side transition. Otherwise, we'd get into an infinite\n        // loop.\n        if (!isServerRender) {\n            (0, _routeLoader).markAssetError(err);\n        }\n        throw err;\n    }).then((data)=>{\n        if (!persistCache || \"development\" !== 'production') {\n            delete inflightCache[cacheKey];\n        }\n        return data;\n    }).catch((err)=>{\n        delete inflightCache[cacheKey];\n        throw err;\n    });\n}\nclass Router {\n    constructor(pathname1, query1, as1, { initialProps , pageLoader , App , wrapApp , Component , err: err2 , subscription , isFallback , locale , locales , defaultLocale , domainLocales , isPreview  }){\n        // Static Data Cache\n        this.sdc = {\n        };\n        // In-flight Server Data Requests, for deduping\n        this.sdr = {\n        };\n        // In-flight middleware preflight requests\n        this.sde = {\n        };\n        this._idx = 0;\n        this.onPopState = (e)=>{\n            const state = e.state;\n            if (!state) {\n                // We get state as undefined for two reasons.\n                //  1. With older safari (< 8) and older chrome (< 34)\n                //  2. When the URL changed with #\n                //\n                // In the both cases, we don't need to proceed and change the route.\n                // (as it's already changed)\n                // But we can simply replace the state with the new changes.\n                // Actually, for (1) we don't need to nothing. But it's hard to detect that event.\n                // So, doing the following for (1) does no harm.\n                const { pathname , query  } = this;\n                this.changeState('replaceState', (0, _utils).formatWithValidation({\n                    pathname: addBasePath(pathname),\n                    query\n                }), (0, _utils).getURL());\n                return;\n            }\n            if (!state.__N) {\n                return;\n            }\n            let forcedScroll;\n            const { url , as , options , idx  } = state;\n            if (false) {}\n            this._idx = idx;\n            const { pathname  } = (0, _parseRelativeUrl).parseRelativeUrl(url);\n            // Make sure we don't re-render on initial load,\n            // can be caused by navigating back from an external site\n            if (this.isSsr && as === this.asPath && pathname === this.pathname) {\n                return;\n            }\n            // If the downstream application returns falsy, return.\n            // They will then be responsible for handling the event.\n            if (this._bps && !this._bps(state)) {\n                return;\n            }\n            this.change('replaceState', url, as, Object.assign({\n            }, options, {\n                shallow: options.shallow && this._shallow,\n                locale: options.locale || this.defaultLocale\n            }), forcedScroll);\n        };\n        // represents the current component key\n        this.route = (0, _normalizeTrailingSlash).removePathTrailingSlash(pathname1);\n        // set up the component cache (by route keys)\n        this.components = {\n        };\n        // We should not keep the cache, if there's an error\n        // Otherwise, this cause issues when when going back and\n        // come again to the errored page.\n        if (pathname1 !== '/_error') {\n            var ref;\n            this.components[this.route] = {\n                Component,\n                initial: true,\n                props: initialProps,\n                err: err2,\n                __N_SSG: initialProps && initialProps.__N_SSG,\n                __N_SSP: initialProps && initialProps.__N_SSP,\n                __N_RSC: !!((ref = Component) === null || ref === void 0 ? void 0 : ref.__next_rsc__)\n            };\n        }\n        this.components['/_app'] = {\n            Component: App,\n            styleSheets: []\n        };\n        // Backwards compat for Router.router.events\n        // TODO: Should be remove the following major version as it was never documented\n        this.events = Router.events;\n        this.pageLoader = pageLoader;\n        this.pathname = pathname1;\n        this.query = query1;\n        // if auto prerendered and dynamic route wait to update asPath\n        // until after mount to prevent hydration mismatch\n        const autoExportDynamic = (0, _isDynamic).isDynamicRoute(pathname1) && self.__NEXT_DATA__.autoExport;\n        this.asPath = autoExportDynamic ? pathname1 : as1;\n        this.basePath = basePath;\n        this.sub = subscription;\n        this.clc = null;\n        this._wrapApp = wrapApp;\n        // make sure to ignore extra popState in safari on navigating\n        // back from external site\n        this.isSsr = true;\n        this.isFallback = isFallback;\n        this.isReady = !!(self.__NEXT_DATA__.gssp || self.__NEXT_DATA__.gip || self.__NEXT_DATA__.appGip && !self.__NEXT_DATA__.gsp || !autoExportDynamic && !self.location.search && !false);\n        this.isPreview = !!isPreview;\n        this.isLocaleDomain = false;\n        if (false) {}\n        if (false) {}\n    }\n    reload() {\n        window.location.reload();\n    }\n    /**\n   * Go back in history\n   */ back() {\n        window.history.back();\n    }\n    /**\n   * Performs a `pushState` with arguments\n   * @param url of the route\n   * @param as masks `url` for the browser\n   * @param options object you can define `shallow` and other options\n   */ push(url, as, options = {\n    }) {\n        if (false) {}\n        ({ url , as  } = prepareUrlAs(this, url, as));\n        return this.change('pushState', url, as, options);\n    }\n    /**\n   * Performs a `replaceState` with arguments\n   * @param url of the route\n   * @param as masks `url` for the browser\n   * @param options object you can define `shallow` and other options\n   */ replace(url1, as2, options1 = {\n    }) {\n        ({ url: url1 , as: as2  } = prepareUrlAs(this, url1, as2));\n        return this.change('replaceState', url1, as2, options1);\n    }\n    async change(method, url2, as3, options2, forcedScroll) {\n        if (!isLocalURL(url2)) {\n            window.location.href = url2;\n            return false;\n        }\n        const shouldResolveHref = options2._h || options2._shouldResolveHref || pathNoQueryHash(url2) === pathNoQueryHash(as3);\n        // for static pages with query params in the URL we delay\n        // marking the router ready until after the query is updated\n        if (options2._h) {\n            this.isReady = true;\n        }\n        const prevLocale = this.locale;\n        if (false) { var ref; }\n        if (!options2._h) {\n            this.isSsr = false;\n        }\n        // marking route changes as a navigation start entry\n        if (_utils.ST) {\n            performance.mark('routeChange');\n        }\n        const { shallow =false  } = options2;\n        const routeProps = {\n            shallow\n        };\n        if (this._inFlightRoute) {\n            this.abortComponentLoad(this._inFlightRoute, routeProps);\n        }\n        as3 = addBasePath(addLocale(hasBasePath(as3) ? delBasePath(as3) : as3, options2.locale, this.defaultLocale));\n        const cleanedAs = delLocale(hasBasePath(as3) ? delBasePath(as3) : as3, this.locale);\n        this._inFlightRoute = as3;\n        let localeChange = prevLocale !== this.locale;\n        // If the url change is only related to a hash change\n        // We should not proceed. We should only change the state.\n        // WARNING: `_h` is an internal option for handing Next.js client-side\n        // hydration. Your app should _never_ use this property. It may change at\n        // any time without notice.\n        if (!options2._h && this.onlyAHashChange(cleanedAs) && !localeChange) {\n            this.asPath = cleanedAs;\n            Router.events.emit('hashChangeStart', as3, routeProps);\n            // TODO: do we need the resolved href when only a hash change?\n            this.changeState(method, url2, as3, options2);\n            this.scrollToHash(cleanedAs);\n            this.notify(this.components[this.route], null);\n            Router.events.emit('hashChangeComplete', as3, routeProps);\n            return true;\n        }\n        let parsed = (0, _parseRelativeUrl).parseRelativeUrl(url2);\n        let { pathname , query  } = parsed;\n        // The build manifest needs to be loaded before auto-static dynamic pages\n        // get their query parameters to allow ensuring they can be parsed properly\n        // when rewritten to\n        let pages, rewrites;\n        try {\n            [pages, { __rewrites: rewrites  }] = await Promise.all([\n                this.pageLoader.getPageList(),\n                (0, _routeLoader).getClientBuildManifest(),\n                this.pageLoader.getMiddlewareList(), \n            ]);\n        } catch (err) {\n            // If we fail to resolve the page list or client-build manifest, we must\n            // do a server-side transition:\n            window.location.href = as3;\n            return false;\n        }\n        // If asked to change the current URL we should reload the current page\n        // (not location.reload() but reload getInitialProps and other Next.js stuffs)\n        // We also need to set the method = replaceState always\n        // as this should not go into the history (That's how browsers work)\n        // We should compare the new asPath to the current asPath, not the url\n        if (!this.urlIsNew(cleanedAs) && !localeChange) {\n            method = 'replaceState';\n        }\n        // we need to resolve the as value using rewrites for dynamic SSG\n        // pages to allow building the data URL correctly\n        let resolvedAs = as3;\n        // url and as should always be prefixed with basePath by this\n        // point by either next/link or router.push/replace so strip the\n        // basePath from the pathname to match the pages dir 1-to-1\n        pathname = pathname ? (0, _normalizeTrailingSlash).removePathTrailingSlash(delBasePath(pathname)) : pathname;\n        if (shouldResolveHref && pathname !== '/_error') {\n            options2._shouldResolveHref = true;\n            if (false) {} else {\n                parsed.pathname = resolveDynamicRoute(pathname, pages);\n                if (parsed.pathname !== pathname) {\n                    pathname = parsed.pathname;\n                    parsed.pathname = addBasePath(pathname);\n                    url2 = (0, _utils).formatWithValidation(parsed);\n                }\n            }\n        }\n        if (!isLocalURL(as3)) {\n            if (true) {\n                throw new Error(`Invalid href: \"${url2}\" and as: \"${as3}\", received relative href and external as` + `\\nSee more info: https://nextjs.org/docs/messages/invalid-relative-url-external-as`);\n            }\n            window.location.href = as3;\n            return false;\n        }\n        resolvedAs = delLocale(delBasePath(resolvedAs), this.locale);\n        /**\n     * If the route update was triggered for client-side hydration then\n     * do not check the preflight request. Otherwise when rendering\n     * a page with refresh it might get into an infinite loop.\n     */ if (options2._h !== 1) {\n            const effect = await this._preflightRequest({\n                as: as3,\n                cache: \"development\" === 'production',\n                pages,\n                pathname,\n                query\n            });\n            if (effect.type === 'rewrite') {\n                query = {\n                    ...query,\n                    ...effect.parsedAs.query\n                };\n                resolvedAs = effect.asPath;\n                pathname = effect.resolvedHref;\n                parsed.pathname = effect.resolvedHref;\n                url2 = (0, _utils).formatWithValidation(parsed);\n            } else if (effect.type === 'redirect' && effect.newAs) {\n                return this.change(method, effect.newUrl, effect.newAs, options2);\n            } else if (effect.type === 'redirect' && effect.destination) {\n                window.location.href = effect.destination;\n                return new Promise(()=>{\n                });\n            } else if (effect.type === 'refresh') {\n                window.location.href = as3;\n                return new Promise(()=>{\n                });\n            }\n        }\n        const route = (0, _normalizeTrailingSlash).removePathTrailingSlash(pathname);\n        if ((0, _isDynamic).isDynamicRoute(route)) {\n            const parsedAs = (0, _parseRelativeUrl).parseRelativeUrl(resolvedAs);\n            const asPathname = parsedAs.pathname;\n            const routeRegex = (0, _routeRegex).getRouteRegex(route);\n            const routeMatch = (0, _routeMatcher).getRouteMatcher(routeRegex)(asPathname);\n            const shouldInterpolate = route === asPathname;\n            const interpolatedAs = shouldInterpolate ? interpolateAs(route, asPathname, query) : {\n            };\n            if (!routeMatch || shouldInterpolate && !interpolatedAs.result) {\n                const missingParams = Object.keys(routeRegex.groups).filter((param)=>!query[param]\n                );\n                if (missingParams.length > 0) {\n                    if (true) {\n                        console.warn(`${shouldInterpolate ? `Interpolating href` : `Mismatching \\`as\\` and \\`href\\``} failed to manually provide ` + `the params: ${missingParams.join(', ')} in the \\`href\\`'s \\`query\\``);\n                    }\n                    throw new Error((shouldInterpolate ? `The provided \\`href\\` (${url2}) value is missing query values (${missingParams.join(', ')}) to be interpolated properly. ` : `The provided \\`as\\` value (${asPathname}) is incompatible with the \\`href\\` value (${route}). `) + `Read more: https://nextjs.org/docs/messages/${shouldInterpolate ? 'href-interpolation-failed' : 'incompatible-href-as'}`);\n                }\n            } else if (shouldInterpolate) {\n                as3 = (0, _utils).formatWithValidation(Object.assign({\n                }, parsedAs, {\n                    pathname: interpolatedAs.result,\n                    query: omitParmsFromQuery(query, interpolatedAs.params)\n                }));\n            } else {\n                // Merge params into `query`, overwriting any specified in search\n                Object.assign(query, routeMatch);\n            }\n        }\n        Router.events.emit('routeChangeStart', as3, routeProps);\n        try {\n            var ref, ref1;\n            let routeInfo = await this.getRouteInfo(route, pathname, query, as3, resolvedAs, routeProps);\n            let { error , props , __N_SSG , __N_SSP  } = routeInfo;\n            // handle redirect on client-transition\n            if ((__N_SSG || __N_SSP) && props) {\n                if (props.pageProps && props.pageProps.__N_REDIRECT) {\n                    const destination = props.pageProps.__N_REDIRECT;\n                    // check if destination is internal (resolves to a page) and attempt\n                    // client-navigation if it is falling back to hard navigation if\n                    // it's not\n                    if (destination.startsWith('/') && props.pageProps.__N_REDIRECT_BASE_PATH !== false) {\n                        const parsedHref = (0, _parseRelativeUrl).parseRelativeUrl(destination);\n                        parsedHref.pathname = resolveDynamicRoute(parsedHref.pathname, pages);\n                        const { url: newUrl , as: newAs  } = prepareUrlAs(this, destination, destination);\n                        return this.change(method, newUrl, newAs, options2);\n                    }\n                    window.location.href = destination;\n                    return new Promise(()=>{\n                    });\n                }\n                this.isPreview = !!props.__N_PREVIEW;\n                // handle SSG data 404\n                if (props.notFound === SSG_DATA_NOT_FOUND) {\n                    let notFoundRoute;\n                    try {\n                        await this.fetchComponent('/404');\n                        notFoundRoute = '/404';\n                    } catch (_) {\n                        notFoundRoute = '/_error';\n                    }\n                    routeInfo = await this.getRouteInfo(notFoundRoute, notFoundRoute, query, as3, resolvedAs, {\n                        shallow: false\n                    });\n                }\n            }\n            Router.events.emit('beforeHistoryChange', as3, routeProps);\n            this.changeState(method, url2, as3, options2);\n            if (options2._h && pathname === '/_error' && ((ref = self.__NEXT_DATA__.props) === null || ref === void 0 ? void 0 : (ref1 = ref.pageProps) === null || ref1 === void 0 ? void 0 : ref1.statusCode) === 500 && (props === null || props === void 0 ? void 0 : props.pageProps)) {\n                // ensure statusCode is still correct for static 500 page\n                // when updating query information\n                props.pageProps.statusCode = 500;\n            }\n            // shallow routing is only allowed for same page URL changes.\n            const isValidShallowRoute = options2.shallow && this.route === route;\n            var _scroll;\n            const shouldScroll = (_scroll = options2.scroll) !== null && _scroll !== void 0 ? _scroll : !isValidShallowRoute;\n            const resetScroll = shouldScroll ? {\n                x: 0,\n                y: 0\n            } : null;\n            await this.set(route, pathname, query, cleanedAs, routeInfo, forcedScroll !== null && forcedScroll !== void 0 ? forcedScroll : resetScroll).catch((e)=>{\n                if (e.cancelled) error = error || e;\n                else throw e;\n            });\n            if (error) {\n                Router.events.emit('routeChangeError', error, cleanedAs, routeProps);\n                throw error;\n            }\n            if (false) {}\n            Router.events.emit('routeChangeComplete', as3, routeProps);\n            return true;\n        } catch (err1) {\n            if ((0, _isError).default(err1) && err1.cancelled) {\n                return false;\n            }\n            throw err1;\n        }\n    }\n    changeState(method1, url3, as4, options3 = {\n    }) {\n        if (true) {\n            if (typeof window.history === 'undefined') {\n                console.error(`Warning: window.history is not available.`);\n                return;\n            }\n            if (typeof window.history[method1] === 'undefined') {\n                console.error(`Warning: window.history.${method1} is not available`);\n                return;\n            }\n        }\n        if (method1 !== 'pushState' || (0, _utils).getURL() !== as4) {\n            this._shallow = options3.shallow;\n            window.history[method1]({\n                url: url3,\n                as: as4,\n                options: options3,\n                __N: true,\n                idx: this._idx = method1 !== 'pushState' ? this._idx : this._idx + 1\n            }, // Passing the empty string here should be safe against future changes to the method.\n            // https://developer.mozilla.org/en-US/docs/Web/API/History/replaceState\n            '', as4);\n        }\n    }\n    async handleRouteInfoError(err1, pathname, query, as5, routeProps, loadErrorFail) {\n        if (err1.cancelled) {\n            // bubble up cancellation errors\n            throw err1;\n        }\n        if ((0, _routeLoader).isAssetError(err1) || loadErrorFail) {\n            Router.events.emit('routeChangeError', err1, as5, routeProps);\n            // If we can't load the page it could be one of following reasons\n            //  1. Page doesn't exists\n            //  2. Page does exist in a different zone\n            //  3. Internal error while loading the page\n            // So, doing a hard reload is the proper way to deal with this.\n            window.location.href = as5;\n            // Changing the URL doesn't block executing the current code path.\n            // So let's throw a cancellation error stop the routing logic.\n            throw buildCancellationError();\n        }\n        try {\n            let Component;\n            let styleSheets;\n            let props;\n            if (typeof Component === 'undefined' || typeof styleSheets === 'undefined') {\n                ({ page: Component , styleSheets  } = await this.fetchComponent('/_error'));\n            }\n            const routeInfo = {\n                props,\n                Component,\n                styleSheets,\n                err: err1,\n                error: err1\n            };\n            if (!routeInfo.props) {\n                try {\n                    routeInfo.props = await this.getInitialProps(Component, {\n                        err: err1,\n                        pathname,\n                        query\n                    });\n                } catch (gipErr) {\n                    console.error('Error in error page `getInitialProps`: ', gipErr);\n                    routeInfo.props = {\n                    };\n                }\n            }\n            return routeInfo;\n        } catch (routeInfoErr) {\n            return this.handleRouteInfoError((0, _isError).default(routeInfoErr) ? routeInfoErr : new Error(routeInfoErr + ''), pathname, query, as5, routeProps, true);\n        }\n    }\n    async getRouteInfo(route, pathname2, query2, as6, resolvedAs, routeProps1) {\n        try {\n            const existingRouteInfo = this.components[route];\n            if (routeProps1.shallow && existingRouteInfo && this.route === route) {\n                return existingRouteInfo;\n            }\n            let cachedRouteInfo = undefined;\n            // can only use non-initial route info\n            // cannot reuse route info in development since it can change after HMR\n            if (false) {}\n            const routeInfo = cachedRouteInfo || await this.fetchComponent(route).then((res)=>({\n                    Component: res.page,\n                    styleSheets: res.styleSheets,\n                    __N_SSG: res.mod.__N_SSG,\n                    __N_SSP: res.mod.__N_SSP,\n                    __N_RSC: !!res.page.__next_rsc__\n                })\n            );\n            const { Component , __N_SSG , __N_SSP , __N_RSC  } = routeInfo;\n            if (true) {\n                const { isValidElementType  } = __webpack_require__(/*! react-is */ \"../../node_modules/next/node_modules/react-is/index.js\");\n                if (!isValidElementType(Component)) {\n                    throw new Error(`The default export is not a React Component in page: \"${pathname2}\"`);\n                }\n            }\n            let dataHref;\n            if (__N_SSG || __N_SSP || __N_RSC) {\n                dataHref = this.pageLoader.getDataHref({\n                    href: (0, _utils).formatWithValidation({\n                        pathname: pathname2,\n                        query: query2\n                    }),\n                    asPath: resolvedAs,\n                    ssg: __N_SSG,\n                    rsc: __N_RSC,\n                    locale: this.locale\n                });\n            }\n            const props = await this._getData(()=>__N_SSG || __N_SSP ? fetchNextData(dataHref, this.isSsr, false, __N_SSG ? this.sdc : this.sdr, !!__N_SSG && !this.isPreview) : this.getInitialProps(Component, {\n                    pathname: pathname2,\n                    query: query2,\n                    asPath: as6,\n                    locale: this.locale,\n                    locales: this.locales,\n                    defaultLocale: this.defaultLocale\n                })\n            );\n            if (__N_RSC) {\n                const { fresh , data  } = await this._getData(()=>this._getFlightData(dataHref)\n                );\n                props.pageProps = Object.assign(props.pageProps, {\n                    __flight_serialized__: data,\n                    __flight_fresh__: fresh\n                });\n            }\n            routeInfo.props = props;\n            this.components[route] = routeInfo;\n            return routeInfo;\n        } catch (err) {\n            return this.handleRouteInfoError((0, _isError).default(err) ? err : new Error(err + ''), pathname2, query2, as6, routeProps1);\n        }\n    }\n    set(route1, pathname3, query3, as7, data1, resetScroll) {\n        this.isFallback = false;\n        this.route = route1;\n        this.pathname = pathname3;\n        this.query = query3;\n        this.asPath = as7;\n        return this.notify(data1, resetScroll);\n    }\n    /**\n   * Callback to execute before replacing router state\n   * @param cb callback to be executed\n   */ beforePopState(cb) {\n        this._bps = cb;\n    }\n    onlyAHashChange(as8) {\n        if (!this.asPath) return false;\n        const [oldUrlNoHash, oldHash] = this.asPath.split('#');\n        const [newUrlNoHash, newHash] = as8.split('#');\n        // Makes sure we scroll to the provided hash if the url/hash are the same\n        if (newHash && oldUrlNoHash === newUrlNoHash && oldHash === newHash) {\n            return true;\n        }\n        // If the urls are change, there's more than a hash change\n        if (oldUrlNoHash !== newUrlNoHash) {\n            return false;\n        }\n        // If the hash has changed, then it's a hash only change.\n        // This check is necessary to handle both the enter and\n        // leave hash === '' cases. The identity case falls through\n        // and is treated as a next reload.\n        return oldHash !== newHash;\n    }\n    scrollToHash(as9) {\n        const [, hash] = as9.split('#');\n        // Scroll to top if the hash is just `#` with no value or `#top`\n        // To mirror browsers\n        if (hash === '' || hash === 'top') {\n            window.scrollTo(0, 0);\n            return;\n        }\n        // First we check if the element by id is found\n        const idEl = document.getElementById(hash);\n        if (idEl) {\n            idEl.scrollIntoView();\n            return;\n        }\n        // If there's no element with the id, we check the `name` property\n        // To mirror browsers\n        const nameEl = document.getElementsByName(hash)[0];\n        if (nameEl) {\n            nameEl.scrollIntoView();\n        }\n    }\n    urlIsNew(asPath) {\n        return this.asPath !== asPath;\n    }\n    /**\n   * Prefetch page code, you may wait for the data during page rendering.\n   * This feature only works in production!\n   * @param url the href of prefetched page\n   * @param asPath the as path of the prefetched page\n   */ async prefetch(url4, asPath1 = url4, options4 = {\n    }) {\n        let parsed = (0, _parseRelativeUrl).parseRelativeUrl(url4);\n        let { pathname , query  } = parsed;\n        if (false) {}\n        const pages = await this.pageLoader.getPageList();\n        let resolvedAs = asPath1;\n        if (false) {} else {\n            parsed.pathname = resolveDynamicRoute(parsed.pathname, pages);\n            if (parsed.pathname !== pathname) {\n                pathname = parsed.pathname;\n                parsed.pathname = pathname;\n                url4 = (0, _utils).formatWithValidation(parsed);\n            }\n        }\n        // Prefetch is not supported in development mode because it would trigger on-demand-entries\n        if (true) {\n            return;\n        }\n        const effects = await this._preflightRequest({\n            as: addBasePath(asPath1),\n            cache: true,\n            pages,\n            pathname,\n            query\n        });\n        if (effects.type === 'rewrite') {\n            parsed.pathname = effects.resolvedHref;\n            pathname = effects.resolvedHref;\n            query = {\n                ...query,\n                ...effects.parsedAs.query\n            };\n            resolvedAs = effects.asPath;\n            url4 = (0, _utils).formatWithValidation(parsed);\n        }\n        const route = (0, _normalizeTrailingSlash).removePathTrailingSlash(pathname);\n        await Promise.all([\n            this.pageLoader._isSsg(route).then((isSsg)=>{\n                return isSsg ? fetchNextData(this.pageLoader.getDataHref({\n                    href: url4,\n                    asPath: resolvedAs,\n                    ssg: true,\n                    locale: typeof options4.locale !== 'undefined' ? options4.locale : this.locale\n                }), false, false, this.sdc, true) : false;\n            }),\n            this.pageLoader[options4.priority ? 'loadPage' : 'prefetch'](route), \n        ]);\n    }\n    async fetchComponent(route2) {\n        let cancelled = false;\n        const cancel = this.clc = ()=>{\n            cancelled = true;\n        };\n        const handleCancelled = ()=>{\n            if (cancelled) {\n                const error = new Error(`Abort fetching component for route: \"${route2}\"`);\n                error.cancelled = true;\n                throw error;\n            }\n            if (cancel === this.clc) {\n                this.clc = null;\n            }\n        };\n        try {\n            const componentResult = await this.pageLoader.loadPage(route2);\n            handleCancelled();\n            return componentResult;\n        } catch (err) {\n            handleCancelled();\n            throw err;\n        }\n    }\n    _getData(fn) {\n        let cancelled = false;\n        const cancel = ()=>{\n            cancelled = true;\n        };\n        this.clc = cancel;\n        return fn().then((data)=>{\n            if (cancel === this.clc) {\n                this.clc = null;\n            }\n            if (cancelled) {\n                const err = new Error('Loading initial props cancelled');\n                err.cancelled = true;\n                throw err;\n            }\n            return data;\n        });\n    }\n    _getFlightData(dataHref) {\n        const { href: cacheKey  } = new URL(dataHref, window.location.href);\n        if (!this.isPreview && this.sdc[cacheKey]) {\n            return Promise.resolve({\n                fresh: false,\n                data: this.sdc[cacheKey]\n            });\n        }\n        return fetchNextData(dataHref, true, true, this.sdc, false).then((serialized)=>{\n            this.sdc[cacheKey] = serialized;\n            return {\n                fresh: true,\n                data: serialized\n            };\n        });\n    }\n    async _preflightRequest(options5) {\n        var ref;\n        const cleanedAs = delLocale(hasBasePath(options5.as) ? delBasePath(options5.as) : options5.as, this.locale);\n        const fns = await this.pageLoader.getMiddlewareList();\n        const requiresPreflight = fns.some(([middleware, isSSR])=>{\n            return (0, _routeMatcher).getRouteMatcher((0, _getMiddlewareRegex).getMiddlewareRegex(middleware, !isSSR))(cleanedAs);\n        });\n        if (!requiresPreflight) {\n            return {\n                type: 'next'\n            };\n        }\n        const preflight = await this._getPreflightData({\n            preflightHref: options5.as,\n            shouldCache: options5.cache\n        });\n        if ((ref = preflight.rewrite) === null || ref === void 0 ? void 0 : ref.startsWith('/')) {\n            const parsed = (0, _parseRelativeUrl).parseRelativeUrl((0, _normalizeLocalePath).normalizeLocalePath(hasBasePath(preflight.rewrite) ? delBasePath(preflight.rewrite) : preflight.rewrite, this.locales).pathname);\n            const fsPathname = (0, _normalizeTrailingSlash).removePathTrailingSlash(parsed.pathname);\n            let matchedPage;\n            let resolvedHref;\n            if (options5.pages.includes(fsPathname)) {\n                matchedPage = true;\n                resolvedHref = fsPathname;\n            } else {\n                resolvedHref = resolveDynamicRoute(fsPathname, options5.pages);\n                if (resolvedHref !== parsed.pathname && options5.pages.includes(resolvedHref)) {\n                    matchedPage = true;\n                }\n            }\n            return {\n                type: 'rewrite',\n                asPath: parsed.pathname,\n                parsedAs: parsed,\n                matchedPage,\n                resolvedHref\n            };\n        }\n        if (preflight.redirect) {\n            if (preflight.redirect.startsWith('/')) {\n                const cleanRedirect = (0, _normalizeTrailingSlash).removePathTrailingSlash((0, _normalizeLocalePath).normalizeLocalePath(hasBasePath(preflight.redirect) ? delBasePath(preflight.redirect) : preflight.redirect, this.locales).pathname);\n                const { url: newUrl , as: newAs  } = prepareUrlAs(this, cleanRedirect, cleanRedirect);\n                return {\n                    type: 'redirect',\n                    newUrl,\n                    newAs\n                };\n            }\n            return {\n                type: 'redirect',\n                destination: preflight.redirect\n            };\n        }\n        // For SSR requests, they will be handled like normal pages.\n        if (preflight.refresh && !preflight.ssr) {\n            return {\n                type: 'refresh'\n            };\n        }\n        return {\n            type: 'next'\n        };\n    }\n    _getPreflightData(params) {\n        const { preflightHref , shouldCache =false  } = params;\n        const { href: cacheKey  } = new URL(preflightHref, window.location.href);\n        if (false) {}\n        return fetch(preflightHref, {\n            method: 'HEAD',\n            credentials: 'same-origin',\n            headers: {\n                'x-middleware-preflight': '1'\n            }\n        }).then((res)=>{\n            if (!res.ok) {\n                throw new Error(`Failed to preflight request`);\n            }\n            return {\n                redirect: res.headers.get('Location'),\n                refresh: res.headers.has('x-middleware-refresh'),\n                rewrite: res.headers.get('x-middleware-rewrite'),\n                ssr: !!res.headers.get('x-middleware-ssr')\n            };\n        }).then((data)=>{\n            if (shouldCache) {\n                this.sde[cacheKey] = data;\n            }\n            return data;\n        }).catch((err)=>{\n            delete this.sde[cacheKey];\n            throw err;\n        });\n    }\n    getInitialProps(Component1, ctx) {\n        const { Component: App  } = this.components['/_app'];\n        const AppTree = this._wrapApp(App);\n        ctx.AppTree = AppTree;\n        return (0, _utils).loadGetInitialProps(App, {\n            AppTree,\n            Component: Component1,\n            router: this,\n            ctx\n        });\n    }\n    abortComponentLoad(as10, routeProps2) {\n        if (this.clc) {\n            Router.events.emit('routeChangeError', buildCancellationError(), as10, routeProps2);\n            this.clc();\n            this.clc = null;\n        }\n    }\n    notify(data, resetScroll1) {\n        return this.sub(data, this.components['/_app'].Component, resetScroll1);\n    }\n}\nRouter.events = (0, _mitt).default();\nexports[\"default\"] = Router; //# sourceMappingURL=router.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9zaGFyZWQvbGliL3JvdXRlci9yb3V0ZXIuanMuanMiLCJtYXBwaW5ncyI6IkFBQVk7QUFDWkEsOENBQTZDLENBQUM7SUFDMUNHLEtBQUssRUFBRSxJQUFJO0FBQ2YsQ0FBQyxFQUFDO0FBQ0ZELHVCQUF1QixHQUFHRSxlQUFlO0FBQ3pDRixpQkFBaUIsR0FBR0csU0FBUztBQUM3QkgsaUJBQWlCLEdBQUdJLFNBQVM7QUFDN0JKLG1CQUFtQixHQUFHSyxXQUFXO0FBQ2pDTCxtQkFBbUIsR0FBR00sV0FBVztBQUNqQ04sbUJBQW1CLEdBQUdPLFdBQVc7QUFDakNQLGtCQUFrQixHQUFHUSxVQUFVO0FBQy9CUixxQkFBcUIsR0FBR1MsYUFBYTtBQUNyQ1QsbUJBQW1CLEdBQUdVLFdBQVc7QUFDakNWLGtCQUFlLEdBQUcsSUFBSSxDQUFDLENBQUM7QUFDeEIsR0FBRyxDQUFDWSx1QkFBdUIsR0FBR0MsbUJBQU8sQ0FBQyxpSEFBMEM7QUFDaEYsR0FBRyxDQUFDQyxZQUFZLEdBQUdELG1CQUFPLENBQUMseUZBQThCO0FBQ3pELEdBQUcsQ0FBQ0UsUUFBUSxHQUFHQyxzQkFBc0IsQ0FBQ0gsbUJBQU8sQ0FBQywyRUFBdUI7QUFDckUsR0FBRyxDQUFDSSxvQkFBb0IsR0FBR0osbUJBQU8sQ0FBQyxvRkFBdUM7QUFDMUUsR0FBRyxDQUFDSyxvQkFBb0IsR0FBR0wsbUJBQU8sQ0FBQyxvRUFBK0I7QUFDbEUsR0FBRyxDQUFDTSxLQUFLLEdBQUdILHNCQUFzQixDQUFDSCxtQkFBTyxDQUFDLHdCQUFTO0FBQ3BELEdBQUcsQ0FBQ08sTUFBTSxHQUFHUCxtQkFBTyxDQUFDLHFDQUFVO0FBQy9CLEdBQUcsQ0FBQ1EsVUFBVSxHQUFHUixtQkFBTyxDQUFDLDhDQUFvQjtBQUM3QyxHQUFHLENBQUNTLGlCQUFpQixHQUFHVCxtQkFBTyxDQUFDLDhEQUE0QjtBQUM1RCxHQUFHLENBQUNVLFlBQVksR0FBR1YsbUJBQU8sQ0FBQyxnREFB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QztJQUNMLENBQUM7SUFDRHFDLE1BQU0sQ0FBQ3JHLElBQUksRUFBRTZJLFlBQVcsRUFBRSxDQUFDO1FBQ3ZCLE1BQU0sQ0FBQyxJQUFJLENBQUM5RSxHQUFHLENBQUMvRCxJQUFJLEVBQUUsSUFBSSxDQUFDa0QsVUFBVSxDQUFDLENBQU8sUUFBRWhDLFNBQVMsRUFBRTJILFlBQVc7SUFDekUsQ0FBQzs7QUFFTGhJLE1BQU0sQ0FBQzhDLE1BQU0sSUFBSSxDQUFDLEVBQUU5TSxLQUFLLEVBQUVSLE9BQU87QUFDbENYLGtCQUFlLEdBQUdtTCxNQUFNLENBRXhCLENBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvcm91dGVyLmpzPzEwZDEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmdldERvbWFpbkxvY2FsZSA9IGdldERvbWFpbkxvY2FsZTtcbmV4cG9ydHMuYWRkTG9jYWxlID0gYWRkTG9jYWxlO1xuZXhwb3J0cy5kZWxMb2NhbGUgPSBkZWxMb2NhbGU7XG5leHBvcnRzLmhhc0Jhc2VQYXRoID0gaGFzQmFzZVBhdGg7XG5leHBvcnRzLmFkZEJhc2VQYXRoID0gYWRkQmFzZVBhdGg7XG5leHBvcnRzLmRlbEJhc2VQYXRoID0gZGVsQmFzZVBhdGg7XG5leHBvcnRzLmlzTG9jYWxVUkwgPSBpc0xvY2FsVVJMO1xuZXhwb3J0cy5pbnRlcnBvbGF0ZUFzID0gaW50ZXJwb2xhdGVBcztcbmV4cG9ydHMucmVzb2x2ZUhyZWYgPSByZXNvbHZlSHJlZjtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfbm9ybWFsaXplVHJhaWxpbmdTbGFzaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi9jbGllbnQvbm9ybWFsaXplLXRyYWlsaW5nLXNsYXNoXCIpO1xudmFyIF9yb3V0ZUxvYWRlciA9IHJlcXVpcmUoXCIuLi8uLi8uLi9jbGllbnQvcm91dGUtbG9hZGVyXCIpO1xudmFyIF9pc0Vycm9yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vLi4vLi4vbGliL2lzLWVycm9yXCIpKTtcbnZhciBfZGVub3JtYWxpemVQYWdlUGF0aCA9IHJlcXVpcmUoXCIuLi8uLi8uLi9zZXJ2ZXIvZGVub3JtYWxpemUtcGFnZS1wYXRoXCIpO1xudmFyIF9ub3JtYWxpemVMb2NhbGVQYXRoID0gcmVxdWlyZShcIi4uL2kxOG4vbm9ybWFsaXplLWxvY2FsZS1wYXRoXCIpO1xudmFyIF9taXR0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vbWl0dFwiKSk7XG52YXIgX3V0aWxzID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xudmFyIF9pc0R5bmFtaWMgPSByZXF1aXJlKFwiLi91dGlscy9pcy1keW5hbWljXCIpO1xudmFyIF9wYXJzZVJlbGF0aXZlVXJsID0gcmVxdWlyZShcIi4vdXRpbHMvcGFyc2UtcmVsYXRpdmUtdXJsXCIpO1xudmFyIF9xdWVyeXN0cmluZyA9IHJlcXVpcmUoXCIuL3V0aWxzL3F1ZXJ5c3RyaW5nXCIpO1xudmFyIF9yZXNvbHZlUmV3cml0ZXMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3V0aWxzL3Jlc29sdmUtcmV3cml0ZXNcIikpO1xudmFyIF9yb3V0ZU1hdGNoZXIgPSByZXF1aXJlKFwiLi91dGlscy9yb3V0ZS1tYXRjaGVyXCIpO1xudmFyIF9yb3V0ZVJlZ2V4ID0gcmVxdWlyZShcIi4vdXRpbHMvcm91dGUtcmVnZXhcIik7XG52YXIgX2dldE1pZGRsZXdhcmVSZWdleCA9IHJlcXVpcmUoXCIuL3V0aWxzL2dldC1taWRkbGV3YXJlLXJlZ2V4XCIpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgICAgICBkZWZhdWx0OiBvYmpcbiAgICB9O1xufVxubGV0IGRldGVjdERvbWFpbkxvY2FsZTtcbmlmIChwcm9jZXNzLmVudi5fX05FWFRfSTE4Tl9TVVBQT1JUKSB7XG4gICAgZGV0ZWN0RG9tYWluTG9jYWxlID0gcmVxdWlyZSgnLi4vaTE4bi9kZXRlY3QtZG9tYWluLWxvY2FsZScpLmRldGVjdERvbWFpbkxvY2FsZTtcbn1cbmNvbnN0IGJhc2VQYXRoID0gcHJvY2Vzcy5lbnYuX19ORVhUX1JPVVRFUl9CQVNFUEFUSCB8fCAnJztcbmZ1bmN0aW9uIGJ1aWxkQ2FuY2VsbGF0aW9uRXJyb3IoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IEVycm9yKCdSb3V0ZSBDYW5jZWxsZWQnKSwge1xuICAgICAgICBjYW5jZWxsZWQ6IHRydWVcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGFkZFBhdGhQcmVmaXgocGF0aCwgcHJlZml4KSB7XG4gICAgaWYgKCFwYXRoLnN0YXJ0c1dpdGgoJy8nKSB8fCAhcHJlZml4KSB7XG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH1cbiAgICBjb25zdCBwYXRobmFtZSA9IHBhdGhOb1F1ZXJ5SGFzaChwYXRoKTtcbiAgICByZXR1cm4gKDAsIF9ub3JtYWxpemVUcmFpbGluZ1NsYXNoKS5ub3JtYWxpemVQYXRoVHJhaWxpbmdTbGFzaChgJHtwcmVmaXh9JHtwYXRobmFtZX1gKSArIHBhdGguc3Vic3RyKHBhdGhuYW1lLmxlbmd0aCk7XG59XG5mdW5jdGlvbiBnZXREb21haW5Mb2NhbGUocGF0aCwgbG9jYWxlLCBsb2NhbGVzLCBkb21haW5Mb2NhbGVzKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Ll9fTkVYVF9JMThOX1NVUFBPUlQpIHtcbiAgICAgICAgbG9jYWxlID0gbG9jYWxlIHx8ICgwLCBfbm9ybWFsaXplTG9jYWxlUGF0aCkubm9ybWFsaXplTG9jYWxlUGF0aChwYXRoLCBsb2NhbGVzKS5kZXRlY3RlZExvY2FsZTtcbiAgICAgICAgY29uc3QgZGV0ZWN0ZWREb21haW4gPSBkZXRlY3REb21haW5Mb2NhbGUoZG9tYWluTG9jYWxlcywgdW5kZWZpbmVkLCBsb2NhbGUpO1xuICAgICAgICBpZiAoZGV0ZWN0ZWREb21haW4pIHtcbiAgICAgICAgICAgIHJldHVybiBgaHR0cCR7ZGV0ZWN0ZWREb21haW4uaHR0cCA/ICcnIDogJ3MnfTovLyR7ZGV0ZWN0ZWREb21haW4uZG9tYWlufSR7YmFzZVBhdGggfHwgJyd9JHtsb2NhbGUgPT09IGRldGVjdGVkRG9tYWluLmRlZmF1bHRMb2NhbGUgPyAnJyA6IGAvJHtsb2NhbGV9YH0ke3BhdGh9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZExvY2FsZShwYXRoLCBsb2NhbGUsIGRlZmF1bHRMb2NhbGUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuX19ORVhUX0kxOE5fU1VQUE9SVCkge1xuICAgICAgICBjb25zdCBwYXRobmFtZSA9IHBhdGhOb1F1ZXJ5SGFzaChwYXRoKTtcbiAgICAgICAgY29uc3QgcGF0aExvd2VyID0gcGF0aG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgbG9jYWxlTG93ZXIgPSBsb2NhbGUgJiYgbG9jYWxlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHJldHVybiBsb2NhbGUgJiYgbG9jYWxlICE9PSBkZWZhdWx0TG9jYWxlICYmICFwYXRoTG93ZXIuc3RhcnRzV2l0aCgnLycgKyBsb2NhbGVMb3dlciArICcvJykgJiYgcGF0aExvd2VyICE9PSAnLycgKyBsb2NhbGVMb3dlciA/IGFkZFBhdGhQcmVmaXgocGF0aCwgJy8nICsgbG9jYWxlKSA6IHBhdGg7XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xufVxuZnVuY3Rpb24gZGVsTG9jYWxlKHBhdGgsIGxvY2FsZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5fX05FWFRfSTE4Tl9TVVBQT1JUKSB7XG4gICAgICAgIGNvbnN0IHBhdGhuYW1lID0gcGF0aE5vUXVlcnlIYXNoKHBhdGgpO1xuICAgICAgICBjb25zdCBwYXRoTG93ZXIgPSBwYXRobmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBsb2NhbGVMb3dlciA9IGxvY2FsZSAmJiBsb2NhbGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIGxvY2FsZSAmJiAocGF0aExvd2VyLnN0YXJ0c1dpdGgoJy8nICsgbG9jYWxlTG93ZXIgKyAnLycpIHx8IHBhdGhMb3dlciA9PT0gJy8nICsgbG9jYWxlTG93ZXIpID8gKHBhdGhuYW1lLmxlbmd0aCA9PT0gbG9jYWxlLmxlbmd0aCArIDEgPyAnLycgOiAnJykgKyBwYXRoLnN1YnN0cihsb2NhbGUubGVuZ3RoICsgMSkgOiBwYXRoO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aDtcbn1cbmZ1bmN0aW9uIHBhdGhOb1F1ZXJ5SGFzaChwYXRoKSB7XG4gICAgY29uc3QgcXVlcnlJbmRleCA9IHBhdGguaW5kZXhPZignPycpO1xuICAgIGNvbnN0IGhhc2hJbmRleCA9IHBhdGguaW5kZXhPZignIycpO1xuICAgIGlmIChxdWVyeUluZGV4ID4gLTEgfHwgaGFzaEluZGV4ID4gLTEpIHtcbiAgICAgICAgcGF0aCA9IHBhdGguc3Vic3RyaW5nKDAsIHF1ZXJ5SW5kZXggPiAtMSA/IHF1ZXJ5SW5kZXggOiBoYXNoSW5kZXgpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aDtcbn1cbmZ1bmN0aW9uIGhhc0Jhc2VQYXRoKHBhdGgpIHtcbiAgICBwYXRoID0gcGF0aE5vUXVlcnlIYXNoKHBhdGgpO1xuICAgIHJldHVybiBwYXRoID09PSBiYXNlUGF0aCB8fCBwYXRoLnN0YXJ0c1dpdGgoYmFzZVBhdGggKyAnLycpO1xufVxuZnVuY3Rpb24gYWRkQmFzZVBhdGgocGF0aCkge1xuICAgIC8vIHdlIG9ubHkgYWRkIHRoZSBiYXNlcGF0aCBvbiByZWxhdGl2ZSB1cmxzXG4gICAgcmV0dXJuIGFkZFBhdGhQcmVmaXgocGF0aCwgYmFzZVBhdGgpO1xufVxuZnVuY3Rpb24gZGVsQmFzZVBhdGgocGF0aCkge1xuICAgIHBhdGggPSBwYXRoLnNsaWNlKGJhc2VQYXRoLmxlbmd0aCk7XG4gICAgaWYgKCFwYXRoLnN0YXJ0c1dpdGgoJy8nKSkgcGF0aCA9IGAvJHtwYXRofWA7XG4gICAgcmV0dXJuIHBhdGg7XG59XG5mdW5jdGlvbiBpc0xvY2FsVVJMKHVybCkge1xuICAgIC8vIHByZXZlbnQgYSBoeWRyYXRpb24gbWlzbWF0Y2ggb24gaHJlZiBmb3IgdXJsIHdpdGggYW5jaG9yIHJlZnNcbiAgICBpZiAodXJsLnN0YXJ0c1dpdGgoJy8nKSB8fCB1cmwuc3RhcnRzV2l0aCgnIycpIHx8IHVybC5zdGFydHNXaXRoKCc/JykpIHJldHVybiB0cnVlO1xuICAgIHRyeSB7XG4gICAgICAgIC8vIGFic29sdXRlIHVybHMgY2FuIGJlIGxvY2FsIGlmIHRoZXkgYXJlIG9uIHRoZSBzYW1lIG9yaWdpblxuICAgICAgICBjb25zdCBsb2NhdGlvbk9yaWdpbiA9ICgwLCBfdXRpbHMpLmdldExvY2F0aW9uT3JpZ2luKCk7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkID0gbmV3IFVSTCh1cmwsIGxvY2F0aW9uT3JpZ2luKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVkLm9yaWdpbiA9PT0gbG9jYXRpb25PcmlnaW4gJiYgaGFzQmFzZVBhdGgocmVzb2x2ZWQucGF0aG5hbWUpO1xuICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGludGVycG9sYXRlQXMocm91dGUsIGFzUGF0aG5hbWUsIHF1ZXJ5KSB7XG4gICAgbGV0IGludGVycG9sYXRlZFJvdXRlID0gJyc7XG4gICAgY29uc3QgZHluYW1pY1JlZ2V4ID0gKDAsIF9yb3V0ZVJlZ2V4KS5nZXRSb3V0ZVJlZ2V4KHJvdXRlKTtcbiAgICBjb25zdCBkeW5hbWljR3JvdXBzID0gZHluYW1pY1JlZ2V4Lmdyb3VwcztcbiAgICBjb25zdCBkeW5hbWljTWF0Y2hlcyA9IC8vIFRyeSB0byBtYXRjaCB0aGUgZHluYW1pYyByb3V0ZSBhZ2FpbnN0IHRoZSBhc1BhdGhcbiAgICAoYXNQYXRobmFtZSAhPT0gcm91dGUgPyAoMCwgX3JvdXRlTWF0Y2hlcikuZ2V0Um91dGVNYXRjaGVyKGR5bmFtaWNSZWdleCkoYXNQYXRobmFtZSkgOiAnJykgfHwgLy8gRmFsbCBiYWNrIHRvIHJlYWRpbmcgdGhlIHZhbHVlcyBmcm9tIHRoZSBocmVmXG4gICAgLy8gVE9ETzogc2hvdWxkIHRoaXMgdGFrZSBwcmlvcml0eTsgYWxzbyBuZWVkIHRvIGNoYW5nZSBpbiB0aGUgcm91dGVyLlxuICAgIHF1ZXJ5O1xuICAgIGludGVycG9sYXRlZFJvdXRlID0gcm91dGU7XG4gICAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmtleXMoZHluYW1pY0dyb3Vwcyk7XG4gICAgaWYgKCFwYXJhbXMuZXZlcnkoKHBhcmFtKT0+e1xuICAgICAgICBsZXQgdmFsdWUgPSBkeW5hbWljTWF0Y2hlc1twYXJhbV0gfHwgJyc7XG4gICAgICAgIGNvbnN0IHsgcmVwZWF0ICwgb3B0aW9uYWwgIH0gPSBkeW5hbWljR3JvdXBzW3BhcmFtXTtcbiAgICAgICAgLy8gc3VwcG9ydCBzaW5nbGUtbGV2ZWwgY2F0Y2gtYWxsXG4gICAgICAgIC8vIFRPRE86IG1vcmUgcm9idXN0IGhhbmRsaW5nIGZvciB1c2VyLWVycm9yIChwYXNzaW5nIGAvYClcbiAgICAgICAgbGV0IHJlcGxhY2VkID0gYFske3JlcGVhdCA/ICcuLi4nIDogJyd9JHtwYXJhbX1dYDtcbiAgICAgICAgaWYgKG9wdGlvbmFsKSB7XG4gICAgICAgICAgICByZXBsYWNlZCA9IGAkeyF2YWx1ZSA/ICcvJyA6ICcnfVske3JlcGxhY2VkfV1gO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBlYXQgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpKSB2YWx1ZSA9IFtcbiAgICAgICAgICAgIHZhbHVlXG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiAob3B0aW9uYWwgfHwgcGFyYW0gaW4gZHluYW1pY01hdGNoZXMpICYmIC8vIEludGVycG9sYXRlIGdyb3VwIGludG8gZGF0YSBVUkwgaWYgcHJlc2VudFxuICAgICAgICAoaW50ZXJwb2xhdGVkUm91dGUgPSBpbnRlcnBvbGF0ZWRSb3V0ZS5yZXBsYWNlKHJlcGxhY2VkLCByZXBlYXQgPyB2YWx1ZS5tYXAoLy8gdGhlc2UgdmFsdWVzIHNob3VsZCBiZSBmdWxseSBlbmNvZGVkIGluc3RlYWQgb2YganVzdFxuICAgICAgICAvLyBwYXRoIGRlbGltaXRlciBlc2NhcGVkIHNpbmNlIHRoZXkgYXJlIGJlaW5nIGluc2VydGVkXG4gICAgICAgIC8vIGludG8gdGhlIFVSTCBhbmQgd2UgZXhwZWN0IFVSTCBlbmNvZGVkIHNlZ21lbnRzXG4gICAgICAgIC8vIHdoZW4gcGFyc2luZyBkeW5hbWljIHJvdXRlIHBhcmFtc1xuICAgICAgICAoc2VnbWVudCk9PmVuY29kZVVSSUNvbXBvbmVudChzZWdtZW50KVxuICAgICAgICApLmpvaW4oJy8nKSA6IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpIHx8ICcvJyk7XG4gICAgfSkpIHtcbiAgICAgICAgaW50ZXJwb2xhdGVkUm91dGUgPSAnJyAvLyBkaWQgbm90IHNhdGlzZnkgYWxsIHJlcXVpcmVtZW50c1xuICAgICAgICA7XG4gICAgLy8gbi5iLiBXZSBpZ25vcmUgdGhpcyBlcnJvciBiZWNhdXNlIHdlIGhhbmRsZSB3YXJuaW5nIGZvciB0aGlzIGNhc2UgaW5cbiAgICAvLyBkZXZlbG9wbWVudCBpbiB0aGUgYDxMaW5rPmAgY29tcG9uZW50IGRpcmVjdGx5LlxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHJlc3VsdDogaW50ZXJwb2xhdGVkUm91dGVcbiAgICB9O1xufVxuZnVuY3Rpb24gb21pdFBhcm1zRnJvbVF1ZXJ5KHF1ZXJ5LCBwYXJhbXMpIHtcbiAgICBjb25zdCBmaWx0ZXJlZFF1ZXJ5ID0ge1xuICAgIH07XG4gICAgT2JqZWN0LmtleXMocXVlcnkpLmZvckVhY2goKGtleSk9PntcbiAgICAgICAgaWYgKCFwYXJhbXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgZmlsdGVyZWRRdWVyeVtrZXldID0gcXVlcnlba2V5XTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBmaWx0ZXJlZFF1ZXJ5O1xufVxuZnVuY3Rpb24gcmVzb2x2ZUhyZWYocm91dGVyLCBocmVmLCByZXNvbHZlQXMpIHtcbiAgICAvLyB3ZSB1c2UgYSBkdW1teSBiYXNlIHVybCBmb3IgcmVsYXRpdmUgdXJsc1xuICAgIGxldCBiYXNlO1xuICAgIGxldCB1cmxBc1N0cmluZyA9IHR5cGVvZiBocmVmID09PSAnc3RyaW5nJyA/IGhyZWYgOiAoMCwgX3V0aWxzKS5mb3JtYXRXaXRoVmFsaWRhdGlvbihocmVmKTtcbiAgICAvLyByZXBlYXRlZCBzbGFzaGVzIGFuZCBiYWNrc2xhc2hlcyBpbiB0aGUgVVJMIGFyZSBjb25zaWRlcmVkXG4gICAgLy8gaW52YWxpZCBhbmQgd2lsbCBuZXZlciBtYXRjaCBhIE5leHQuanMgcGFnZS9maWxlXG4gICAgY29uc3QgdXJsUHJvdG9NYXRjaCA9IHVybEFzU3RyaW5nLm1hdGNoKC9eW2EtekEtWl17MSx9OlxcL1xcLy8pO1xuICAgIGNvbnN0IHVybEFzU3RyaW5nTm9Qcm90byA9IHVybFByb3RvTWF0Y2ggPyB1cmxBc1N0cmluZy5zdWJzdHIodXJsUHJvdG9NYXRjaFswXS5sZW5ndGgpIDogdXJsQXNTdHJpbmc7XG4gICAgY29uc3QgdXJsUGFydHMgPSB1cmxBc1N0cmluZ05vUHJvdG8uc3BsaXQoJz8nKTtcbiAgICBpZiAoKHVybFBhcnRzWzBdIHx8ICcnKS5tYXRjaCgvKFxcL1xcL3xcXFxcKS8pKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEludmFsaWQgaHJlZiBwYXNzZWQgdG8gbmV4dC9yb3V0ZXI6ICR7dXJsQXNTdHJpbmd9LCByZXBlYXRlZCBmb3J3YXJkLXNsYXNoZXMgKC8vKSBvciBiYWNrc2xhc2hlcyBcXFxcIGFyZSBub3QgdmFsaWQgaW4gdGhlIGhyZWZgKTtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZFVybCA9ICgwLCBfdXRpbHMpLm5vcm1hbGl6ZVJlcGVhdGVkU2xhc2hlcyh1cmxBc1N0cmluZ05vUHJvdG8pO1xuICAgICAgICB1cmxBc1N0cmluZyA9ICh1cmxQcm90b01hdGNoID8gdXJsUHJvdG9NYXRjaFswXSA6ICcnKSArIG5vcm1hbGl6ZWRVcmw7XG4gICAgfVxuICAgIC8vIFJldHVybiBiZWNhdXNlIGl0IGNhbm5vdCBiZSByb3V0ZWQgYnkgdGhlIE5leHQuanMgcm91dGVyXG4gICAgaWYgKCFpc0xvY2FsVVJMKHVybEFzU3RyaW5nKSkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZUFzID8gW1xuICAgICAgICAgICAgdXJsQXNTdHJpbmdcbiAgICAgICAgXSA6IHVybEFzU3RyaW5nO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBiYXNlID0gbmV3IFVSTCh1cmxBc1N0cmluZy5zdGFydHNXaXRoKCcjJykgPyByb3V0ZXIuYXNQYXRoIDogcm91dGVyLnBhdGhuYW1lLCAnaHR0cDovL24nKTtcbiAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgIC8vIGZhbGxiYWNrIHRvIC8gZm9yIGludmFsaWQgYXNQYXRoIHZhbHVlcyBlLmcuIC8vXG4gICAgICAgIGJhc2UgPSBuZXcgVVJMKCcvJywgJ2h0dHA6Ly9uJyk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZpbmFsVXJsID0gbmV3IFVSTCh1cmxBc1N0cmluZywgYmFzZSk7XG4gICAgICAgIGZpbmFsVXJsLnBhdGhuYW1lID0gKDAsIF9ub3JtYWxpemVUcmFpbGluZ1NsYXNoKS5ub3JtYWxpemVQYXRoVHJhaWxpbmdTbGFzaChmaW5hbFVybC5wYXRobmFtZSk7XG4gICAgICAgIGxldCBpbnRlcnBvbGF0ZWRBcyA9ICcnO1xuICAgICAgICBpZiAoKDAsIF9pc0R5bmFtaWMpLmlzRHluYW1pY1JvdXRlKGZpbmFsVXJsLnBhdGhuYW1lKSAmJiBmaW5hbFVybC5zZWFyY2hQYXJhbXMgJiYgcmVzb2x2ZUFzKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeSA9ICgwLCBfcXVlcnlzdHJpbmcpLnNlYXJjaFBhcmFtc1RvVXJsUXVlcnkoZmluYWxVcmwuc2VhcmNoUGFyYW1zKTtcbiAgICAgICAgICAgIGNvbnN0IHsgcmVzdWx0ICwgcGFyYW1zICB9ID0gaW50ZXJwb2xhdGVBcyhmaW5hbFVybC5wYXRobmFtZSwgZmluYWxVcmwucGF0aG5hbWUsIHF1ZXJ5KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZWRBcyA9ICgwLCBfdXRpbHMpLmZvcm1hdFdpdGhWYWxpZGF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aG5hbWU6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgaGFzaDogZmluYWxVcmwuaGFzaCxcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IG9taXRQYXJtc0Zyb21RdWVyeShxdWVyeSwgcGFyYW1zKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHRoZSBvcmlnaW4gZGlkbid0IGNoYW5nZSwgaXQgbWVhbnMgd2UgcmVjZWl2ZWQgYSByZWxhdGl2ZSBocmVmXG4gICAgICAgIGNvbnN0IHJlc29sdmVkSHJlZiA9IGZpbmFsVXJsLm9yaWdpbiA9PT0gYmFzZS5vcmlnaW4gPyBmaW5hbFVybC5ocmVmLnNsaWNlKGZpbmFsVXJsLm9yaWdpbi5sZW5ndGgpIDogZmluYWxVcmwuaHJlZjtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVBcyA/IFtcbiAgICAgICAgICAgIHJlc29sdmVkSHJlZixcbiAgICAgICAgICAgIGludGVycG9sYXRlZEFzIHx8IHJlc29sdmVkSHJlZlxuICAgICAgICBdIDogcmVzb2x2ZWRIcmVmO1xuICAgIH0gY2F0Y2ggKF8xKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlQXMgPyBbXG4gICAgICAgICAgICB1cmxBc1N0cmluZ1xuICAgICAgICBdIDogdXJsQXNTdHJpbmc7XG4gICAgfVxufVxuZnVuY3Rpb24gc3RyaXBPcmlnaW4odXJsKSB7XG4gICAgY29uc3Qgb3JpZ2luID0gKDAsIF91dGlscykuZ2V0TG9jYXRpb25PcmlnaW4oKTtcbiAgICByZXR1cm4gdXJsLnN0YXJ0c1dpdGgob3JpZ2luKSA/IHVybC5zdWJzdHJpbmcob3JpZ2luLmxlbmd0aCkgOiB1cmw7XG59XG5mdW5jdGlvbiBwcmVwYXJlVXJsQXMocm91dGVyLCB1cmwsIGFzKSB7XG4gICAgLy8gSWYgdXJsIGFuZCBhcyBwcm92aWRlZCBhcyBhbiBvYmplY3QgcmVwcmVzZW50YXRpb24sXG4gICAgLy8gd2UnbGwgZm9ybWF0IHRoZW0gaW50byB0aGUgc3RyaW5nIHZlcnNpb24gaGVyZS5cbiAgICBsZXQgW3Jlc29sdmVkSHJlZiwgcmVzb2x2ZWRBc10gPSByZXNvbHZlSHJlZihyb3V0ZXIsIHVybCwgdHJ1ZSk7XG4gICAgY29uc3Qgb3JpZ2luID0gKDAsIF91dGlscykuZ2V0TG9jYXRpb25PcmlnaW4oKTtcbiAgICBjb25zdCBocmVmSGFkT3JpZ2luID0gcmVzb2x2ZWRIcmVmLnN0YXJ0c1dpdGgob3JpZ2luKTtcbiAgICBjb25zdCBhc0hhZE9yaWdpbiA9IHJlc29sdmVkQXMgJiYgcmVzb2x2ZWRBcy5zdGFydHNXaXRoKG9yaWdpbik7XG4gICAgcmVzb2x2ZWRIcmVmID0gc3RyaXBPcmlnaW4ocmVzb2x2ZWRIcmVmKTtcbiAgICByZXNvbHZlZEFzID0gcmVzb2x2ZWRBcyA/IHN0cmlwT3JpZ2luKHJlc29sdmVkQXMpIDogcmVzb2x2ZWRBcztcbiAgICBjb25zdCBwcmVwYXJlZFVybCA9IGhyZWZIYWRPcmlnaW4gPyByZXNvbHZlZEhyZWYgOiBhZGRCYXNlUGF0aChyZXNvbHZlZEhyZWYpO1xuICAgIGNvbnN0IHByZXBhcmVkQXMgPSBhcyA/IHN0cmlwT3JpZ2luKHJlc29sdmVIcmVmKHJvdXRlciwgYXMpKSA6IHJlc29sdmVkQXMgfHwgcmVzb2x2ZWRIcmVmO1xuICAgIHJldHVybiB7XG4gICAgICAgIHVybDogcHJlcGFyZWRVcmwsXG4gICAgICAgIGFzOiBhc0hhZE9yaWdpbiA/IHByZXBhcmVkQXMgOiBhZGRCYXNlUGF0aChwcmVwYXJlZEFzKVxuICAgIH07XG59XG5mdW5jdGlvbiByZXNvbHZlRHluYW1pY1JvdXRlKHBhdGhuYW1lLCBwYWdlcykge1xuICAgIGNvbnN0IGNsZWFuUGF0aG5hbWUgPSAoMCwgX25vcm1hbGl6ZVRyYWlsaW5nU2xhc2gpLnJlbW92ZVBhdGhUcmFpbGluZ1NsYXNoKCgwLCBfZGVub3JtYWxpemVQYWdlUGF0aCkuZGVub3JtYWxpemVQYWdlUGF0aChwYXRobmFtZSkpO1xuICAgIGlmIChjbGVhblBhdGhuYW1lID09PSAnLzQwNCcgfHwgY2xlYW5QYXRobmFtZSA9PT0gJy9fZXJyb3InKSB7XG4gICAgICAgIHJldHVybiBwYXRobmFtZTtcbiAgICB9XG4gICAgLy8gaGFuZGxlIHJlc29sdmluZyBocmVmIGZvciBkeW5hbWljIHJvdXRlc1xuICAgIGlmICghcGFnZXMuaW5jbHVkZXMoY2xlYW5QYXRobmFtZSkpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGFycmF5LWNhbGxiYWNrLXJldHVyblxuICAgICAgICBwYWdlcy5zb21lKChwYWdlKT0+e1xuICAgICAgICAgICAgaWYgKCgwLCBfaXNEeW5hbWljKS5pc0R5bmFtaWNSb3V0ZShwYWdlKSAmJiAoMCwgX3JvdXRlUmVnZXgpLmdldFJvdXRlUmVnZXgocGFnZSkucmUudGVzdChjbGVhblBhdGhuYW1lKSkge1xuICAgICAgICAgICAgICAgIHBhdGhuYW1lID0gcGFnZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiAoMCwgX25vcm1hbGl6ZVRyYWlsaW5nU2xhc2gpLnJlbW92ZVBhdGhUcmFpbGluZ1NsYXNoKHBhdGhuYW1lKTtcbn1cbmNvbnN0IG1hbnVhbFNjcm9sbFJlc3RvcmF0aW9uID0gcHJvY2Vzcy5lbnYuX19ORVhUX1NDUk9MTF9SRVNUT1JBVElPTiAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiAnc2Nyb2xsUmVzdG9yYXRpb24nIGluIHdpbmRvdy5oaXN0b3J5ICYmICEhZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IHYgPSAnX19uZXh0JztcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlcXVlbmNlc1xuICAgICAgICByZXR1cm4gc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSh2LCB2KSwgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSh2KSwgdHJ1ZTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgfVxufSgpO1xuY29uc3QgU1NHX0RBVEFfTk9UX0ZPVU5EID0gU3ltYm9sKCdTU0dfREFUQV9OT1RfRk9VTkQnKTtcbmZ1bmN0aW9uIGZldGNoUmV0cnkodXJsLCBhdHRlbXB0cywgb3B0cykge1xuICAgIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICAgICAgLy8gQ29va2llcyBhcmUgcmVxdWlyZWQgdG8gYmUgcHJlc2VudCBmb3IgTmV4dC5qcycgU1NHIFwiUHJldmlldyBNb2RlXCIuXG4gICAgICAgIC8vIENvb2tpZXMgbWF5IGFsc28gYmUgcmVxdWlyZWQgZm9yIGBnZXRTZXJ2ZXJTaWRlUHJvcHNgLlxuICAgICAgICAvL1xuICAgICAgICAvLyA+IGBmZXRjaGAgd29u4oCZdCBzZW5kIGNvb2tpZXMsIHVubGVzcyB5b3Ugc2V0IHRoZSBjcmVkZW50aWFscyBpbml0XG4gICAgICAgIC8vID4gb3B0aW9uLlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRmV0Y2hfQVBJL1VzaW5nX0ZldGNoXG4gICAgICAgIC8vXG4gICAgICAgIC8vID4gRm9yIG1heGltdW0gYnJvd3NlciBjb21wYXRpYmlsaXR5IHdoZW4gaXQgY29tZXMgdG8gc2VuZGluZyAmXG4gICAgICAgIC8vID4gcmVjZWl2aW5nIGNvb2tpZXMsIGFsd2F5cyBzdXBwbHkgdGhlIGBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJ2BcbiAgICAgICAgLy8gPiBvcHRpb24gaW5zdGVhZCBvZiByZWx5aW5nIG9uIHRoZSBkZWZhdWx0LlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ2l0aHViL2ZldGNoI2NhdmVhdHNcbiAgICAgICAgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbidcbiAgICB9KS50aGVuKChyZXMpPT57XG4gICAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgICAgICBpZiAoYXR0ZW1wdHMgPiAxICYmIHJlcy5zdGF0dXMgPj0gNTAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoUmV0cnkodXJsLCBhdHRlbXB0cyAtIDEsIG9wdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpLnRoZW4oKGRhdGEpPT57XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLm5vdEZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdEZvdW5kOiBTU0dfREFUQV9OT1RfRk9VTkRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBzdGF0aWMgcHJvcHNgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgc3RhdGljIHByb3BzYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9wdHMudGV4dCA/IHJlcy50ZXh0KCkgOiByZXMuanNvbigpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZmV0Y2hOZXh0RGF0YShkYXRhSHJlZiwgaXNTZXJ2ZXJSZW5kZXIsIHRleHQsIGluZmxpZ2h0Q2FjaGUsIHBlcnNpc3RDYWNoZSkge1xuICAgIGNvbnN0IHsgaHJlZjogY2FjaGVLZXkgIH0gPSBuZXcgVVJMKGRhdGFIcmVmLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgaWYgKGluZmxpZ2h0Q2FjaGVbY2FjaGVLZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGluZmxpZ2h0Q2FjaGVbY2FjaGVLZXldO1xuICAgIH1cbiAgICByZXR1cm4gaW5mbGlnaHRDYWNoZVtjYWNoZUtleV0gPSBmZXRjaFJldHJ5KGRhdGFIcmVmLCBpc1NlcnZlclJlbmRlciA/IDMgOiAxLCB7XG4gICAgICAgIHRleHRcbiAgICB9KS5jYXRjaCgoZXJyKT0+e1xuICAgICAgICAvLyBXZSBzaG91bGQgb25seSB0cmlnZ2VyIGEgc2VydmVyLXNpZGUgdHJhbnNpdGlvbiBpZiB0aGlzIHdhcyBjYXVzZWRcbiAgICAgICAgLy8gb24gYSBjbGllbnQtc2lkZSB0cmFuc2l0aW9uLiBPdGhlcndpc2UsIHdlJ2QgZ2V0IGludG8gYW4gaW5maW5pdGVcbiAgICAgICAgLy8gbG9vcC5cbiAgICAgICAgaWYgKCFpc1NlcnZlclJlbmRlcikge1xuICAgICAgICAgICAgKDAsIF9yb3V0ZUxvYWRlcikubWFya0Fzc2V0RXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnI7XG4gICAgfSkudGhlbigoZGF0YSk9PntcbiAgICAgICAgaWYgKCFwZXJzaXN0Q2FjaGUgfHwgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgZGVsZXRlIGluZmxpZ2h0Q2FjaGVbY2FjaGVLZXldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pLmNhdGNoKChlcnIpPT57XG4gICAgICAgIGRlbGV0ZSBpbmZsaWdodENhY2hlW2NhY2hlS2V5XTtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH0pO1xufVxuY2xhc3MgUm91dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihwYXRobmFtZSwgcXVlcnksIGFzLCB7IGluaXRpYWxQcm9wcyAsIHBhZ2VMb2FkZXIgLCBBcHAgLCB3cmFwQXBwICwgQ29tcG9uZW50ICwgZXJyICwgc3Vic2NyaXB0aW9uICwgaXNGYWxsYmFjayAsIGxvY2FsZSAsIGxvY2FsZXMgLCBkZWZhdWx0TG9jYWxlICwgZG9tYWluTG9jYWxlcyAsIGlzUHJldmlldyAgfSl7XG4gICAgICAgIC8vIFN0YXRpYyBEYXRhIENhY2hlXG4gICAgICAgIHRoaXMuc2RjID0ge1xuICAgICAgICB9O1xuICAgICAgICAvLyBJbi1mbGlnaHQgU2VydmVyIERhdGEgUmVxdWVzdHMsIGZvciBkZWR1cGluZ1xuICAgICAgICB0aGlzLnNkciA9IHtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gSW4tZmxpZ2h0IG1pZGRsZXdhcmUgcHJlZmxpZ2h0IHJlcXVlc3RzXG4gICAgICAgIHRoaXMuc2RlID0ge1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9pZHggPSAwO1xuICAgICAgICB0aGlzLm9uUG9wU3RhdGUgPSAoZSk9PntcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gZS5zdGF0ZTtcbiAgICAgICAgICAgIGlmICghc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBnZXQgc3RhdGUgYXMgdW5kZWZpbmVkIGZvciB0d28gcmVhc29ucy5cbiAgICAgICAgICAgICAgICAvLyAgMS4gV2l0aCBvbGRlciBzYWZhcmkgKDwgOCkgYW5kIG9sZGVyIGNocm9tZSAoPCAzNClcbiAgICAgICAgICAgICAgICAvLyAgMi4gV2hlbiB0aGUgVVJMIGNoYW5nZWQgd2l0aCAjXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBJbiB0aGUgYm90aCBjYXNlcywgd2UgZG9uJ3QgbmVlZCB0byBwcm9jZWVkIGFuZCBjaGFuZ2UgdGhlIHJvdXRlLlxuICAgICAgICAgICAgICAgIC8vIChhcyBpdCdzIGFscmVhZHkgY2hhbmdlZClcbiAgICAgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIHNpbXBseSByZXBsYWNlIHRoZSBzdGF0ZSB3aXRoIHRoZSBuZXcgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICAvLyBBY3R1YWxseSwgZm9yICgxKSB3ZSBkb24ndCBuZWVkIHRvIG5vdGhpbmcuIEJ1dCBpdCdzIGhhcmQgdG8gZGV0ZWN0IHRoYXQgZXZlbnQuXG4gICAgICAgICAgICAgICAgLy8gU28sIGRvaW5nIHRoZSBmb2xsb3dpbmcgZm9yICgxKSBkb2VzIG5vIGhhcm0uXG4gICAgICAgICAgICAgICAgY29uc3QgeyBwYXRobmFtZSAsIHF1ZXJ5ICB9ID0gdGhpcztcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKCdyZXBsYWNlU3RhdGUnLCAoMCwgX3V0aWxzKS5mb3JtYXRXaXRoVmFsaWRhdGlvbih7XG4gICAgICAgICAgICAgICAgICAgIHBhdGhuYW1lOiBhZGRCYXNlUGF0aChwYXRobmFtZSksXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5XG4gICAgICAgICAgICAgICAgfSksICgwLCBfdXRpbHMpLmdldFVSTCgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXN0YXRlLl9fTikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBmb3JjZWRTY3JvbGw7XG4gICAgICAgICAgICBjb25zdCB7IHVybCAsIGFzICwgb3B0aW9ucyAsIGlkeCAgfSA9IHN0YXRlO1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Ll9fTkVYVF9TQ1JPTExfUkVTVE9SQVRJT04pIHtcbiAgICAgICAgICAgICAgICBpZiAobWFudWFsU2Nyb2xsUmVzdG9yYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lkeCAhPT0gaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTbmFwc2hvdCBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnX19uZXh0X3Njcm9sbF8nICsgdGhpcy5faWR4LCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHNlbGYucGFnZVhPZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHNlbGYucGFnZVlPZmZzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXN0b3JlIG9sZCBzY3JvbGwgcG9zaXRpb246XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdfX25leHRfc2Nyb2xsXycgKyBpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmNlZFNjcm9sbCA9IEpTT04ucGFyc2Uodik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2VkU2Nyb2xsID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2lkeCA9IGlkeDtcbiAgICAgICAgICAgIGNvbnN0IHsgcGF0aG5hbWUgIH0gPSAoMCwgX3BhcnNlUmVsYXRpdmVVcmwpLnBhcnNlUmVsYXRpdmVVcmwodXJsKTtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBkb24ndCByZS1yZW5kZXIgb24gaW5pdGlhbCBsb2FkLFxuICAgICAgICAgICAgLy8gY2FuIGJlIGNhdXNlZCBieSBuYXZpZ2F0aW5nIGJhY2sgZnJvbSBhbiBleHRlcm5hbCBzaXRlXG4gICAgICAgICAgICBpZiAodGhpcy5pc1NzciAmJiBhcyA9PT0gdGhpcy5hc1BhdGggJiYgcGF0aG5hbWUgPT09IHRoaXMucGF0aG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGUgZG93bnN0cmVhbSBhcHBsaWNhdGlvbiByZXR1cm5zIGZhbHN5LCByZXR1cm4uXG4gICAgICAgICAgICAvLyBUaGV5IHdpbGwgdGhlbiBiZSByZXNwb25zaWJsZSBmb3IgaGFuZGxpbmcgdGhlIGV2ZW50LlxuICAgICAgICAgICAgaWYgKHRoaXMuX2JwcyAmJiAhdGhpcy5fYnBzKHN0YXRlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2hhbmdlKCdyZXBsYWNlU3RhdGUnLCB1cmwsIGFzLCBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIH0sIG9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICBzaGFsbG93OiBvcHRpb25zLnNoYWxsb3cgJiYgdGhpcy5fc2hhbGxvdyxcbiAgICAgICAgICAgICAgICBsb2NhbGU6IG9wdGlvbnMubG9jYWxlIHx8IHRoaXMuZGVmYXVsdExvY2FsZVxuICAgICAgICAgICAgfSksIGZvcmNlZFNjcm9sbCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIHJlcHJlc2VudHMgdGhlIGN1cnJlbnQgY29tcG9uZW50IGtleVxuICAgICAgICB0aGlzLnJvdXRlID0gKDAsIF9ub3JtYWxpemVUcmFpbGluZ1NsYXNoKS5yZW1vdmVQYXRoVHJhaWxpbmdTbGFzaChwYXRobmFtZSk7XG4gICAgICAgIC8vIHNldCB1cCB0aGUgY29tcG9uZW50IGNhY2hlIChieSByb3V0ZSBrZXlzKVxuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSB7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFdlIHNob3VsZCBub3Qga2VlcCB0aGUgY2FjaGUsIGlmIHRoZXJlJ3MgYW4gZXJyb3JcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB0aGlzIGNhdXNlIGlzc3VlcyB3aGVuIHdoZW4gZ29pbmcgYmFjayBhbmRcbiAgICAgICAgLy8gY29tZSBhZ2FpbiB0byB0aGUgZXJyb3JlZCBwYWdlLlxuICAgICAgICBpZiAocGF0aG5hbWUgIT09ICcvX2Vycm9yJykge1xuICAgICAgICAgICAgdmFyIHJlZjtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50c1t0aGlzLnJvdXRlXSA9IHtcbiAgICAgICAgICAgICAgICBDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgaW5pdGlhbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwcm9wczogaW5pdGlhbFByb3BzLFxuICAgICAgICAgICAgICAgIGVycixcbiAgICAgICAgICAgICAgICBfX05fU1NHOiBpbml0aWFsUHJvcHMgJiYgaW5pdGlhbFByb3BzLl9fTl9TU0csXG4gICAgICAgICAgICAgICAgX19OX1NTUDogaW5pdGlhbFByb3BzICYmIGluaXRpYWxQcm9wcy5fX05fU1NQLFxuICAgICAgICAgICAgICAgIF9fTl9SU0M6ICEhKChyZWYgPSBDb21wb25lbnQpID09PSBudWxsIHx8IHJlZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVmLl9fbmV4dF9yc2NfXylcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb21wb25lbnRzWycvX2FwcCddID0ge1xuICAgICAgICAgICAgQ29tcG9uZW50OiBBcHAsXG4gICAgICAgICAgICBzdHlsZVNoZWV0czogW11cbiAgICAgICAgfTtcbiAgICAgICAgLy8gQmFja3dhcmRzIGNvbXBhdCBmb3IgUm91dGVyLnJvdXRlci5ldmVudHNcbiAgICAgICAgLy8gVE9ETzogU2hvdWxkIGJlIHJlbW92ZSB0aGUgZm9sbG93aW5nIG1ham9yIHZlcnNpb24gYXMgaXQgd2FzIG5ldmVyIGRvY3VtZW50ZWRcbiAgICAgICAgdGhpcy5ldmVudHMgPSBSb3V0ZXIuZXZlbnRzO1xuICAgICAgICB0aGlzLnBhZ2VMb2FkZXIgPSBwYWdlTG9hZGVyO1xuICAgICAgICB0aGlzLnBhdGhuYW1lID0gcGF0aG5hbWU7XG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICAgICAgLy8gaWYgYXV0byBwcmVyZW5kZXJlZCBhbmQgZHluYW1pYyByb3V0ZSB3YWl0IHRvIHVwZGF0ZSBhc1BhdGhcbiAgICAgICAgLy8gdW50aWwgYWZ0ZXIgbW91bnQgdG8gcHJldmVudCBoeWRyYXRpb24gbWlzbWF0Y2hcbiAgICAgICAgY29uc3QgYXV0b0V4cG9ydER5bmFtaWMgPSAoMCwgX2lzRHluYW1pYykuaXNEeW5hbWljUm91dGUocGF0aG5hbWUpICYmIHNlbGYuX19ORVhUX0RBVEFfXy5hdXRvRXhwb3J0O1xuICAgICAgICB0aGlzLmFzUGF0aCA9IGF1dG9FeHBvcnREeW5hbWljID8gcGF0aG5hbWUgOiBhcztcbiAgICAgICAgdGhpcy5iYXNlUGF0aCA9IGJhc2VQYXRoO1xuICAgICAgICB0aGlzLnN1YiA9IHN1YnNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5jbGMgPSBudWxsO1xuICAgICAgICB0aGlzLl93cmFwQXBwID0gd3JhcEFwcDtcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGlnbm9yZSBleHRyYSBwb3BTdGF0ZSBpbiBzYWZhcmkgb24gbmF2aWdhdGluZ1xuICAgICAgICAvLyBiYWNrIGZyb20gZXh0ZXJuYWwgc2l0ZVxuICAgICAgICB0aGlzLmlzU3NyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pc0ZhbGxiYWNrID0gaXNGYWxsYmFjaztcbiAgICAgICAgdGhpcy5pc1JlYWR5ID0gISEoc2VsZi5fX05FWFRfREFUQV9fLmdzc3AgfHwgc2VsZi5fX05FWFRfREFUQV9fLmdpcCB8fCBzZWxmLl9fTkVYVF9EQVRBX18uYXBwR2lwICYmICFzZWxmLl9fTkVYVF9EQVRBX18uZ3NwIHx8ICFhdXRvRXhwb3J0RHluYW1pYyAmJiAhc2VsZi5sb2NhdGlvbi5zZWFyY2ggJiYgIXByb2Nlc3MuZW52Ll9fTkVYVF9IQVNfUkVXUklURVMpO1xuICAgICAgICB0aGlzLmlzUHJldmlldyA9ICEhaXNQcmV2aWV3O1xuICAgICAgICB0aGlzLmlzTG9jYWxlRG9tYWluID0gZmFsc2U7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5fX05FWFRfSTE4Tl9TVVBQT1JUKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsZSA9IGxvY2FsZTtcbiAgICAgICAgICAgIHRoaXMubG9jYWxlcyA9IGxvY2FsZXM7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRMb2NhbGUgPSBkZWZhdWx0TG9jYWxlO1xuICAgICAgICAgICAgdGhpcy5kb21haW5Mb2NhbGVzID0gZG9tYWluTG9jYWxlcztcbiAgICAgICAgICAgIHRoaXMuaXNMb2NhbGVEb21haW4gPSAhIWRldGVjdERvbWFpbkxvY2FsZShkb21haW5Mb2NhbGVzLCBzZWxmLmxvY2F0aW9uLmhvc3RuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBcImFzXCIgZG9lc24ndCBzdGFydCB3aXRoIGRvdWJsZSBzbGFzaGVzIG9yIGVsc2UgaXQgY2FuXG4gICAgICAgICAgICAvLyB0aHJvdyBhbiBlcnJvciBhcyBpdCdzIGNvbnNpZGVyZWQgaW52YWxpZFxuICAgICAgICAgICAgaWYgKGFzLnN1YnN0cigwLCAyKSAhPT0gJy8vJykge1xuICAgICAgICAgICAgICAgIC8vIGluIG9yZGVyIGZvciBgZS5zdGF0ZWAgdG8gd29yayBvbiB0aGUgYG9ucG9wc3RhdGVgIGV2ZW50XG4gICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSB0byByZWdpc3RlciB0aGUgaW5pdGlhbCByb3V0ZSB1cG9uIGluaXRpYWxpemF0aW9uXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLl9zaG91bGRSZXNvbHZlSHJlZiA9IGFzICE9PSBwYXRobmFtZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKCdyZXBsYWNlU3RhdGUnLCAoMCwgX3V0aWxzKS5mb3JtYXRXaXRoVmFsaWRhdGlvbih7XG4gICAgICAgICAgICAgICAgICAgIHBhdGhuYW1lOiBhZGRCYXNlUGF0aChwYXRobmFtZSksXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5XG4gICAgICAgICAgICAgICAgfSksICgwLCBfdXRpbHMpLmdldFVSTCgpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRoaXMub25Qb3BTdGF0ZSk7XG4gICAgICAgICAgICAvLyBlbmFibGUgY3VzdG9tIHNjcm9sbCByZXN0b3JhdGlvbiBoYW5kbGluZyB3aGVuIGF2YWlsYWJsZVxuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIGZhbGxiYWNrIHRvIGJyb3dzZXIncyBkZWZhdWx0IGhhbmRsaW5nXG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuX19ORVhUX1NDUk9MTF9SRVNUT1JBVElPTikge1xuICAgICAgICAgICAgICAgIGlmIChtYW51YWxTY3JvbGxSZXN0b3JhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA9ICdtYW51YWwnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZWxvYWQoKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAqIEdvIGJhY2sgaW4gaGlzdG9yeVxuICAgKi8gYmFjaygpIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgIH1cbiAgICAvKipcbiAgICogUGVyZm9ybXMgYSBgcHVzaFN0YXRlYCB3aXRoIGFyZ3VtZW50c1xuICAgKiBAcGFyYW0gdXJsIG9mIHRoZSByb3V0ZVxuICAgKiBAcGFyYW0gYXMgbWFza3MgYHVybGAgZm9yIHRoZSBicm93c2VyXG4gICAqIEBwYXJhbSBvcHRpb25zIG9iamVjdCB5b3UgY2FuIGRlZmluZSBgc2hhbGxvd2AgYW5kIG90aGVyIG9wdGlvbnNcbiAgICovIHB1c2godXJsLCBhcywgb3B0aW9ucyA9IHtcbiAgICB9KSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5fX05FWFRfU0NST0xMX1JFU1RPUkFUSU9OKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiByZW1vdmUgaW4gdGhlIGZ1dHVyZSB3aGVuIHdlIHVwZGF0ZSBoaXN0b3J5IGJlZm9yZSByb3V0ZSBjaGFuZ2VcbiAgICAgICAgICAgIC8vIGlzIGNvbXBsZXRlLCBhcyB0aGUgcG9wc3RhdGUgZXZlbnQgc2hvdWxkIGhhbmRsZSB0aGlzIGNhcHR1cmUuXG4gICAgICAgICAgICBpZiAobWFudWFsU2Nyb2xsUmVzdG9yYXRpb24pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTbmFwc2hvdCBzY3JvbGwgcG9zaXRpb24gcmlnaHQgYmVmb3JlIG5hdmlnYXRpbmcgdG8gYSBuZXcgcGFnZTpcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnX19uZXh0X3Njcm9sbF8nICsgdGhpcy5faWR4LCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBzZWxmLnBhZ2VYT2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgeTogc2VsZi5wYWdlWU9mZnNldFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAge1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAoeyB1cmwgLCBhcyAgfSA9IHByZXBhcmVVcmxBcyh0aGlzLCB1cmwsIGFzKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZSgncHVzaFN0YXRlJywgdXJsLCBhcywgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgKiBQZXJmb3JtcyBhIGByZXBsYWNlU3RhdGVgIHdpdGggYXJndW1lbnRzXG4gICAqIEBwYXJhbSB1cmwgb2YgdGhlIHJvdXRlXG4gICAqIEBwYXJhbSBhcyBtYXNrcyBgdXJsYCBmb3IgdGhlIGJyb3dzZXJcbiAgICogQHBhcmFtIG9wdGlvbnMgb2JqZWN0IHlvdSBjYW4gZGVmaW5lIGBzaGFsbG93YCBhbmQgb3RoZXIgb3B0aW9uc1xuICAgKi8gcmVwbGFjZSh1cmwsIGFzLCBvcHRpb25zID0ge1xuICAgIH0pIHtcbiAgICAgICAgKHsgdXJsICwgYXMgIH0gPSBwcmVwYXJlVXJsQXModGhpcywgdXJsLCBhcykpO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2UoJ3JlcGxhY2VTdGF0ZScsIHVybCwgYXMsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBjaGFuZ2UobWV0aG9kLCB1cmwsIGFzLCBvcHRpb25zLCBmb3JjZWRTY3JvbGwpIHtcbiAgICAgICAgaWYgKCFpc0xvY2FsVVJMKHVybCkpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNob3VsZFJlc29sdmVIcmVmID0gb3B0aW9ucy5faCB8fCBvcHRpb25zLl9zaG91bGRSZXNvbHZlSHJlZiB8fCBwYXRoTm9RdWVyeUhhc2godXJsKSA9PT0gcGF0aE5vUXVlcnlIYXNoKGFzKTtcbiAgICAgICAgLy8gZm9yIHN0YXRpYyBwYWdlcyB3aXRoIHF1ZXJ5IHBhcmFtcyBpbiB0aGUgVVJMIHdlIGRlbGF5XG4gICAgICAgIC8vIG1hcmtpbmcgdGhlIHJvdXRlciByZWFkeSB1bnRpbCBhZnRlciB0aGUgcXVlcnkgaXMgdXBkYXRlZFxuICAgICAgICBpZiAob3B0aW9ucy5faCkge1xuICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmV2TG9jYWxlID0gdGhpcy5sb2NhbGU7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5fX05FWFRfSTE4Tl9TVVBQT1JUKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsZSA9IG9wdGlvbnMubG9jYWxlID09PSBmYWxzZSA/IHRoaXMuZGVmYXVsdExvY2FsZSA6IG9wdGlvbnMubG9jYWxlIHx8IHRoaXMubG9jYWxlO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmxvY2FsZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmxvY2FsZSA9IHRoaXMubG9jYWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGFyc2VkQXMgPSAoMCwgX3BhcnNlUmVsYXRpdmVVcmwpLnBhcnNlUmVsYXRpdmVVcmwoaGFzQmFzZVBhdGgoYXMpID8gZGVsQmFzZVBhdGgoYXMpIDogYXMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxlUGF0aFJlc3VsdCA9ICgwLCBfbm9ybWFsaXplTG9jYWxlUGF0aCkubm9ybWFsaXplTG9jYWxlUGF0aChwYXJzZWRBcy5wYXRobmFtZSwgdGhpcy5sb2NhbGVzKTtcbiAgICAgICAgICAgIGlmIChsb2NhbGVQYXRoUmVzdWx0LmRldGVjdGVkTG9jYWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhbGUgPSBsb2NhbGVQYXRoUmVzdWx0LmRldGVjdGVkTG9jYWxlO1xuICAgICAgICAgICAgICAgIHBhcnNlZEFzLnBhdGhuYW1lID0gYWRkQmFzZVBhdGgocGFyc2VkQXMucGF0aG5hbWUpO1xuICAgICAgICAgICAgICAgIGFzID0gKDAsIF91dGlscykuZm9ybWF0V2l0aFZhbGlkYXRpb24ocGFyc2VkQXMpO1xuICAgICAgICAgICAgICAgIHVybCA9IGFkZEJhc2VQYXRoKCgwLCBfbm9ybWFsaXplTG9jYWxlUGF0aCkubm9ybWFsaXplTG9jYWxlUGF0aChoYXNCYXNlUGF0aCh1cmwpID8gZGVsQmFzZVBhdGgodXJsKSA6IHVybCwgdGhpcy5sb2NhbGVzKS5wYXRobmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZGlkTmF2aWdhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gd3JhcCB0aGlzIGluIHRoZSBlbnYgY2hlY2sgYWdhaW4gc2luY2UgcmVnZW5lcmF0b3IgcnVudGltZVxuICAgICAgICAgICAgLy8gbW92ZXMgdGhpcyBvbiBpdHMgb3duIGR1ZSB0byB0aGUgcmV0dXJuXG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuX19ORVhUX0kxOE5fU1VQUE9SVCkge1xuICAgICAgICAgICAgICAgIHZhciByZWY7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIGxvY2FsZSBpc24ndCBjb25maWd1cmVkIGhhcmQgbmF2aWdhdGUgdG8gc2hvdyA0MDQgcGFnZVxuICAgICAgICAgICAgICAgIGlmICghKChyZWYgPSB0aGlzLmxvY2FsZXMpID09PSBudWxsIHx8IHJlZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVmLmluY2x1ZGVzKHRoaXMubG9jYWxlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkQXMucGF0aG5hbWUgPSBhZGRMb2NhbGUocGFyc2VkQXMucGF0aG5hbWUsIHRoaXMubG9jYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAoMCwgX3V0aWxzKS5mb3JtYXRXaXRoVmFsaWRhdGlvbihwYXJzZWRBcyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgd2FzIHByZXZpb3VzbHkgYSByZXR1cm4gYnV0IHdhcyByZW1vdmVkIGluIGZhdm9yXG4gICAgICAgICAgICAgICAgICAgIC8vIG9mIGJldHRlciBkZWFkIGNvZGUgZWxpbWluYXRpb24gd2l0aCByZWdlbmVyYXRvciBydW50aW1lXG4gICAgICAgICAgICAgICAgICAgIGRpZE5hdmlnYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkZXRlY3RlZERvbWFpbiA9IGRldGVjdERvbWFpbkxvY2FsZSh0aGlzLmRvbWFpbkxvY2FsZXMsIHVuZGVmaW5lZCwgdGhpcy5sb2NhbGUpO1xuICAgICAgICAgICAgLy8gd2UgbmVlZCB0byB3cmFwIHRoaXMgaW4gdGhlIGVudiBjaGVjayBhZ2FpbiBzaW5jZSByZWdlbmVyYXRvciBydW50aW1lXG4gICAgICAgICAgICAvLyBtb3ZlcyB0aGlzIG9uIGl0cyBvd24gZHVlIHRvIHRoZSByZXR1cm5cbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5fX05FWFRfSTE4Tl9TVVBQT1JUKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgd2UgYXJlIG5hdmlnYXRpbmcgdG8gYSBkb21haW4gbG9jYWxlIGVuc3VyZSB3ZSByZWRpcmVjdCB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0IGRvbWFpblxuICAgICAgICAgICAgICAgIGlmICghZGlkTmF2aWdhdGUgJiYgZGV0ZWN0ZWREb21haW4gJiYgdGhpcy5pc0xvY2FsZURvbWFpbiAmJiBzZWxmLmxvY2F0aW9uLmhvc3RuYW1lICE9PSBkZXRlY3RlZERvbWFpbi5kb21haW4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXNOb0Jhc2VQYXRoID0gZGVsQmFzZVBhdGgoYXMpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGBodHRwJHtkZXRlY3RlZERvbWFpbi5odHRwID8gJycgOiAncyd9Oi8vJHtkZXRlY3RlZERvbWFpbi5kb21haW59JHthZGRCYXNlUGF0aChgJHt0aGlzLmxvY2FsZSA9PT0gZGV0ZWN0ZWREb21haW4uZGVmYXVsdExvY2FsZSA/ICcnIDogYC8ke3RoaXMubG9jYWxlfWB9JHthc05vQmFzZVBhdGggPT09ICcvJyA/ICcnIDogYXNOb0Jhc2VQYXRofWAgfHwgJy8nKX1gO1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHdhcyBwcmV2aW91c2x5IGEgcmV0dXJuIGJ1dCB3YXMgcmVtb3ZlZCBpbiBmYXZvclxuICAgICAgICAgICAgICAgICAgICAvLyBvZiBiZXR0ZXIgZGVhZCBjb2RlIGVsaW1pbmF0aW9uIHdpdGggcmVnZW5lcmF0b3IgcnVudGltZVxuICAgICAgICAgICAgICAgICAgICBkaWROYXZpZ2F0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpZE5hdmlnYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgpPT57XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcHRpb25zLl9oKSB7XG4gICAgICAgICAgICB0aGlzLmlzU3NyID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbWFya2luZyByb3V0ZSBjaGFuZ2VzIGFzIGEgbmF2aWdhdGlvbiBzdGFydCBlbnRyeVxuICAgICAgICBpZiAoX3V0aWxzLlNUKSB7XG4gICAgICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdyb3V0ZUNoYW5nZScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc2hhbGxvdyA9ZmFsc2UgIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCByb3V0ZVByb3BzID0ge1xuICAgICAgICAgICAgc2hhbGxvd1xuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5faW5GbGlnaHRSb3V0ZSkge1xuICAgICAgICAgICAgdGhpcy5hYm9ydENvbXBvbmVudExvYWQodGhpcy5faW5GbGlnaHRSb3V0ZSwgcm91dGVQcm9wcyk7XG4gICAgICAgIH1cbiAgICAgICAgYXMgPSBhZGRCYXNlUGF0aChhZGRMb2NhbGUoaGFzQmFzZVBhdGgoYXMpID8gZGVsQmFzZVBhdGgoYXMpIDogYXMsIG9wdGlvbnMubG9jYWxlLCB0aGlzLmRlZmF1bHRMb2NhbGUpKTtcbiAgICAgICAgY29uc3QgY2xlYW5lZEFzID0gZGVsTG9jYWxlKGhhc0Jhc2VQYXRoKGFzKSA/IGRlbEJhc2VQYXRoKGFzKSA6IGFzLCB0aGlzLmxvY2FsZSk7XG4gICAgICAgIHRoaXMuX2luRmxpZ2h0Um91dGUgPSBhcztcbiAgICAgICAgbGV0IGxvY2FsZUNoYW5nZSA9IHByZXZMb2NhbGUgIT09IHRoaXMubG9jYWxlO1xuICAgICAgICAvLyBJZiB0aGUgdXJsIGNoYW5nZSBpcyBvbmx5IHJlbGF0ZWQgdG8gYSBoYXNoIGNoYW5nZVxuICAgICAgICAvLyBXZSBzaG91bGQgbm90IHByb2NlZWQuIFdlIHNob3VsZCBvbmx5IGNoYW5nZSB0aGUgc3RhdGUuXG4gICAgICAgIC8vIFdBUk5JTkc6IGBfaGAgaXMgYW4gaW50ZXJuYWwgb3B0aW9uIGZvciBoYW5kaW5nIE5leHQuanMgY2xpZW50LXNpZGVcbiAgICAgICAgLy8gaHlkcmF0aW9uLiBZb3VyIGFwcCBzaG91bGQgX25ldmVyXyB1c2UgdGhpcyBwcm9wZXJ0eS4gSXQgbWF5IGNoYW5nZSBhdFxuICAgICAgICAvLyBhbnkgdGltZSB3aXRob3V0IG5vdGljZS5cbiAgICAgICAgaWYgKCFvcHRpb25zLl9oICYmIHRoaXMub25seUFIYXNoQ2hhbmdlKGNsZWFuZWRBcykgJiYgIWxvY2FsZUNoYW5nZSkge1xuICAgICAgICAgICAgdGhpcy5hc1BhdGggPSBjbGVhbmVkQXM7XG4gICAgICAgICAgICBSb3V0ZXIuZXZlbnRzLmVtaXQoJ2hhc2hDaGFuZ2VTdGFydCcsIGFzLCByb3V0ZVByb3BzKTtcbiAgICAgICAgICAgIC8vIFRPRE86IGRvIHdlIG5lZWQgdGhlIHJlc29sdmVkIGhyZWYgd2hlbiBvbmx5IGEgaGFzaCBjaGFuZ2U/XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKG1ldGhvZCwgdXJsLCBhcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvSGFzaChjbGVhbmVkQXMpO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnkodGhpcy5jb21wb25lbnRzW3RoaXMucm91dGVdLCBudWxsKTtcbiAgICAgICAgICAgIFJvdXRlci5ldmVudHMuZW1pdCgnaGFzaENoYW5nZUNvbXBsZXRlJywgYXMsIHJvdXRlUHJvcHMpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcnNlZCA9ICgwLCBfcGFyc2VSZWxhdGl2ZVVybCkucGFyc2VSZWxhdGl2ZVVybCh1cmwpO1xuICAgICAgICBsZXQgeyBwYXRobmFtZSAsIHF1ZXJ5ICB9ID0gcGFyc2VkO1xuICAgICAgICAvLyBUaGUgYnVpbGQgbWFuaWZlc3QgbmVlZHMgdG8gYmUgbG9hZGVkIGJlZm9yZSBhdXRvLXN0YXRpYyBkeW5hbWljIHBhZ2VzXG4gICAgICAgIC8vIGdldCB0aGVpciBxdWVyeSBwYXJhbWV0ZXJzIHRvIGFsbG93IGVuc3VyaW5nIHRoZXkgY2FuIGJlIHBhcnNlZCBwcm9wZXJseVxuICAgICAgICAvLyB3aGVuIHJld3JpdHRlbiB0b1xuICAgICAgICBsZXQgcGFnZXMsIHJld3JpdGVzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgW3BhZ2VzLCB7IF9fcmV3cml0ZXM6IHJld3JpdGVzICB9XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VMb2FkZXIuZ2V0UGFnZUxpc3QoKSxcbiAgICAgICAgICAgICAgICAoMCwgX3JvdXRlTG9hZGVyKS5nZXRDbGllbnRCdWlsZE1hbmlmZXN0KCksXG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlTG9hZGVyLmdldE1pZGRsZXdhcmVMaXN0KCksIFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgLy8gSWYgd2UgZmFpbCB0byByZXNvbHZlIHRoZSBwYWdlIGxpc3Qgb3IgY2xpZW50LWJ1aWxkIG1hbmlmZXN0LCB3ZSBtdXN0XG4gICAgICAgICAgICAvLyBkbyBhIHNlcnZlci1zaWRlIHRyYW5zaXRpb246XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGFzO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIGFza2VkIHRvIGNoYW5nZSB0aGUgY3VycmVudCBVUkwgd2Ugc2hvdWxkIHJlbG9hZCB0aGUgY3VycmVudCBwYWdlXG4gICAgICAgIC8vIChub3QgbG9jYXRpb24ucmVsb2FkKCkgYnV0IHJlbG9hZCBnZXRJbml0aWFsUHJvcHMgYW5kIG90aGVyIE5leHQuanMgc3R1ZmZzKVxuICAgICAgICAvLyBXZSBhbHNvIG5lZWQgdG8gc2V0IHRoZSBtZXRob2QgPSByZXBsYWNlU3RhdGUgYWx3YXlzXG4gICAgICAgIC8vIGFzIHRoaXMgc2hvdWxkIG5vdCBnbyBpbnRvIHRoZSBoaXN0b3J5IChUaGF0J3MgaG93IGJyb3dzZXJzIHdvcmspXG4gICAgICAgIC8vIFdlIHNob3VsZCBjb21wYXJlIHRoZSBuZXcgYXNQYXRoIHRvIHRoZSBjdXJyZW50IGFzUGF0aCwgbm90IHRoZSB1cmxcbiAgICAgICAgaWYgKCF0aGlzLnVybElzTmV3KGNsZWFuZWRBcykgJiYgIWxvY2FsZUNoYW5nZSkge1xuICAgICAgICAgICAgbWV0aG9kID0gJ3JlcGxhY2VTdGF0ZSc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gd2UgbmVlZCB0byByZXNvbHZlIHRoZSBhcyB2YWx1ZSB1c2luZyByZXdyaXRlcyBmb3IgZHluYW1pYyBTU0dcbiAgICAgICAgLy8gcGFnZXMgdG8gYWxsb3cgYnVpbGRpbmcgdGhlIGRhdGEgVVJMIGNvcnJlY3RseVxuICAgICAgICBsZXQgcmVzb2x2ZWRBcyA9IGFzO1xuICAgICAgICAvLyB1cmwgYW5kIGFzIHNob3VsZCBhbHdheXMgYmUgcHJlZml4ZWQgd2l0aCBiYXNlUGF0aCBieSB0aGlzXG4gICAgICAgIC8vIHBvaW50IGJ5IGVpdGhlciBuZXh0L2xpbmsgb3Igcm91dGVyLnB1c2gvcmVwbGFjZSBzbyBzdHJpcCB0aGVcbiAgICAgICAgLy8gYmFzZVBhdGggZnJvbSB0aGUgcGF0aG5hbWUgdG8gbWF0Y2ggdGhlIHBhZ2VzIGRpciAxLXRvLTFcbiAgICAgICAgcGF0aG5hbWUgPSBwYXRobmFtZSA/ICgwLCBfbm9ybWFsaXplVHJhaWxpbmdTbGFzaCkucmVtb3ZlUGF0aFRyYWlsaW5nU2xhc2goZGVsQmFzZVBhdGgocGF0aG5hbWUpKSA6IHBhdGhuYW1lO1xuICAgICAgICBpZiAoc2hvdWxkUmVzb2x2ZUhyZWYgJiYgcGF0aG5hbWUgIT09ICcvX2Vycm9yJykge1xuICAgICAgICAgICAgb3B0aW9ucy5fc2hvdWxkUmVzb2x2ZUhyZWYgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Ll9fTkVYVF9IQVNfUkVXUklURVMgJiYgYXMuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmV3cml0ZXNSZXN1bHQgPSAoMCwgX3Jlc29sdmVSZXdyaXRlcykuZGVmYXVsdChhZGRCYXNlUGF0aChhZGRMb2NhbGUoY2xlYW5lZEFzLCB0aGlzLmxvY2FsZSkpLCBwYWdlcywgcmV3cml0ZXMsIHF1ZXJ5LCAocCk9PnJlc29sdmVEeW5hbWljUm91dGUocCwgcGFnZXMpXG4gICAgICAgICAgICAgICAgLCB0aGlzLmxvY2FsZXMpO1xuICAgICAgICAgICAgICAgIHJlc29sdmVkQXMgPSByZXdyaXRlc1Jlc3VsdC5hc1BhdGg7XG4gICAgICAgICAgICAgICAgaWYgKHJld3JpdGVzUmVzdWx0Lm1hdGNoZWRQYWdlICYmIHJld3JpdGVzUmVzdWx0LnJlc29sdmVkSHJlZikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGRpcmVjdGx5IG1hdGNoZXMgYSBwYWdlIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSBocmVmIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IHRoZSBjb3JyZWN0IHBhZ2UgY2h1bmsgdG8gYmUgbG9hZGVkXG4gICAgICAgICAgICAgICAgICAgIHBhdGhuYW1lID0gcmV3cml0ZXNSZXN1bHQucmVzb2x2ZWRIcmVmO1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWQucGF0aG5hbWUgPSBhZGRCYXNlUGF0aChwYXRobmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHVybCA9ICgwLCBfdXRpbHMpLmZvcm1hdFdpdGhWYWxpZGF0aW9uKHBhcnNlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJzZWQucGF0aG5hbWUgPSByZXNvbHZlRHluYW1pY1JvdXRlKHBhdGhuYW1lLCBwYWdlcyk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZC5wYXRobmFtZSAhPT0gcGF0aG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aG5hbWUgPSBwYXJzZWQucGF0aG5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZC5wYXRobmFtZSA9IGFkZEJhc2VQYXRoKHBhdGhuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdXJsID0gKDAsIF91dGlscykuZm9ybWF0V2l0aFZhbGlkYXRpb24ocGFyc2VkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0xvY2FsVVJMKGFzKSkge1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaHJlZjogXCIke3VybH1cIiBhbmQgYXM6IFwiJHthc31cIiwgcmVjZWl2ZWQgcmVsYXRpdmUgaHJlZiBhbmQgZXh0ZXJuYWwgYXNgICsgYFxcblNlZSBtb3JlIGluZm86IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL2ludmFsaWQtcmVsYXRpdmUtdXJsLWV4dGVybmFsLWFzYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGFzO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmVkQXMgPSBkZWxMb2NhbGUoZGVsQmFzZVBhdGgocmVzb2x2ZWRBcyksIHRoaXMubG9jYWxlKTtcbiAgICAgICAgLyoqXG4gICAgICogSWYgdGhlIHJvdXRlIHVwZGF0ZSB3YXMgdHJpZ2dlcmVkIGZvciBjbGllbnQtc2lkZSBoeWRyYXRpb24gdGhlblxuICAgICAqIGRvIG5vdCBjaGVjayB0aGUgcHJlZmxpZ2h0IHJlcXVlc3QuIE90aGVyd2lzZSB3aGVuIHJlbmRlcmluZ1xuICAgICAqIGEgcGFnZSB3aXRoIHJlZnJlc2ggaXQgbWlnaHQgZ2V0IGludG8gYW4gaW5maW5pdGUgbG9vcC5cbiAgICAgKi8gaWYgKG9wdGlvbnMuX2ggIT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGVmZmVjdCA9IGF3YWl0IHRoaXMuX3ByZWZsaWdodFJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIGFzLFxuICAgICAgICAgICAgICAgIGNhY2hlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgICAgICAgICAgICAgIHBhZ2VzLFxuICAgICAgICAgICAgICAgIHBhdGhuYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gJ3Jld3JpdGUnKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAuLi5lZmZlY3QucGFyc2VkQXMucXVlcnlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlc29sdmVkQXMgPSBlZmZlY3QuYXNQYXRoO1xuICAgICAgICAgICAgICAgIHBhdGhuYW1lID0gZWZmZWN0LnJlc29sdmVkSHJlZjtcbiAgICAgICAgICAgICAgICBwYXJzZWQucGF0aG5hbWUgPSBlZmZlY3QucmVzb2x2ZWRIcmVmO1xuICAgICAgICAgICAgICAgIHVybCA9ICgwLCBfdXRpbHMpLmZvcm1hdFdpdGhWYWxpZGF0aW9uKHBhcnNlZCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVmZmVjdC50eXBlID09PSAncmVkaXJlY3QnICYmIGVmZmVjdC5uZXdBcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYW5nZShtZXRob2QsIGVmZmVjdC5uZXdVcmwsIGVmZmVjdC5uZXdBcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVmZmVjdC50eXBlID09PSAncmVkaXJlY3QnICYmIGVmZmVjdC5kZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZWZmZWN0LmRlc3RpbmF0aW9uO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKT0+e1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlZmZlY3QudHlwZSA9PT0gJ3JlZnJlc2gnKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBhcztcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCk9PntcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByb3V0ZSA9ICgwLCBfbm9ybWFsaXplVHJhaWxpbmdTbGFzaCkucmVtb3ZlUGF0aFRyYWlsaW5nU2xhc2gocGF0aG5hbWUpO1xuICAgICAgICBpZiAoKDAsIF9pc0R5bmFtaWMpLmlzRHluYW1pY1JvdXRlKHJvdXRlKSkge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkQXMgPSAoMCwgX3BhcnNlUmVsYXRpdmVVcmwpLnBhcnNlUmVsYXRpdmVVcmwocmVzb2x2ZWRBcyk7XG4gICAgICAgICAgICBjb25zdCBhc1BhdGhuYW1lID0gcGFyc2VkQXMucGF0aG5hbWU7XG4gICAgICAgICAgICBjb25zdCByb3V0ZVJlZ2V4ID0gKDAsIF9yb3V0ZVJlZ2V4KS5nZXRSb3V0ZVJlZ2V4KHJvdXRlKTtcbiAgICAgICAgICAgIGNvbnN0IHJvdXRlTWF0Y2ggPSAoMCwgX3JvdXRlTWF0Y2hlcikuZ2V0Um91dGVNYXRjaGVyKHJvdXRlUmVnZXgpKGFzUGF0aG5hbWUpO1xuICAgICAgICAgICAgY29uc3Qgc2hvdWxkSW50ZXJwb2xhdGUgPSByb3V0ZSA9PT0gYXNQYXRobmFtZTtcbiAgICAgICAgICAgIGNvbnN0IGludGVycG9sYXRlZEFzID0gc2hvdWxkSW50ZXJwb2xhdGUgPyBpbnRlcnBvbGF0ZUFzKHJvdXRlLCBhc1BhdGhuYW1lLCBxdWVyeSkgOiB7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFyb3V0ZU1hdGNoIHx8IHNob3VsZEludGVycG9sYXRlICYmICFpbnRlcnBvbGF0ZWRBcy5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtaXNzaW5nUGFyYW1zID0gT2JqZWN0LmtleXMocm91dGVSZWdleC5ncm91cHMpLmZpbHRlcigocGFyYW0pPT4hcXVlcnlbcGFyYW1dXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAobWlzc2luZ1BhcmFtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYCR7c2hvdWxkSW50ZXJwb2xhdGUgPyBgSW50ZXJwb2xhdGluZyBocmVmYCA6IGBNaXNtYXRjaGluZyBcXGBhc1xcYCBhbmQgXFxgaHJlZlxcYGB9IGZhaWxlZCB0byBtYW51YWxseSBwcm92aWRlIGAgKyBgdGhlIHBhcmFtczogJHttaXNzaW5nUGFyYW1zLmpvaW4oJywgJyl9IGluIHRoZSBcXGBocmVmXFxgJ3MgXFxgcXVlcnlcXGBgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKHNob3VsZEludGVycG9sYXRlID8gYFRoZSBwcm92aWRlZCBcXGBocmVmXFxgICgke3VybH0pIHZhbHVlIGlzIG1pc3NpbmcgcXVlcnkgdmFsdWVzICgke21pc3NpbmdQYXJhbXMuam9pbignLCAnKX0pIHRvIGJlIGludGVycG9sYXRlZCBwcm9wZXJseS4gYCA6IGBUaGUgcHJvdmlkZWQgXFxgYXNcXGAgdmFsdWUgKCR7YXNQYXRobmFtZX0pIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBcXGBocmVmXFxgIHZhbHVlICgke3JvdXRlfSkuIGApICsgYFJlYWQgbW9yZTogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvbWVzc2FnZXMvJHtzaG91bGRJbnRlcnBvbGF0ZSA/ICdocmVmLWludGVycG9sYXRpb24tZmFpbGVkJyA6ICdpbmNvbXBhdGlibGUtaHJlZi1hcyd9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChzaG91bGRJbnRlcnBvbGF0ZSkge1xuICAgICAgICAgICAgICAgIGFzID0gKDAsIF91dGlscykuZm9ybWF0V2l0aFZhbGlkYXRpb24oT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgfSwgcGFyc2VkQXMsIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aG5hbWU6IGludGVycG9sYXRlZEFzLnJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IG9taXRQYXJtc0Zyb21RdWVyeShxdWVyeSwgaW50ZXJwb2xhdGVkQXMucGFyYW1zKVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTWVyZ2UgcGFyYW1zIGludG8gYHF1ZXJ5YCwgb3ZlcndyaXRpbmcgYW55IHNwZWNpZmllZCBpbiBzZWFyY2hcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHF1ZXJ5LCByb3V0ZU1hdGNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBSb3V0ZXIuZXZlbnRzLmVtaXQoJ3JvdXRlQ2hhbmdlU3RhcnQnLCBhcywgcm91dGVQcm9wcyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgcmVmLCByZWYxO1xuICAgICAgICAgICAgbGV0IHJvdXRlSW5mbyA9IGF3YWl0IHRoaXMuZ2V0Um91dGVJbmZvKHJvdXRlLCBwYXRobmFtZSwgcXVlcnksIGFzLCByZXNvbHZlZEFzLCByb3V0ZVByb3BzKTtcbiAgICAgICAgICAgIGxldCB7IGVycm9yICwgcHJvcHMgLCBfX05fU1NHICwgX19OX1NTUCAgfSA9IHJvdXRlSW5mbztcbiAgICAgICAgICAgIC8vIGhhbmRsZSByZWRpcmVjdCBvbiBjbGllbnQtdHJhbnNpdGlvblxuICAgICAgICAgICAgaWYgKChfX05fU1NHIHx8IF9fTl9TU1ApICYmIHByb3BzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BzLnBhZ2VQcm9wcyAmJiBwcm9wcy5wYWdlUHJvcHMuX19OX1JFRElSRUNUKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gcHJvcHMucGFnZVByb3BzLl9fTl9SRURJUkVDVDtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgZGVzdGluYXRpb24gaXMgaW50ZXJuYWwgKHJlc29sdmVzIHRvIGEgcGFnZSkgYW5kIGF0dGVtcHRcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpZW50LW5hdmlnYXRpb24gaWYgaXQgaXMgZmFsbGluZyBiYWNrIHRvIGhhcmQgbmF2aWdhdGlvbiBpZlxuICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIG5vdFxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVzdGluYXRpb24uc3RhcnRzV2l0aCgnLycpICYmIHByb3BzLnBhZ2VQcm9wcy5fX05fUkVESVJFQ1RfQkFTRV9QQVRIICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkSHJlZiA9ICgwLCBfcGFyc2VSZWxhdGl2ZVVybCkucGFyc2VSZWxhdGl2ZVVybChkZXN0aW5hdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRIcmVmLnBhdGhuYW1lID0gcmVzb2x2ZUR5bmFtaWNSb3V0ZShwYXJzZWRIcmVmLnBhdGhuYW1lLCBwYWdlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHVybDogbmV3VXJsICwgYXM6IG5ld0FzICB9ID0gcHJlcGFyZVVybEFzKHRoaXMsIGRlc3RpbmF0aW9uLCBkZXN0aW5hdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2UobWV0aG9kLCBuZXdVcmwsIG5ld0FzLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCk9PntcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaXNQcmV2aWV3ID0gISFwcm9wcy5fX05fUFJFVklFVztcbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgU1NHIGRhdGEgNDA0XG4gICAgICAgICAgICAgICAgaWYgKHByb3BzLm5vdEZvdW5kID09PSBTU0dfREFUQV9OT1RfRk9VTkQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5vdEZvdW5kUm91dGU7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmZldGNoQ29tcG9uZW50KCcvNDA0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub3RGb3VuZFJvdXRlID0gJy80MDQnO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub3RGb3VuZFJvdXRlID0gJy9fZXJyb3InO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJvdXRlSW5mbyA9IGF3YWl0IHRoaXMuZ2V0Um91dGVJbmZvKG5vdEZvdW5kUm91dGUsIG5vdEZvdW5kUm91dGUsIHF1ZXJ5LCBhcywgcmVzb2x2ZWRBcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hhbGxvdzogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUm91dGVyLmV2ZW50cy5lbWl0KCdiZWZvcmVIaXN0b3J5Q2hhbmdlJywgYXMsIHJvdXRlUHJvcHMpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShtZXRob2QsIHVybCwgYXMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuX2ggJiYgcGF0aG5hbWUgPT09ICcvX2Vycm9yJyAmJiAoKHJlZiA9IHNlbGYuX19ORVhUX0RBVEFfXy5wcm9wcykgPT09IG51bGwgfHwgcmVmID09PSB2b2lkIDAgPyB2b2lkIDAgOiAocmVmMSA9IHJlZi5wYWdlUHJvcHMpID09PSBudWxsIHx8IHJlZjEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlZjEuc3RhdHVzQ29kZSkgPT09IDUwMCAmJiAocHJvcHMgPT09IG51bGwgfHwgcHJvcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb3BzLnBhZ2VQcm9wcykpIHtcbiAgICAgICAgICAgICAgICAvLyBlbnN1cmUgc3RhdHVzQ29kZSBpcyBzdGlsbCBjb3JyZWN0IGZvciBzdGF0aWMgNTAwIHBhZ2VcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHVwZGF0aW5nIHF1ZXJ5IGluZm9ybWF0aW9uXG4gICAgICAgICAgICAgICAgcHJvcHMucGFnZVByb3BzLnN0YXR1c0NvZGUgPSA1MDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBzaGFsbG93IHJvdXRpbmcgaXMgb25seSBhbGxvd2VkIGZvciBzYW1lIHBhZ2UgVVJMIGNoYW5nZXMuXG4gICAgICAgICAgICBjb25zdCBpc1ZhbGlkU2hhbGxvd1JvdXRlID0gb3B0aW9ucy5zaGFsbG93ICYmIHRoaXMucm91dGUgPT09IHJvdXRlO1xuICAgICAgICAgICAgdmFyIF9zY3JvbGw7XG4gICAgICAgICAgICBjb25zdCBzaG91bGRTY3JvbGwgPSAoX3Njcm9sbCA9IG9wdGlvbnMuc2Nyb2xsKSAhPT0gbnVsbCAmJiBfc2Nyb2xsICE9PSB2b2lkIDAgPyBfc2Nyb2xsIDogIWlzVmFsaWRTaGFsbG93Um91dGU7XG4gICAgICAgICAgICBjb25zdCByZXNldFNjcm9sbCA9IHNob3VsZFNjcm9sbCA/IHtcbiAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgICAgIHk6IDBcbiAgICAgICAgICAgIH0gOiBudWxsO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXQocm91dGUsIHBhdGhuYW1lLCBxdWVyeSwgY2xlYW5lZEFzLCByb3V0ZUluZm8sIGZvcmNlZFNjcm9sbCAhPT0gbnVsbCAmJiBmb3JjZWRTY3JvbGwgIT09IHZvaWQgMCA/IGZvcmNlZFNjcm9sbCA6IHJlc2V0U2Nyb2xsKS5jYXRjaCgoZSk9PntcbiAgICAgICAgICAgICAgICBpZiAoZS5jYW5jZWxsZWQpIGVycm9yID0gZXJyb3IgfHwgZTtcbiAgICAgICAgICAgICAgICBlbHNlIHRocm93IGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIFJvdXRlci5ldmVudHMuZW1pdCgncm91dGVDaGFuZ2VFcnJvcicsIGVycm9yLCBjbGVhbmVkQXMsIHJvdXRlUHJvcHMpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Ll9fTkVYVF9JMThOX1NVUFBPUlQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2NhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmxhbmcgPSB0aGlzLmxvY2FsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBSb3V0ZXIuZXZlbnRzLmVtaXQoJ3JvdXRlQ2hhbmdlQ29tcGxldGUnLCBhcywgcm91dGVQcm9wcyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyMSkge1xuICAgICAgICAgICAgaWYgKCgwLCBfaXNFcnJvcikuZGVmYXVsdChlcnIxKSAmJiBlcnIxLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycjE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hhbmdlU3RhdGUobWV0aG9kLCB1cmwsIGFzLCBvcHRpb25zID0ge1xuICAgIH0pIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93Lmhpc3RvcnkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgV2FybmluZzogd2luZG93Lmhpc3RvcnkgaXMgbm90IGF2YWlsYWJsZS5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5oaXN0b3J5W21ldGhvZF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgV2FybmluZzogd2luZG93Lmhpc3RvcnkuJHttZXRob2R9IGlzIG5vdCBhdmFpbGFibGVgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1ldGhvZCAhPT0gJ3B1c2hTdGF0ZScgfHwgKDAsIF91dGlscykuZ2V0VVJMKCkgIT09IGFzKSB7XG4gICAgICAgICAgICB0aGlzLl9zaGFsbG93ID0gb3B0aW9ucy5zaGFsbG93O1xuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnlbbWV0aG9kXSh7XG4gICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIGFzLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgX19OOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlkeDogdGhpcy5faWR4ID0gbWV0aG9kICE9PSAncHVzaFN0YXRlJyA/IHRoaXMuX2lkeCA6IHRoaXMuX2lkeCArIDFcbiAgICAgICAgICAgIH0sIC8vIE1vc3QgYnJvd3NlcnMgY3VycmVudGx5IGlnbm9yZXMgdGhpcyBwYXJhbWV0ZXIsIGFsdGhvdWdoIHRoZXkgbWF5IHVzZSBpdCBpbiB0aGUgZnV0dXJlLlxuICAgICAgICAgICAgLy8gUGFzc2luZyB0aGUgZW1wdHkgc3RyaW5nIGhlcmUgc2hvdWxkIGJlIHNhZmUgYWdhaW5zdCBmdXR1cmUgY2hhbmdlcyB0byB0aGUgbWV0aG9kLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0hpc3RvcnkvcmVwbGFjZVN0YXRlXG4gICAgICAgICAgICAnJywgYXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJvdXRlSW5mb0Vycm9yKGVyciwgcGF0aG5hbWUsIHF1ZXJ5LCBhcywgcm91dGVQcm9wcywgbG9hZEVycm9yRmFpbCkge1xuICAgICAgICBpZiAoZXJyLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgLy8gYnViYmxlIHVwIGNhbmNlbGxhdGlvbiBlcnJvcnNcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKDAsIF9yb3V0ZUxvYWRlcikuaXNBc3NldEVycm9yKGVycikgfHwgbG9hZEVycm9yRmFpbCkge1xuICAgICAgICAgICAgUm91dGVyLmV2ZW50cy5lbWl0KCdyb3V0ZUNoYW5nZUVycm9yJywgZXJyLCBhcywgcm91dGVQcm9wcyk7XG4gICAgICAgICAgICAvLyBJZiB3ZSBjYW4ndCBsb2FkIHRoZSBwYWdlIGl0IGNvdWxkIGJlIG9uZSBvZiBmb2xsb3dpbmcgcmVhc29uc1xuICAgICAgICAgICAgLy8gIDEuIFBhZ2UgZG9lc24ndCBleGlzdHNcbiAgICAgICAgICAgIC8vICAyLiBQYWdlIGRvZXMgZXhpc3QgaW4gYSBkaWZmZXJlbnQgem9uZVxuICAgICAgICAgICAgLy8gIDMuIEludGVybmFsIGVycm9yIHdoaWxlIGxvYWRpbmcgdGhlIHBhZ2VcbiAgICAgICAgICAgIC8vIFNvLCBkb2luZyBhIGhhcmQgcmVsb2FkIGlzIHRoZSBwcm9wZXIgd2F5IHRvIGRlYWwgd2l0aCB0aGlzLlxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBhcztcbiAgICAgICAgICAgIC8vIENoYW5naW5nIHRoZSBVUkwgZG9lc24ndCBibG9jayBleGVjdXRpbmcgdGhlIGN1cnJlbnQgY29kZSBwYXRoLlxuICAgICAgICAgICAgLy8gU28gbGV0J3MgdGhyb3cgYSBjYW5jZWxsYXRpb24gZXJyb3Igc3RvcCB0aGUgcm91dGluZyBsb2dpYy5cbiAgICAgICAgICAgIHRocm93IGJ1aWxkQ2FuY2VsbGF0aW9uRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IENvbXBvbmVudDtcbiAgICAgICAgICAgIGxldCBzdHlsZVNoZWV0cztcbiAgICAgICAgICAgIGxldCBwcm9wcztcbiAgICAgICAgICAgIGlmICh0eXBlb2YgQ29tcG9uZW50ID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2Ygc3R5bGVTaGVldHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgKHsgcGFnZTogQ29tcG9uZW50ICwgc3R5bGVTaGVldHMgIH0gPSBhd2FpdCB0aGlzLmZldGNoQ29tcG9uZW50KCcvX2Vycm9yJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgcm91dGVJbmZvID0ge1xuICAgICAgICAgICAgICAgIHByb3BzLFxuICAgICAgICAgICAgICAgIENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBzdHlsZVNoZWV0cyxcbiAgICAgICAgICAgICAgICBlcnIsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVyclxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghcm91dGVJbmZvLnByb3BzKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcm91dGVJbmZvLnByb3BzID0gYXdhaXQgdGhpcy5nZXRJbml0aWFsUHJvcHMoQ29tcG9uZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRobmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGdpcEVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBlcnJvciBwYWdlIGBnZXRJbml0aWFsUHJvcHNgOiAnLCBnaXBFcnIpO1xuICAgICAgICAgICAgICAgICAgICByb3V0ZUluZm8ucHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvdXRlSW5mbztcbiAgICAgICAgfSBjYXRjaCAocm91dGVJbmZvRXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVSb3V0ZUluZm9FcnJvcigoMCwgX2lzRXJyb3IpLmRlZmF1bHQocm91dGVJbmZvRXJyKSA/IHJvdXRlSW5mb0VyciA6IG5ldyBFcnJvcihyb3V0ZUluZm9FcnIgKyAnJyksIHBhdGhuYW1lLCBxdWVyeSwgYXMsIHJvdXRlUHJvcHMsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGdldFJvdXRlSW5mbyhyb3V0ZSwgcGF0aG5hbWUsIHF1ZXJ5LCBhcywgcmVzb2x2ZWRBcywgcm91dGVQcm9wcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdSb3V0ZUluZm8gPSB0aGlzLmNvbXBvbmVudHNbcm91dGVdO1xuICAgICAgICAgICAgaWYgKHJvdXRlUHJvcHMuc2hhbGxvdyAmJiBleGlzdGluZ1JvdXRlSW5mbyAmJiB0aGlzLnJvdXRlID09PSByb3V0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1JvdXRlSW5mbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjYWNoZWRSb3V0ZUluZm8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAvLyBjYW4gb25seSB1c2Ugbm9uLWluaXRpYWwgcm91dGUgaW5mb1xuICAgICAgICAgICAgLy8gY2Fubm90IHJldXNlIHJvdXRlIGluZm8gaW4gZGV2ZWxvcG1lbnQgc2luY2UgaXQgY2FuIGNoYW5nZSBhZnRlciBITVJcbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ2RldmVsb3BtZW50JyAmJiBleGlzdGluZ1JvdXRlSW5mbyAmJiAhKCdpbml0aWFsJyBpbiBleGlzdGluZ1JvdXRlSW5mbykpIHtcbiAgICAgICAgICAgICAgICBjYWNoZWRSb3V0ZUluZm8gPSBleGlzdGluZ1JvdXRlSW5mbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJvdXRlSW5mbyA9IGNhY2hlZFJvdXRlSW5mbyB8fCBhd2FpdCB0aGlzLmZldGNoQ29tcG9uZW50KHJvdXRlKS50aGVuKChyZXMpPT4oe1xuICAgICAgICAgICAgICAgICAgICBDb21wb25lbnQ6IHJlcy5wYWdlLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZVNoZWV0czogcmVzLnN0eWxlU2hlZXRzLFxuICAgICAgICAgICAgICAgICAgICBfX05fU1NHOiByZXMubW9kLl9fTl9TU0csXG4gICAgICAgICAgICAgICAgICAgIF9fTl9TU1A6IHJlcy5tb2QuX19OX1NTUCxcbiAgICAgICAgICAgICAgICAgICAgX19OX1JTQzogISFyZXMucGFnZS5fX25leHRfcnNjX19cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHsgQ29tcG9uZW50ICwgX19OX1NTRyAsIF9fTl9TU1AgLCBfX05fUlNDICB9ID0gcm91dGVJbmZvO1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGlzVmFsaWRFbGVtZW50VHlwZSAgfSA9IHJlcXVpcmUoJ3JlYWN0LWlzJyk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkRWxlbWVudFR5cGUoQ29tcG9uZW50KSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBkZWZhdWx0IGV4cG9ydCBpcyBub3QgYSBSZWFjdCBDb21wb25lbnQgaW4gcGFnZTogXCIke3BhdGhuYW1lfVwiYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGRhdGFIcmVmO1xuICAgICAgICAgICAgaWYgKF9fTl9TU0cgfHwgX19OX1NTUCB8fCBfX05fUlNDKSB7XG4gICAgICAgICAgICAgICAgZGF0YUhyZWYgPSB0aGlzLnBhZ2VMb2FkZXIuZ2V0RGF0YUhyZWYoe1xuICAgICAgICAgICAgICAgICAgICBocmVmOiAoMCwgX3V0aWxzKS5mb3JtYXRXaXRoVmFsaWRhdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRobmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBhc1BhdGg6IHJlc29sdmVkQXMsXG4gICAgICAgICAgICAgICAgICAgIHNzZzogX19OX1NTRyxcbiAgICAgICAgICAgICAgICAgICAgcnNjOiBfX05fUlNDLFxuICAgICAgICAgICAgICAgICAgICBsb2NhbGU6IHRoaXMubG9jYWxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IGF3YWl0IHRoaXMuX2dldERhdGEoKCk9Pl9fTl9TU0cgfHwgX19OX1NTUCA/IGZldGNoTmV4dERhdGEoZGF0YUhyZWYsIHRoaXMuaXNTc3IsIGZhbHNlLCBfX05fU1NHID8gdGhpcy5zZGMgOiB0aGlzLnNkciwgISFfX05fU1NHICYmICF0aGlzLmlzUHJldmlldykgOiB0aGlzLmdldEluaXRpYWxQcm9wcyhDb21wb25lbnQsIC8vIHdlIHByb3ZpZGUgQXBwVHJlZSBsYXRlciBzbyB0aGlzIG5lZWRzIHRvIGJlIGBhbnlgXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwYXRobmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICAgICAgICAgIGFzUGF0aDogYXMsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5sb2NhbGUsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZXM6IHRoaXMubG9jYWxlcyxcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdExvY2FsZTogdGhpcy5kZWZhdWx0TG9jYWxlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoX19OX1JTQykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZnJlc2ggLCBkYXRhICB9ID0gYXdhaXQgdGhpcy5fZ2V0RGF0YSgoKT0+dGhpcy5fZ2V0RmxpZ2h0RGF0YShkYXRhSHJlZilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHByb3BzLnBhZ2VQcm9wcyA9IE9iamVjdC5hc3NpZ24ocHJvcHMucGFnZVByb3BzLCB7XG4gICAgICAgICAgICAgICAgICAgIF9fZmxpZ2h0X3NlcmlhbGl6ZWRfXzogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgX19mbGlnaHRfZnJlc2hfXzogZnJlc2hcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvdXRlSW5mby5wcm9wcyA9IHByb3BzO1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzW3JvdXRlXSA9IHJvdXRlSW5mbztcbiAgICAgICAgICAgIHJldHVybiByb3V0ZUluZm87XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlUm91dGVJbmZvRXJyb3IoKDAsIF9pc0Vycm9yKS5kZWZhdWx0KGVycikgPyBlcnIgOiBuZXcgRXJyb3IoZXJyICsgJycpLCBwYXRobmFtZSwgcXVlcnksIGFzLCByb3V0ZVByb3BzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXQocm91dGUsIHBhdGhuYW1lLCBxdWVyeSwgYXMsIGRhdGEsIHJlc2V0U2Nyb2xsKSB7XG4gICAgICAgIHRoaXMuaXNGYWxsYmFjayA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJvdXRlID0gcm91dGU7XG4gICAgICAgIHRoaXMucGF0aG5hbWUgPSBwYXRobmFtZTtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xuICAgICAgICB0aGlzLmFzUGF0aCA9IGFzO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RpZnkoZGF0YSwgcmVzZXRTY3JvbGwpO1xuICAgIH1cbiAgICAvKipcbiAgICogQ2FsbGJhY2sgdG8gZXhlY3V0ZSBiZWZvcmUgcmVwbGFjaW5nIHJvdXRlciBzdGF0ZVxuICAgKiBAcGFyYW0gY2IgY2FsbGJhY2sgdG8gYmUgZXhlY3V0ZWRcbiAgICovIGJlZm9yZVBvcFN0YXRlKGNiKSB7XG4gICAgICAgIHRoaXMuX2JwcyA9IGNiO1xuICAgIH1cbiAgICBvbmx5QUhhc2hDaGFuZ2UoYXMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmFzUGF0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBjb25zdCBbb2xkVXJsTm9IYXNoLCBvbGRIYXNoXSA9IHRoaXMuYXNQYXRoLnNwbGl0KCcjJyk7XG4gICAgICAgIGNvbnN0IFtuZXdVcmxOb0hhc2gsIG5ld0hhc2hdID0gYXMuc3BsaXQoJyMnKTtcbiAgICAgICAgLy8gTWFrZXMgc3VyZSB3ZSBzY3JvbGwgdG8gdGhlIHByb3ZpZGVkIGhhc2ggaWYgdGhlIHVybC9oYXNoIGFyZSB0aGUgc2FtZVxuICAgICAgICBpZiAobmV3SGFzaCAmJiBvbGRVcmxOb0hhc2ggPT09IG5ld1VybE5vSGFzaCAmJiBvbGRIYXNoID09PSBuZXdIYXNoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgdXJscyBhcmUgY2hhbmdlLCB0aGVyZSdzIG1vcmUgdGhhbiBhIGhhc2ggY2hhbmdlXG4gICAgICAgIGlmIChvbGRVcmxOb0hhc2ggIT09IG5ld1VybE5vSGFzaCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZSBoYXNoIGhhcyBjaGFuZ2VkLCB0aGVuIGl0J3MgYSBoYXNoIG9ubHkgY2hhbmdlLlxuICAgICAgICAvLyBUaGlzIGNoZWNrIGlzIG5lY2Vzc2FyeSB0byBoYW5kbGUgYm90aCB0aGUgZW50ZXIgYW5kXG4gICAgICAgIC8vIGxlYXZlIGhhc2ggPT09ICcnIGNhc2VzLiBUaGUgaWRlbnRpdHkgY2FzZSBmYWxscyB0aHJvdWdoXG4gICAgICAgIC8vIGFuZCBpcyB0cmVhdGVkIGFzIGEgbmV4dCByZWxvYWQuXG4gICAgICAgIHJldHVybiBvbGRIYXNoICE9PSBuZXdIYXNoO1xuICAgIH1cbiAgICBzY3JvbGxUb0hhc2goYXMpIHtcbiAgICAgICAgY29uc3QgWywgaGFzaF0gPSBhcy5zcGxpdCgnIycpO1xuICAgICAgICAvLyBTY3JvbGwgdG8gdG9wIGlmIHRoZSBoYXNoIGlzIGp1c3QgYCNgIHdpdGggbm8gdmFsdWUgb3IgYCN0b3BgXG4gICAgICAgIC8vIFRvIG1pcnJvciBicm93c2Vyc1xuICAgICAgICBpZiAoaGFzaCA9PT0gJycgfHwgaGFzaCA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBGaXJzdCB3ZSBjaGVjayBpZiB0aGUgZWxlbWVudCBieSBpZCBpcyBmb3VuZFxuICAgICAgICBjb25zdCBpZEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaGFzaCk7XG4gICAgICAgIGlmIChpZEVsKSB7XG4gICAgICAgICAgICBpZEVsLnNjcm9sbEludG9WaWV3KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlcmUncyBubyBlbGVtZW50IHdpdGggdGhlIGlkLCB3ZSBjaGVjayB0aGUgYG5hbWVgIHByb3BlcnR5XG4gICAgICAgIC8vIFRvIG1pcnJvciBicm93c2Vyc1xuICAgICAgICBjb25zdCBuYW1lRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShoYXNoKVswXTtcbiAgICAgICAgaWYgKG5hbWVFbCkge1xuICAgICAgICAgICAgbmFtZUVsLnNjcm9sbEludG9WaWV3KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXJsSXNOZXcoYXNQYXRoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFzUGF0aCAhPT0gYXNQYXRoO1xuICAgIH1cbiAgICAvKipcbiAgICogUHJlZmV0Y2ggcGFnZSBjb2RlLCB5b3UgbWF5IHdhaXQgZm9yIHRoZSBkYXRhIGR1cmluZyBwYWdlIHJlbmRlcmluZy5cbiAgICogVGhpcyBmZWF0dXJlIG9ubHkgd29ya3MgaW4gcHJvZHVjdGlvbiFcbiAgICogQHBhcmFtIHVybCB0aGUgaHJlZiBvZiBwcmVmZXRjaGVkIHBhZ2VcbiAgICogQHBhcmFtIGFzUGF0aCB0aGUgYXMgcGF0aCBvZiB0aGUgcHJlZmV0Y2hlZCBwYWdlXG4gICAqLyBhc3luYyBwcmVmZXRjaCh1cmwsIGFzUGF0aCA9IHVybCwgb3B0aW9ucyA9IHtcbiAgICB9KSB7XG4gICAgICAgIGxldCBwYXJzZWQgPSAoMCwgX3BhcnNlUmVsYXRpdmVVcmwpLnBhcnNlUmVsYXRpdmVVcmwodXJsKTtcbiAgICAgICAgbGV0IHsgcGF0aG5hbWUgLCBxdWVyeSAgfSA9IHBhcnNlZDtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Ll9fTkVYVF9JMThOX1NVUFBPUlQpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxvY2FsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBwYXRobmFtZSA9ICgwLCBfbm9ybWFsaXplTG9jYWxlUGF0aCkubm9ybWFsaXplTG9jYWxlUGF0aChwYXRobmFtZSwgdGhpcy5sb2NhbGVzKS5wYXRobmFtZTtcbiAgICAgICAgICAgICAgICBwYXJzZWQucGF0aG5hbWUgPSBwYXRobmFtZTtcbiAgICAgICAgICAgICAgICB1cmwgPSAoMCwgX3V0aWxzKS5mb3JtYXRXaXRoVmFsaWRhdGlvbihwYXJzZWQpO1xuICAgICAgICAgICAgICAgIGxldCBwYXJzZWRBcyA9ICgwLCBfcGFyc2VSZWxhdGl2ZVVybCkucGFyc2VSZWxhdGl2ZVVybChhc1BhdGgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsZVBhdGhSZXN1bHQgPSAoMCwgX25vcm1hbGl6ZUxvY2FsZVBhdGgpLm5vcm1hbGl6ZUxvY2FsZVBhdGgocGFyc2VkQXMucGF0aG5hbWUsIHRoaXMubG9jYWxlcyk7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXMucGF0aG5hbWUgPSBsb2NhbGVQYXRoUmVzdWx0LnBhdGhuYW1lO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubG9jYWxlID0gbG9jYWxlUGF0aFJlc3VsdC5kZXRlY3RlZExvY2FsZSB8fCB0aGlzLmRlZmF1bHRMb2NhbGU7XG4gICAgICAgICAgICAgICAgYXNQYXRoID0gKDAsIF91dGlscykuZm9ybWF0V2l0aFZhbGlkYXRpb24ocGFyc2VkQXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhZ2VzID0gYXdhaXQgdGhpcy5wYWdlTG9hZGVyLmdldFBhZ2VMaXN0KCk7XG4gICAgICAgIGxldCByZXNvbHZlZEFzID0gYXNQYXRoO1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuX19ORVhUX0hBU19SRVdSSVRFUyAmJiBhc1BhdGguc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICAgICAgICBsZXQgcmV3cml0ZXM7XG4gICAgICAgICAgICAoeyBfX3Jld3JpdGVzOiByZXdyaXRlcyAgfSA9IGF3YWl0ICgwLCBfcm91dGVMb2FkZXIpLmdldENsaWVudEJ1aWxkTWFuaWZlc3QoKSk7XG4gICAgICAgICAgICBjb25zdCByZXdyaXRlc1Jlc3VsdCA9ICgwLCBfcmVzb2x2ZVJld3JpdGVzKS5kZWZhdWx0KGFkZEJhc2VQYXRoKGFkZExvY2FsZShhc1BhdGgsIHRoaXMubG9jYWxlKSksIHBhZ2VzLCByZXdyaXRlcywgcGFyc2VkLnF1ZXJ5LCAocCk9PnJlc29sdmVEeW5hbWljUm91dGUocCwgcGFnZXMpXG4gICAgICAgICAgICAsIHRoaXMubG9jYWxlcyk7XG4gICAgICAgICAgICByZXNvbHZlZEFzID0gZGVsTG9jYWxlKGRlbEJhc2VQYXRoKHJld3JpdGVzUmVzdWx0LmFzUGF0aCksIHRoaXMubG9jYWxlKTtcbiAgICAgICAgICAgIGlmIChyZXdyaXRlc1Jlc3VsdC5tYXRjaGVkUGFnZSAmJiByZXdyaXRlc1Jlc3VsdC5yZXNvbHZlZEhyZWYpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGRpcmVjdGx5IG1hdGNoZXMgYSBwYWdlIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSBocmVmIHRvXG4gICAgICAgICAgICAgICAgLy8gYWxsb3cgdGhlIGNvcnJlY3QgcGFnZSBjaHVuayB0byBiZSBsb2FkZWRcbiAgICAgICAgICAgICAgICBwYXRobmFtZSA9IHJld3JpdGVzUmVzdWx0LnJlc29sdmVkSHJlZjtcbiAgICAgICAgICAgICAgICBwYXJzZWQucGF0aG5hbWUgPSBwYXRobmFtZTtcbiAgICAgICAgICAgICAgICB1cmwgPSAoMCwgX3V0aWxzKS5mb3JtYXRXaXRoVmFsaWRhdGlvbihwYXJzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VkLnBhdGhuYW1lID0gcmVzb2x2ZUR5bmFtaWNSb3V0ZShwYXJzZWQucGF0aG5hbWUsIHBhZ2VzKTtcbiAgICAgICAgICAgIGlmIChwYXJzZWQucGF0aG5hbWUgIT09IHBhdGhuYW1lKSB7XG4gICAgICAgICAgICAgICAgcGF0aG5hbWUgPSBwYXJzZWQucGF0aG5hbWU7XG4gICAgICAgICAgICAgICAgcGFyc2VkLnBhdGhuYW1lID0gcGF0aG5hbWU7XG4gICAgICAgICAgICAgICAgdXJsID0gKDAsIF91dGlscykuZm9ybWF0V2l0aFZhbGlkYXRpb24ocGFyc2VkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBQcmVmZXRjaCBpcyBub3Qgc3VwcG9ydGVkIGluIGRldmVsb3BtZW50IG1vZGUgYmVjYXVzZSBpdCB3b3VsZCB0cmlnZ2VyIG9uLWRlbWFuZC1lbnRyaWVzXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWZmZWN0cyA9IGF3YWl0IHRoaXMuX3ByZWZsaWdodFJlcXVlc3Qoe1xuICAgICAgICAgICAgYXM6IGFkZEJhc2VQYXRoKGFzUGF0aCksXG4gICAgICAgICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgIHBhZ2VzLFxuICAgICAgICAgICAgcGF0aG5hbWUsXG4gICAgICAgICAgICBxdWVyeVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGVmZmVjdHMudHlwZSA9PT0gJ3Jld3JpdGUnKSB7XG4gICAgICAgICAgICBwYXJzZWQucGF0aG5hbWUgPSBlZmZlY3RzLnJlc29sdmVkSHJlZjtcbiAgICAgICAgICAgIHBhdGhuYW1lID0gZWZmZWN0cy5yZXNvbHZlZEhyZWY7XG4gICAgICAgICAgICBxdWVyeSA9IHtcbiAgICAgICAgICAgICAgICAuLi5xdWVyeSxcbiAgICAgICAgICAgICAgICAuLi5lZmZlY3RzLnBhcnNlZEFzLnF1ZXJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVzb2x2ZWRBcyA9IGVmZmVjdHMuYXNQYXRoO1xuICAgICAgICAgICAgdXJsID0gKDAsIF91dGlscykuZm9ybWF0V2l0aFZhbGlkYXRpb24ocGFyc2VkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByb3V0ZSA9ICgwLCBfbm9ybWFsaXplVHJhaWxpbmdTbGFzaCkucmVtb3ZlUGF0aFRyYWlsaW5nU2xhc2gocGF0aG5hbWUpO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0aGlzLnBhZ2VMb2FkZXIuX2lzU3NnKHJvdXRlKS50aGVuKChpc1NzZyk9PntcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNTc2cgPyBmZXRjaE5leHREYXRhKHRoaXMucGFnZUxvYWRlci5nZXREYXRhSHJlZih7XG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IHVybCxcbiAgICAgICAgICAgICAgICAgICAgYXNQYXRoOiByZXNvbHZlZEFzLFxuICAgICAgICAgICAgICAgICAgICBzc2c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZTogdHlwZW9mIG9wdGlvbnMubG9jYWxlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubG9jYWxlIDogdGhpcy5sb2NhbGVcbiAgICAgICAgICAgICAgICB9KSwgZmFsc2UsIGZhbHNlLCB0aGlzLnNkYywgdHJ1ZSkgOiBmYWxzZTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgdGhpcy5wYWdlTG9hZGVyW29wdGlvbnMucHJpb3JpdHkgPyAnbG9hZFBhZ2UnIDogJ3ByZWZldGNoJ10ocm91dGUpLCBcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIGFzeW5jIGZldGNoQ29tcG9uZW50KHJvdXRlKSB7XG4gICAgICAgIGxldCBjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgY2FuY2VsID0gdGhpcy5jbGMgPSAoKT0+e1xuICAgICAgICAgICAgY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlQ2FuY2VsbGVkID0gKCk9PntcbiAgICAgICAgICAgIGlmIChjYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihgQWJvcnQgZmV0Y2hpbmcgY29tcG9uZW50IGZvciByb3V0ZTogXCIke3JvdXRlfVwiYCk7XG4gICAgICAgICAgICAgICAgZXJyb3IuY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYW5jZWwgPT09IHRoaXMuY2xjKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGMgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50UmVzdWx0ID0gYXdhaXQgdGhpcy5wYWdlTG9hZGVyLmxvYWRQYWdlKHJvdXRlKTtcbiAgICAgICAgICAgIGhhbmRsZUNhbmNlbGxlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudFJlc3VsdDtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBoYW5kbGVDYW5jZWxsZWQoKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfZ2V0RGF0YShmbikge1xuICAgICAgICBsZXQgY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGNhbmNlbCA9ICgpPT57XG4gICAgICAgICAgICBjYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNsYyA9IGNhbmNlbDtcbiAgICAgICAgcmV0dXJuIGZuKCkudGhlbigoZGF0YSk9PntcbiAgICAgICAgICAgIGlmIChjYW5jZWwgPT09IHRoaXMuY2xjKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGMgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcignTG9hZGluZyBpbml0aWFsIHByb3BzIGNhbmNlbGxlZCcpO1xuICAgICAgICAgICAgICAgIGVyci5jYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2dldEZsaWdodERhdGEoZGF0YUhyZWYpIHtcbiAgICAgICAgY29uc3QgeyBocmVmOiBjYWNoZUtleSAgfSA9IG5ldyBVUkwoZGF0YUhyZWYsIHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzUHJldmlldyAmJiB0aGlzLnNkY1tjYWNoZUtleV0pIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgIGZyZXNoOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLnNkY1tjYWNoZUtleV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmZXRjaE5leHREYXRhKGRhdGFIcmVmLCB0cnVlLCB0cnVlLCB0aGlzLnNkYywgZmFsc2UpLnRoZW4oKHNlcmlhbGl6ZWQpPT57XG4gICAgICAgICAgICB0aGlzLnNkY1tjYWNoZUtleV0gPSBzZXJpYWxpemVkO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmcmVzaDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhOiBzZXJpYWxpemVkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgX3ByZWZsaWdodFJlcXVlc3Qob3B0aW9ucykge1xuICAgICAgICB2YXIgcmVmO1xuICAgICAgICBjb25zdCBjbGVhbmVkQXMgPSBkZWxMb2NhbGUoaGFzQmFzZVBhdGgob3B0aW9ucy5hcykgPyBkZWxCYXNlUGF0aChvcHRpb25zLmFzKSA6IG9wdGlvbnMuYXMsIHRoaXMubG9jYWxlKTtcbiAgICAgICAgY29uc3QgZm5zID0gYXdhaXQgdGhpcy5wYWdlTG9hZGVyLmdldE1pZGRsZXdhcmVMaXN0KCk7XG4gICAgICAgIGNvbnN0IHJlcXVpcmVzUHJlZmxpZ2h0ID0gZm5zLnNvbWUoKFttaWRkbGV3YXJlLCBpc1NTUl0pPT57XG4gICAgICAgICAgICByZXR1cm4gKDAsIF9yb3V0ZU1hdGNoZXIpLmdldFJvdXRlTWF0Y2hlcigoMCwgX2dldE1pZGRsZXdhcmVSZWdleCkuZ2V0TWlkZGxld2FyZVJlZ2V4KG1pZGRsZXdhcmUsICFpc1NTUikpKGNsZWFuZWRBcyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlcXVpcmVzUHJlZmxpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmVmbGlnaHQgPSBhd2FpdCB0aGlzLl9nZXRQcmVmbGlnaHREYXRhKHtcbiAgICAgICAgICAgIHByZWZsaWdodEhyZWY6IG9wdGlvbnMuYXMsXG4gICAgICAgICAgICBzaG91bGRDYWNoZTogb3B0aW9ucy5jYWNoZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKChyZWYgPSBwcmVmbGlnaHQucmV3cml0ZSkgPT09IG51bGwgfHwgcmVmID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZWYuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgPSAoMCwgX3BhcnNlUmVsYXRpdmVVcmwpLnBhcnNlUmVsYXRpdmVVcmwoKDAsIF9ub3JtYWxpemVMb2NhbGVQYXRoKS5ub3JtYWxpemVMb2NhbGVQYXRoKGhhc0Jhc2VQYXRoKHByZWZsaWdodC5yZXdyaXRlKSA/IGRlbEJhc2VQYXRoKHByZWZsaWdodC5yZXdyaXRlKSA6IHByZWZsaWdodC5yZXdyaXRlLCB0aGlzLmxvY2FsZXMpLnBhdGhuYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IGZzUGF0aG5hbWUgPSAoMCwgX25vcm1hbGl6ZVRyYWlsaW5nU2xhc2gpLnJlbW92ZVBhdGhUcmFpbGluZ1NsYXNoKHBhcnNlZC5wYXRobmFtZSk7XG4gICAgICAgICAgICBsZXQgbWF0Y2hlZFBhZ2U7XG4gICAgICAgICAgICBsZXQgcmVzb2x2ZWRIcmVmO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGFnZXMuaW5jbHVkZXMoZnNQYXRobmFtZSkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVkUGFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZWRIcmVmID0gZnNQYXRobmFtZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZWRIcmVmID0gcmVzb2x2ZUR5bmFtaWNSb3V0ZShmc1BhdGhuYW1lLCBvcHRpb25zLnBhZ2VzKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzb2x2ZWRIcmVmICE9PSBwYXJzZWQucGF0aG5hbWUgJiYgb3B0aW9ucy5wYWdlcy5pbmNsdWRlcyhyZXNvbHZlZEhyZWYpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZWRQYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXdyaXRlJyxcbiAgICAgICAgICAgICAgICBhc1BhdGg6IHBhcnNlZC5wYXRobmFtZSxcbiAgICAgICAgICAgICAgICBwYXJzZWRBczogcGFyc2VkLFxuICAgICAgICAgICAgICAgIG1hdGNoZWRQYWdlLFxuICAgICAgICAgICAgICAgIHJlc29sdmVkSHJlZlxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJlZmxpZ2h0LnJlZGlyZWN0KSB7XG4gICAgICAgICAgICBpZiAocHJlZmxpZ2h0LnJlZGlyZWN0LnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuUmVkaXJlY3QgPSAoMCwgX25vcm1hbGl6ZVRyYWlsaW5nU2xhc2gpLnJlbW92ZVBhdGhUcmFpbGluZ1NsYXNoKCgwLCBfbm9ybWFsaXplTG9jYWxlUGF0aCkubm9ybWFsaXplTG9jYWxlUGF0aChoYXNCYXNlUGF0aChwcmVmbGlnaHQucmVkaXJlY3QpID8gZGVsQmFzZVBhdGgocHJlZmxpZ2h0LnJlZGlyZWN0KSA6IHByZWZsaWdodC5yZWRpcmVjdCwgdGhpcy5sb2NhbGVzKS5wYXRobmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB1cmw6IG5ld1VybCAsIGFzOiBuZXdBcyAgfSA9IHByZXBhcmVVcmxBcyh0aGlzLCBjbGVhblJlZGlyZWN0LCBjbGVhblJlZGlyZWN0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVkaXJlY3QnLFxuICAgICAgICAgICAgICAgICAgICBuZXdVcmwsXG4gICAgICAgICAgICAgICAgICAgIG5ld0FzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3JlZGlyZWN0JyxcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogcHJlZmxpZ2h0LnJlZGlyZWN0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIEZvciBTU1IgcmVxdWVzdHMsIHRoZXkgd2lsbCBiZSBoYW5kbGVkIGxpa2Ugbm9ybWFsIHBhZ2VzLlxuICAgICAgICBpZiAocHJlZmxpZ2h0LnJlZnJlc2ggJiYgIXByZWZsaWdodC5zc3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3JlZnJlc2gnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnbmV4dCdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX2dldFByZWZsaWdodERhdGEocGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgcHJlZmxpZ2h0SHJlZiAsIHNob3VsZENhY2hlID1mYWxzZSAgfSA9IHBhcmFtcztcbiAgICAgICAgY29uc3QgeyBocmVmOiBjYWNoZUtleSAgfSA9IG5ldyBVUkwocHJlZmxpZ2h0SHJlZiwgd2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyAmJiAhdGhpcy5pc1ByZXZpZXcgJiYgc2hvdWxkQ2FjaGUgJiYgdGhpcy5zZGVbY2FjaGVLZXldKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuc2RlW2NhY2hlS2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZldGNoKHByZWZsaWdodEhyZWYsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0hFQUQnLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ3gtbWlkZGxld2FyZS1wcmVmbGlnaHQnOiAnMSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkudGhlbigocmVzKT0+e1xuICAgICAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBwcmVmbGlnaHQgcmVxdWVzdGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdDogcmVzLmhlYWRlcnMuZ2V0KCdMb2NhdGlvbicpLFxuICAgICAgICAgICAgICAgIHJlZnJlc2g6IHJlcy5oZWFkZXJzLmhhcygneC1taWRkbGV3YXJlLXJlZnJlc2gnKSxcbiAgICAgICAgICAgICAgICByZXdyaXRlOiByZXMuaGVhZGVycy5nZXQoJ3gtbWlkZGxld2FyZS1yZXdyaXRlJyksXG4gICAgICAgICAgICAgICAgc3NyOiAhIXJlcy5oZWFkZXJzLmdldCgneC1taWRkbGV3YXJlLXNzcicpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KS50aGVuKChkYXRhKT0+e1xuICAgICAgICAgICAgaWYgKHNob3VsZENhY2hlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZGVbY2FjaGVLZXldID0gZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9KS5jYXRjaCgoZXJyKT0+e1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuc2RlW2NhY2hlS2V5XTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEluaXRpYWxQcm9wcyhDb21wb25lbnQsIGN0eCkge1xuICAgICAgICBjb25zdCB7IENvbXBvbmVudDogQXBwICB9ID0gdGhpcy5jb21wb25lbnRzWycvX2FwcCddO1xuICAgICAgICBjb25zdCBBcHBUcmVlID0gdGhpcy5fd3JhcEFwcChBcHApO1xuICAgICAgICBjdHguQXBwVHJlZSA9IEFwcFRyZWU7XG4gICAgICAgIHJldHVybiAoMCwgX3V0aWxzKS5sb2FkR2V0SW5pdGlhbFByb3BzKEFwcCwge1xuICAgICAgICAgICAgQXBwVHJlZSxcbiAgICAgICAgICAgIENvbXBvbmVudCxcbiAgICAgICAgICAgIHJvdXRlcjogdGhpcyxcbiAgICAgICAgICAgIGN0eFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWJvcnRDb21wb25lbnRMb2FkKGFzLCByb3V0ZVByb3BzKSB7XG4gICAgICAgIGlmICh0aGlzLmNsYykge1xuICAgICAgICAgICAgUm91dGVyLmV2ZW50cy5lbWl0KCdyb3V0ZUNoYW5nZUVycm9yJywgYnVpbGRDYW5jZWxsYXRpb25FcnJvcigpLCBhcywgcm91dGVQcm9wcyk7XG4gICAgICAgICAgICB0aGlzLmNsYygpO1xuICAgICAgICAgICAgdGhpcy5jbGMgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5vdGlmeShkYXRhLCByZXNldFNjcm9sbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWIoZGF0YSwgdGhpcy5jb21wb25lbnRzWycvX2FwcCddLkNvbXBvbmVudCwgcmVzZXRTY3JvbGwpO1xuICAgIH1cbn1cblJvdXRlci5ldmVudHMgPSAoMCwgX21pdHQpLmRlZmF1bHQoKTtcbmV4cG9ydHMuZGVmYXVsdCA9IFJvdXRlcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm91dGVyLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImdldERvbWFpbkxvY2FsZSIsImFkZExvY2FsZSIsImRlbExvY2FsZSIsImhhc0Jhc2VQYXRoIiwiYWRkQmFzZVBhdGgiLCJkZWxCYXNlUGF0aCIsImlzTG9jYWxVUkwiLCJpbnRlcnBvbGF0ZUFzIiwicmVzb2x2ZUhyZWYiLCJkZWZhdWx0IiwiX25vcm1hbGl6ZVRyYWlsaW5nU2xhc2giLCJyZXF1aXJlIiwiX3JvdXRlTG9hZGVyIiwiX2lzRXJyb3IiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2Rlbm9ybWFsaXplUGFnZVBhdGgiLCJfbm9ybWFsaXplTG9jYWxlUGF0aCIsIl9taXR0IiwiX3V0aWxzIiwiX2lzRHluYW1pYyIsIl9wYXJzZVJlbGF0aXZlVXJsIiwiX3F1ZXJ5c3RyaW5nIiwiX3Jlc29sdmVSZXdyaXRlcyIsIl9yb3V0ZU1hdGNoZXIiLCJfcm91dGVSZWdleCIsIl9nZXRNaWRkbGV3YXJlUmVnZXgiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGV0ZWN0RG9tYWluTG9jYWxlIiwicHJvY2VzcyIsImVudiIsIl9fTkVYVF9JMThOX1NVUFBPUlQiLCJiYXNlUGF0aCIsIl9fTkVYVF9ST1VURVJfQkFTRVBBVEgiLCJidWlsZENhbmNlbGxhdGlvbkVycm9yIiwiYXNzaWduIiwiRXJyb3IiLCJjYW5jZWxsZWQiLCJhZGRQYXRoUHJlZml4IiwicGF0aCIsInByZWZpeCIsInN0YXJ0c1dpdGgiLCJwYXRobmFtZSIsInBhdGhOb1F1ZXJ5SGFzaCIsIm5vcm1hbGl6ZVBhdGhUcmFpbGluZ1NsYXNoIiwic3Vic3RyIiwibGVuZ3RoIiwibG9jYWxlIiwibG9jYWxlcyIsImRvbWFpbkxvY2FsZXMiLCJub3JtYWxpemVMb2NhbGVQYXRoIiwiZGV0ZWN0ZWRMb2NhbGUiLCJkZXRlY3RlZERvbWFpbiIsInVuZGVmaW5lZCIsImh0dHAiLCJkb21haW4iLCJkZWZhdWx0TG9jYWxlIiwicGF0aExvd2VyIiwidG9Mb3dlckNhc2UiLCJsb2NhbGVMb3dlciIsInF1ZXJ5SW5kZXgiLCJpbmRleE9mIiwiaGFzaEluZGV4Iiwic3Vic3RyaW5nIiwic2xpY2UiLCJ1cmwiLCJsb2NhdGlvbk9yaWdpbiIsImdldExvY2F0aW9uT3JpZ2luIiwicmVzb2x2ZWQiLCJVUkwiLCJvcmlnaW4iLCJfIiwicm91dGUiLCJhc1BhdGhuYW1lIiwicXVlcnkiLCJpbnRlcnBvbGF0ZWRSb3V0ZSIsImR5bmFtaWNSZWdleCIsImdldFJvdXRlUmVnZXgiLCJkeW5hbWljR3JvdXBzIiwiZ3JvdXBzIiwiZHluYW1pY01hdGNoZXMiLCJnZXRSb3V0ZU1hdGNoZXIiLCJwYXJhbXMiLCJrZXlzIiwiZXZlcnkiLCJwYXJhbSIsInJlcGVhdCIsIm9wdGlvbmFsIiwicmVwbGFjZWQiLCJBcnJheSIsImlzQXJyYXkiLCJyZXBsYWNlIiwibWFwIiwic2VnbWVudCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJyZXN1bHQiLCJvbWl0UGFybXNGcm9tUXVlcnkiLCJmaWx0ZXJlZFF1ZXJ5IiwiZm9yRWFjaCIsImtleSIsImluY2x1ZGVzIiwicm91dGVyIiwiaHJlZiIsInJlc29sdmVBcyIsImJhc2UiLCJ1cmxBc1N0cmluZyIsImZvcm1hdFdpdGhWYWxpZGF0aW9uIiwidXJsUHJvdG9NYXRjaCIsIm1hdGNoIiwidXJsQXNTdHJpbmdOb1Byb3RvIiwidXJsUGFydHMiLCJzcGxpdCIsImNvbnNvbGUiLCJlcnJvciIsIm5vcm1hbGl6ZWRVcmwiLCJub3JtYWxpemVSZXBlYXRlZFNsYXNoZXMiLCJhc1BhdGgiLCJmaW5hbFVybCIsImludGVycG9sYXRlZEFzIiwiaXNEeW5hbWljUm91dGUiLCJzZWFyY2hQYXJhbXMiLCJzZWFyY2hQYXJhbXNUb1VybFF1ZXJ5IiwiaGFzaCIsInJlc29sdmVkSHJlZiIsIl8xIiwic3RyaXBPcmlnaW4iLCJwcmVwYXJlVXJsQXMiLCJhcyIsInJlc29sdmVkQXMiLCJocmVmSGFkT3JpZ2luIiwiYXNIYWRPcmlnaW4iLCJwcmVwYXJlZFVybCIsInByZXBhcmVkQXMiLCJyZXNvbHZlRHluYW1pY1JvdXRlIiwicGFnZXMiLCJjbGVhblBhdGhuYW1lIiwicmVtb3ZlUGF0aFRyYWlsaW5nU2xhc2giLCJkZW5vcm1hbGl6ZVBhZ2VQYXRoIiwic29tZSIsInBhZ2UiLCJyZSIsInRlc3QiLCJtYW51YWxTY3JvbGxSZXN0b3JhdGlvbiIsIl9fTkVYVF9TQ1JPTExfUkVTVE9SQVRJT04iLCJ3aW5kb3ciLCJoaXN0b3J5IiwidiIsInNlc3Npb25TdG9yYWdlIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJuIiwiU1NHX0RBVEFfTk9UX0ZPVU5EIiwiU3ltYm9sIiwiZmV0Y2hSZXRyeSIsImF0dGVtcHRzIiwib3B0cyIsImZldGNoIiwiY3JlZGVudGlhbHMiLCJ0aGVuIiwicmVzIiwib2siLCJzdGF0dXMiLCJqc29uIiwiZGF0YSIsIm5vdEZvdW5kIiwidGV4dCIsImZldGNoTmV4dERhdGEiLCJkYXRhSHJlZiIsImlzU2VydmVyUmVuZGVyIiwiaW5mbGlnaHRDYWNoZSIsInBlcnNpc3RDYWNoZSIsImNhY2hlS2V5IiwibG9jYXRpb24iLCJjYXRjaCIsImVyciIsIm1hcmtBc3NldEVycm9yIiwiUm91dGVyIiwiaW5pdGlhbFByb3BzIiwicGFnZUxvYWRlciIsIkFwcCIsIndyYXBBcHAiLCJDb21wb25lbnQiLCJzdWJzY3JpcHRpb24iLCJpc0ZhbGxiYWNrIiwiaXNQcmV2aWV3Iiwic2RjIiwic2RyIiwic2RlIiwiX2lkeCIsIm9uUG9wU3RhdGUiLCJlIiwic3RhdGUiLCJjaGFuZ2VTdGF0ZSIsImdldFVSTCIsIl9fTiIsImZvcmNlZFNjcm9sbCIsIm9wdGlvbnMiLCJpZHgiLCJKU09OIiwic3RyaW5naWZ5IiwieCIsInNlbGYiLCJwYWdlWE9mZnNldCIsInkiLCJwYWdlWU9mZnNldCIsImdldEl0ZW0iLCJwYXJzZSIsInBhcnNlUmVsYXRpdmVVcmwiLCJpc1NzciIsIl9icHMiLCJjaGFuZ2UiLCJzaGFsbG93IiwiX3NoYWxsb3ciLCJjb21wb25lbnRzIiwicmVmIiwiaW5pdGlhbCIsInByb3BzIiwiX19OX1NTRyIsIl9fTl9TU1AiLCJfX05fUlNDIiwiX19uZXh0X3JzY19fIiwic3R5bGVTaGVldHMiLCJldmVudHMiLCJhdXRvRXhwb3J0RHluYW1pYyIsIl9fTkVYVF9EQVRBX18iLCJhdXRvRXhwb3J0Iiwic3ViIiwiY2xjIiwiX3dyYXBBcHAiLCJpc1JlYWR5IiwiZ3NzcCIsImdpcCIsImFwcEdpcCIsImdzcCIsInNlYXJjaCIsIl9fTkVYVF9IQVNfUkVXUklURVMiLCJpc0xvY2FsZURvbWFpbiIsImhvc3RuYW1lIiwiX3Nob3VsZFJlc29sdmVIcmVmIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNjcm9sbFJlc3RvcmF0aW9uIiwicmVsb2FkIiwiYmFjayIsInB1c2giLCJtZXRob2QiLCJzaG91bGRSZXNvbHZlSHJlZiIsIl9oIiwicHJldkxvY2FsZSIsInBhcnNlZEFzIiwibG9jYWxlUGF0aFJlc3VsdCIsImRpZE5hdmlnYXRlIiwiYXNOb0Jhc2VQYXRoIiwiUHJvbWlzZSIsIlNUIiwicGVyZm9ybWFuY2UiLCJtYXJrIiwicm91dGVQcm9wcyIsIl9pbkZsaWdodFJvdXRlIiwiYWJvcnRDb21wb25lbnRMb2FkIiwiY2xlYW5lZEFzIiwibG9jYWxlQ2hhbmdlIiwib25seUFIYXNoQ2hhbmdlIiwiZW1pdCIsInNjcm9sbFRvSGFzaCIsIm5vdGlmeSIsInBhcnNlZCIsInJld3JpdGVzIiwiX19yZXdyaXRlcyIsImFsbCIsImdldFBhZ2VMaXN0IiwiZ2V0Q2xpZW50QnVpbGRNYW5pZmVzdCIsImdldE1pZGRsZXdhcmVMaXN0IiwidXJsSXNOZXciLCJyZXdyaXRlc1Jlc3VsdCIsInAiLCJtYXRjaGVkUGFnZSIsImVmZmVjdCIsIl9wcmVmbGlnaHRSZXF1ZXN0IiwiY2FjaGUiLCJ0eXBlIiwibmV3QXMiLCJuZXdVcmwiLCJkZXN0aW5hdGlvbiIsInJvdXRlUmVnZXgiLCJyb3V0ZU1hdGNoIiwic2hvdWxkSW50ZXJwb2xhdGUiLCJtaXNzaW5nUGFyYW1zIiwiZmlsdGVyIiwid2FybiIsInJlZjEiLCJyb3V0ZUluZm8iLCJnZXRSb3V0ZUluZm8iLCJwYWdlUHJvcHMiLCJfX05fUkVESVJFQ1QiLCJfX05fUkVESVJFQ1RfQkFTRV9QQVRIIiwicGFyc2VkSHJlZiIsIl9fTl9QUkVWSUVXIiwibm90Rm91bmRSb3V0ZSIsImZldGNoQ29tcG9uZW50Iiwic3RhdHVzQ29kZSIsImlzVmFsaWRTaGFsbG93Um91dGUiLCJfc2Nyb2xsIiwic2hvdWxkU2Nyb2xsIiwic2Nyb2xsIiwicmVzZXRTY3JvbGwiLCJzZXQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImxhbmciLCJlcnIxIiwiaGFuZGxlUm91dGVJbmZvRXJyb3IiLCJsb2FkRXJyb3JGYWlsIiwiaXNBc3NldEVycm9yIiwiZ2V0SW5pdGlhbFByb3BzIiwiZ2lwRXJyIiwicm91dGVJbmZvRXJyIiwiZXhpc3RpbmdSb3V0ZUluZm8iLCJjYWNoZWRSb3V0ZUluZm8iLCJtb2QiLCJpc1ZhbGlkRWxlbWVudFR5cGUiLCJnZXREYXRhSHJlZiIsInNzZyIsInJzYyIsIl9nZXREYXRhIiwiZnJlc2giLCJfZ2V0RmxpZ2h0RGF0YSIsIl9fZmxpZ2h0X3NlcmlhbGl6ZWRfXyIsIl9fZmxpZ2h0X2ZyZXNoX18iLCJiZWZvcmVQb3BTdGF0ZSIsImNiIiwib2xkVXJsTm9IYXNoIiwib2xkSGFzaCIsIm5ld1VybE5vSGFzaCIsIm5ld0hhc2giLCJzY3JvbGxUbyIsImlkRWwiLCJnZXRFbGVtZW50QnlJZCIsInNjcm9sbEludG9WaWV3IiwibmFtZUVsIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJwcmVmZXRjaCIsImVmZmVjdHMiLCJfaXNTc2ciLCJpc1NzZyIsInByaW9yaXR5IiwiY2FuY2VsIiwiaGFuZGxlQ2FuY2VsbGVkIiwiY29tcG9uZW50UmVzdWx0IiwibG9hZFBhZ2UiLCJmbiIsInJlc29sdmUiLCJzZXJpYWxpemVkIiwiZm5zIiwicmVxdWlyZXNQcmVmbGlnaHQiLCJtaWRkbGV3YXJlIiwiaXNTU1IiLCJnZXRNaWRkbGV3YXJlUmVnZXgiLCJwcmVmbGlnaHQiLCJfZ2V0UHJlZmxpZ2h0RGF0YSIsInByZWZsaWdodEhyZWYiLCJzaG91bGRDYWNoZSIsInJld3JpdGUiLCJmc1BhdGhuYW1lIiwicmVkaXJlY3QiLCJjbGVhblJlZGlyZWN0IiwicmVmcmVzaCIsInNzciIsImhlYWRlcnMiLCJnZXQiLCJoYXMiLCJjdHgiLCJBcHBUcmVlIiwibG9hZEdldEluaXRpYWxQcm9wcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/next/dist/shared/lib/router/router.js\n");

/***/ }),

/***/ "../../node_modules/next/dist/lib/is-error.js":
/*!****************************************************!*\
  !*** ../../node_modules/next/dist/lib/is-error.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports[\"default\"] = isError;\nfunction isError(err) {\n    return typeof err === 'object' && err !== null && 'name' in err && 'message' in err;\n}\n\n//# sourceMappingURL=is-error.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9saWIvaXMtZXJyb3IuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixrQkFBZTtBQUNmO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2xpYi9pcy1lcnJvci5qcz9jNTViIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gaXNFcnJvcjtcbmZ1bmN0aW9uIGlzRXJyb3IoZXJyKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnIgPT09ICdvYmplY3QnICYmIGVyciAhPT0gbnVsbCAmJiAnbmFtZScgaW4gZXJyICYmICdtZXNzYWdlJyBpbiBlcnI7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzLWVycm9yLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/next/dist/lib/is-error.js\n");

/***/ }),

/***/ "../../node_modules/next/link.js":
/*!***************************************!*\
  !*** ../../node_modules/next/link.js ***!
  \***************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("module.exports = __webpack_require__(/*! ./dist/client/link */ \"../../node_modules/next/dist/client/link.js\")\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvbGluay5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQSw2R0FBOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvbGluay5qcz9iYTZmIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9kaXN0L2NsaWVudC9saW5rJylcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/next/link.js\n");

/***/ }),

/***/ "../../node_modules/next/node_modules/react-is/cjs/react-is.development.js":
/*!*********************************************************************************!*\
  !*** ../../node_modules/next/node_modules/react-is/cjs/react-is.development.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("/** @license React v17.0.2\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nif (true) {\n  (function() {\n'use strict';\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar REACT_ELEMENT_TYPE = 0xeac7;\nvar REACT_PORTAL_TYPE = 0xeaca;\nvar REACT_FRAGMENT_TYPE = 0xeacb;\nvar REACT_STRICT_MODE_TYPE = 0xeacc;\nvar REACT_PROFILER_TYPE = 0xead2;\nvar REACT_PROVIDER_TYPE = 0xeacd;\nvar REACT_CONTEXT_TYPE = 0xeace;\nvar REACT_FORWARD_REF_TYPE = 0xead0;\nvar REACT_SUSPENSE_TYPE = 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = 0xead8;\nvar REACT_MEMO_TYPE = 0xead3;\nvar REACT_LAZY_TYPE = 0xead4;\nvar REACT_BLOCK_TYPE = 0xead9;\nvar REACT_SERVER_BLOCK_TYPE = 0xeada;\nvar REACT_FUNDAMENTAL_TYPE = 0xead5;\nvar REACT_SCOPE_TYPE = 0xead7;\nvar REACT_OPAQUE_ID_TYPE = 0xeae0;\nvar REACT_DEBUG_TRACING_MODE_TYPE = 0xeae1;\nvar REACT_OFFSCREEN_TYPE = 0xeae2;\nvar REACT_LEGACY_HIDDEN_TYPE = 0xeae3;\n\nif (typeof Symbol === 'function' && Symbol.for) {\n  var symbolFor = Symbol.for;\n  REACT_ELEMENT_TYPE = symbolFor('react.element');\n  REACT_PORTAL_TYPE = symbolFor('react.portal');\n  REACT_FRAGMENT_TYPE = symbolFor('react.fragment');\n  REACT_STRICT_MODE_TYPE = symbolFor('react.strict_mode');\n  REACT_PROFILER_TYPE = symbolFor('react.profiler');\n  REACT_PROVIDER_TYPE = symbolFor('react.provider');\n  REACT_CONTEXT_TYPE = symbolFor('react.context');\n  REACT_FORWARD_REF_TYPE = symbolFor('react.forward_ref');\n  REACT_SUSPENSE_TYPE = symbolFor('react.suspense');\n  REACT_SUSPENSE_LIST_TYPE = symbolFor('react.suspense_list');\n  REACT_MEMO_TYPE = symbolFor('react.memo');\n  REACT_LAZY_TYPE = symbolFor('react.lazy');\n  REACT_BLOCK_TYPE = symbolFor('react.block');\n  REACT_SERVER_BLOCK_TYPE = symbolFor('react.server.block');\n  REACT_FUNDAMENTAL_TYPE = symbolFor('react.fundamental');\n  REACT_SCOPE_TYPE = symbolFor('react.scope');\n  REACT_OPAQUE_ID_TYPE = symbolFor('react.opaque.id');\n  REACT_DEBUG_TRACING_MODE_TYPE = symbolFor('react.debug_trace_mode');\n  REACT_OFFSCREEN_TYPE = symbolFor('react.offscreen');\n  REACT_LEGACY_HIDDEN_TYPE = symbolFor('react.legacy_hidden');\n}\n\n// Filter certain DOM attributes (e.g. src, href) if their values are empty strings.\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\n\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || type === REACT_DEBUG_TRACING_MODE_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || type === REACT_LEGACY_HIDDEN_TYPE || enableScopeAPI ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_BLOCK_TYPE || type[0] === REACT_SERVER_BLOCK_TYPE) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n          case REACT_SUSPENSE_LIST_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n}\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false;\nvar hasWarnedAboutDeprecatedIsConcurrentMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 18+.');\n    }\n  }\n\n  return false;\n}\nfunction isConcurrentMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsConcurrentMode) {\n      hasWarnedAboutDeprecatedIsConcurrentMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isConcurrentMode() alias has been deprecated, ' + 'and will be removed in React 18+.');\n    }\n  }\n\n  return false;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvbm9kZV9tb2R1bGVzL3JlYWN0LWlzL2Nqcy9yZWFjdC1pcy5kZXZlbG9wbWVudC5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVhOztBQUViLElBQUksSUFBcUM7QUFDekM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLDRCQUE0Qjs7QUFFNUI7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7O0FBR0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7O0FBRXREO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDs7QUFFbEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7O0FBRXZEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVCQUF1QjtBQUN2Qix1QkFBdUI7QUFDdkIsZUFBZTtBQUNmLGtCQUFrQjtBQUNsQixnQkFBZ0I7QUFDaEIsWUFBWTtBQUNaLFlBQVk7QUFDWixjQUFjO0FBQ2QsZ0JBQWdCO0FBQ2hCLGtCQUFrQjtBQUNsQixnQkFBZ0I7QUFDaEIsbUJBQW1CO0FBQ25CLHdCQUF3QjtBQUN4Qix5QkFBeUI7QUFDekIseUJBQXlCO0FBQ3pCLGlCQUFpQjtBQUNqQixvQkFBb0I7QUFDcEIsa0JBQWtCO0FBQ2xCLGNBQWM7QUFDZCxjQUFjO0FBQ2QsZ0JBQWdCO0FBQ2hCLGtCQUFrQjtBQUNsQixvQkFBb0I7QUFDcEIsa0JBQWtCO0FBQ2xCLDBCQUEwQjtBQUMxQixjQUFjO0FBQ2QsR0FBRztBQUNIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9uZXh0L25vZGVfbW9kdWxlcy9yZWFjdC1pcy9janMvcmVhY3QtaXMuZGV2ZWxvcG1lbnQuanM/NDczMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiogQGxpY2Vuc2UgUmVhY3QgdjE3LjAuMlxuICogcmVhY3QtaXMuZGV2ZWxvcG1lbnQuanNcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgKGZ1bmN0aW9uKCkge1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyBBVFRFTlRJT05cbi8vIFdoZW4gYWRkaW5nIG5ldyBzeW1ib2xzIHRvIHRoaXMgZmlsZSxcbi8vIFBsZWFzZSBjb25zaWRlciBhbHNvIGFkZGluZyB0byAncmVhY3QtZGV2dG9vbHMtc2hhcmVkL3NyYy9iYWNrZW5kL1JlYWN0U3ltYm9scydcbi8vIFRoZSBTeW1ib2wgdXNlZCB0byB0YWcgdGhlIFJlYWN0RWxlbWVudC1saWtlIHR5cGVzLiBJZiB0aGVyZSBpcyBubyBuYXRpdmUgU3ltYm9sXG4vLyBub3IgcG9seWZpbGwsIHRoZW4gYSBwbGFpbiBudW1iZXIgaXMgdXNlZCBmb3IgcGVyZm9ybWFuY2UuXG52YXIgUkVBQ1RfRUxFTUVOVF9UWVBFID0gMHhlYWM3O1xudmFyIFJFQUNUX1BPUlRBTF9UWVBFID0gMHhlYWNhO1xudmFyIFJFQUNUX0ZSQUdNRU5UX1RZUEUgPSAweGVhY2I7XG52YXIgUkVBQ1RfU1RSSUNUX01PREVfVFlQRSA9IDB4ZWFjYztcbnZhciBSRUFDVF9QUk9GSUxFUl9UWVBFID0gMHhlYWQyO1xudmFyIFJFQUNUX1BST1ZJREVSX1RZUEUgPSAweGVhY2Q7XG52YXIgUkVBQ1RfQ09OVEVYVF9UWVBFID0gMHhlYWNlO1xudmFyIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgPSAweGVhZDA7XG52YXIgUkVBQ1RfU1VTUEVOU0VfVFlQRSA9IDB4ZWFkMTtcbnZhciBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEUgPSAweGVhZDg7XG52YXIgUkVBQ1RfTUVNT19UWVBFID0gMHhlYWQzO1xudmFyIFJFQUNUX0xBWllfVFlQRSA9IDB4ZWFkNDtcbnZhciBSRUFDVF9CTE9DS19UWVBFID0gMHhlYWQ5O1xudmFyIFJFQUNUX1NFUlZFUl9CTE9DS19UWVBFID0gMHhlYWRhO1xudmFyIFJFQUNUX0ZVTkRBTUVOVEFMX1RZUEUgPSAweGVhZDU7XG52YXIgUkVBQ1RfU0NPUEVfVFlQRSA9IDB4ZWFkNztcbnZhciBSRUFDVF9PUEFRVUVfSURfVFlQRSA9IDB4ZWFlMDtcbnZhciBSRUFDVF9ERUJVR19UUkFDSU5HX01PREVfVFlQRSA9IDB4ZWFlMTtcbnZhciBSRUFDVF9PRkZTQ1JFRU5fVFlQRSA9IDB4ZWFlMjtcbnZhciBSRUFDVF9MRUdBQ1lfSElEREVOX1RZUEUgPSAweGVhZTM7XG5cbmlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5mb3IpIHtcbiAgdmFyIHN5bWJvbEZvciA9IFN5bWJvbC5mb3I7XG4gIFJFQUNUX0VMRU1FTlRfVFlQRSA9IHN5bWJvbEZvcigncmVhY3QuZWxlbWVudCcpO1xuICBSRUFDVF9QT1JUQUxfVFlQRSA9IHN5bWJvbEZvcigncmVhY3QucG9ydGFsJyk7XG4gIFJFQUNUX0ZSQUdNRU5UX1RZUEUgPSBzeW1ib2xGb3IoJ3JlYWN0LmZyYWdtZW50Jyk7XG4gIFJFQUNUX1NUUklDVF9NT0RFX1RZUEUgPSBzeW1ib2xGb3IoJ3JlYWN0LnN0cmljdF9tb2RlJyk7XG4gIFJFQUNUX1BST0ZJTEVSX1RZUEUgPSBzeW1ib2xGb3IoJ3JlYWN0LnByb2ZpbGVyJyk7XG4gIFJFQUNUX1BST1ZJREVSX1RZUEUgPSBzeW1ib2xGb3IoJ3JlYWN0LnByb3ZpZGVyJyk7XG4gIFJFQUNUX0NPTlRFWFRfVFlQRSA9IHN5bWJvbEZvcigncmVhY3QuY29udGV4dCcpO1xuICBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFID0gc3ltYm9sRm9yKCdyZWFjdC5mb3J3YXJkX3JlZicpO1xuICBSRUFDVF9TVVNQRU5TRV9UWVBFID0gc3ltYm9sRm9yKCdyZWFjdC5zdXNwZW5zZScpO1xuICBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEUgPSBzeW1ib2xGb3IoJ3JlYWN0LnN1c3BlbnNlX2xpc3QnKTtcbiAgUkVBQ1RfTUVNT19UWVBFID0gc3ltYm9sRm9yKCdyZWFjdC5tZW1vJyk7XG4gIFJFQUNUX0xBWllfVFlQRSA9IHN5bWJvbEZvcigncmVhY3QubGF6eScpO1xuICBSRUFDVF9CTE9DS19UWVBFID0gc3ltYm9sRm9yKCdyZWFjdC5ibG9jaycpO1xuICBSRUFDVF9TRVJWRVJfQkxPQ0tfVFlQRSA9IHN5bWJvbEZvcigncmVhY3Quc2VydmVyLmJsb2NrJyk7XG4gIFJFQUNUX0ZVTkRBTUVOVEFMX1RZUEUgPSBzeW1ib2xGb3IoJ3JlYWN0LmZ1bmRhbWVudGFsJyk7XG4gIFJFQUNUX1NDT1BFX1RZUEUgPSBzeW1ib2xGb3IoJ3JlYWN0LnNjb3BlJyk7XG4gIFJFQUNUX09QQVFVRV9JRF9UWVBFID0gc3ltYm9sRm9yKCdyZWFjdC5vcGFxdWUuaWQnKTtcbiAgUkVBQ1RfREVCVUdfVFJBQ0lOR19NT0RFX1RZUEUgPSBzeW1ib2xGb3IoJ3JlYWN0LmRlYnVnX3RyYWNlX21vZGUnKTtcbiAgUkVBQ1RfT0ZGU0NSRUVOX1RZUEUgPSBzeW1ib2xGb3IoJ3JlYWN0Lm9mZnNjcmVlbicpO1xuICBSRUFDVF9MRUdBQ1lfSElEREVOX1RZUEUgPSBzeW1ib2xGb3IoJ3JlYWN0LmxlZ2FjeV9oaWRkZW4nKTtcbn1cblxuLy8gRmlsdGVyIGNlcnRhaW4gRE9NIGF0dHJpYnV0ZXMgKGUuZy4gc3JjLCBocmVmKSBpZiB0aGVpciB2YWx1ZXMgYXJlIGVtcHR5IHN0cmluZ3MuXG5cbnZhciBlbmFibGVTY29wZUFQSSA9IGZhbHNlOyAvLyBFeHBlcmltZW50YWwgQ3JlYXRlIEV2ZW50IEhhbmRsZSBBUEkuXG5cbmZ1bmN0aW9uIGlzVmFsaWRFbGVtZW50VHlwZSh0eXBlKSB7XG4gIGlmICh0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSAvLyBOb3RlOiB0eXBlb2YgbWlnaHQgYmUgb3RoZXIgdGhhbiAnc3ltYm9sJyBvciAnbnVtYmVyJyAoZS5nLiBpZiBpdCdzIGEgcG9seWZpbGwpLlxuXG5cbiAgaWYgKHR5cGUgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEUgfHwgdHlwZSA9PT0gUkVBQ1RfUFJPRklMRVJfVFlQRSB8fCB0eXBlID09PSBSRUFDVF9ERUJVR19UUkFDSU5HX01PREVfVFlQRSB8fCB0eXBlID09PSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFIHx8IHR5cGUgPT09IFJFQUNUX1NVU1BFTlNFX1RZUEUgfHwgdHlwZSA9PT0gUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFIHx8IHR5cGUgPT09IFJFQUNUX0xFR0FDWV9ISURERU5fVFlQRSB8fCBlbmFibGVTY29wZUFQSSApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcgJiYgdHlwZSAhPT0gbnVsbCkge1xuICAgIGlmICh0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9MQVpZX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTUVNT19UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX1BST1ZJREVSX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ09OVEVYVF9UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfRlVOREFNRU5UQUxfVFlQRSB8fCB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9CTE9DS19UWVBFIHx8IHR5cGVbMF0gPT09IFJFQUNUX1NFUlZFUl9CTE9DS19UWVBFKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHR5cGVPZihvYmplY3QpIHtcbiAgaWYgKHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdCAhPT0gbnVsbCkge1xuICAgIHZhciAkJHR5cGVvZiA9IG9iamVjdC4kJHR5cGVvZjtcblxuICAgIHN3aXRjaCAoJCR0eXBlb2YpIHtcbiAgICAgIGNhc2UgUkVBQ1RfRUxFTUVOVF9UWVBFOlxuICAgICAgICB2YXIgdHlwZSA9IG9iamVjdC50eXBlO1xuXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgIGNhc2UgUkVBQ1RfRlJBR01FTlRfVFlQRTpcbiAgICAgICAgICBjYXNlIFJFQUNUX1BST0ZJTEVSX1RZUEU6XG4gICAgICAgICAgY2FzZSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFOlxuICAgICAgICAgIGNhc2UgUkVBQ1RfU1VTUEVOU0VfVFlQRTpcbiAgICAgICAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRTpcbiAgICAgICAgICAgIHJldHVybiB0eXBlO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHZhciAkJHR5cGVvZlR5cGUgPSB0eXBlICYmIHR5cGUuJCR0eXBlb2Y7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoJCR0eXBlb2ZUeXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgUkVBQ1RfQ09OVEVYVF9UWVBFOlxuICAgICAgICAgICAgICBjYXNlIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU6XG4gICAgICAgICAgICAgIGNhc2UgUkVBQ1RfTEFaWV9UWVBFOlxuICAgICAgICAgICAgICBjYXNlIFJFQUNUX01FTU9fVFlQRTpcbiAgICAgICAgICAgICAgY2FzZSBSRUFDVF9QUk9WSURFUl9UWVBFOlxuICAgICAgICAgICAgICAgIHJldHVybiAkJHR5cGVvZlR5cGU7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJCR0eXBlb2Y7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOlxuICAgICAgICByZXR1cm4gJCR0eXBlb2Y7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbnZhciBDb250ZXh0Q29uc3VtZXIgPSBSRUFDVF9DT05URVhUX1RZUEU7XG52YXIgQ29udGV4dFByb3ZpZGVyID0gUkVBQ1RfUFJPVklERVJfVFlQRTtcbnZhciBFbGVtZW50ID0gUkVBQ1RfRUxFTUVOVF9UWVBFO1xudmFyIEZvcndhcmRSZWYgPSBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFO1xudmFyIEZyYWdtZW50ID0gUkVBQ1RfRlJBR01FTlRfVFlQRTtcbnZhciBMYXp5ID0gUkVBQ1RfTEFaWV9UWVBFO1xudmFyIE1lbW8gPSBSRUFDVF9NRU1PX1RZUEU7XG52YXIgUG9ydGFsID0gUkVBQ1RfUE9SVEFMX1RZUEU7XG52YXIgUHJvZmlsZXIgPSBSRUFDVF9QUk9GSUxFUl9UWVBFO1xudmFyIFN0cmljdE1vZGUgPSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFO1xudmFyIFN1c3BlbnNlID0gUkVBQ1RfU1VTUEVOU0VfVFlQRTtcbnZhciBoYXNXYXJuZWRBYm91dERlcHJlY2F0ZWRJc0FzeW5jTW9kZSA9IGZhbHNlO1xudmFyIGhhc1dhcm5lZEFib3V0RGVwcmVjYXRlZElzQ29uY3VycmVudE1vZGUgPSBmYWxzZTsgLy8gQXN5bmNNb2RlIHNob3VsZCBiZSBkZXByZWNhdGVkXG5cbmZ1bmN0aW9uIGlzQXN5bmNNb2RlKG9iamVjdCkge1xuICB7XG4gICAgaWYgKCFoYXNXYXJuZWRBYm91dERlcHJlY2F0ZWRJc0FzeW5jTW9kZSkge1xuICAgICAgaGFzV2FybmVkQWJvdXREZXByZWNhdGVkSXNBc3luY01vZGUgPSB0cnVlOyAvLyBVc2luZyBjb25zb2xlWyd3YXJuJ10gdG8gZXZhZGUgQmFiZWwgYW5kIEVTTGludFxuXG4gICAgICBjb25zb2xlWyd3YXJuJ10oJ1RoZSBSZWFjdElzLmlzQXN5bmNNb2RlKCkgYWxpYXMgaGFzIGJlZW4gZGVwcmVjYXRlZCwgJyArICdhbmQgd2lsbCBiZSByZW1vdmVkIGluIFJlYWN0IDE4Ky4nKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc0NvbmN1cnJlbnRNb2RlKG9iamVjdCkge1xuICB7XG4gICAgaWYgKCFoYXNXYXJuZWRBYm91dERlcHJlY2F0ZWRJc0NvbmN1cnJlbnRNb2RlKSB7XG4gICAgICBoYXNXYXJuZWRBYm91dERlcHJlY2F0ZWRJc0NvbmN1cnJlbnRNb2RlID0gdHJ1ZTsgLy8gVXNpbmcgY29uc29sZVsnd2FybiddIHRvIGV2YWRlIEJhYmVsIGFuZCBFU0xpbnRcblxuICAgICAgY29uc29sZVsnd2FybiddKCdUaGUgUmVhY3RJcy5pc0NvbmN1cnJlbnRNb2RlKCkgYWxpYXMgaGFzIGJlZW4gZGVwcmVjYXRlZCwgJyArICdhbmQgd2lsbCBiZSByZW1vdmVkIGluIFJlYWN0IDE4Ky4nKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc0NvbnRleHRDb25zdW1lcihvYmplY3QpIHtcbiAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9DT05URVhUX1RZUEU7XG59XG5mdW5jdGlvbiBpc0NvbnRleHRQcm92aWRlcihvYmplY3QpIHtcbiAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9QUk9WSURFUl9UWVBFO1xufVxuZnVuY3Rpb24gaXNFbGVtZW50KG9iamVjdCkge1xuICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0ICE9PSBudWxsICYmIG9iamVjdC4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFO1xufVxuZnVuY3Rpb24gaXNGb3J3YXJkUmVmKG9iamVjdCkge1xuICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU7XG59XG5mdW5jdGlvbiBpc0ZyYWdtZW50KG9iamVjdCkge1xuICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEU7XG59XG5mdW5jdGlvbiBpc0xhenkob2JqZWN0KSB7XG4gIHJldHVybiB0eXBlT2Yob2JqZWN0KSA9PT0gUkVBQ1RfTEFaWV9UWVBFO1xufVxuZnVuY3Rpb24gaXNNZW1vKG9iamVjdCkge1xuICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX01FTU9fVFlQRTtcbn1cbmZ1bmN0aW9uIGlzUG9ydGFsKG9iamVjdCkge1xuICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX1BPUlRBTF9UWVBFO1xufVxuZnVuY3Rpb24gaXNQcm9maWxlcihvYmplY3QpIHtcbiAgcmV0dXJuIHR5cGVPZihvYmplY3QpID09PSBSRUFDVF9QUk9GSUxFUl9UWVBFO1xufVxuZnVuY3Rpb24gaXNTdHJpY3RNb2RlKG9iamVjdCkge1xuICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX1NUUklDVF9NT0RFX1RZUEU7XG59XG5mdW5jdGlvbiBpc1N1c3BlbnNlKG9iamVjdCkge1xuICByZXR1cm4gdHlwZU9mKG9iamVjdCkgPT09IFJFQUNUX1NVU1BFTlNFX1RZUEU7XG59XG5cbmV4cG9ydHMuQ29udGV4dENvbnN1bWVyID0gQ29udGV4dENvbnN1bWVyO1xuZXhwb3J0cy5Db250ZXh0UHJvdmlkZXIgPSBDb250ZXh0UHJvdmlkZXI7XG5leHBvcnRzLkVsZW1lbnQgPSBFbGVtZW50O1xuZXhwb3J0cy5Gb3J3YXJkUmVmID0gRm9yd2FyZFJlZjtcbmV4cG9ydHMuRnJhZ21lbnQgPSBGcmFnbWVudDtcbmV4cG9ydHMuTGF6eSA9IExhenk7XG5leHBvcnRzLk1lbW8gPSBNZW1vO1xuZXhwb3J0cy5Qb3J0YWwgPSBQb3J0YWw7XG5leHBvcnRzLlByb2ZpbGVyID0gUHJvZmlsZXI7XG5leHBvcnRzLlN0cmljdE1vZGUgPSBTdHJpY3RNb2RlO1xuZXhwb3J0cy5TdXNwZW5zZSA9IFN1c3BlbnNlO1xuZXhwb3J0cy5pc0FzeW5jTW9kZSA9IGlzQXN5bmNNb2RlO1xuZXhwb3J0cy5pc0NvbmN1cnJlbnRNb2RlID0gaXNDb25jdXJyZW50TW9kZTtcbmV4cG9ydHMuaXNDb250ZXh0Q29uc3VtZXIgPSBpc0NvbnRleHRDb25zdW1lcjtcbmV4cG9ydHMuaXNDb250ZXh0UHJvdmlkZXIgPSBpc0NvbnRleHRQcm92aWRlcjtcbmV4cG9ydHMuaXNFbGVtZW50ID0gaXNFbGVtZW50O1xuZXhwb3J0cy5pc0ZvcndhcmRSZWYgPSBpc0ZvcndhcmRSZWY7XG5leHBvcnRzLmlzRnJhZ21lbnQgPSBpc0ZyYWdtZW50O1xuZXhwb3J0cy5pc0xhenkgPSBpc0xhenk7XG5leHBvcnRzLmlzTWVtbyA9IGlzTWVtbztcbmV4cG9ydHMuaXNQb3J0YWwgPSBpc1BvcnRhbDtcbmV4cG9ydHMuaXNQcm9maWxlciA9IGlzUHJvZmlsZXI7XG5leHBvcnRzLmlzU3RyaWN0TW9kZSA9IGlzU3RyaWN0TW9kZTtcbmV4cG9ydHMuaXNTdXNwZW5zZSA9IGlzU3VzcGVuc2U7XG5leHBvcnRzLmlzVmFsaWRFbGVtZW50VHlwZSA9IGlzVmFsaWRFbGVtZW50VHlwZTtcbmV4cG9ydHMudHlwZU9mID0gdHlwZU9mO1xuICB9KSgpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../node_modules/next/node_modules/react-is/cjs/react-is.development.js\n");

/***/ }),

/***/ "../../node_modules/next/node_modules/react-is/index.js":
/*!**************************************************************!*\
  !*** ../../node_modules/next/node_modules/react-is/index.js ***!
  \**************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./cjs/react-is.development.js */ \"../../node_modules/next/node_modules/react-is/cjs/react-is.development.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvbm9kZV9tb2R1bGVzL3JlYWN0LWlzL2luZGV4LmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQUksS0FBcUMsRUFBRSxFQUUxQyxDQUFDO0FBQ0YsRUFBRSxzSkFBeUQ7QUFDM0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvbm9kZV9tb2R1bGVzL3JlYWN0LWlzL2luZGV4LmpzP2EwNDgiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY2pzL3JlYWN0LWlzLnByb2R1Y3Rpb24ubWluLmpzJyk7XG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY2pzL3JlYWN0LWlzLmRldmVsb3BtZW50LmpzJyk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/next/node_modules/react-is/index.js\n");

/***/ }),

/***/ "@apollo/client":
/*!*********************************!*\
  !*** external "@apollo/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@apollo/client");

/***/ }),

/***/ "@braintree/sanitize-url":
/*!******************************************!*\
  !*** external "@braintree/sanitize-url" ***!
  \******************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@braintree/sanitize-url");

/***/ }),

/***/ "@emotion/hash":
/*!********************************!*\
  !*** external "@emotion/hash" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@emotion/hash");

/***/ }),

/***/ "@emotion/weak-memoize":
/*!****************************************!*\
  !*** external "@emotion/weak-memoize" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@emotion/weak-memoize");

/***/ }),

/***/ "@graphql-tools/schema":
/*!****************************************!*\
  !*** external "@graphql-tools/schema" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@graphql-tools/schema");

/***/ }),

/***/ "@graphql-ts/extend":
/*!*************************************!*\
  !*** external "@graphql-ts/extend" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@graphql-ts/extend");

/***/ }),

/***/ "@graphql-ts/schema":
/*!*************************************!*\
  !*** external "@graphql-ts/schema" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@graphql-ts/schema");

/***/ }),

/***/ "@graphql-ts/schema/api-with-context":
/*!******************************************************!*\
  !*** external "@graphql-ts/schema/api-with-context" ***!
  \******************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@graphql-ts/schema/api-with-context");

/***/ }),

/***/ "@graphql-ts/schema/api-without-context":
/*!*********************************************************!*\
  !*** external "@graphql-ts/schema/api-without-context" ***!
  \*********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@graphql-ts/schema/api-without-context");

/***/ }),

/***/ "@keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/pages/App":
/*!*************************************************************************************************!*\
  !*** external "@keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/pages/App" ***!
  \*************************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-6/core/___internal-do-not-use-will-break-in-patch/admin-ui/pages/App");

/***/ }),

/***/ "@keystone-6/core/admin-ui/components":
/*!*******************************************************!*\
  !*** external "@keystone-6/core/admin-ui/components" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-6/core/admin-ui/components");

/***/ }),

/***/ "@keystone-6/core/admin-ui/context":
/*!****************************************************!*\
  !*** external "@keystone-6/core/admin-ui/context" ***!
  \****************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-6/core/admin-ui/context");

/***/ }),

/***/ "@keystone-6/core/fields/types/relationship/views/RelationshipSelect":
/*!**************************************************************************************!*\
  !*** external "@keystone-6/core/fields/types/relationship/views/RelationshipSelect" ***!
  \**************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-6/core/fields/types/relationship/views/RelationshipSelect");

/***/ }),

/***/ "@keystone-6/document-renderer":
/*!************************************************!*\
  !*** external "@keystone-6/document-renderer" ***!
  \************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-6/document-renderer");

/***/ }),

/***/ "@keystone-ui/button":
/*!**************************************!*\
  !*** external "@keystone-ui/button" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/button");

/***/ }),

/***/ "@keystone-ui/core":
/*!************************************!*\
  !*** external "@keystone-ui/core" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/core");

/***/ }),

/***/ "@keystone-ui/fields":
/*!**************************************!*\
  !*** external "@keystone-ui/fields" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/fields");

/***/ }),

/***/ "@keystone-ui/icons/icons/AlertTriangleIcon":
/*!*************************************************************!*\
  !*** external "@keystone-ui/icons/icons/AlertTriangleIcon" ***!
  \*************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/AlertTriangleIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/AlignCenterIcon":
/*!***********************************************************!*\
  !*** external "@keystone-ui/icons/icons/AlignCenterIcon" ***!
  \***********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/AlignCenterIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/AlignLeftIcon":
/*!*********************************************************!*\
  !*** external "@keystone-ui/icons/icons/AlignLeftIcon" ***!
  \*********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/AlignLeftIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/AlignRightIcon":
/*!**********************************************************!*\
  !*** external "@keystone-ui/icons/icons/AlignRightIcon" ***!
  \**********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/AlignRightIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/BoldIcon":
/*!****************************************************!*\
  !*** external "@keystone-ui/icons/icons/BoldIcon" ***!
  \****************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/BoldIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/ChevronDownIcon":
/*!***********************************************************!*\
  !*** external "@keystone-ui/icons/icons/ChevronDownIcon" ***!
  \***********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/ChevronDownIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/ChevronRightIcon":
/*!************************************************************!*\
  !*** external "@keystone-ui/icons/icons/ChevronRightIcon" ***!
  \************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/ChevronRightIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/CodeIcon":
/*!****************************************************!*\
  !*** external "@keystone-ui/icons/icons/CodeIcon" ***!
  \****************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/CodeIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/ColumnsIcon":
/*!*******************************************************!*\
  !*** external "@keystone-ui/icons/icons/ColumnsIcon" ***!
  \*******************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/ColumnsIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/ExternalLinkIcon":
/*!************************************************************!*\
  !*** external "@keystone-ui/icons/icons/ExternalLinkIcon" ***!
  \************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/ExternalLinkIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/EyeIcon":
/*!***************************************************!*\
  !*** external "@keystone-ui/icons/icons/EyeIcon" ***!
  \***************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/EyeIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/EyeOffIcon":
/*!******************************************************!*\
  !*** external "@keystone-ui/icons/icons/EyeOffIcon" ***!
  \******************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/EyeOffIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/ItalicIcon":
/*!******************************************************!*\
  !*** external "@keystone-ui/icons/icons/ItalicIcon" ***!
  \******************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/ItalicIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/LinkIcon":
/*!****************************************************!*\
  !*** external "@keystone-ui/icons/icons/LinkIcon" ***!
  \****************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/LinkIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/Maximize2Icon":
/*!*********************************************************!*\
  !*** external "@keystone-ui/icons/icons/Maximize2Icon" ***!
  \*********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/Maximize2Icon");

/***/ }),

/***/ "@keystone-ui/icons/icons/Minimize2Icon":
/*!*********************************************************!*\
  !*** external "@keystone-ui/icons/icons/Minimize2Icon" ***!
  \*********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/Minimize2Icon");

/***/ }),

/***/ "@keystone-ui/icons/icons/MinusIcon":
/*!*****************************************************!*\
  !*** external "@keystone-ui/icons/icons/MinusIcon" ***!
  \*****************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/MinusIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/MoreHorizontalIcon":
/*!**************************************************************!*\
  !*** external "@keystone-ui/icons/icons/MoreHorizontalIcon" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/MoreHorizontalIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/PlusIcon":
/*!****************************************************!*\
  !*** external "@keystone-ui/icons/icons/PlusIcon" ***!
  \****************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/PlusIcon");

/***/ }),

/***/ "@keystone-ui/icons/icons/Trash2Icon":
/*!******************************************************!*\
  !*** external "@keystone-ui/icons/icons/Trash2Icon" ***!
  \******************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/Trash2Icon");

/***/ }),

/***/ "@keystone-ui/icons/icons/XIcon":
/*!*************************************************!*\
  !*** external "@keystone-ui/icons/icons/XIcon" ***!
  \*************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/icons/icons/XIcon");

/***/ }),

/***/ "@keystone-ui/loading":
/*!***************************************!*\
  !*** external "@keystone-ui/loading" ***!
  \***************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/loading");

/***/ }),

/***/ "@keystone-ui/modals":
/*!**************************************!*\
  !*** external "@keystone-ui/modals" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/modals");

/***/ }),

/***/ "@keystone-ui/notice":
/*!**************************************!*\
  !*** external "@keystone-ui/notice" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/notice");

/***/ }),

/***/ "@keystone-ui/popover":
/*!***************************************!*\
  !*** external "@keystone-ui/popover" ***!
  \***************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/popover");

/***/ }),

/***/ "@keystone-ui/segmented-control":
/*!*************************************************!*\
  !*** external "@keystone-ui/segmented-control" ***!
  \*************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/segmented-control");

/***/ }),

/***/ "@keystone-ui/toast":
/*!*************************************!*\
  !*** external "@keystone-ui/toast" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/toast");

/***/ }),

/***/ "@keystone-ui/tooltip":
/*!***************************************!*\
  !*** external "@keystone-ui/tooltip" ***!
  \***************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@keystone-ui/tooltip");

/***/ }),

/***/ "apollo-upload-client":
/*!***************************************!*\
  !*** external "apollo-upload-client" ***!
  \***************************************/
/***/ ((module) => {

"use strict";
module.exports = require("apollo-upload-client");

/***/ }),

/***/ "apply-ref":
/*!****************************!*\
  !*** external "apply-ref" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("apply-ref");

/***/ }),

/***/ "date-fns":
/*!***************************!*\
  !*** external "date-fns" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("date-fns");

/***/ }),

/***/ "decimal.js":
/*!*****************************!*\
  !*** external "decimal.js" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("decimal.js");

/***/ }),

/***/ "dumb-passwords":
/*!*********************************!*\
  !*** external "dumb-passwords" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("dumb-passwords");

/***/ }),

/***/ "fast-deep-equal":
/*!**********************************!*\
  !*** external "fast-deep-equal" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("fast-deep-equal");

/***/ }),

/***/ "graphql":
/*!**************************!*\
  !*** external "graphql" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("graphql");

/***/ }),

/***/ "graphql-type-json":
/*!************************************!*\
  !*** external "graphql-type-json" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("graphql-type-json");

/***/ }),

/***/ "graphql-upload/public/GraphQLUpload.js":
/*!*********************************************************!*\
  !*** external "graphql-upload/public/GraphQLUpload.js" ***!
  \*********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("graphql-upload/public/GraphQLUpload.js");

/***/ }),

/***/ "intersection-observer":
/*!****************************************!*\
  !*** external "intersection-observer" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("intersection-observer");

/***/ }),

/***/ "is-hotkey":
/*!****************************!*\
  !*** external "is-hotkey" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("is-hotkey");

/***/ }),

/***/ "match-sorter":
/*!*******************************!*\
  !*** external "match-sorter" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("match-sorter");

/***/ }),

/***/ "mdast-util-definitions":
/*!*****************************************!*\
  !*** external "mdast-util-definitions" ***!
  \*****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("mdast-util-definitions");

/***/ }),

/***/ "mdast-util-from-markdown":
/*!*******************************************!*\
  !*** external "mdast-util-from-markdown" ***!
  \*******************************************/
/***/ ((module) => {

"use strict";
module.exports = require("mdast-util-from-markdown");

/***/ }),

/***/ "mdast-util-gfm-autolink-literal/from-markdown":
/*!****************************************************************!*\
  !*** external "mdast-util-gfm-autolink-literal/from-markdown" ***!
  \****************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("mdast-util-gfm-autolink-literal/from-markdown");

/***/ }),

/***/ "mdast-util-gfm-strikethrough/from-markdown":
/*!*************************************************************!*\
  !*** external "mdast-util-gfm-strikethrough/from-markdown" ***!
  \*************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("mdast-util-gfm-strikethrough/from-markdown");

/***/ }),

/***/ "micromark-extension-gfm-autolink-literal":
/*!***********************************************************!*\
  !*** external "micromark-extension-gfm-autolink-literal" ***!
  \***********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("micromark-extension-gfm-autolink-literal");

/***/ }),

/***/ "micromark-extension-gfm-strikethrough":
/*!********************************************************!*\
  !*** external "micromark-extension-gfm-strikethrough" ***!
  \********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("micromark-extension-gfm-strikethrough");

/***/ }),

/***/ "../../../server/denormalize-page-path":
/*!************************************************************!*\
  !*** external "next/dist/server/denormalize-page-path.js" ***!
  \************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/denormalize-page-path.js");

/***/ }),

/***/ "../i18n/normalize-locale-path":
/*!*********************************************************************!*\
  !*** external "next/dist/shared/lib/i18n/normalize-locale-path.js" ***!
  \*********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/i18n/normalize-locale-path.js");

/***/ }),

/***/ "../mitt":
/*!***********************************************!*\
  !*** external "next/dist/shared/lib/mitt.js" ***!
  \***********************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/mitt.js");

/***/ }),

/***/ "../shared/lib/router-context":
/*!*********************************************************!*\
  !*** external "next/dist/shared/lib/router-context.js" ***!
  \*********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router-context.js");

/***/ }),

/***/ "../shared/lib/router/utils/get-asset-path-from-route":
/*!*********************************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/get-asset-path-from-route.js" ***!
  \*********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/get-asset-path-from-route.js");

/***/ }),

/***/ "./utils/get-middleware-regex":
/*!****************************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/get-middleware-regex.js" ***!
  \****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/get-middleware-regex.js");

/***/ }),

/***/ "./utils/is-dynamic":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/is-dynamic.js" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-dynamic.js");

/***/ }),

/***/ "./utils/parse-relative-url":
/*!**************************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/parse-relative-url.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/parse-relative-url.js");

/***/ }),

/***/ "./utils/querystring":
/*!*******************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/querystring.js" ***!
  \*******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/querystring.js");

/***/ }),

/***/ "./utils/resolve-rewrites":
/*!************************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/resolve-rewrites.js" ***!
  \************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/resolve-rewrites.js");

/***/ }),

/***/ "./utils/route-matcher":
/*!*********************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/route-matcher.js" ***!
  \*********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/route-matcher.js");

/***/ }),

/***/ "./utils/route-regex":
/*!*******************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/route-regex.js" ***!
  \*******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/route-regex.js");

/***/ }),

/***/ "../shared/lib/utils":
/*!************************************************!*\
  !*** external "next/dist/shared/lib/utils.js" ***!
  \************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/utils.js");

/***/ }),

/***/ "next/router":
/*!******************************!*\
  !*** external "next/router" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/router");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "scroll-into-view-if-needed":
/*!*********************************************!*\
  !*** external "scroll-into-view-if-needed" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = require("scroll-into-view-if-needed");

/***/ }),

/***/ "slate":
/*!************************!*\
  !*** external "slate" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("slate");

/***/ }),

/***/ "slate-history":
/*!********************************!*\
  !*** external "slate-history" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("slate-history");

/***/ }),

/***/ "slate-react":
/*!******************************!*\
  !*** external "slate-react" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("slate-react");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("uuid");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("./pages/_app.js"));
module.exports = __webpack_exports__;

})();